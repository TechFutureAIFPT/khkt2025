var dA=Object.defineProperty;var l0=i=>{throw TypeError(i)};var hA=(i,e,t)=>e in i?dA(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var Le=(i,e,t)=>hA(i,typeof e!="symbol"?e+"":e,t),Pf=(i,e,t)=>e.has(i)||l0("Cannot "+t);var p=(i,e,t)=>(Pf(i,e,"read from private field"),t?t.call(i):e.get(i)),W=(i,e,t)=>e.has(i)?l0("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),M=(i,e,t,n)=>(Pf(i,e,"write to private field"),n?n.call(i,t):e.set(i,t),t),L=(i,e,t)=>(Pf(i,e,"access private method"),t);var St=(i,e,t,n)=>({set _(r){M(i,e,r,t)},get _(){return p(i,e,n)}});import{_ as qu,g as zh,a as $1,c as Ln,M as $h,r as Be,j as w,R as ih}from"./index-BvJESZuc.js";var Lc={};Lc.d=(i,e)=>{for(var t in e)Lc.o(e,t)&&!Lc.o(i,t)&&Object.defineProperty(i,t,{enumerable:!0,get:e[t]})};Lc.o=(i,e)=>Object.prototype.hasOwnProperty.call(i,e);var Me=globalThis.pdfjsLib={};Lc.d(Me,{AbortException:()=>To,AnnotationEditorLayer:()=>Rm,AnnotationEditorParamsType:()=>Pe,AnnotationEditorType:()=>Ge,AnnotationEditorUIManager:()=>mo,AnnotationLayer:()=>uw,AnnotationMode:()=>Tr,CMapCompressionType:()=>_g,ColorPicker:()=>ch,DOMSVGFactory:()=>ey,DrawLayer:()=>Mm,FeatureTest:()=>an,GlobalWorkerOptions:()=>cr,ImageKind:()=>sd,InvalidPDFException:()=>j1,MissingPDFException:()=>Do,OPS:()=>zn,Outliner:()=>hm,PDFDataRangeTransport:()=>W2,PDFDateString:()=>t2,PDFWorker:()=>Vo,PasswordResponses:()=>mA,PermissionFlag:()=>gA,PixelsPerInch:()=>$r,RenderingCancelledException:()=>ty,TextLayer:()=>Xa,UnexpectedResponseException:()=>Jh,Util:()=>Ue,VerbosityLevel:()=>Xh,XfaLayer:()=>H2,build:()=>GE,createValidAbsoluteUrl:()=>xA,fetchData:()=>nf,getDocument:()=>ME,getFilenameFromUrl:()=>IA,getPdfFilenameFromUrl:()=>RA,getXfaPageViewport:()=>FA,isDataScheme:()=>ny,isPdfFile:()=>iy,noContextMenu:()=>ln,normalizeUnicode:()=>wA,renderTextLayer:()=>wE,setLayerDimensions:()=>go,shadow:()=>ze,updateTextLayer:()=>CE,version:()=>VE});const Ht=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),X1=[1,0,0,1,0,0],xg=[.001,0,0,.001,0,0],fA=1e7,Lf=1.35,kn={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},Tr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},pA="pdfjs_internal_editor_",Ge={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Pe={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},gA={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Ot={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},sd={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},bt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},rc={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Xh={ERRORS:0,WARNINGS:1,INFOS:5},_g={NONE:0,BINARY:1},zn={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},mA={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let jh=Xh.WARNINGS;function yA(i){Number.isInteger(i)&&(jh=i)}function bA(){return jh}function Yh(i){jh>=Xh.INFOS&&console.log(`Info: ${i}`)}function Oe(i){jh>=Xh.WARNINGS&&console.log(`Warning: ${i}`)}function nt(i){throw new Error(i)}function Tt(i,e){i||nt(e)}function vA(i){switch(i==null?void 0:i.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function xA(i,e=null,t=null){if(!i)return null;try{if(t&&typeof i=="string"){if(t.addDefaultProtocol&&i.startsWith("www.")){const r=i.match(/\./g);(r==null?void 0:r.length)>=2&&(i=`http://${i}`)}if(t.tryConvertEncoding)try{i=EA(i)}catch{}}const n=e?new URL(i,e):new URL(i);if(vA(n))return n}catch{}return null}function ze(i,e,t,n=!1){return Object.defineProperty(i,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const Kr=(function(){function e(t,n){this.constructor===e&&nt("Cannot initialize BaseException."),this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e})();class Dg extends Kr{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Tg extends Kr{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class j1 extends Kr{constructor(e){super(e,"InvalidPDFException")}}class Do extends Kr{constructor(e){super(e,"MissingPDFException")}}class Jh extends Kr{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class _A extends Kr{constructor(e){super(e,"FormatError")}}class To extends Kr{constructor(e){super(e,"AbortException")}}function Y1(i){(typeof i!="object"||(i==null?void 0:i.length)===void 0)&&nt("Invalid argument for bytesToString");const e=i.length,t=8192;if(e<t)return String.fromCharCode.apply(null,i);const n=[];for(let r=0;r<e;r+=t){const s=Math.min(r+t,e),o=i.subarray(r,s);n.push(String.fromCharCode.apply(null,o))}return n.join("")}function Kh(i){typeof i!="string"&&nt("Invalid argument for stringToBytes");const e=i.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=i.charCodeAt(n)&255;return t}function DA(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function Zm(i){const e=Object.create(null);for(const[t,n]of i)e[t]=n;return e}function TA(){const i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function AA(){try{return new Function(""),!0}catch{return!1}}class an{static get isLittleEndian(){return ze(this,"isLittleEndian",TA())}static get isEvalSupported(){return ze(this,"isEvalSupported",AA())}static get isOffscreenCanvasSupported(){return ze(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?ze(this,"platform",{isMac:navigator.platform.includes("Mac")}):ze(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){var e,t;return ze(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const Bf=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0"));var ur,od,Ag;class Ue{static makeHexColor(e,t,n){return`#${Bf[e]}${Bf[t]}${Bf[n]}`}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const n=e[0]*t[0]+e[1]*t[2]+t[4],r=e[0]*t[1]+e[1]*t[3]+t[5];return[n,r]}static applyInverseTransform(e,t){const n=t[0]*t[3]-t[1]*t[2],r=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/n,s=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/n;return[r,s]}static getAxialAlignedBoundingBox(e,t){const n=this.applyTransform(e,t),r=this.applyTransform(e.slice(2,4),t),s=this.applyTransform([e[0],e[3]],t),o=this.applyTransform([e[2],e[1]],t);return[Math.min(n[0],r[0],s[0],o[0]),Math.min(n[1],r[1],s[1],o[1]),Math.max(n[0],r[0],s[0],o[0]),Math.max(n[1],r[1],s[1],o[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],n=e[0]*t[0]+e[1]*t[2],r=e[0]*t[1]+e[1]*t[3],s=e[2]*t[0]+e[3]*t[2],o=e[2]*t[1]+e[3]*t[3],a=(n+o)/2,c=Math.sqrt((n+o)**2-4*(n*o-s*r))/2,l=a+c||1,u=a-c||1;return[Math.sqrt(l),Math.sqrt(u)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>r)return null;const s=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return s>o?null:[n,s,r,o]}static bezierBoundingBox(e,t,n,r,s,o,a,c,l){return l?(l[0]=Math.min(l[0],e,a),l[1]=Math.min(l[1],t,c),l[2]=Math.max(l[2],e,a),l[3]=Math.max(l[3],t,c)):l=[Math.min(e,a),Math.min(t,c),Math.max(e,a),Math.max(t,c)],L(this,ur,Ag).call(this,e,n,s,a,t,r,o,c,3*(-e+3*(n-s)+a),6*(e-2*n+s),3*(n-e),l),L(this,ur,Ag).call(this,e,n,s,a,t,r,o,c,3*(-t+3*(r-o)+c),6*(t-2*r+o),3*(r-t),l),l}}ur=new WeakSet,od=function(e,t,n,r,s,o,a,c,l,u){if(l<=0||l>=1)return;const d=1-l,h=l*l,f=h*l,b=d*(d*(d*e+3*l*t)+3*h*n)+f*r,g=d*(d*(d*s+3*l*o)+3*h*a)+f*c;u[0]=Math.min(u[0],b),u[1]=Math.min(u[1],g),u[2]=Math.max(u[2],b),u[3]=Math.max(u[3],g)},Ag=function(e,t,n,r,s,o,a,c,l,u,d,h){if(Math.abs(l)<1e-12){Math.abs(u)>=1e-12&&L(this,ur,od).call(this,e,t,n,r,s,o,a,c,-d/u,h);return}const f=u**2-4*d*l;if(f<0)return;const b=Math.sqrt(f),g=2*l;L(this,ur,od).call(this,e,t,n,r,s,o,a,c,(-u+b)/g,h),L(this,ur,od).call(this,e,t,n,r,s,o,a,c,(-u-b)/g,h)},W(Ue,ur);function EA(i){return decodeURIComponent(escape(i))}let Of=null,u0=null;function wA(i){return Of||(Of=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,u0=new Map([["ﬅ","ſt"]])),i.replaceAll(Of,(e,t,n)=>t?t.normalize("NFKC"):u0.get(n))}function CA(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const i=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(i);else for(let e=0;e<32;e++)i[e]=Math.floor(Math.random()*255);return Y1(i)}const J1="pdfjs_internal_id_",Si={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};class Zh{constructor(){this.constructor===Zh&&nt("Cannot initialize BaseFilterFactory.")}addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,r,s){return"none"}destroy(e=!1){}}class Qh{constructor(){this.constructor===Qh&&nt("Cannot initialize BaseCanvasFactory.")}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d")}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){nt("Abstract method `_createCanvas` called.")}}class ef{constructor({baseUrl:e=null,isCompressed:t=!0}){this.constructor===ef&&nt("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":""),n=this.isCompressed?_g.BINARY:_g.NONE;return this._fetchData(t,n).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}_fetchData(e,t){nt("Abstract method `_fetchData` called.")}}class tf{constructor({baseUrl:e=null}){this.constructor===tf&&nt("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetchData(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}_fetchData(e){nt("Abstract method `_fetchData` called.")}}class Qm{constructor(){this.constructor===Qm&&nt("Cannot initialize BaseSVGFactory.")}create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){nt("Abstract method `_createSVG` called.")}}const Fi="http://www.w3.org/2000/svg",ms=class ms{};Le(ms,"CSS",96),Le(ms,"PDF",72),Le(ms,"PDF_TO_CSS_UNITS",ms.CSS/ms.PDF);let $r=ms;var bs,ci,Li,rn,Eh,vs,Ce,Wt,ko,Mo,ad,K1,Eg,Po,xc,_c,wg,Dc;class SA extends Zh{constructor({docId:t,ownerDocument:n=globalThis.document}={}){super();W(this,Ce);W(this,bs);W(this,ci);W(this,Li);W(this,rn);W(this,Eh);W(this,vs,0);M(this,Li,t),M(this,rn,n)}addFilter(t){if(!t)return"none";let n=p(this,Ce,Wt).get(t);if(n)return n;const[r,s,o]=L(this,Ce,ad).call(this,t),a=t.length===1?r:`${r}${s}${o}`;if(n=p(this,Ce,Wt).get(a),n)return p(this,Ce,Wt).set(t,n),n;const c=`g_${p(this,Li)}_transfer_map_${St(this,vs)._++}`,l=`url(#${c})`;p(this,Ce,Wt).set(t,l),p(this,Ce,Wt).set(a,l);const u=L(this,Ce,Po).call(this,c);return L(this,Ce,_c).call(this,r,s,o,u),l}addHCMFilter(t,n){var b;const r=`${t}-${n}`,s="base";let o=p(this,Ce,ko).get(s);if((o==null?void 0:o.key)===r||(o?((b=o.filter)==null||b.remove(),o.key=r,o.url="none",o.filter=null):(o={key:r,url:"none",filter:null},p(this,Ce,ko).set(s,o)),!t||!n))return o.url;const a=L(this,Ce,Dc).call(this,t);t=Ue.makeHexColor(...a);const c=L(this,Ce,Dc).call(this,n);if(n=Ue.makeHexColor(...c),p(this,Ce,Mo).style.color="",t==="#000000"&&n==="#ffffff"||t===n)return o.url;const l=new Array(256);for(let g=0;g<=255;g++){const y=g/255;l[g]=y<=.03928?y/12.92:((y+.055)/1.055)**2.4}const u=l.join(","),d=`g_${p(this,Li)}_hcm_filter`,h=o.filter=L(this,Ce,Po).call(this,d);L(this,Ce,_c).call(this,u,u,u,h),L(this,Ce,Eg).call(this,h);const f=(g,y)=>{const v=a[g]/255,x=c[g]/255,D=new Array(y+1);for(let A=0;A<=y;A++)D[A]=v+A/y*(x-v);return D.join(",")};return L(this,Ce,_c).call(this,f(0,5),f(1,5),f(2,5),h),o.url=`url(#${d})`,o.url}addAlphaFilter(t){let n=p(this,Ce,Wt).get(t);if(n)return n;const[r]=L(this,Ce,ad).call(this,[t]),s=`alpha_${r}`;if(n=p(this,Ce,Wt).get(s),n)return p(this,Ce,Wt).set(t,n),n;const o=`g_${p(this,Li)}_alpha_map_${St(this,vs)._++}`,a=`url(#${o})`;p(this,Ce,Wt).set(t,a),p(this,Ce,Wt).set(s,a);const c=L(this,Ce,Po).call(this,o);return L(this,Ce,wg).call(this,r,c),a}addLuminosityFilter(t){let n=p(this,Ce,Wt).get(t||"luminosity");if(n)return n;let r,s;if(t?([r]=L(this,Ce,ad).call(this,[t]),s=`luminosity_${r}`):s="luminosity",n=p(this,Ce,Wt).get(s),n)return p(this,Ce,Wt).set(t,n),n;const o=`g_${p(this,Li)}_luminosity_map_${St(this,vs)._++}`,a=`url(#${o})`;p(this,Ce,Wt).set(t,a),p(this,Ce,Wt).set(s,a);const c=L(this,Ce,Po).call(this,o);return L(this,Ce,K1).call(this,c),t&&L(this,Ce,wg).call(this,r,c),a}addHighlightHCMFilter(t,n,r,s,o){var x;const a=`${n}-${r}-${s}-${o}`;let c=p(this,Ce,ko).get(t);if((c==null?void 0:c.key)===a||(c?((x=c.filter)==null||x.remove(),c.key=a,c.url="none",c.filter=null):(c={key:a,url:"none",filter:null},p(this,Ce,ko).set(t,c)),!n||!r))return c.url;const[l,u]=[n,r].map(L(this,Ce,Dc).bind(this));let d=Math.round(.2126*l[0]+.7152*l[1]+.0722*l[2]),h=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[f,b]=[s,o].map(L(this,Ce,Dc).bind(this));h<d&&([d,h,f,b]=[h,d,b,f]),p(this,Ce,Mo).style.color="";const g=(D,A,T)=>{const E=new Array(256),I=(h-d)/T,N=D/255,R=(A-D)/(255*T);let P=0;for(let j=0;j<=T;j++){const U=Math.round(d+j*I),B=N+j*R;for(let S=P;S<=U;S++)E[S]=B;P=U+1}for(let j=P;j<256;j++)E[j]=E[P-1];return E.join(",")},y=`g_${p(this,Li)}_hcm_${t}_filter`,v=c.filter=L(this,Ce,Po).call(this,y);return L(this,Ce,Eg).call(this,v),L(this,Ce,_c).call(this,g(f[0],b[0],5),g(f[1],b[1],5),g(f[2],b[2],5),v),c.url=`url(#${y})`,c.url}destroy(t=!1){t&&p(this,Ce,ko).size!==0||(p(this,ci)&&(p(this,ci).parentNode.parentNode.remove(),M(this,ci,null)),p(this,bs)&&(p(this,bs).clear(),M(this,bs,null)),M(this,vs,0))}}bs=new WeakMap,ci=new WeakMap,Li=new WeakMap,rn=new WeakMap,Eh=new WeakMap,vs=new WeakMap,Ce=new WeakSet,Wt=function(){return p(this,bs)||M(this,bs,new Map)},ko=function(){return p(this,Eh)||M(this,Eh,new Map)},Mo=function(){if(!p(this,ci)){const t=p(this,rn).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const r=p(this,rn).createElementNS(Fi,"svg");r.setAttribute("width",0),r.setAttribute("height",0),M(this,ci,p(this,rn).createElementNS(Fi,"defs")),t.append(r),r.append(p(this,ci)),p(this,rn).body.append(t)}return p(this,ci)},ad=function(t){if(t.length===1){const l=t[0],u=new Array(256);for(let h=0;h<256;h++)u[h]=l[h]/255;const d=u.join(",");return[d,d,d]}const[n,r,s]=t,o=new Array(256),a=new Array(256),c=new Array(256);for(let l=0;l<256;l++)o[l]=n[l]/255,a[l]=r[l]/255,c[l]=s[l]/255;return[o.join(","),a.join(","),c.join(",")]},K1=function(t){const n=p(this,rn).createElementNS(Fi,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)},Eg=function(t){const n=p(this,rn).createElementNS(Fi,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)},Po=function(t){const n=p(this,rn).createElementNS(Fi,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),p(this,Ce,Mo).append(n),n},xc=function(t,n,r){const s=p(this,rn).createElementNS(Fi,n);s.setAttribute("type","discrete"),s.setAttribute("tableValues",r),t.append(s)},_c=function(t,n,r,s){const o=p(this,rn).createElementNS(Fi,"feComponentTransfer");s.append(o),L(this,Ce,xc).call(this,o,"feFuncR",t),L(this,Ce,xc).call(this,o,"feFuncG",n),L(this,Ce,xc).call(this,o,"feFuncB",r)},wg=function(t,n){const r=p(this,rn).createElementNS(Fi,"feComponentTransfer");n.append(r),L(this,Ce,xc).call(this,r,"feFuncA",t)},Dc=function(t){return p(this,Ce,Mo).style.color=t,ry(getComputedStyle(p(this,Ce,Mo)).getPropertyValue("color"))};class UA extends Qh{constructor({ownerDocument:e=globalThis.document}={}){super(),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}async function nf(i,e="text"){if(Tc(i,document.baseURI)){const t=await fetch(i);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const r=new XMLHttpRequest;r.open("GET",i,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}n(new Error(r.statusText))}},r.send(null)})}class Z1 extends ef{_fetchData(e,t){return nf(e,this.isCompressed?"arraybuffer":"text").then(n=>({cMapData:n instanceof ArrayBuffer?new Uint8Array(n):Kh(n),compressionType:t}))}}class Q1 extends tf{_fetchData(e){return nf(e,"arraybuffer").then(t=>new Uint8Array(t))}}class ey extends Qm{_createSVG(e){return document.createElementNS(Fi,e)}}class Fu{constructor({viewBox:e,scale:t,rotation:n,offsetX:r=0,offsetY:s=0,dontFlip:o=!1}){this.viewBox=e,this.scale=t,this.rotation=n,this.offsetX=r,this.offsetY=s;const a=(e[2]+e[0])/2,c=(e[3]+e[1])/2;let l,u,d,h;switch(n%=360,n<0&&(n+=360),n){case 180:l=-1,u=0,d=0,h=1;break;case 90:l=0,u=1,d=1,h=0;break;case 270:l=0,u=-1,d=-1,h=0;break;case 0:l=1,u=0,d=0,h=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(d=-d,h=-h);let f,b,g,y;l===0?(f=Math.abs(c-e[1])*t+r,b=Math.abs(a-e[0])*t+s,g=(e[3]-e[1])*t,y=(e[2]-e[0])*t):(f=Math.abs(a-e[0])*t+r,b=Math.abs(c-e[1])*t+s,g=(e[2]-e[0])*t,y=(e[3]-e[1])*t),this.transform=[l*t,u*t,d*t,h*t,f-l*t*a-d*t*c,b-u*t*a-h*t*c],this.width=g,this.height=y}get rawDims(){const{viewBox:e}=this;return ze(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:s=!1}={}){return new Fu({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:s})}convertToViewportPoint(e,t){return Ue.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=Ue.applyTransform([e[0],e[1]],this.transform),n=Ue.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){return Ue.applyInverseTransform([e,t],this.transform)}}class ty extends Kr{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function ny(i){const e=i.length;let t=0;for(;t<e&&i[t].trim()==="";)t++;return i.substring(t,t+5).toLowerCase()==="data:"}function iy(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function IA(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function RA(i,e="document.pdf"){if(typeof i!="string")return e;if(ny(i))return Oe('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=t.exec(i);let s=n.exec(r[1])||n.exec(r[2])||n.exec(r[3]);if(s&&(s=s[0],s.includes("%")))try{s=n.exec(decodeURIComponent(s))[0]}catch{}return s||e}class d0{constructor(){Le(this,"started",Object.create(null));Le(this,"times",[])}time(e){e in this.started&&Oe(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Oe(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:r,end:s}of this.times)e.push(`${n.padEnd(t)} ${s-r}ms
`);return e.join("")}}function Tc(i,e){try{const{protocol:t}=e?new URL(i,e):new URL(i);return t==="http:"||t==="https:"}catch{return!1}}function ln(i){i.preventDefault()}function e2(i){console.log("Deprecated API usage: "+i)}let h0;class t2{static toDateObject(e){if(!e||typeof e!="string")return null;h0||(h0=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=h0.exec(e);if(!t)return null;const n=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let s=parseInt(t[3],10);s=s>=1&&s<=31?s:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let c=parseInt(t[6],10);c=c>=0&&c<=59?c:0;const l=t[7]||"Z";let u=parseInt(t[8],10);u=u>=0&&u<=23?u:0;let d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,l==="-"?(o+=u,a+=d):l==="+"&&(o-=u,a-=d),new Date(Date.UTC(n,r,s,o,a,c))}}function FA(i,{scale:e=1,rotation:t=0}){const{width:n,height:r}=i.attributes.style,s=[0,0,parseInt(n),parseInt(r)];return new Fu({viewBox:s,scale:e,rotation:t})}function ry(i){if(i.startsWith("#")){const e=parseInt(i.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(e=>parseInt(e)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Oe(`Not a valid color format: "${i}"`),[0,0,0])}function NA(i){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of i.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;i.set(t,ry(n))}e.remove()}function dt(i){const{a:e,b:t,c:n,d:r,e:s,f:o}=i.getTransform();return[e,t,n,r,s,o]}function Ui(i){const{a:e,b:t,c:n,d:r,e:s,f:o}=i.getTransform().invertSelf();return[e,t,n,r,s,o]}function go(i,e,t=!1,n=!0){if(e instanceof Fu){const{pageWidth:r,pageHeight:s}=e.rawDims,{style:o}=i,a=an.isCSSRoundSupported,c=`var(--scale-factor) * ${r}px`,l=`var(--scale-factor) * ${s}px`,u=a?`round(${c}, 1px)`:`calc(${c})`,d=a?`round(${l}, 1px)`:`calc(${l})`;!t||e.rotation%180===0?(o.width=u,o.height=d):(o.width=d,o.height=u)}n&&i.setAttribute("data-main-rotation",e.rotation)}var xs,_s,li,Ds,wh,n2,Zt,i2,r2,cd,s2,Sg;const Ch=class Ch{constructor(e){W(this,Zt);W(this,xs,null);W(this,_s,null);W(this,li);W(this,Ds,null);M(this,li,e)}render(){const e=M(this,xs,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",ln),e.addEventListener("pointerdown",L(Ch,wh,n2));const t=M(this,Ds,document.createElement("div"));t.className="buttons",e.append(t);const n=p(this,li).toolbarPosition;if(n){const{style:r}=e,s=p(this,li)._uiManager.direction==="ltr"?1-n[0]:n[0];r.insetInlineEnd=`${100*s}%`,r.top=`calc(${100*n[1]}% + var(--editor-toolbar-vert-offset))`}return L(this,Zt,s2).call(this),e}hide(){var e;p(this,xs).classList.add("hidden"),(e=p(this,_s))==null||e.hideDropdown()}show(){p(this,xs).classList.remove("hidden")}addAltTextButton(e){L(this,Zt,cd).call(this,e),p(this,Ds).prepend(e,p(this,Zt,Sg))}addColorPicker(e){M(this,_s,e);const t=e.renderButton();L(this,Zt,cd).call(this,t),p(this,Ds).prepend(t,p(this,Zt,Sg))}remove(){var e;p(this,xs).remove(),(e=p(this,_s))==null||e.destroy(),M(this,_s,null)}};xs=new WeakMap,_s=new WeakMap,li=new WeakMap,Ds=new WeakMap,wh=new WeakSet,n2=function(e){e.stopPropagation()},Zt=new WeakSet,i2=function(e){p(this,li)._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()},r2=function(e){p(this,li)._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()},cd=function(e){e.addEventListener("focusin",L(this,Zt,i2).bind(this),{capture:!0}),e.addEventListener("focusout",L(this,Zt,r2).bind(this),{capture:!0}),e.addEventListener("contextmenu",ln)},s2=function(){const e=document.createElement("button");e.className="delete",e.tabIndex=0,e.setAttribute("data-l10n-id",`pdfjs-editor-remove-${p(this,li).editorType}-button`),L(this,Zt,cd).call(this,e),e.addEventListener("click",t=>{p(this,li)._uiManager.delete()}),p(this,Ds).append(e)},Sg=function(){const e=document.createElement("div");return e.className="divider",e},W(Ch,wh);let Cg=Ch;var Yc,Ts,Jc,Yr,o2,a2,c2;class kA{constructor(e){W(this,Yr);W(this,Yc,null);W(this,Ts,null);W(this,Jc);M(this,Jc,e)}show(e,t,n){const[r,s]=L(this,Yr,a2).call(this,t,n),{style:o}=p(this,Ts)||M(this,Ts,L(this,Yr,o2).call(this));e.append(p(this,Ts)),o.insetInlineEnd=`${100*r}%`,o.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){p(this,Ts).remove()}}Yc=new WeakMap,Ts=new WeakMap,Jc=new WeakMap,Yr=new WeakSet,o2=function(){const e=M(this,Ts,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",ln);const t=M(this,Yc,document.createElement("div"));return t.className="buttons",e.append(t),L(this,Yr,c2).call(this),e},a2=function(e,t){let n=0,r=0;for(const s of e){const o=s.y+s.height;if(o<n)continue;const a=s.x+(t?s.width:0);if(o>n){r=a,n=o;continue}t?a>r&&(r=a):a<r&&(r=a)}return[t?1-r:r,n]},c2=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label"),e.addEventListener("contextmenu",ln),e.addEventListener("click",()=>{p(this,Jc).highlightSelection("floating_button")}),p(this,Yc).append(e)};function rh(i,e,t){for(const n of t)e.addEventListener(n,i[n].bind(i))}function MA(i){return Math.round(Math.min(255,Math.max(1,255*i))).toString(16).padStart(2,"0")}var Sh;class PA{constructor(){W(this,Sh,0)}get id(){return`${pA}${St(this,Sh)._++}`}}Sh=new WeakMap;var Kc,Uh,Cn,Zc,Ig;const r0=class r0{constructor(){W(this,Zc);W(this,Kc,CA());W(this,Uh,0);W(this,Cn,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d"),r=new Image;r.src=e;const s=r.decode().then(()=>(n.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return ze(this,"_isSVGFittingCanvas",s)}async getFromFile(e){const{lastModified:t,name:n,size:r,type:s}=e;return L(this,Zc,Ig).call(this,`${t}_${n}_${r}_${s}`,e)}async getFromUrl(e){return L(this,Zc,Ig).call(this,e,e)}async getFromId(e){p(this,Cn)||M(this,Cn,new Map);const t=p(this,Cn).get(e);return t?t.bitmap?(t.refCounter+=1,t):t.file?this.getFromFile(t.file):this.getFromUrl(t.url):null}getSvgUrl(e){const t=p(this,Cn).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){p(this,Cn)||M(this,Cn,new Map);const t=p(this,Cn).get(e);t&&(t.refCounter-=1,t.refCounter===0&&(t.bitmap=null))}isValidId(e){return e.startsWith(`image_${p(this,Kc)}_`)}};Kc=new WeakMap,Uh=new WeakMap,Cn=new WeakMap,Zc=new WeakSet,Ig=async function(e,t){p(this,Cn)||M(this,Cn,new Map);let n=p(this,Cn).get(e);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${p(this,Kc)}_${St(this,Uh)._++}`,refCounter:0,isSvg:!1});let r;if(typeof t=="string"?(n.url=t,r=await nf(t,"blob")):r=n.file=t,r.type==="image/svg+xml"){const s=r0._isSVGFittingCanvas,o=new FileReader,a=new Image,c=new Promise((l,u)=>{a.onload=()=>{n.bitmap=a,n.isSvg=!0,l()},o.onload=async()=>{const d=n.svgUrl=o.result;a.src=await s?`${d}#svgView(preserveAspectRatio(none))`:d},a.onerror=o.onerror=u});o.readAsDataURL(r),await c}else n.bitmap=await createImageBitmap(r);n.refCounter=1}catch(r){console.error(r),n=null}return p(this,Cn).set(e,n),n&&p(this,Cn).set(n.id,n),n};let Ug=r0;var Et,Ar,Qc,wt;class LA{constructor(e=128){W(this,Et,[]);W(this,Ar,!1);W(this,Qc);W(this,wt,-1);M(this,Qc,e)}add({cmd:e,undo:t,post:n,mustExec:r,type:s=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(r&&e(),p(this,Ar))return;const c={cmd:e,undo:t,post:n,type:s};if(p(this,wt)===-1){p(this,Et).length>0&&(p(this,Et).length=0),M(this,wt,0),p(this,Et).push(c);return}if(o&&p(this,Et)[p(this,wt)].type===s){a&&(c.undo=p(this,Et)[p(this,wt)].undo),p(this,Et)[p(this,wt)]=c;return}const l=p(this,wt)+1;l===p(this,Qc)?p(this,Et).splice(0,1):(M(this,wt,l),l<p(this,Et).length&&p(this,Et).splice(l)),p(this,Et).push(c)}undo(){if(p(this,wt)===-1)return;M(this,Ar,!0);const{undo:e,post:t}=p(this,Et)[p(this,wt)];e(),t==null||t(),M(this,Ar,!1),M(this,wt,p(this,wt)-1)}redo(){if(p(this,wt)<p(this,Et).length-1){M(this,wt,p(this,wt)+1),M(this,Ar,!0);const{cmd:e,post:t}=p(this,Et)[p(this,wt)];e(),t==null||t(),M(this,Ar,!1)}}hasSomethingToUndo(){return p(this,wt)!==-1}hasSomethingToRedo(){return p(this,wt)<p(this,Et).length-1}destroy(){M(this,Et,null)}}Et=new WeakMap,Ar=new WeakMap,Qc=new WeakMap,wt=new WeakMap;var Ih,l2;class Nu{constructor(e){W(this,Ih);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=an.platform;for(const[n,r,s={}]of e)for(const o of n){const a=o.startsWith("mac+");t&&a?(this.callbacks.set(o.slice(4),{callback:r,options:s}),this.allKeys.add(o.split("+").at(-1))):!t&&!a&&(this.callbacks.set(o,{callback:r,options:s}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(L(this,Ih,l2).call(this,t));if(!n)return;const{callback:r,options:{bubbles:s=!1,args:o=[],checker:a=null}}=n;a&&!a(e,t)||(r.bind(e,...o,t)(),s||(t.stopPropagation(),t.preventDefault()))}}Ih=new WeakSet,l2=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const Rh=class Rh{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return NA(e),ze(this,"_colors",e)}convert(e){const t=ry(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,r]of this._colors)if(r.every((s,o)=>s===t[o]))return Rh._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?Ue.makeHexColor(...t):e}};Le(Rh,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Rg=Rh;var mn,vt,Rt,Yo,Bi,Jo,$n,Ko,As,ui,Oi,Es,el,tl,di,Zo,Er,hi,Fh,wr,nl,ws,il,Qo,Ft,Qe,Wi,Cs,rl,sl,ol,al,cl,ll,ul,dl,hl,fl,pl,gl,ml,yl,Cr,fi,qi,bl,Te,ld,u2,d2,ud,h2,f2,p2,Fg,Ng,kg,Mg,Pg,$t,xr,g2,m2,Lg,y2,Ac,Bg;const qo=class qo{constructor(e,t,n,r,s,o,a,c,l){W(this,Te);W(this,mn,null);W(this,vt,new Map);W(this,Rt,new Map);W(this,Yo,null);W(this,Bi,null);W(this,Jo,null);W(this,$n,new LA);W(this,Ko,0);W(this,As,new Set);W(this,ui,null);W(this,Oi,null);W(this,Es,new Set);W(this,el,!1);W(this,tl,null);W(this,di,null);W(this,Zo,null);W(this,Er,!1);W(this,hi,null);W(this,Fh,new PA);W(this,wr,!1);W(this,nl,!1);W(this,ws,null);W(this,il,null);W(this,Qo,null);W(this,Ft,Ge.NONE);W(this,Qe,new Set);W(this,Wi,null);W(this,Cs,null);W(this,rl,null);W(this,sl,this.blur.bind(this));W(this,ol,this.focus.bind(this));W(this,al,this.copy.bind(this));W(this,cl,this.cut.bind(this));W(this,ll,this.paste.bind(this));W(this,ul,this.keydown.bind(this));W(this,dl,this.keyup.bind(this));W(this,hl,this.onEditingAction.bind(this));W(this,fl,this.onPageChanging.bind(this));W(this,pl,this.onScaleChanging.bind(this));W(this,gl,L(this,Te,d2).bind(this));W(this,ml,this.onRotationChanging.bind(this));W(this,yl,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});W(this,Cr,[0,0]);W(this,fi,null);W(this,qi,null);W(this,bl,null);M(this,qi,e),M(this,bl,t),M(this,Yo,n),this._eventBus=r,this._eventBus._on("editingaction",p(this,hl)),this._eventBus._on("pagechanging",p(this,fl)),this._eventBus._on("scalechanging",p(this,pl)),this._eventBus._on("rotationchanging",p(this,ml)),L(this,Te,h2).call(this),L(this,Te,Ng).call(this),M(this,Bi,s.annotationStorage),M(this,tl,s.filterFactory),M(this,Cs,o),M(this,Zo,a||null),M(this,el,c),M(this,Qo,l||null),this.viewParameters={realScale:$r.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const e=qo.prototype,t=o=>p(o,qi).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),n=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:c}=a;return c!=="text"&&c!=="number"}return!0},r=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return ze(this,"_keyboardManager",new Nu([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&p(o,qi).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&p(o,qi).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}]]))}destroy(){var e,t;L(this,Te,kg).call(this),L(this,Te,Fg).call(this),this._eventBus._off("editingaction",p(this,hl)),this._eventBus._off("pagechanging",p(this,fl)),this._eventBus._off("scalechanging",p(this,pl)),this._eventBus._off("rotationchanging",p(this,ml));for(const n of p(this,Rt).values())n.destroy();p(this,Rt).clear(),p(this,vt).clear(),p(this,Es).clear(),M(this,mn,null),p(this,Qe).clear(),p(this,$n).destroy(),(e=p(this,Yo))==null||e.destroy(),(t=p(this,hi))==null||t.hide(),M(this,hi,null),p(this,di)&&(clearTimeout(p(this,di)),M(this,di,null)),p(this,fi)&&(clearTimeout(p(this,fi)),M(this,fi,null)),L(this,Te,f2).call(this)}async mlGuess(e){var t;return((t=p(this,Qo))==null?void 0:t.guess(e))||null}get hasMLManager(){return!!p(this,Qo)}get hcmFilter(){return ze(this,"hcmFilter",p(this,Cs)?p(this,tl).addHCMFilter(p(this,Cs).foreground,p(this,Cs).background):"none")}get direction(){return ze(this,"direction",getComputedStyle(p(this,qi)).direction)}get highlightColors(){return ze(this,"highlightColors",p(this,Zo)?new Map(p(this,Zo).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return ze(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){M(this,il,e)}editAltText(e){var t;(t=p(this,Yo))==null||t.editAltText(this,e)}onPageChanging({pageNumber:e}){M(this,Ko,e-1)}focusMainContainer(){p(this,qi).focus()}findParent(e,t){for(const n of p(this,Rt).values()){const{x:r,y:s,width:o,height:a}=n.div.getBoundingClientRect();if(e>=r&&e<=r+o&&t>=s&&t<=s+a)return n}return null}disableUserSelect(e=!1){p(this,bl).classList.toggle("noUserSelect",e)}addShouldRescale(e){p(this,Es).add(e)}removeShouldRescale(e){p(this,Es).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*$r.PDF_TO_CSS_UNITS;for(const t of p(this,Es))t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:n,anchorOffset:r,focusNode:s,focusOffset:o}=t,a=t.toString(),l=L(this,Te,ld).call(this,t).closest(".textLayer"),u=this.getSelectionBoxes(l);if(u){t.empty(),p(this,Ft)===Ge.NONE&&(this._eventBus.dispatch("showannotationeditorui",{source:this,mode:Ge.HIGHLIGHT}),this.showAllEditors("highlight",!0,!0));for(const d of p(this,Rt).values())if(d.hasTextLayer(l)){d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:u,anchorNode:n,anchorOffset:r,focusNode:s,focusOffset:o,text:a});break}}}addToAnnotationStorage(e){!e.isEmpty()&&p(this,Bi)&&!p(this,Bi).has(e.id)&&p(this,Bi).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,p(this,Er)&&(M(this,Er,!1),L(this,Te,ud).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of p(this,Qe))if(t.div.contains(e)){M(this,ws,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!p(this,ws))return;const[e,t]=p(this,ws);M(this,ws,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0}),t.focus()}addEditListeners(){L(this,Te,Ng).call(this),L(this,Te,Mg).call(this)}removeEditListeners(){L(this,Te,kg).call(this),L(this,Te,Pg).call(this)}copy(e){var n;if(e.preventDefault(),(n=p(this,mn))==null||n.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of p(this,Qe)){const s=r.serialize(!0);s&&t.push(s)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}paste(e){e.preventDefault();const{clipboardData:t}=e;for(const s of t.items)for(const o of p(this,Oi))if(o.isHandlingMimeForPasting(s.type)){o.paste(s,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(s){Oe(`paste: "${s.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const r=this.currentLayer;try{const s=[];for(const c of n){const l=r.deserialize(c);if(!l)return;s.push(l)}const o=()=>{for(const c of s)L(this,Te,Lg).call(this,c);L(this,Te,Bg).call(this,s)},a=()=>{for(const c of s)c.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(s){Oe(`paste: "${s.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),p(this,Ft)!==Ge.NONE&&!this.isEditorHandlingKeyboard&&qo._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,p(this,Er)&&(M(this,Er,!1),L(this,Te,ud).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(L(this,Te,p2).call(this),L(this,Te,Mg).call(this),L(this,Te,$t).call(this,{isEditing:p(this,Ft)!==Ge.NONE,isEmpty:L(this,Te,Ac).call(this),hasSomethingToUndo:p(this,$n).hasSomethingToUndo(),hasSomethingToRedo:p(this,$n).hasSomethingToRedo(),hasSelectedEditor:!1})):(L(this,Te,Fg).call(this),L(this,Te,Pg).call(this),L(this,Te,$t).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!p(this,Oi)){M(this,Oi,e);for(const t of p(this,Oi))L(this,Te,xr).call(this,t.defaultPropertiesToUpdate)}}getId(){return p(this,Fh).id}get currentLayer(){return p(this,Rt).get(p(this,Ko))}getLayer(e){return p(this,Rt).get(e)}get currentPageIndex(){return p(this,Ko)}addLayer(e){p(this,Rt).set(e.pageIndex,e),p(this,wr)?e.enable():e.disable()}removeLayer(e){p(this,Rt).delete(e.pageIndex)}updateMode(e,t=null,n=!1){if(p(this,Ft)!==e){if(M(this,Ft,e),e===Ge.NONE){this.setEditingState(!1),L(this,Te,m2).call(this);return}this.setEditingState(!0),L(this,Te,g2).call(this),this.unselectAll();for(const r of p(this,Rt).values())r.updateMode(e);if(!t&&n){this.addNewEditorFromKeyboard();return}if(t){for(const r of p(this,vt).values())if(r.annotationElementId===t){this.setSelected(r),r.enterInEditMode();break}}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==p(this,Ft)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var n;if(p(this,Oi)){switch(e){case Pe.CREATE:this.currentLayer.addNewEditor();return;case Pe.HIGHLIGHT_DEFAULT_COLOR:(n=p(this,il))==null||n.updateColor(t);break;case Pe.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(p(this,rl)||M(this,rl,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const r of p(this,Qe))r.updateParams(e,t);for(const r of p(this,Oi))r.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){var s;for(const o of p(this,vt).values())o.editorType===e&&o.show(t);(((s=p(this,rl))==null?void 0:s.get(Pe.HIGHLIGHT_SHOW_ALL))??!0)!==t&&L(this,Te,xr).call(this,[[Pe.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(p(this,nl)!==e){M(this,nl,e);for(const t of p(this,Rt).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const n of p(this,vt).values())n.pageIndex===e&&t.push(n);return t}getEditor(e){return p(this,vt).get(e)}addEditor(e){p(this,vt).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(p(this,di)&&clearTimeout(p(this,di)),M(this,di,setTimeout(()=>{this.focusMainContainer(),M(this,di,null)},0))),p(this,vt).delete(e.id),this.unselect(e),(!e.annotationElementId||!p(this,As).has(e.annotationElementId))&&((t=p(this,Bi))==null||t.remove(e.id))}addDeletedAnnotationElement(e){p(this,As).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return p(this,As).has(e)}removeDeletedAnnotationElement(e){p(this,As).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){p(this,mn)!==e&&(M(this,mn,e),e&&L(this,Te,xr).call(this,e.propertiesToUpdate))}updateUI(e){p(this,Te,y2)===e&&L(this,Te,xr).call(this,e.propertiesToUpdate)}toggleSelected(e){if(p(this,Qe).has(e)){p(this,Qe).delete(e),e.unselect(),L(this,Te,$t).call(this,{hasSelectedEditor:this.hasSelection});return}p(this,Qe).add(e),e.select(),L(this,Te,xr).call(this,e.propertiesToUpdate),L(this,Te,$t).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const t of p(this,Qe))t!==e&&t.unselect();p(this,Qe).clear(),p(this,Qe).add(e),e.select(),L(this,Te,xr).call(this,e.propertiesToUpdate),L(this,Te,$t).call(this,{hasSelectedEditor:!0})}isSelected(e){return p(this,Qe).has(e)}get firstSelectedEditor(){return p(this,Qe).values().next().value}unselect(e){e.unselect(),p(this,Qe).delete(e),L(this,Te,$t).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return p(this,Qe).size!==0}get isEnterHandled(){return p(this,Qe).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){p(this,$n).undo(),L(this,Te,$t).call(this,{hasSomethingToUndo:p(this,$n).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:L(this,Te,Ac).call(this)})}redo(){p(this,$n).redo(),L(this,Te,$t).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:p(this,$n).hasSomethingToRedo(),isEmpty:L(this,Te,Ac).call(this)})}addCommands(e){p(this,$n).add(e),L(this,Te,$t).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:L(this,Te,Ac).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...p(this,Qe)],t=()=>{for(const r of e)r.remove()},n=()=>{for(const r of e)L(this,Te,Lg).call(this,r)};this.addCommands({cmd:t,undo:n,mustExec:!0})}commitOrRemove(){var e;(e=p(this,mn))==null||e.commitOrRemove()}hasSomethingToControl(){return p(this,mn)||this.hasSelection}selectAll(){for(const e of p(this,Qe))e.commit();L(this,Te,Bg).call(this,p(this,vt).values())}unselectAll(){if(!(p(this,mn)&&(p(this,mn).commitOrRemove(),p(this,Ft)!==Ge.NONE))&&this.hasSelection){for(const e of p(this,Qe))e.unselect();p(this,Qe).clear(),L(this,Te,$t).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;p(this,Cr)[0]+=e,p(this,Cr)[1]+=t;const[r,s]=p(this,Cr),o=[...p(this,Qe)],a=1e3;p(this,fi)&&clearTimeout(p(this,fi)),M(this,fi,setTimeout(()=>{M(this,fi,null),p(this,Cr)[0]=p(this,Cr)[1]=0,this.addCommands({cmd:()=>{for(const c of o)p(this,vt).has(c.id)&&c.translateInPage(r,s)},undo:()=>{for(const c of o)p(this,vt).has(c.id)&&c.translateInPage(-r,-s)},mustExec:!1})},a));for(const c of o)c.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),M(this,ui,new Map);for(const e of p(this,Qe))p(this,ui).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!p(this,ui))return!1;this.disableUserSelect(!1);const e=p(this,ui);M(this,ui,null);let t=!1;for(const[{x:r,y:s,pageIndex:o},a]of e)a.newX=r,a.newY=s,a.newPageIndex=o,t||(t=r!==a.savedX||s!==a.savedY||o!==a.savedPageIndex);if(!t)return!1;const n=(r,s,o,a)=>{if(p(this,vt).has(r.id)){const c=p(this,Rt).get(a);c?r._setParentAndPosition(c,s,o):(r.pageIndex=a,r.x=s,r.y=o)}};return this.addCommands({cmd:()=>{for(const[r,{newX:s,newY:o,newPageIndex:a}]of e)n(r,s,o,a)},undo:()=>{for(const[r,{savedX:s,savedY:o,savedPageIndex:a}]of e)n(r,s,o,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(p(this,ui))for(const n of p(this,ui).keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||p(this,Qe).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return p(this,mn)===e}getActive(){return p(this,mn)}getMode(){return p(this,Ft)}get imageManager(){return ze(this,"imageManager",new Ug)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let l=0,u=t.rangeCount;l<u;l++)if(!e.contains(t.getRangeAt(l).commonAncestorContainer))return null;const{x:n,y:r,width:s,height:o}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(l,u,d,h)=>({x:(u-r)/o,y:1-(l+d-n)/s,width:h/o,height:d/s});break;case"180":a=(l,u,d,h)=>({x:1-(l+d-n)/s,y:1-(u+h-r)/o,width:d/s,height:h/o});break;case"270":a=(l,u,d,h)=>({x:1-(u+h-r)/o,y:(l-n)/s,width:h/o,height:d/s});break;default:a=(l,u,d,h)=>({x:(l-n)/s,y:(u-r)/o,width:d/s,height:h/o});break}const c=[];for(let l=0,u=t.rangeCount;l<u;l++){const d=t.getRangeAt(l);if(!d.collapsed)for(const{x:h,y:f,width:b,height:g}of d.getClientRects())b===0||g===0||c.push(a(h,f,b,g))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:t}){(p(this,Jo)||M(this,Jo,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=p(this,Jo))==null||t.delete(e)}renderAnnotationElement(e){var r;const t=(r=p(this,Jo))==null?void 0:r.get(e.data.id);if(!t)return;const n=p(this,Bi).getRawValue(t);n&&(p(this,Ft)===Ge.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}};mn=new WeakMap,vt=new WeakMap,Rt=new WeakMap,Yo=new WeakMap,Bi=new WeakMap,Jo=new WeakMap,$n=new WeakMap,Ko=new WeakMap,As=new WeakMap,ui=new WeakMap,Oi=new WeakMap,Es=new WeakMap,el=new WeakMap,tl=new WeakMap,di=new WeakMap,Zo=new WeakMap,Er=new WeakMap,hi=new WeakMap,Fh=new WeakMap,wr=new WeakMap,nl=new WeakMap,ws=new WeakMap,il=new WeakMap,Qo=new WeakMap,Ft=new WeakMap,Qe=new WeakMap,Wi=new WeakMap,Cs=new WeakMap,rl=new WeakMap,sl=new WeakMap,ol=new WeakMap,al=new WeakMap,cl=new WeakMap,ll=new WeakMap,ul=new WeakMap,dl=new WeakMap,hl=new WeakMap,fl=new WeakMap,pl=new WeakMap,gl=new WeakMap,ml=new WeakMap,yl=new WeakMap,Cr=new WeakMap,fi=new WeakMap,qi=new WeakMap,bl=new WeakMap,Te=new WeakSet,ld=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},u2=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=L(this,Te,ld).call(this,e).closest(".textLayer"),r=this.getSelectionBoxes(n);r&&(p(this,hi)||M(this,hi,new kA(this)),p(this,hi).show(n,r,this.direction==="ltr"))},d2=function(){var s,o,a;const e=document.getSelection();if(!e||e.isCollapsed){p(this,Wi)&&((s=p(this,hi))==null||s.hide(),M(this,Wi,null),L(this,Te,$t).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===p(this,Wi))return;if(!L(this,Te,ld).call(this,e).closest(".textLayer")){p(this,Wi)&&((o=p(this,hi))==null||o.hide(),M(this,Wi,null),L(this,Te,$t).call(this,{hasSelectedText:!1}));return}if((a=p(this,hi))==null||a.hide(),M(this,Wi,t),L(this,Te,$t).call(this,{hasSelectedText:!0}),!(p(this,Ft)!==Ge.HIGHLIGHT&&p(this,Ft)!==Ge.NONE)&&(p(this,Ft)===Ge.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),M(this,Er,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=l=>{l.type==="pointerup"&&l.button!==0||(window.removeEventListener("pointerup",c),window.removeEventListener("blur",c),l.type==="pointerup"&&L(this,Te,ud).call(this,"main_toolbar"))};window.addEventListener("pointerup",c),window.addEventListener("blur",c)}},ud=function(e=""){p(this,Ft)===Ge.HIGHLIGHT?this.highlightSelection(e):p(this,el)&&L(this,Te,u2).call(this)},h2=function(){document.addEventListener("selectionchange",p(this,gl))},f2=function(){document.removeEventListener("selectionchange",p(this,gl))},p2=function(){window.addEventListener("focus",p(this,ol)),window.addEventListener("blur",p(this,sl))},Fg=function(){window.removeEventListener("focus",p(this,ol)),window.removeEventListener("blur",p(this,sl))},Ng=function(){window.addEventListener("keydown",p(this,ul)),window.addEventListener("keyup",p(this,dl))},kg=function(){window.removeEventListener("keydown",p(this,ul)),window.removeEventListener("keyup",p(this,dl))},Mg=function(){document.addEventListener("copy",p(this,al)),document.addEventListener("cut",p(this,cl)),document.addEventListener("paste",p(this,ll))},Pg=function(){document.removeEventListener("copy",p(this,al)),document.removeEventListener("cut",p(this,cl)),document.removeEventListener("paste",p(this,ll))},$t=function(e){Object.entries(e).some(([n,r])=>p(this,yl)[n]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(p(this,yl),e)}),p(this,Ft)===Ge.HIGHLIGHT&&e.hasSelectedEditor===!1&&L(this,Te,xr).call(this,[[Pe.HIGHLIGHT_FREE,!0]]))},xr=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},g2=function(){if(!p(this,wr)){M(this,wr,!0);for(const e of p(this,Rt).values())e.enable();for(const e of p(this,vt).values())e.enable()}},m2=function(){if(this.unselectAll(),p(this,wr)){M(this,wr,!1);for(const e of p(this,Rt).values())e.disable();for(const e of p(this,vt).values())e.disable()}},Lg=function(e){const t=p(this,Rt).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},y2=function(){let e=null;for(e of p(this,Qe));return e},Ac=function(){if(p(this,vt).size===0)return!0;if(p(this,vt).size===1)for(const e of p(this,vt).values())return e.isEmpty();return!1},Bg=function(e){for(const t of p(this,Qe))t.unselect();p(this,Qe).clear();for(const t of e)t.isEmpty()||(p(this,Qe).add(t),t.select());L(this,Te,$t).call(this,{hasSelectedEditor:this.hasSelection})},Le(qo,"TRANSLATE_SMALL",1),Le(qo,"TRANSLATE_BIG",10);let mo=qo;var Hi,Vi,Xn,Gi,jn,ea,zi,vl,Og;const Ni=class Ni{constructor(e){W(this,vl);W(this,Hi,"");W(this,Vi,!1);W(this,Xn,null);W(this,Gi,null);W(this,jn,null);W(this,ea,!1);W(this,zi,null);M(this,zi,e)}static initialize(e){Ni._l10nPromise||(Ni._l10nPromise=e)}async render(){const e=M(this,Xn,document.createElement("button"));e.className="altText";const t=await Ni._l10nPromise.get("pdfjs-editor-alt-text-button-label");e.textContent=t,e.setAttribute("aria-label",t),e.tabIndex="0",e.addEventListener("contextmenu",ln),e.addEventListener("pointerdown",r=>r.stopPropagation());const n=r=>{r.preventDefault(),p(this,zi)._uiManager.editAltText(p(this,zi))};return e.addEventListener("click",n,{capture:!0}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(M(this,ea,!0),n(r))}),await L(this,vl,Og).call(this),e}finish(){p(this,Xn)&&(p(this,Xn).focus({focusVisible:p(this,ea)}),M(this,ea,!1))}isEmpty(){return!p(this,Hi)&&!p(this,Vi)}get data(){return{altText:p(this,Hi),decorative:p(this,Vi)}}set data({altText:e,decorative:t}){p(this,Hi)===e&&p(this,Vi)===t||(M(this,Hi,e),M(this,Vi,t),L(this,vl,Og).call(this))}toggle(e=!1){p(this,Xn)&&(!e&&p(this,jn)&&(clearTimeout(p(this,jn)),M(this,jn,null)),p(this,Xn).disabled=!e)}destroy(){var e;(e=p(this,Xn))==null||e.remove(),M(this,Xn,null),M(this,Gi,null)}};Hi=new WeakMap,Vi=new WeakMap,Xn=new WeakMap,Gi=new WeakMap,jn=new WeakMap,ea=new WeakMap,zi=new WeakMap,vl=new WeakSet,Og=async function(){var r;const e=p(this,Xn);if(!e)return;if(!p(this,Hi)&&!p(this,Vi)){e.classList.remove("done"),(r=p(this,Gi))==null||r.remove();return}e.classList.add("done"),Ni._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(s=>{e.setAttribute("aria-label",s)});let t=p(this,Gi);if(!t){M(this,Gi,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip");const s=t.id=`alt-text-tooltip-${p(this,zi).id}`;e.setAttribute("aria-describedby",s);const o=100;e.addEventListener("mouseenter",()=>{M(this,jn,setTimeout(()=>{M(this,jn,null),p(this,Gi).classList.add("show"),p(this,zi)._reportTelemetry({action:"alt_text_tooltip"})},o))}),e.addEventListener("mouseleave",()=>{var a;p(this,jn)&&(clearTimeout(p(this,jn)),M(this,jn,null)),(a=p(this,Gi))==null||a.classList.remove("show")})}t.innerText=p(this,Vi)?await Ni._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):p(this,Hi),t.parentNode||e.append(t);const n=p(this,zi).getImageForAltText();n==null||n.setAttribute("aria-describedby",t.id)},Le(Ni,"_l10nPromise",null);let sh=Ni;var Yn,Xt,ta,Ss,Nt,Us,na,ia,qt,xl,Is,Sr,_l,Rs,$i,pi,ra,sa,Sn,Dl,Nh,qe,Wg,Tl,qg,Hg,b2,v2,Vg,Gg,zg,x2,_2,D2,T2,$g,Ec;const rt=class rt{constructor(e){W(this,qe);W(this,Yn,null);W(this,Xt,null);W(this,ta,!1);W(this,Ss,!1);W(this,Nt,null);W(this,Us,null);W(this,na,this.focusin.bind(this));W(this,ia,this.focusout.bind(this));W(this,qt,null);W(this,xl,"");W(this,Is,!1);W(this,Sr,null);W(this,_l,!1);W(this,Rs,!1);W(this,$i,!1);W(this,pi,null);W(this,ra,0);W(this,sa,0);W(this,Sn,null);Le(this,"_initialOptions",Object.create(null));Le(this,"_isVisible",!0);Le(this,"_uiManager",null);Le(this,"_focusEventsAllowed",!0);Le(this,"_l10nPromise",null);W(this,Dl,!1);W(this,Nh,rt._zIndex++);this.constructor===rt&&nt("Cannot initialize AnnotationEditor."),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:r,pageX:s,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,r],this.pageTranslation=[s,o];const[a,c]=this.parentDimensions;this.x=e.x/a,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=rt.prototype._resizeWithKeyboard,t=mo.TRANSLATE_SMALL,n=mo.TRANSLATE_BIG;return ze(this,"_resizerKeyboardManager",new Nu([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],rt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return ze(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new BA({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t,n){if(rt._l10nPromise||(rt._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(s=>[s,e.get(s.replaceAll(/([A-Z])/g,o=>`-${o.toLowerCase()}`))]))),n!=null&&n.strings)for(const s of n.strings)rt._l10nPromise.set(s,e.get(s));if(rt._borderLineWidth!==-1)return;const r=getComputedStyle(document.documentElement);rt._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){nt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return p(this,Dl)}set _isDraggable(e){var t;M(this,Dl,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=p(this,Nh)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):L(this,qe,Ec).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(p(this,Is)?M(this,Is,!1):this.parent.setSelected(this))}focusout(e){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,r){const[s,o]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(e+n)/s,this.y=(t+r)/o,this.fixAndSetPosition()}translate(e,t){L(this,qe,Wg).call(this,this.parentDimensions,e,t)}translateInPage(e,t){p(this,Sr)||M(this,Sr,[this.x,this.y]),L(this,qe,Wg).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){p(this,Sr)||M(this,Sr,[this.x,this.y]);const[n,r]=this.parentDimensions;if(this.x+=e/n,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:l,y:u}=this.div.getBoundingClientRect();this.parent.findNewParent(this,l,u)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:o}=this;const[a,c]=this.getBaseTranslation();s+=a,o+=c,this.div.style.left=`${(100*s).toFixed(2)}%`,this.div.style.top=`${(100*o).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!p(this,Sr)&&(p(this,Sr)[0]!==this.x||p(this,Sr)[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=rt,r=n/e,s=n/t;switch(this.rotation){case 90:return[-r,s];case 180:return[r,s];case 270:return[r,-s];default:return[-r,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[t,n]=this.pageDimensions;let{x:r,y:s,width:o,height:a}=this;if(o*=t,a*=n,r*=t,s*=n,this._mustFixPosition)switch(e){case 0:r=Math.max(0,Math.min(t-o,r)),s=Math.max(0,Math.min(n-a,s));break;case 90:r=Math.max(0,Math.min(t-a,r)),s=Math.min(n,Math.max(o,s));break;case 180:r=Math.min(t,Math.max(o,r)),s=Math.min(n,Math.max(a,s));break;case 270:r=Math.min(t,Math.max(a,r)),s=Math.max(0,Math.min(n-o,s));break}this.x=r/=t,this.y=s/=n;const[c,l]=this.getBaseTranslation();r+=c,s+=l;const{style:u}=this.div;u.left=`${(100*r).toFixed(2)}%`,u.top=`${(100*s).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var n;return L(n=rt,Tl,qg).call(n,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var n;return L(n=rt,Tl,qg).call(n,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this,r=t*e,s=n*e;return an.isCSSRoundSupported?[Math.round(r),Math.round(s)]:[r,s]}setDims(e,t){const[n,r]=this.parentDimensions;this.div.style.width=`${(100*e/n).toFixed(2)}%`,p(this,Ss)||(this.div.style.height=`${(100*t/r).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:n}=e,r=n.endsWith("%"),s=!p(this,Ss)&&t.endsWith("%");if(r&&s)return;const[o,a]=this.parentDimensions;r||(e.width=`${(100*parseFloat(n)/o).toFixed(2)}%`),!p(this,Ss)&&!s&&(e.height=`${(100*parseFloat(t)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var e;(e=p(this,Xt))==null||e.finish()}async addEditToolbar(){return p(this,qt)||p(this,Rs)?p(this,qt):(M(this,qt,new Cg(this)),this.div.append(p(this,qt).render()),p(this,Xt)&&p(this,qt).addAltTextButton(await p(this,Xt).render()),p(this,qt))}removeEditToolbar(){var e;p(this,qt)&&(p(this,qt).remove(),M(this,qt,null),(e=p(this,Xt))==null||e.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){p(this,Xt)||(sh.initialize(rt._l10nPromise),M(this,Xt,new sh(this)),await this.addEditToolbar())}get altTextData(){var e;return(e=p(this,Xt))==null?void 0:e.data}set altTextData(e){p(this,Xt)&&(p(this,Xt).data=e)}hasAltText(){var e;return!((e=p(this,Xt))!=null&&e.isEmpty())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=p(this,ta)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.div.addEventListener("focusin",p(this,na)),this.div.addEventListener("focusout",p(this,ia));const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[n,r]=this.getInitialTranslation();return this.translate(n,r),rh(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=an.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(M(this,Is,!0),this._isDraggable){L(this,qe,x2).call(this,e);return}L(this,qe,zg).call(this,e)}moveInDOM(){p(this,pi)&&clearTimeout(p(this,pi)),M(this,pi,setTimeout(()=>{var e;M(this,pi,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition()}getRect(e,t,n=this.rotation){const r=this.parentScale,[s,o]=this.pageDimensions,[a,c]=this.pageTranslation,l=e/r,u=t/r,d=this.x*s,h=this.y*o,f=this.width*s,b=this.height*o;switch(n){case 0:return[d+l+a,o-h-u-b+c,d+l+f+a,o-h-u+c];case 90:return[d+u+a,o-h+l+c,d+u+b+a,o-h+l+f+c];case 180:return[d-l-f+a,o-h+u+c,d-l+a,o-h+u+b+c];case 270:return[d-u-b+a,o-h-l-f+c,d-u+a,o-h-l+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,r,s,o]=e,a=s-n,c=o-r;switch(this.rotation){case 0:return[n,t-o,a,c];case 90:return[n,t-r,c,a];case 180:return[s,t-r,a,c];case 270:return[s,t-o,c,a];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){M(this,Rs,!0)}disableEditMode(){M(this,Rs,!1)}isInEditMode(){return p(this,Rs)}shouldGetKeyboardEvents(){return p(this,$i)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var e,t;(e=this.div)==null||e.addEventListener("focusin",p(this,na)),(t=this.div)==null||t.addEventListener("focusout",p(this,ia))}rotate(e){}serialize(e=!1,t=null){nt("An editor must be serializable")}static deserialize(e,t,n){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n});r.rotation=e.rotation;const[s,o]=r.pageDimensions,[a,c,l,u]=r.getRectInCurrentCoords(e.rect,o);return r.x=a/s,r.y=c/o,r.width=l/s,r.height=u/o,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.div.removeEventListener("focusin",p(this,na)),this.div.removeEventListener("focusout",p(this,ia)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),p(this,pi)&&(clearTimeout(p(this,pi)),M(this,pi,null)),L(this,qe,Ec).call(this),this.removeEditToolbar(),p(this,Sn)){for(const e of p(this,Sn).values())clearTimeout(e);M(this,Sn,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(L(this,qe,b2).call(this),p(this,Nt).classList.remove("hidden"),rh(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),M(this,Us,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=p(this,Nt).children;if(!p(this,Yn)){M(this,Yn,Array.from(t));const o=L(this,qe,_2).bind(this),a=L(this,qe,D2).bind(this);for(const c of p(this,Yn)){const l=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",o),c.addEventListener("blur",a),c.addEventListener("focus",L(this,qe,T2).bind(this,l)),rt._l10nPromise.get(`pdfjs-editor-resizer-label-${l}`).then(u=>c.setAttribute("aria-label",u))}}const n=p(this,Yn)[0];let r=0;for(const o of t){if(o===n)break;r++}const s=(360-this.rotation+this.parentRotation)%360/90*(p(this,Yn).length/4);if(s!==r){if(s<r)for(let a=0;a<r-s;a++)p(this,Nt).append(p(this,Nt).firstChild);else if(s>r)for(let a=0;a<s-r;a++)p(this,Nt).firstChild.before(p(this,Nt).lastChild);let o=0;for(const a of t){const l=p(this,Yn)[o++].getAttribute("data-resizer-name");rt._l10nPromise.get(`pdfjs-editor-resizer-label-${l}`).then(u=>a.setAttribute("aria-label",u))}}L(this,qe,$g).call(this,0),M(this,$i,!0),p(this,Nt).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){p(this,$i)&&L(this,qe,Gg).call(this,p(this,xl),{movementX:e,movementY:t})}_stopResizingWithKeyboard(){L(this,qe,Ec).call(this),this.div.focus()}select(){var e,t;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!p(this,qt)){this.addEditToolbar().then(()=>{var n,r;(n=this.div)!=null&&n.classList.contains("selectedEditor")&&((r=p(this,qt))==null||r.show())});return}(t=p(this,qt))==null||t.show()}unselect(){var e,t,n,r;(e=p(this,Nt))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=p(this,qt))==null||r.hide()}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return p(this,_l)}set isEditing(e){M(this,_l,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){M(this,Ss,!0);const n=e/t,{style:r}=this.div;r.aspectRatio=n,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){p(this,Sn)||M(this,Sn,new Map);const{action:n}=e;let r=p(this,Sn).get(n);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),p(this,Sn).delete(n),p(this,Sn).size===0&&M(this,Sn,null)},rt._telemetryTimeout),p(this,Sn).set(n,r);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),M(this,ta,!1)}disable(){this.div&&(this.div.tabIndex=-1),M(this,ta,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;t.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Yn=new WeakMap,Xt=new WeakMap,ta=new WeakMap,Ss=new WeakMap,Nt=new WeakMap,Us=new WeakMap,na=new WeakMap,ia=new WeakMap,qt=new WeakMap,xl=new WeakMap,Is=new WeakMap,Sr=new WeakMap,_l=new WeakMap,Rs=new WeakMap,$i=new WeakMap,pi=new WeakMap,ra=new WeakMap,sa=new WeakMap,Sn=new WeakMap,Dl=new WeakMap,Nh=new WeakMap,qe=new WeakSet,Wg=function([e,t],n,r){[n,r]=this.screenToPageTranslation(n,r),this.x+=n/e,this.y+=r/t,this.fixAndSetPosition()},Tl=new WeakSet,qg=function(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},Hg=function(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}},b2=function(){if(p(this,Nt))return;M(this,Nt,document.createElement("div")),p(this,Nt).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"];for(const t of e){const n=document.createElement("div");p(this,Nt).append(n),n.classList.add("resizer",t),n.setAttribute("data-resizer-name",t),n.addEventListener("pointerdown",L(this,qe,v2).bind(this,t)),n.addEventListener("contextmenu",ln),n.tabIndex=-1}this.div.prepend(p(this,Nt))},v2=function(e,t){var b;t.preventDefault();const{isMac:n}=an.platform;if(t.button!==0||t.ctrlKey&&n)return;(b=p(this,Xt))==null||b.toggle(!1);const r=L(this,qe,Gg).bind(this,e),s=this._isDraggable;this._isDraggable=!1;const o={passive:!0,capture:!0};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",r,o),window.addEventListener("contextmenu",ln);const a=this.x,c=this.y,l=this.width,u=this.height,d=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const f=()=>{var g;this.parent.togglePointerEvents(!0),(g=p(this,Xt))==null||g.toggle(!0),this._isDraggable=s,window.removeEventListener("pointerup",f),window.removeEventListener("blur",f),window.removeEventListener("pointermove",r,o),window.removeEventListener("contextmenu",ln),this.parent.div.style.cursor=d,this.div.style.cursor=h,L(this,qe,Vg).call(this,a,c,l,u)};window.addEventListener("pointerup",f),window.addEventListener("blur",f)},Vg=function(e,t,n,r){const s=this.x,o=this.y,a=this.width,c=this.height;s===e&&o===t&&a===n&&c===r||this.addCommands({cmd:()=>{this.width=a,this.height=c,this.x=s,this.y=o;const[l,u]=this.parentDimensions;this.setDims(l*a,u*c),this.fixAndSetPosition()},undo:()=>{this.width=n,this.height=r,this.x=e,this.y=t;const[l,u]=this.parentDimensions;this.setDims(l*n,u*r),this.fixAndSetPosition()},mustExec:!0})},Gg=function(e,t){const[n,r]=this.parentDimensions,s=this.x,o=this.y,a=this.width,c=this.height,l=rt.MIN_SIZE/n,u=rt.MIN_SIZE/r,d=O=>Math.round(O*1e4)/1e4,h=L(this,qe,Hg).call(this,this.rotation),f=(O,K)=>[h[0]*O+h[2]*K,h[1]*O+h[3]*K],b=L(this,qe,Hg).call(this,360-this.rotation),g=(O,K)=>[b[0]*O+b[2]*K,b[1]*O+b[3]*K];let y,v,x=!1,D=!1;switch(e){case"topLeft":x=!0,y=(O,K)=>[0,0],v=(O,K)=>[O,K];break;case"topMiddle":y=(O,K)=>[O/2,0],v=(O,K)=>[O/2,K];break;case"topRight":x=!0,y=(O,K)=>[O,0],v=(O,K)=>[0,K];break;case"middleRight":D=!0,y=(O,K)=>[O,K/2],v=(O,K)=>[0,K/2];break;case"bottomRight":x=!0,y=(O,K)=>[O,K],v=(O,K)=>[0,0];break;case"bottomMiddle":y=(O,K)=>[O/2,K],v=(O,K)=>[O/2,0];break;case"bottomLeft":x=!0,y=(O,K)=>[0,K],v=(O,K)=>[O,0];break;case"middleLeft":D=!0,y=(O,K)=>[0,K/2],v=(O,K)=>[O,K/2];break}const A=y(a,c),T=v(a,c);let E=f(...T);const I=d(s+E[0]),N=d(o+E[1]);let R=1,P=1,[j,U]=this.screenToPageTranslation(t.movementX,t.movementY);if([j,U]=g(j/n,U/r),x){const O=Math.hypot(a,c);R=P=Math.max(Math.min(Math.hypot(T[0]-A[0]-j,T[1]-A[1]-U)/O,1/a,1/c),l/a,u/c)}else D?R=Math.max(l,Math.min(1,Math.abs(T[0]-A[0]-j)))/a:P=Math.max(u,Math.min(1,Math.abs(T[1]-A[1]-U)))/c;const B=d(a*R),S=d(c*P);E=f(...v(B,S));const J=I-E[0],q=N-E[1];this.width=B,this.height=S,this.x=J,this.y=q,this.setDims(n*B,r*S),this.fixAndSetPosition()},zg=function(e){const{isMac:t}=an.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},x2=function(e){const t=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let n,r;t&&(this.div.classList.add("moving"),n={passive:!0,capture:!0},M(this,ra,e.clientX),M(this,sa,e.clientY),r=o=>{const{clientX:a,clientY:c}=o,[l,u]=this.screenToPageTranslation(a-p(this,ra),c-p(this,sa));M(this,ra,a),M(this,sa,c),this._uiManager.dragSelectedEditors(l,u)},window.addEventListener("pointermove",r,n));const s=()=>{window.removeEventListener("pointerup",s),window.removeEventListener("blur",s),t&&(this.div.classList.remove("moving"),window.removeEventListener("pointermove",r,n)),M(this,Is,!1),this._uiManager.endDragSession()||L(this,qe,zg).call(this,e)};window.addEventListener("pointerup",s),window.addEventListener("blur",s)},_2=function(e){rt._resizerKeyboardManager.exec(this,e)},D2=function(e){var t;p(this,$i)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==p(this,Nt)&&L(this,qe,Ec).call(this)},T2=function(e){M(this,xl,p(this,$i)?e:"")},$g=function(e){if(p(this,Yn))for(const t of p(this,Yn))t.tabIndex=e},Ec=function(){if(M(this,$i,!1),L(this,qe,$g).call(this,-1),p(this,Us)){const{savedX:e,savedY:t,savedWidth:n,savedHeight:r}=p(this,Us);L(this,qe,Vg).call(this,e,t,n,r),M(this,Us,null)}},W(rt,Tl),Le(rt,"_borderLineWidth",-1),Le(rt,"_colorManager",new Rg),Le(rt,"_zIndex",1),Le(rt,"_telemetryTimeout",1e3);let et=rt;class BA extends et{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}const f0=3285377520,An=4294901760,oi=65535;class A2{constructor(e){this.h1=e?e&4294967295:f0,this.h2=e?e&4294967295:f0}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let g=0,y=e.length;g<y;g++){const v=e.charCodeAt(g);v<=255?t[n++]=v:(t[n++]=v>>>8,t[n++]=v&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=n>>2,s=n-r*4,o=new Uint32Array(t.buffer,0,r);let a=0,c=0,l=this.h1,u=this.h2;const d=3432918353,h=461845907,f=d&oi,b=h&oi;for(let g=0;g<r;g++)g&1?(a=o[g],a=a*d&An|a*f&oi,a=a<<15|a>>>17,a=a*h&An|a*b&oi,l^=a,l=l<<13|l>>>19,l=l*5+3864292196):(c=o[g],c=c*d&An|c*f&oi,c=c<<15|c>>>17,c=c*h&An|c*b&oi,u^=c,u=u<<13|u>>>19,u=u*5+3864292196);switch(a=0,s){case 3:a^=t[r*4+2]<<16;case 2:a^=t[r*4+1]<<8;case 1:a^=t[r*4],a=a*d&An|a*f&oi,a=a<<15|a>>>17,a=a*h&An|a*b&oi,r&1?l^=a:u^=a}this.h1=l,this.h2=u}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&An|e*36045&oi,t=t*4283543511&An|((t<<16|e>>>16)*2950163797&An)>>>16,e^=t>>>1,e=e*444984403&An|e*60499&oi,t=t*3301882366&An|((t<<16|e>>>16)*3120437893&An)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Xg=Object.freeze({map:null,hash:"",transfer:void 0});var Fs,kt,kh,E2;class sy{constructor(){W(this,kh);W(this,Fs,!1);W(this,kt,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=p(this,kt).get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return p(this,kt).get(e)}remove(e){if(p(this,kt).delete(e),p(this,kt).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of p(this,kt).values())if(t instanceof et)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=p(this,kt).get(e);let r=!1;if(n!==void 0)for(const[s,o]of Object.entries(t))n[s]!==o&&(r=!0,n[s]=o);else r=!0,p(this,kt).set(e,t);r&&L(this,kh,E2).call(this),t instanceof et&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return p(this,kt).has(e)}getAll(){return p(this,kt).size>0?Zm(p(this,kt)):null}setAll(e){for(const[t,n]of Object.entries(e))this.setValue(t,n)}get size(){return p(this,kt).size}resetModified(){p(this,Fs)&&(M(this,Fs,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new w2(this)}get serializable(){if(p(this,kt).size===0)return Xg;const e=new Map,t=new A2,n=[],r=Object.create(null);let s=!1;for(const[o,a]of p(this,kt)){const c=a instanceof et?a.serialize(!1,r):a;c&&(e.set(o,c),t.update(`${o}:${JSON.stringify(c)}`),s||(s=!!c.bitmap))}if(s)for(const o of e.values())o.bitmap&&n.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:Xg}get editorStats(){let e=null;const t=new Map;for(const n of p(this,kt).values()){if(!(n instanceof et))continue;const r=n.telemetryFinalData;if(!r)continue;const{type:s}=r;t.has(s)||t.set(s,Object.getPrototypeOf(n).constructor),e||(e=Object.create(null));const o=e[s]||(e[s]=new Map);for(const[a,c]of Object.entries(r)){if(a==="type")continue;let l=o.get(a);l||(l=new Map,o.set(a,l));const u=l.get(c)??0;l.set(c,u+1)}}for(const[n,r]of t)e[n]=r.computeTelemetryFinalData(e[n]);return e}}Fs=new WeakMap,kt=new WeakMap,kh=new WeakSet,E2=function(){p(this,Fs)||(M(this,Fs,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Al;class w2 extends sy{constructor(t){super();W(this,Al);const{map:n,hash:r,transfer:s}=t.serializable,o=structuredClone(n,s?{transfer:s}:null);M(this,Al,{map:o,hash:r,transfer:s})}get print(){nt("Should not call PrintAnnotationStorage.print")}get serializable(){return p(this,Al)}}Al=new WeakMap;var oa;class OA{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){W(this,oa,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),p(this,oa).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||p(this,oa).has(e.loadedName))){if(Tt(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:r,style:s}=e,o=new FontFace(n,r,s);this.addNativeFontFace(o);try{await o.load(),p(this,oa).add(n),t==null||t(e)}catch{Oe(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}nt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(r){throw Oe(`Failed to load font '${n.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const r=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return ze(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(Ht||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),ze(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(Tt(!r.done,"completeRequest() cannot be called twice."),r.done=!0;n.length>0&&n[0].done;){const s=n.shift();setTimeout(s.callback,0)}}const{loadingRequests:n}=this,r={done:!1,complete:t,callback:e};return n.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return ze(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(A,T){return A.charCodeAt(T)<<24|A.charCodeAt(T+1)<<16|A.charCodeAt(T+2)<<8|A.charCodeAt(T+3)&255}function r(A,T,E,I){const N=A.substring(0,T),R=A.substring(T+E);return N+I+R}let s,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const c=a.getContext("2d");let l=0;function u(A,T){if(++l>30){Oe("Load test font never loaded."),T();return}if(c.font="30px "+A,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){T();return}setTimeout(u.bind(null,A,T))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let h=this._loadTestFont;h=r(h,976,d.length,d);const b=16,g=1482184792;let y=n(h,b);for(s=0,o=d.length-3;s<o;s+=4)y=y-g+n(d,s)|0;s<d.length&&(y=y-g+n(d+"XXX",s)|0),h=r(h,b,4,DA(y));const v=`url(data:font/opentype;base64,${btoa(h)});`,x=`@font-face {font-family:"${d}";src:${v}}`;this.insertRule(x);const D=this._document.createElement("div");D.style.visibility="hidden",D.style.width=D.style.height="10px",D.style.position="absolute",D.style.top=D.style.left="0px";for(const A of[e.loadedName,d]){const T=this._document.createElement("span");T.textContent="Hi",T.style.fontFamily=A,D.append(T)}this._document.body.append(D),u(d,()=>{D.remove(),t.complete()})}}oa=new WeakMap;class WA{constructor(e,{disableFontFace:t=!1,inspectFont:n=null}){this.compiledGlyphs=Object.create(null);for(const r in e)this[r]=e[r];this.disableFontFace=t===!0,this._inspectFont=n}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var r;if(!this.data||this.disableFontFace)return null;const e=Y1(this.data),t=`url(data:${this.mimetype};base64,${btoa(e)});`;let n;if(!this.cssFontInfo)n=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),n=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return(r=this._inspectFont)==null||r.call(this,this,t),n}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let n;try{n=e.get(this.loadedName+"_path_"+t)}catch(s){Oe(`getPathGenerator - ignoring character: "${s}".`)}if(!Array.isArray(n)||n.length===0)return this.compiledGlyphs[t]=function(s,o){};const r=[];for(let s=0,o=n.length;s<o;)switch(n[s++]){case Si.BEZIER_CURVE_TO:{const[a,c,l,u,d,h]=n.slice(s,s+6);r.push(f=>f.bezierCurveTo(a,c,l,u,d,h)),s+=6}break;case Si.MOVE_TO:{const[a,c]=n.slice(s,s+2);r.push(l=>l.moveTo(a,c)),s+=2}break;case Si.LINE_TO:{const[a,c]=n.slice(s,s+2);r.push(l=>l.lineTo(a,c)),s+=2}break;case Si.QUADRATIC_CURVE_TO:{const[a,c,l,u]=n.slice(s,s+4);r.push(d=>d.quadraticCurveTo(a,c,l,u)),s+=4}break;case Si.RESTORE:r.push(a=>a.restore());break;case Si.SAVE:r.push(a=>a.save());break;case Si.SCALE:Tt(r.length===2,"Scale command is only valid at the third position.");break;case Si.TRANSFORM:{const[a,c,l,u,d,h]=n.slice(s,s+6);r.push(f=>f.transform(a,c,l,u,d,h)),s+=6}break;case Si.TRANSLATE:{const[a,c]=n.slice(s,s+2);r.push(l=>l.translate(a,c)),s+=2}break}return this.compiledGlyphs[t]=function(o,a){r[0](o),r[1](o),o.scale(a,-a);for(let c=2,l=r.length;c<l;c++)r[c](o)}}}if(Ht){var jg=Promise.withResolvers(),Bc=null;(async()=>{const e=await qu(()=>Promise.resolve().then(()=>Pc),[]),t=await qu(()=>Promise.resolve().then(()=>Pc),void 0),n=await qu(()=>Promise.resolve().then(()=>Pc),void 0),r=await qu(()=>Promise.resolve().then(()=>Pc),void 0);let s,o;return new Map(Object.entries({fs:e,http:t,https:n,url:r,canvas:s,path2d:o}))})().then(e=>{Bc=e,jg.resolve()},e=>{Oe(`loadPackages: ${e}`),Bc=new Map,jg.resolve()})}class wi{static get promise(){return jg.promise}static get(e){return Bc==null?void 0:Bc.get(e)}}const C2=function(i){return wi.get("fs").promises.readFile(i).then(t=>new Uint8Array(t))};class qA extends Zh{}class HA extends Qh{_createCanvas(e,t){return wi.get("canvas").createCanvas(e,t)}}class VA extends ef{_fetchData(e,t){return C2(e).then(n=>({cMapData:n,compressionType:t}))}}class GA extends tf{_fetchData(e){return C2(e)}}const Kt={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Yg(i,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,n),i.clip(r)}class ku{constructor(){this.constructor===ku&&nt("Cannot initialize BaseShadingPattern.")}getPattern(){nt("Abstract method `getPattern` called.")}}class zA extends ku{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,r){let s;if(r===Kt.STROKE||r===Kt.FILL){const o=t.current.getClippedPathBoundingBox(r,dt(e))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,l=t.cachedCanvases.getCanvas("pattern",a,c,!0),u=l.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-o[0],-o[1]),n=Ue.transform(n,[1,0,0,1,o[0],o[1]]),u.transform(...t.baseTransform),this.matrix&&u.transform(...this.matrix),Yg(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),s=e.createPattern(l.canvas,"no-repeat");const d=new DOMMatrix(n);s.setTransform(d)}else Yg(e,this._bbox),s=this._createGradient(e);return s}}function Wf(i,e,t,n,r,s,o,a){const c=e.coords,l=e.colors,u=i.data,d=i.width*4;let h;c[t+1]>c[n+1]&&(h=t,t=n,n=h,h=s,s=o,o=h),c[n+1]>c[r+1]&&(h=n,n=r,r=h,h=o,o=a,a=h),c[t+1]>c[n+1]&&(h=t,t=n,n=h,h=s,s=o,o=h);const f=(c[t]+e.offsetX)*e.scaleX,b=(c[t+1]+e.offsetY)*e.scaleY,g=(c[n]+e.offsetX)*e.scaleX,y=(c[n+1]+e.offsetY)*e.scaleY,v=(c[r]+e.offsetX)*e.scaleX,x=(c[r+1]+e.offsetY)*e.scaleY;if(b>=x)return;const D=l[s],A=l[s+1],T=l[s+2],E=l[o],I=l[o+1],N=l[o+2],R=l[a],P=l[a+1],j=l[a+2],U=Math.round(b),B=Math.round(x);let S,J,q,O,K,H,Y,F;for(let X=U;X<=B;X++){if(X<y){const le=X<b?0:(b-X)/(b-y);S=f-(f-g)*le,J=D-(D-E)*le,q=A-(A-I)*le,O=T-(T-N)*le}else{let le;X>x?le=1:y===x?le=0:le=(y-X)/(y-x),S=g-(g-v)*le,J=E-(E-R)*le,q=I-(I-P)*le,O=N-(N-j)*le}let $;X<b?$=0:X>x?$=1:$=(b-X)/(b-x),K=f-(f-v)*$,H=D-(D-R)*$,Y=A-(A-P)*$,F=T-(T-j)*$;const ne=Math.round(Math.min(S,K)),oe=Math.round(Math.max(S,K));let pe=d*X+ne*4;for(let le=ne;le<=oe;le++)$=(S-le)/(S-K),$<0?$=0:$>1&&($=1),u[pe++]=J-(J-H)*$|0,u[pe++]=q-(q-Y)*$|0,u[pe++]=O-(O-F)*$|0,u[pe++]=255}}function $A(i,e,t){const n=e.coords,r=e.colors;let s,o;switch(e.type){case"lattice":const a=e.verticesPerRow,c=Math.floor(n.length/a)-1,l=a-1;for(s=0;s<c;s++){let u=s*a;for(let d=0;d<l;d++,u++)Wf(i,t,n[u],n[u+1],n[u+a],r[u],r[u+1],r[u+a]),Wf(i,t,n[u+a+1],n[u+1],n[u+a],r[u+a+1],r[u+1],r[u+a])}break;case"triangles":for(s=0,o=n.length;s<o;s+=3)Wf(i,t,n[s],n[s+1],n[s+2],r[s],r[s+1],r[s+2]);break;default:throw new Error("illegal figure")}}class XA extends ku{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,n){const a=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),l=Math.ceil(this._bounds[2])-a,u=Math.ceil(this._bounds[3])-c,d=Math.min(Math.ceil(Math.abs(l*e[0]*1.1)),3e3),h=Math.min(Math.ceil(Math.abs(u*e[1]*1.1)),3e3),f=l/d,b=u/h,g={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-c,scaleX:1/f,scaleY:1/b},y=d+4,v=h+4,x=n.getCanvas("mesh",y,v,!1),D=x.context,A=D.createImageData(d,h);if(t){const E=A.data;for(let I=0,N=E.length;I<N;I+=4)E[I]=t[0],E[I+1]=t[1],E[I+2]=t[2],E[I+3]=255}for(const E of this._figures)$A(A,E,g);return D.putImageData(A,2,2),{canvas:x.canvas,offsetX:a-2*f,offsetY:c-2*b,scaleX:f,scaleY:b}}getPattern(e,t,n,r){Yg(e,this._bbox);let s;if(r===Kt.SHADING)s=Ue.singularValueDecompose2dScale(dt(e));else if(s=Ue.singularValueDecompose2dScale(t.baseTransform),this.matrix){const a=Ue.singularValueDecompose2dScale(this.matrix);s=[s[0]*a[0],s[1]*a[1]]}const o=this._createMeshCanvas(s,r===Kt.SHADING?null:this._background,t.cachedCanvases);return r!==Kt.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class jA extends ku{getPattern(){return"hotpink"}}function YA(i){switch(i[0]){case"RadialAxial":return new zA(i);case"Mesh":return new XA(i);case"Dummy":return new jA}throw new Error(`Unknown IR type: ${i[0]}`)}const p0={COLORED:1,UNCOLORED:2},Mh=class Mh{constructor(e,t,n,r,s){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=n,this.canvasGraphicsFactory=r,this.baseTransform=s}createPatternCanvas(e){const t=this.operatorList,n=this.bbox,r=this.xstep,s=this.ystep,o=this.paintType,a=this.tilingType,c=this.color,l=this.canvasGraphicsFactory;Yh("TilingType: "+a);const u=n[0],d=n[1],h=n[2],f=n[3],b=Ue.singularValueDecompose2dScale(this.matrix),g=Ue.singularValueDecompose2dScale(this.baseTransform),y=[b[0]*g[0],b[1]*g[1]],v=this.getSizeAndScale(r,this.ctx.canvas.width,y[0]),x=this.getSizeAndScale(s,this.ctx.canvas.height,y[1]),D=e.cachedCanvases.getCanvas("pattern",v.size,x.size,!0),A=D.context,T=l.createCanvasGraphics(A);T.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(T,o,c);let E=u,I=d,N=h,R=f;return u<0&&(E=0,N+=Math.abs(u)),d<0&&(I=0,R+=Math.abs(d)),A.translate(-(v.scale*E),-(x.scale*I)),T.transform(v.scale,0,0,x.scale,0,0),A.save(),this.clipBbox(T,E,I,N,R),T.baseTransform=dt(T.ctx),T.executeOperatorList(t),T.endDrawing(),{canvas:D.canvas,scaleX:v.scale,scaleY:x.scale,offsetX:E,offsetY:I}}getSizeAndScale(e,t,n){e=Math.abs(e);const r=Math.max(Mh.MAX_PATTERN_SIZE,t);let s=Math.ceil(e*n);return s>=r?s=r:n=s/e,{scale:n,size:s}}clipBbox(e,t,n,r,s){const o=r-t,a=s-n;e.ctx.rect(t,n,o,a),e.current.updateRectMinMax(dt(e.ctx),[t,n,r,s]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const r=e.ctx,s=e.current;switch(t){case p0.COLORED:const o=this.ctx;r.fillStyle=o.fillStyle,r.strokeStyle=o.strokeStyle,s.fillColor=o.fillStyle,s.strokeColor=o.strokeStyle;break;case p0.UNCOLORED:const a=Ue.makeHexColor(n[0],n[1],n[2]);r.fillStyle=a,r.strokeStyle=a,s.fillColor=a,s.strokeColor=a;break;default:throw new _A(`Unsupported paint type: ${t}`)}}getPattern(e,t,n,r){let s=n;r!==Kt.SHADING&&(s=Ue.transform(s,t.baseTransform),this.matrix&&(s=Ue.transform(s,this.matrix)));const o=this.createPatternCanvas(t);let a=new DOMMatrix(s);a=a.translate(o.offsetX,o.offsetY),a=a.scale(1/o.scaleX,1/o.scaleY);const c=e.createPattern(o.canvas,"repeat");return c.setTransform(a),c}};Le(Mh,"MAX_PATTERN_SIZE",3e3);let Jg=Mh;function JA({src:i,srcPos:e=0,dest:t,width:n,height:r,nonBlackColor:s=4294967295,inverseDecode:o=!1}){const a=an.isLittleEndian?4278190080:255,[c,l]=o?[s,a]:[a,s],u=n>>3,d=n&7,h=i.length;t=new Uint32Array(t.buffer);let f=0;for(let b=0;b<r;b++){for(const y=e+u;e<y;e++){const v=e<h?i[e]:255;t[f++]=v&128?l:c,t[f++]=v&64?l:c,t[f++]=v&32?l:c,t[f++]=v&16?l:c,t[f++]=v&8?l:c,t[f++]=v&4?l:c,t[f++]=v&2?l:c,t[f++]=v&1?l:c}if(d===0)continue;const g=e<h?i[e++]:255;for(let y=0;y<d;y++)t[f++]=g&1<<7-y?l:c}return{srcPos:e,destPos:f}}const g0=16,m0=100,KA=15,y0=10,b0=1e3,on=16;function ZA(i,e){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){e.save(),this.__originalSave()},i.restore=function(){e.restore(),this.__originalRestore()},i.translate=function(n,r){e.translate(n,r),this.__originalTranslate(n,r)},i.scale=function(n,r){e.scale(n,r),this.__originalScale(n,r)},i.transform=function(n,r,s,o,a,c){e.transform(n,r,s,o,a,c),this.__originalTransform(n,r,s,o,a,c)},i.setTransform=function(n,r,s,o,a,c){e.setTransform(n,r,s,o,a,c),this.__originalSetTransform(n,r,s,o,a,c)},i.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},i.rotate=function(n){e.rotate(n),this.__originalRotate(n)},i.clip=function(n){e.clip(n),this.__originalClip(n)},i.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},i.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},i.bezierCurveTo=function(t,n,r,s,o,a){e.bezierCurveTo(t,n,r,s,o,a),this.__originalBezierCurveTo(t,n,r,s,o,a)},i.rect=function(t,n,r,s){e.rect(t,n,r,s),this.__originalRect(t,n,r,s)},i.closePath=function(){e.closePath(),this.__originalClosePath()},i.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class QA{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,n)):(r=this.canvasFactory.create(t,n),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Hu(i,e,t,n,r,s,o,a,c,l){const[u,d,h,f,b,g]=dt(i);if(d===0&&h===0){const x=o*u+b,D=Math.round(x),A=a*f+g,T=Math.round(A),E=(o+c)*u+b,I=Math.abs(Math.round(E)-D)||1,N=(a+l)*f+g,R=Math.abs(Math.round(N)-T)||1;return i.setTransform(Math.sign(u),0,0,Math.sign(f),D,T),i.drawImage(e,t,n,r,s,0,0,I,R),i.setTransform(u,d,h,f,b,g),[I,R]}if(u===0&&f===0){const x=a*h+b,D=Math.round(x),A=o*d+g,T=Math.round(A),E=(a+l)*h+b,I=Math.abs(Math.round(E)-D)||1,N=(o+c)*d+g,R=Math.abs(Math.round(N)-T)||1;return i.setTransform(0,Math.sign(d),Math.sign(h),0,D,T),i.drawImage(e,t,n,r,s,0,0,R,I),i.setTransform(u,d,h,f,b,g),[R,I]}i.drawImage(e,t,n,r,s,o,a,c,l);const y=Math.hypot(u,d),v=Math.hypot(h,f);return[y*c,v*l]}function eE(i){const{width:e,height:t}=i;if(e>b0||t>b0)return null;const n=1e3,r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),s=e+1;let o=new Uint8Array(s*(t+1)),a,c,l;const u=e+7&-8;let d=new Uint8Array(u*t),h=0;for(const v of i.data){let x=128;for(;x>0;)d[h++]=v&x?0:255,x>>=1}let f=0;for(h=0,d[h]!==0&&(o[0]=1,++f),c=1;c<e;c++)d[h]!==d[h+1]&&(o[c]=d[h]?2:1,++f),h++;for(d[h]!==0&&(o[c]=2,++f),a=1;a<t;a++){h=a*u,l=a*s,d[h-u]!==d[h]&&(o[l]=d[h]?1:8,++f);let v=(d[h]?4:0)+(d[h-u]?8:0);for(c=1;c<e;c++)v=(v>>2)+(d[h+1]?4:0)+(d[h-u+1]?8:0),r[v]&&(o[l+c]=r[v],++f),h++;if(d[h-u]!==d[h]&&(o[l+c]=d[h]?2:4,++f),f>n)return null}for(h=u*(t-1),l=a*s,d[h]!==0&&(o[l]=8,++f),c=1;c<e;c++)d[h]!==d[h+1]&&(o[l+c]=d[h]?4:8,++f),h++;if(d[h]!==0&&(o[l+c]=4,++f),f>n)return null;const b=new Int32Array([0,s,-1,0,-s,0,0,0,1]),g=new Path2D;for(a=0;f&&a<=t;a++){let v=a*s;const x=v+e;for(;v<x&&!o[v];)v++;if(v===x)continue;g.moveTo(v%s,a);const D=v;let A=o[v];do{const T=b[A];do v+=T;while(!o[v]);const E=o[v];E!==5&&E!==10?(A=E,o[v]=0):(A=E&51*A>>4,o[v]&=A>>2|A<<2),g.lineTo(v%s,v/s|0),o[v]||--f}while(D!==v);--a}return d=null,o=null,function(v){v.save(),v.scale(1/e,-1/t),v.translate(0,-t),v.fill(g),v.beginPath(),v.restore()}}class v0{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=X1,this.textMatrixScale=1,this.fontMatrix=xg,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Ot.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,n){[t,n]=Ue.applyTransform([t,n],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(e,t){const n=Ue.applyTransform(t,e),r=Ue.applyTransform(t.slice(2),e),s=Ue.applyTransform([t[0],t[3]],e),o=Ue.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,n[0],r[0],s[0],o[0]),this.minY=Math.min(this.minY,n[1],r[1],s[1],o[1]),this.maxX=Math.max(this.maxX,n[0],r[0],s[0],o[0]),this.maxY=Math.max(this.maxY,n[1],r[1],s[1],o[1])}updateScalingPathMinMax(e,t){Ue.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,n,r,s,o,a,c,l,u){const d=Ue.bezierBoundingBox(t,n,r,s,o,a,c,l,u);u||this.updateRectMinMax(e,d)}getPathBoundingBox(e=Kt.FILL,t=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(e===Kt.STROKE){t||nt("Stroke bounding box must include transform.");const r=Ue.singularValueDecompose2dScale(t),s=r[0]*this.lineWidth/2,o=r[1]*this.lineWidth/2;n[0]-=s,n[1]-=o,n[2]+=s,n[3]+=o}return n}updateClipFromPath(){const e=Ue.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=Kt.FILL,t=null){return Ue.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function x0(i,e){if(typeof ImageData<"u"&&e instanceof ImageData){i.putImageData(e,0,0);return}const t=e.height,n=e.width,r=t%on,s=(t-r)/on,o=r===0?s:s+1,a=i.createImageData(n,on);let c=0,l;const u=e.data,d=a.data;let h,f,b,g;if(e.kind===sd.GRAYSCALE_1BPP){const y=u.byteLength,v=new Uint32Array(d.buffer,0,d.byteLength>>2),x=v.length,D=n+7>>3,A=4294967295,T=an.isLittleEndian?4278190080:255;for(h=0;h<o;h++){for(b=h<s?on:r,l=0,f=0;f<b;f++){const E=y-c;let I=0;const N=E>D?n:E*8-7,R=N&-8;let P=0,j=0;for(;I<R;I+=8)j=u[c++],v[l++]=j&128?A:T,v[l++]=j&64?A:T,v[l++]=j&32?A:T,v[l++]=j&16?A:T,v[l++]=j&8?A:T,v[l++]=j&4?A:T,v[l++]=j&2?A:T,v[l++]=j&1?A:T;for(;I<N;I++)P===0&&(j=u[c++],P=128),v[l++]=j&P?A:T,P>>=1}for(;l<x;)v[l++]=0;i.putImageData(a,0,h*on)}}else if(e.kind===sd.RGBA_32BPP){for(f=0,g=n*on*4,h=0;h<s;h++)d.set(u.subarray(c,c+g)),c+=g,i.putImageData(a,0,f),f+=on;h<o&&(g=n*r*4,d.set(u.subarray(c,c+g)),i.putImageData(a,0,f))}else if(e.kind===sd.RGB_24BPP)for(b=on,g=n*b,h=0;h<o;h++){for(h>=s&&(b=r,g=n*b),l=0,f=g;f--;)d[l++]=u[c++],d[l++]=u[c++],d[l++]=u[c++],d[l++]=255;i.putImageData(a,0,h*on)}else throw new Error(`bad image kind: ${e.kind}`)}function _0(i,e){if(e.bitmap){i.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,r=t%on,s=(t-r)/on,o=r===0?s:s+1,a=i.createImageData(n,on);let c=0;const l=e.data,u=a.data;for(let d=0;d<o;d++){const h=d<s?on:r;({srcPos:c}=JA({src:l,srcPos:c,dest:u,width:n,height:h,nonBlackColor:0})),i.putImageData(a,0,d*on)}}function sc(i,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)i[n]!==void 0&&(e[n]=i[n]);i.setLineDash!==void 0&&(e.setLineDash(i.getLineDash()),e.lineDashOffset=i.lineDashOffset)}function Vu(i){if(i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0),!Ht){const{filter:e}=i;e!=="none"&&e!==""&&(i.filter="none")}}function D0(i,e){if(e)return!0;const t=Ue.singularValueDecompose2dScale(i);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*$r.PDF_TO_CSS_UNITS);return t[0]<=n&&t[1]<=n}const tE=["butt","round","square"],nE=["miter","round","bevel"],iE={},T0={};var Jr,Kg,Zg;const s0=class s0{constructor(e,t,n,r,s,{optionalContentConfig:o,markedContentStack:a=null},c,l){W(this,Jr);this.ctx=e,this.current=new v0(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=r,this.filterFactory=s,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new QA(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=l,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:r=null}){const s=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,s,o),this.ctx.fillStyle=a,n){const c=this.cachedCanvases.getCanvas("transparent",s,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...dt(this.compositeCtx))}this.ctx.save(),Vu(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=dt(this.ctx)}executeOperatorList(e,t,n,r){const s=e.argsArray,o=e.fnArray;let a=t||0;const c=s.length;if(c===a)return a;const l=c-a>y0&&typeof n=="function",u=l?Date.now()+KA:0;let d=0;const h=this.commonObjs,f=this.objs;let b;for(;;){if(r!==void 0&&a===r.nextBreakPoint)return r.breakIt(a,n),a;if(b=o[a],b!==zn.dependency)this[b].apply(this,s[a]);else for(const g of s[a]){const y=g.startsWith("g_")?h:f;if(!y.has(g))return y.get(g,n),a}if(a++,a===c)return a;if(l&&++d>y0){if(Date.now()>u)return n(),a;d=0}}}endDrawing(){L(this,Jr,Kg).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),L(this,Jr,Zg).call(this)}_scaleImage(e,t){const n=e.width,r=e.height;let s=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),a=n,c=r,l="prescale1",u,d;for(;s>2&&a>1||o>2&&c>1;){let h=a,f=c;s>2&&a>1&&(h=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),s/=a/h),o>2&&c>1&&(f=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/f),u=this.cachedCanvases.getCanvas(l,h,f),d=u.context,d.clearRect(0,0,h,f),d.drawImage(e,0,0,a,c,0,0,h,f),e=u.canvas,a=h,c=f,l=l==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:c}}_createMaskCanvas(e){const t=this.ctx,{width:n,height:r}=e,s=this.current.fillColor,o=this.current.patternFill,a=dt(t);let c,l,u,d;if((e.bitmap||e.data)&&e.count>1){const N=e.bitmap||e.data.buffer;l=JSON.stringify(o?a:[a.slice(0,4),s]),c=this._cachedBitmapsMap.get(N),c||(c=new Map,this._cachedBitmapsMap.set(N,c));const R=c.get(l);if(R&&!o){const P=Math.round(Math.min(a[0],a[2])+a[4]),j=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:R,offsetX:P,offsetY:j}}u=R}u||(d=this.cachedCanvases.getCanvas("maskCanvas",n,r),_0(d.context,e));let h=Ue.transform(a,[1/n,0,0,-1/r,0,0]);h=Ue.transform(h,[1,0,0,1,0,-r]);const[f,b,g,y]=Ue.getAxialAlignedBoundingBox([0,0,n,r],h),v=Math.round(g-f)||1,x=Math.round(y-b)||1,D=this.cachedCanvases.getCanvas("fillCanvas",v,x),A=D.context,T=f,E=b;A.translate(-T,-E),A.transform(...h),u||(u=this._scaleImage(d.canvas,Ui(A)),u=u.img,c&&o&&c.set(l,u)),A.imageSmoothingEnabled=D0(dt(A),e.interpolate),Hu(A,u,0,0,u.width,u.height,0,0,n,r),A.globalCompositeOperation="source-in";const I=Ue.transform(Ui(A),[1,0,0,1,-T,-E]);return A.fillStyle=o?s.getPattern(t,this,I,Kt.FILL):s,A.fillRect(0,0,n,r),c&&!o&&(this.cachedCanvases.delete("fillCanvas"),c.set(l,D.canvas)),{canvas:D.canvas,offsetX:Math.round(T),offsetY:Math.round(E)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=tE[e]}setLineJoin(e){this.ctx.lineJoin=nE[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(e),n.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(n,e,t);this.suspendedCtx=this.ctx,this.ctx=r.context;const s=this.ctx;s.setTransform(...dt(this.suspendedCtx)),sc(this.suspendedCtx,s),ZA(s,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),sc(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,r){const s=r[0],o=r[1],a=r[2]-s,c=r[3]-o;a===0||c===0||(this.genericComposeSMask(t.context,n,a,c,t.subtype,t.backdrop,t.transferMap,s,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,r,s,o,a,c,l,u,d){let h=e.canvas,f=c-u,b=l-d;if(o){if(f<0||b<0||f+n>h.width||b+r>h.height){const y=this.cachedCanvases.getCanvas("maskExtension",n,r),v=y.context;v.drawImage(h,-f,-b),o.some(x=>x!==0)&&(v.globalCompositeOperation="destination-atop",v.fillStyle=Ue.makeHexColor(...o),v.fillRect(0,0,n,r),v.globalCompositeOperation="source-over"),h=y.canvas,f=b=0}else if(o.some(y=>y!==0)){e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const y=new Path2D;y.rect(f,b,n,r),e.clip(y),e.globalCompositeOperation="destination-atop",e.fillStyle=Ue.makeHexColor(...o),e.fillRect(f,b,n,r),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),s==="Alpha"&&a?t.filter=this.filterFactory.addAlphaFilter(a):s==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(a));const g=new Path2D;g.rect(c,l,n,r),t.clip(g),t.globalCompositeOperation="destination-in",t.drawImage(h,f,b,n,r,c,l,n,r),t.restore()}save(){this.inSMaskMode?(sc(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),sc(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,n,r,s,o){this.ctx.transform(e,t,n,r,s,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n){const r=this.ctx,s=this.current;let o=s.x,a=s.y,c,l;const u=dt(r),d=u[0]===0&&u[3]===0||u[1]===0&&u[2]===0,h=d?n.slice(0):null;for(let f=0,b=0,g=e.length;f<g;f++)switch(e[f]|0){case zn.rectangle:o=t[b++],a=t[b++];const y=t[b++],v=t[b++],x=o+y,D=a+v;r.moveTo(o,a),y===0||v===0?r.lineTo(x,D):(r.lineTo(x,a),r.lineTo(x,D),r.lineTo(o,D)),d||s.updateRectMinMax(u,[o,a,x,D]),r.closePath();break;case zn.moveTo:o=t[b++],a=t[b++],r.moveTo(o,a),d||s.updatePathMinMax(u,o,a);break;case zn.lineTo:o=t[b++],a=t[b++],r.lineTo(o,a),d||s.updatePathMinMax(u,o,a);break;case zn.curveTo:c=o,l=a,o=t[b+4],a=t[b+5],r.bezierCurveTo(t[b],t[b+1],t[b+2],t[b+3],o,a),s.updateCurvePathMinMax(u,c,l,t[b],t[b+1],t[b+2],t[b+3],o,a,h),b+=6;break;case zn.curveTo2:c=o,l=a,r.bezierCurveTo(o,a,t[b],t[b+1],t[b+2],t[b+3]),s.updateCurvePathMinMax(u,c,l,o,a,t[b],t[b+1],t[b+2],t[b+3],h),o=t[b+2],a=t[b+3],b+=4;break;case zn.curveTo3:c=o,l=a,o=t[b+2],a=t[b+3],r.bezierCurveTo(t[b],t[b+1],o,a,o,a),s.updateCurvePathMinMax(u,c,l,t[b],t[b+1],o,a,o,a,h),b+=4;break;case zn.closePath:r.closePath();break}d&&s.updateScalingPathMinMax(u,h),s.setCurrentPoint(o,a)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,n=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&(n!=null&&n.getPattern)?(t.save(),t.strokeStyle=n.getPattern(t,this,Ui(t),Kt.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,n=this.current.fillColor,r=this.current.patternFill;let s=!1;r&&(t.save(),t.fillStyle=n.getPattern(t,this,Ui(t),Kt.FILL),s=!0);const o=this.current.getClippedPathBoundingBox();this.contentVisible&&o!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),s&&t.restore(),e&&this.consumePath(o)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=iE}eoClip(){this.pendingClip=T0}beginText(){this.current.textMatrix=X1,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(const n of e)t.setTransform(...n.transform),t.translate(n.x,n.y),n.addToPath(t,n.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var u;const n=this.commonObjs.get(e),r=this.current;if(!n)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=n.fontMatrix||xg,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&Oe("Invalid font matrix for font "+e),t<0?(t=-t,r.fontDirection=-1):r.fontDirection=1,this.current.font=n,this.current.fontSize=t,n.isType3Font)return;const s=n.loadedName||"sans-serif",o=((u=n.systemFontInfo)==null?void 0:u.css)||`"${s}", ${n.fallbackName}`;let a="normal";n.black?a="900":n.bold&&(a="bold");const c=n.italic?"italic":"normal";let l=t;t<g0?l=g0:t>m0&&(l=m0),this.current.fontSizeScale=t/l,this.ctx.font=`${c} ${a} ${l}px ${o}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,n,r,s,o){this.current.textMatrix=[e,t,n,r,s,o],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,n,r){const s=this.ctx,o=this.current,a=o.font,c=o.textRenderingMode,l=o.fontSize/o.fontSizeScale,u=c&Ot.FILL_STROKE_MASK,d=!!(c&Ot.ADD_TO_PATH_FLAG),h=o.patternFill&&!a.missingFile;let f;(a.disableFontFace||d||h)&&(f=a.getPathGenerator(this.commonObjs,e)),a.disableFontFace||h?(s.save(),s.translate(t,n),s.beginPath(),f(s,l),r&&s.setTransform(...r),(u===Ot.FILL||u===Ot.FILL_STROKE)&&s.fill(),(u===Ot.STROKE||u===Ot.FILL_STROKE)&&s.stroke(),s.restore()):((u===Ot.FILL||u===Ot.FILL_STROKE)&&s.fillText(e,t,n),(u===Ot.STROKE||u===Ot.FILL_STROKE)&&s.strokeText(e,t,n)),d&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:dt(s),x:t,y:n,fontSize:l,addToPath:f})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){n=!0;break}return ze(this,"isFontSubpixelAAEnabled",n)}showText(e){const t=this.current,n=t.font;if(n.isType3Font)return this.showType3Text(e);const r=t.fontSize;if(r===0)return;const s=this.ctx,o=t.fontSizeScale,a=t.charSpacing,c=t.wordSpacing,l=t.fontDirection,u=t.textHScale*l,d=e.length,h=n.vertical,f=h?1:-1,b=n.defaultVMetrics,g=r*t.fontMatrix[0],y=t.textRenderingMode===Ot.FILL&&!n.disableFontFace&&!t.patternFill;s.save(),s.transform(...t.textMatrix),s.translate(t.x,t.y+t.textRise),l>0?s.scale(u,-1):s.scale(u,1);let v;if(t.patternFill){s.save();const E=t.fillColor.getPattern(s,this,Ui(s),Kt.FILL);v=dt(s),s.restore(),s.fillStyle=E}let x=t.lineWidth;const D=t.textMatrixScale;if(D===0||x===0){const E=t.textRenderingMode&Ot.FILL_STROKE_MASK;(E===Ot.STROKE||E===Ot.FILL_STROKE)&&(x=this.getSinglePixelWidth())}else x/=D;if(o!==1&&(s.scale(o,o),x/=o),s.lineWidth=x,n.isInvalidPDFjsFont){const E=[];let I=0;for(const N of e)E.push(N.unicode),I+=N.width;s.fillText(E.join(""),0,0),t.x+=I*g*u,s.restore(),this.compose();return}let A=0,T;for(T=0;T<d;++T){const E=e[T];if(typeof E=="number"){A+=f*E*r/1e3;continue}let I=!1;const N=(E.isSpace?c:0)+a,R=E.fontChar,P=E.accent;let j,U,B=E.width;if(h){const J=E.vmetric||b,q=-(E.vmetric?J[1]:B*.5)*g,O=J[2]*g;B=J?-J[0]:B,j=q/o,U=(A+O)/o}else j=A/o,U=0;if(n.remeasure&&B>0){const J=s.measureText(R).width*1e3/r*o;if(B<J&&this.isFontSubpixelAAEnabled){const q=B/J;I=!0,s.save(),s.scale(q,1),j/=q}else B!==J&&(j+=(B-J)/2e3*r/o)}if(this.contentVisible&&(E.isInFont||n.missingFile)){if(y&&!P)s.fillText(R,j,U);else if(this.paintChar(R,j,U,v),P){const J=j+r*P.offset.x/o,q=U-r*P.offset.y/o;this.paintChar(P.fontChar,J,q,v)}}const S=h?B*g-N*l:B*g+N*l;A+=S,I&&s.restore()}h?t.y-=A:t.x+=A*u,s.restore(),this.compose()}showType3Text(e){const t=this.ctx,n=this.current,r=n.font,s=n.fontSize,o=n.fontDirection,a=r.vertical?1:-1,c=n.charSpacing,l=n.wordSpacing,u=n.textHScale*o,d=n.fontMatrix||xg,h=e.length,f=n.textRenderingMode===Ot.INVISIBLE;let b,g,y,v;if(!(f||s===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...n.textMatrix),t.translate(n.x,n.y),t.scale(u,o),b=0;b<h;++b){if(g=e[b],typeof g=="number"){v=a*g*s/1e3,this.ctx.translate(v,0),n.x+=v*u;continue}const x=(g.isSpace?l:0)+c,D=r.charProcOperatorList[g.operatorListId];if(!D){Oe(`Type3 character "${g.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=g,this.save(),t.scale(s,s),t.transform(...d),this.executeOperatorList(D),this.restore()),y=Ue.applyTransform([g.width,0],d)[0]*s+x,t.translate(y,0),n.x+=y*u}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,n,r,s,o){this.ctx.rect(n,r,s-n,o-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const n=e[1],r=this.baseTransform||dt(this.ctx),s={createCanvasGraphics:o=>new s0(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new Jg(e,n,this.ctx,s,r)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,n){const r=Ue.makeHexColor(e,t,n);this.ctx.strokeStyle=r,this.current.strokeColor=r}setFillRGBColor(e,t,n){const r=Ue.makeHexColor(e,t,n);this.ctx.fillStyle=r,this.current.fillColor=r,this.current.patternFill=!1}_getPattern(e,t=null){let n;return this.cachedPatterns.has(e)?n=this.cachedPatterns.get(e):(n=YA(this.getObject(e)),this.cachedPatterns.set(e,n)),t&&(n.matrix=t),n}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const n=this._getPattern(e);t.fillStyle=n.getPattern(t,this,Ui(t),Kt.SHADING);const r=Ui(t);if(r){const{width:s,height:o}=t.canvas,[a,c,l,u]=Ue.getAxialAlignedBoundingBox([0,0,s,o],r);this.ctx.fillRect(a,c,l-a,u-c)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){nt("Should not call beginInlineImage")}beginImageData(){nt("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=dt(this.ctx),t)){const n=t[2]-t[0],r=t[3]-t[1];this.ctx.rect(t[0],t[1],n,r),this.current.updateRectMinMax(dt(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||Yh("TODO: Support non-isolated groups."),e.knockout&&Oe("Knockout groups not supported.");const n=dt(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=Ue.getAxialAlignedBoundingBox(e.bbox,dt(t));const s=[0,0,t.canvas.width,t.canvas.height];r=Ue.intersect(r,s)||[0,0,0,0];const o=Math.floor(r[0]),a=Math.floor(r[1]),c=Math.max(Math.ceil(r[2])-o,1),l=Math.max(Math.ceil(r[3])-a,1);this.current.startNewPathAndClipBox([0,0,c,l]);let u="groupAt"+this.groupLevel;e.smask&&(u+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(u,c,l),h=d.context;h.translate(-o,-a),h.transform(...n),e.smask?this.smaskStack.push({canvas:d.canvas,context:h,offsetX:o,offsetY:a,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(o,a),t.save()),sc(t,h),this.ctx=h,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=dt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const s=Ue.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],r);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(s)}}beginAnnotation(e,t,n,r,s){if(L(this,Jr,Kg).call(this),Vu(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const o=t[2]-t[0],a=t[3]-t[1];if(s&&this.annotationCanvasMap){n=n.slice(),n[4]-=t[0],n[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=o,t[3]=a;const[c,l]=Ue.singularValueDecompose2dScale(dt(this.ctx)),{viewportScale:u}=this,d=Math.ceil(o*this.outputScaleX*u),h=Math.ceil(a*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(d,h);const{canvas:f,context:b}=this.annotationCanvas;this.annotationCanvasMap.set(e,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=b,this.ctx.save(),this.ctx.setTransform(c,0,0,-l,0,a*l),Vu(this.ctx)}else Vu(this.ctx),this.ctx.rect(t[0],t[1],o,a),this.ctx.clip(),this.endPath()}this.current=new v0(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),L(this,Jr,Zg).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const n=this.ctx,r=this.processingType3;if(r&&(r.compiled===void 0&&(r.compiled=eE(e)),r.compiled)){r.compiled(n);return}const s=this._createMaskCanvas(e),o=s.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(o,s.offsetX,s.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n=0,r=0,s,o){if(!this.contentVisible)return;e=this.getObject(e.data,e);const a=this.ctx;a.save();const c=dt(a);a.transform(t,n,r,s,0,0);const l=this._createMaskCanvas(e);a.setTransform(1,0,0,1,l.offsetX-c[4],l.offsetY-c[5]);for(let u=0,d=o.length;u<d;u+=2){const h=Ue.transform(c,[t,n,r,s,o[u],o[u+1]]),[f,b]=Ue.applyTransform([0,0],h);a.drawImage(l.canvas,f,b)}a.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,n=this.current.fillColor,r=this.current.patternFill;for(const s of e){const{data:o,width:a,height:c,transform:l}=s,u=this.cachedCanvases.getCanvas("maskCanvas",a,c),d=u.context;d.save();const h=this.getObject(o,s);_0(d,h),d.globalCompositeOperation="source-in",d.fillStyle=r?n.getPattern(d,this,Ui(t),Kt.FILL):n,d.fillRect(0,0,a,c),d.restore(),t.save(),t.transform(...l),t.scale(1,-1),Hu(t,u.canvas,0,0,a,c,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){Oe("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,n,r){if(!this.contentVisible)return;const s=this.getObject(e);if(!s){Oe("Dependent image isn't ready yet");return}const o=s.width,a=s.height,c=[];for(let l=0,u=r.length;l<u;l+=2)c.push({transform:[t,0,0,n,r[l],r[l+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(s,c)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:r}=e,s=this.cachedCanvases.getCanvas("inlineImage",n,r),o=s.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",s.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,n=e.height,r=this.ctx;if(this.save(),!Ht){const{filter:a}=r;a!=="none"&&a!==""&&(r.filter="none")}r.scale(1/t,-1/n);let s;if(e.bitmap)s=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)s=e;else{const c=this.cachedCanvases.getCanvas("inlineImage",t,n).context;x0(c,e),s=this.applyTransferMapsToCanvas(c)}const o=this._scaleImage(s,Ui(r));r.imageSmoothingEnabled=D0(dt(r),e.interpolate),Hu(r,o.img,0,0,o.paintWidth,o.paintHeight,0,-n,t,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const s=e.width,o=e.height,c=this.cachedCanvases.getCanvas("inlineImage",s,o).context;x0(c,e),r=this.applyTransferMapsToCanvas(c)}for(const s of t)n.save(),n.transform(...s.transform),n.scale(1,-1),Hu(n,r,s.x,s.y,s.w,s.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const n=this.ctx;this.pendingClip&&(t||(this.pendingClip===T0?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=dt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:r,d:s}=this.ctx.getTransform();let o,a;if(n===0&&r===0){const c=Math.abs(t),l=Math.abs(s);if(c===l)if(e===0)o=a=1/c;else{const u=c*e;o=a=u<1?1/u:1}else if(e===0)o=1/c,a=1/l;else{const u=c*e,d=l*e;o=u<1?1/u:1,a=d<1?1/d:1}}else{const c=Math.abs(t*s-n*r),l=Math.hypot(t,n),u=Math.hypot(r,s);if(e===0)o=u/c,a=l/c;else{const d=e*c;o=u>d?u/d:1,a=l>d?l/d:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:n}=this.current,[r,s]=this.getScaleForStroking();if(t.lineWidth=n||1,r===1&&s===1){t.stroke();return}const o=t.getLineDash();if(e&&t.save(),t.scale(r,s),o.length>0){const a=Math.max(r,s);t.setLineDash(o.map(c=>c/a)),t.lineDashOffset/=a}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Jr=new WeakSet,Kg=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Zg=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}};let Ho=s0;for(const i in zn)Ho.prototype[i]!==void 0&&(Ho.prototype[zn[i]]=Ho.prototype[i]);var El,wl;class cr{static get workerPort(){return p(this,El)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");M(this,El,e)}static get workerSrc(){return p(this,wl)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");M(this,wl,e)}}El=new WeakMap,wl=new WeakMap,W(cr,El,null),W(cr,wl,"");const Gu={UNKNOWN:0,DATA:1,ERROR:2},mt={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function pn(i){switch(i instanceof Error||typeof i=="object"&&i!==null||nt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new To(i.message);case"MissingPDFException":return new Do(i.message);case"PasswordException":return new Dg(i.message,i.code);case"UnexpectedResponseException":return new Jh(i.message,i.status);case"UnknownErrorException":return new Tg(i.message,i.details);default:return new Tg(i.message,i.toString())}}var Ei,S2,U2,dd;class wc{constructor(e,t,n){W(this,Ei);this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=r=>{const s=r.data;if(s.targetName!==this.sourceName)return;if(s.stream){L(this,Ei,U2).call(this,s);return}if(s.callback){const a=s.callbackId,c=this.callbackCapabilities[a];if(!c)throw new Error(`Cannot resolve callback ${a}`);if(delete this.callbackCapabilities[a],s.callback===Gu.DATA)c.resolve(s.data);else if(s.callback===Gu.ERROR)c.reject(pn(s.reason));else throw new Error("Unexpected callback case");return}const o=this.actionHandler[s.action];if(!o)throw new Error(`Unknown action from worker: ${s.action}`);if(s.callbackId){const a=this.sourceName,c=s.sourceName;new Promise(function(l){l(o(s.data))}).then(function(l){n.postMessage({sourceName:a,targetName:c,callback:Gu.DATA,callbackId:s.callbackId,data:l})},function(l){n.postMessage({sourceName:a,targetName:c,callback:Gu.ERROR,callbackId:s.callbackId,reason:pn(l)})});return}if(s.streamId){L(this,Ei,S2).call(this,s);return}o(s.data)},n.addEventListener("message",this._onComObjOnMessage)}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const r=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[r]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},n)}catch(o){s.reject(o)}return s.promise}sendWithStream(e,t,n,r){const s=this.streamId++,o=this.sourceName,a=this.targetName,c=this.comObj;return new ReadableStream({start:l=>{const u=Promise.withResolvers();return this.streamControllers[s]={controller:l,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:a,action:e,streamId:s,data:t,desiredSize:l.desiredSize},r),u.promise},pull:l=>{const u=Promise.withResolvers();return this.streamControllers[s].pullCall=u,c.postMessage({sourceName:o,targetName:a,stream:mt.PULL,streamId:s,desiredSize:l.desiredSize}),u.promise},cancel:l=>{Tt(l instanceof Error,"cancel must have a valid reason");const u=Promise.withResolvers();return this.streamControllers[s].cancelCall=u,this.streamControllers[s].isClosed=!0,c.postMessage({sourceName:o,targetName:a,stream:mt.CANCEL,streamId:s,reason:pn(l)}),u.promise}},n)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}Ei=new WeakSet,S2=function(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,s=this.comObj,o=this,a=this.actionHandler[e.action],c={enqueue(l,u=1,d){if(this.isCancelled)return;const h=this.desiredSize;this.desiredSize-=u,h>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:n,targetName:r,stream:mt.ENQUEUE,streamId:t,chunk:l},d)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:r,stream:mt.CLOSE,streamId:t}),delete o.streamSinks[t])},error(l){Tt(l instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:r,stream:mt.ERROR,streamId:t,reason:pn(l)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[t]=c,new Promise(function(l){l(a(e.data,c))}).then(function(){s.postMessage({sourceName:n,targetName:r,stream:mt.START_COMPLETE,streamId:t,success:!0})},function(l){s.postMessage({sourceName:n,targetName:r,stream:mt.START_COMPLETE,streamId:t,reason:pn(l)})})},U2=function(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,s=this.comObj,o=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case mt.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(pn(e.reason));break;case mt.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(pn(e.reason));break;case mt.PULL:if(!a){s.postMessage({sourceName:n,targetName:r,stream:mt.PULL_COMPLETE,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,new Promise(function(c){var l;c((l=a.onPull)==null?void 0:l.call(a))}).then(function(){s.postMessage({sourceName:n,targetName:r,stream:mt.PULL_COMPLETE,streamId:t,success:!0})},function(c){s.postMessage({sourceName:n,targetName:r,stream:mt.PULL_COMPLETE,streamId:t,reason:pn(c)})});break;case mt.ENQUEUE:if(Tt(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case mt.CLOSE:if(Tt(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),L(this,Ei,dd).call(this,o,t);break;case mt.ERROR:Tt(o,"error should have stream controller"),o.controller.error(pn(e.reason)),L(this,Ei,dd).call(this,o,t);break;case mt.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(pn(e.reason)),L(this,Ei,dd).call(this,o,t);break;case mt.CANCEL:if(!a)break;new Promise(function(c){var l;c((l=a.onCancel)==null?void 0:l.call(a,pn(e.reason)))}).then(function(){s.postMessage({sourceName:n,targetName:r,stream:mt.CANCEL_COMPLETE,streamId:t,success:!0})},function(c){s.postMessage({sourceName:n,targetName:r,stream:mt.CANCEL_COMPLETE,streamId:t,reason:pn(c)})}),a.sinkCapability.reject(pn(e.reason)),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},dd=async function(e,t){var n,r,s;await Promise.allSettled([(n=e.startCall)==null?void 0:n.promise,(r=e.pullCall)==null?void 0:r.promise,(s=e.cancelCall)==null?void 0:s.promise]),delete this.streamControllers[t]};var Ns,Cl;class rE{constructor({parsedData:e,rawData:t}){W(this,Ns);W(this,Cl);M(this,Ns,e),M(this,Cl,t)}getRaw(){return p(this,Cl)}get(e){return p(this,Ns).get(e)??null}getAll(){return Zm(p(this,Ns))}has(e){return p(this,Ns).has(e)}}Ns=new WeakMap,Cl=new WeakMap;const _r=Symbol("INTERNAL");var Sl,Ul,Il,aa;class sE{constructor(e,{name:t,intent:n,usage:r}){W(this,Sl,!1);W(this,Ul,!1);W(this,Il,!1);W(this,aa,!0);M(this,Sl,!!(e&kn.DISPLAY)),M(this,Ul,!!(e&kn.PRINT)),this.name=t,this.intent=n,this.usage=r}get visible(){if(p(this,Il))return p(this,aa);if(!p(this,aa))return!1;const{print:e,view:t}=this.usage;return p(this,Sl)?(t==null?void 0:t.viewState)!=="OFF":p(this,Ul)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,n=!1){e!==_r&&nt("Internal method `_setVisible` called."),M(this,Il,n),M(this,aa,t)}}Sl=new WeakMap,Ul=new WeakMap,Il=new WeakMap,aa=new WeakMap;var Ur,tt,ca,la,Rl,Qg;class oE{constructor(e,t=kn.DISPLAY){W(this,Rl);W(this,Ur,null);W(this,tt,new Map);W(this,ca,null);W(this,la,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,M(this,la,e.order);for(const n of e.groups)p(this,tt).set(n.id,new sE(t,n));if(e.baseState==="OFF")for(const n of p(this,tt).values())n._setVisible(_r,!1);for(const n of e.on)p(this,tt).get(n)._setVisible(_r,!0);for(const n of e.off)p(this,tt).get(n)._setVisible(_r,!1);M(this,ca,this.getHash())}}isVisible(e){if(p(this,tt).size===0)return!0;if(!e)return Yh("Optional content group not defined."),!0;if(e.type==="OCG")return p(this,tt).has(e.id)?p(this,tt).get(e.id).visible:(Oe(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return L(this,Rl,Qg).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!p(this,tt).has(t))return Oe(`Optional content group not found: ${t}`),!0;if(p(this,tt).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!p(this,tt).has(t))return Oe(`Optional content group not found: ${t}`),!0;if(!p(this,tt).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!p(this,tt).has(t))return Oe(`Optional content group not found: ${t}`),!0;if(!p(this,tt).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!p(this,tt).has(t))return Oe(`Optional content group not found: ${t}`),!0;if(p(this,tt).get(t).visible)return!1}return!0}return Oe(`Unknown optional content policy ${e.policy}.`),!0}return Oe(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0){const n=p(this,tt).get(e);if(!n){Oe(`Optional content group not found: ${e}`);return}n._setVisible(_r,!!t,!0),M(this,Ur,null)}setOCGState({state:e,preserveRB:t}){let n;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":n=r;continue}const s=p(this,tt).get(r);if(s)switch(n){case"ON":s._setVisible(_r,!0);break;case"OFF":s._setVisible(_r,!1);break;case"Toggle":s._setVisible(_r,!s.visible);break}}M(this,Ur,null)}get hasInitialVisibility(){return p(this,ca)===null||this.getHash()===p(this,ca)}getOrder(){return p(this,tt).size?p(this,la)?p(this,la).slice():[...p(this,tt).keys()]:null}getGroups(){return p(this,tt).size>0?Zm(p(this,tt)):null}getGroup(e){return p(this,tt).get(e)||null}getHash(){if(p(this,Ur)!==null)return p(this,Ur);const e=new A2;for(const[t,n]of p(this,tt))e.update(`${t}:${n.visible}`);return M(this,Ur,e.hexdigest())}}Ur=new WeakMap,tt=new WeakMap,ca=new WeakMap,la=new WeakMap,Rl=new WeakSet,Qg=function(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let r=1;r<t;r++){const s=e[r];let o;if(Array.isArray(s))o=L(this,Rl,Qg).call(this,s);else if(p(this,tt).has(s))o=p(this,tt).get(s).visible;else return Oe(`Optional content group not found: ${s}`),!0;switch(n){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return n==="And"};class aE{constructor(e,{disableRange:t=!1,disableStream:n=!1}){Tt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:s,progressiveDone:o,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(s==null?void 0:s.length)>0){const c=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,l)=>{this._onReceiveData({begin:c,chunk:l})}),e.addProgressListener((c,l)=>{this._onProgress({loaded:c,total:l})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const r=this._rangeReaders.some(function(s){return s._begin!==e?!1:(s._enqueue(n),!0)});Tt(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,n,r,s;e.total===void 0?(n=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||n.call(t,{loaded:e.loaded}):(s=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||s.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Tt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new cE(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new lE(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class cE{constructor(e,t,n=!1,r=null){this._stream=e,this._done=n||!1,this._filename=iy(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class lE{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function uE(i){let e=!0,t=n("filename\\*","i").exec(i);if(t){t=t[1];let u=a(t);return u=unescape(u),u=c(u),u=l(u),s(u)}if(t=o(i),t){const u=l(t);return s(u)}if(t=n("filename","i").exec(i),t){t=t[1];let u=a(t);return u=l(u),s(u)}function n(u,d){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function r(u,d){if(u){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const h=new TextDecoder(u,{fatal:!0}),f=Kh(d);d=h.decode(f),e=!1}catch{}}return d}function s(u){return e&&/[\x80-\xff]/.test(u)&&(u=r("utf-8",u),e&&(u=r("iso-8859-1",u))),u}function o(u){const d=[];let h;const f=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(h=f.exec(u))!==null;){let[,g,y,v]=h;if(g=parseInt(g,10),g in d){if(g===0)break;continue}d[g]=[y,v]}const b=[];for(let g=0;g<d.length&&g in d;++g){let[y,v]=d[g];v=a(v),y&&(v=unescape(v),g===0&&(v=c(v))),b.push(v)}return b.join("")}function a(u){if(u.startsWith('"')){const d=u.slice(1).split('\\"');for(let h=0;h<d.length;++h){const f=d[h].indexOf('"');f!==-1&&(d[h]=d[h].slice(0,f),d.length=h+1),d[h]=d[h].replaceAll(/\\(.)/g,"$1")}u=d.join('"')}return u}function c(u){const d=u.indexOf("'");if(d===-1)return u;const h=u.slice(0,d),b=u.slice(d+1).replace(/^[^']*'/,"");return r(h,b)}function l(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,h,f,b){if(f==="q"||f==="Q")return b=b.replaceAll("_"," "),b=b.replaceAll(/=([0-9a-fA-F]{2})/g,function(g,y){return String.fromCharCode(parseInt(y,16))}),r(h,b);try{b=atob(b)}catch{}return r(h,b)})}return""}function oy({getResponseHeader:i,isHttp:e,rangeChunkSize:t,disableRange:n}){const r={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(i("Content-Length"),10);return!Number.isInteger(s)||(r.suggestedLength=s,s<=2*t)||n||!e||i("Accept-Ranges")!=="bytes"||(i("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function ay(i){const e=i("Content-Disposition");if(e){let t=uE(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(iy(t))return t}return null}function rf(i,e){return i===404||i===0&&e.startsWith("file:")?new Do('Missing PDF "'+e+'".'):new Jh(`Unexpected server response (${i}) while retrieving PDF "${e}".`,i)}function I2(i){return i===200||i===206}function R2(i,e,t){return{method:"GET",headers:i,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function F2(i){const e=new Headers;for(const t in i){const n=i[t];n!==void 0&&e.append(t,n)}return e}function N2(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(Oe(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class A0{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Tt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new dE(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new hE(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class dE{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._headers=F2(this._stream.httpHeaders);const n=t.url;fetch(n,R2(this._headers,this._withCredentials,this._abortController)).then(r=>{if(!I2(r.status))throw rf(r.status,n);this._reader=r.body.getReader(),this._headersCapability.resolve();const s=c=>r.headers.get(c),{allowRangeRequests:o,suggestedLength:a}=oy({getResponseHeader:s,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=a||this._contentLength,this._filename=ay(s),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new To("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:N2(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class hE{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController,this._headers=F2(this._stream.httpHeaders),this._headers.append("Range",`bytes=${t}-${n-1}`);const s=r.url;fetch(s,R2(this._headers,this._withCredentials,this._abortController)).then(o=>{if(!I2(o.status))throw rf(o.status,s);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:N2(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const qf=200,Hf=206;function fE(i){const e=i.response;return typeof e!="string"?e:Kh(e).buffer}class pE{constructor(e,t={}){this.url=e,this.isHttp=/^https?:/i.test(e),this.httpHeaders=this.isHttp&&t.httpHeaders||Object.create(null),this.withCredentials=t.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,n){const r={begin:e,end:t};for(const s in n)r[s]=n[s];return this.request(r)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,r=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const s in this.httpHeaders){const o=this.httpHeaders[s];o!==void 0&&t.setRequestHeader(s,o)}return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=Hf):r.expectedStatus=qf,t.responseType="arraybuffer",e.onError&&(t.onerror=function(s){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var r;const n=this.pendingRequests[e];n&&((r=n.onProgress)==null||r.call(n,t))}onStateChange(e,t){var c,l,u;const n=this.pendingRequests[e];if(!n)return;const r=n.xhr;if(r.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){(c=n.onError)==null||c.call(n,r.status);return}const s=r.status||qf;if(!(s===qf&&n.expectedStatus===Hf)&&s!==n.expectedStatus){(l=n.onError)==null||l.call(n,r.status);return}const a=fE(r);if(s===Hf){const d=r.getResponseHeader("Content-Range"),h=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);n.onDone({begin:parseInt(h[1],10),chunk:a})}else a?n.onDone({begin:0,chunk:a}):(u=n.onError)==null||u.call(n,r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class gE{constructor(e){this._source=e,this._manager=new pE(e.url,{httpHeaders:e.httpHeaders,withCredentials:e.withCredentials}),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Tt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new mE(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new yE(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class mE{constructor(e,t){this._manager=e;const n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(n),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),n=o=>t.getResponseHeader(o),{allowRangeRequests:r,suggestedLength:s}=oy({getResponseHeader:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=ay(n),this._isRangeSupported&&this._manager.abortRequest(e),this._headersReceivedCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=rf(e,this._url),this._headersReceivedCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersReceivedCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class yE{constructor(e,t,n){this._manager=e;const r={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,n,r),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=rf(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const k2=/^file:\/\/\/[a-zA-Z]:\//;function bE(i){const e=wi.get("url"),t=e.parse(i);return t.protocol==="file:"||t.host?t:/^[a-z]:[/\\]/i.test(i)?e.parse(`file:///${i}`):(t.host||(t.protocol="file:"),t)}class vE{constructor(e){this.source=e,this.url=bE(e.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Tt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new DE(this):new xE(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=this.isFsUrl?new TE(this,e,t):new _E(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class M2{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new To("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class P2{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function oh(i,e){return{protocol:i.protocol,auth:i.auth,host:i.hostname,port:i.port,path:i.path,method:"GET",headers:e}}class xE extends M2{constructor(e){super(e);const t=n=>{if(n.statusCode===404){const a=new Do(`Missing PDF "${this._url}".`);this._storedError=a,this._headersCapability.reject(a);return}this._headersCapability.resolve(),this._setReadableStream(n);const r=a=>this._readableStream.headers[a.toLowerCase()],{allowRangeRequests:s,suggestedLength:o}=oy({getResponseHeader:r,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=s,this._contentLength=o||this._contentLength,this._filename=ay(r)};if(this._request=null,this._url.protocol==="http:"){const n=wi.get("http");this._request=n.request(oh(this._url,e.httpHeaders),t)}else{const n=wi.get("https");this._request=n.request(oh(this._url,e.httpHeaders),t)}this._request.on("error",n=>{this._storedError=n,this._headersCapability.reject(n)}),this._request.end()}}class _E extends P2{constructor(e,t,n){super(e),this._httpHeaders={};for(const s in e.httpHeaders){const o=e.httpHeaders[s];o!==void 0&&(this._httpHeaders[s]=o)}this._httpHeaders.Range=`bytes=${t}-${n-1}`;const r=s=>{if(s.statusCode===404){const o=new Do(`Missing PDF "${this._url}".`);this._storedError=o;return}this._setReadableStream(s)};if(this._request=null,this._url.protocol==="http:"){const s=wi.get("http");this._request=s.request(oh(this._url,this._httpHeaders),r)}else{const s=wi.get("https");this._request=s.request(oh(this._url,this._httpHeaders),r)}this._request.on("error",s=>{this._storedError=s}),this._request.end()}}class DE extends M2{constructor(e){super(e);let t=decodeURIComponent(this._url.path);k2.test(this._url.href)&&(t=t.replace(/^\//,""));const n=wi.get("fs");n.promises.lstat(t).then(r=>{this._contentLength=r.size,this._setReadableStream(n.createReadStream(t)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=new Do(`Missing PDF "${t}".`)),this._storedError=r,this._headersCapability.reject(r)})}}class TE extends P2{constructor(e,t,n){super(e);let r=decodeURIComponent(this._url.path);k2.test(this._url.href)&&(r=r.replace(/^\//,""));const s=wi.get("fs");this._setReadableStream(s.createReadStream(r,{start:t,end:n-1}))}}const AE=1e5,nn=30,EE=.8;var z1,Ir,sn,Fl,Nl,ks,Xi,kl,Ml,Ms,ua,da,Rr,ha,Pl,fa,Ps,Ll,Bl,Ls,Bs,pa,pr,L2,B2,em,zr,hd,O2;const Vn=class Vn{constructor({textContentSource:e,container:t,viewport:n}){W(this,pr);W(this,Ir,Promise.withResolvers());W(this,sn,null);W(this,Fl,!1);W(this,Nl,!!((z1=globalThis.FontInspector)!=null&&z1.enabled));W(this,ks,null);W(this,Xi,null);W(this,kl,0);W(this,Ml,0);W(this,Ms,null);W(this,ua,null);W(this,da,0);W(this,Rr,0);W(this,ha,Object.create(null));W(this,Pl,[]);W(this,fa,null);W(this,Ps,[]);W(this,Ll,new WeakMap);W(this,Bl,null);if(e instanceof ReadableStream)M(this,fa,e);else if(typeof e=="object")M(this,fa,new ReadableStream({start(c){c.enqueue(e),c.close()}}));else throw new Error('No "textContentSource" parameter specified.');M(this,sn,M(this,ua,t)),M(this,Rr,n.scale*(globalThis.devicePixelRatio||1)),M(this,da,n.rotation),M(this,Xi,{prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:s,pageX:o,pageY:a}=n.rawDims;M(this,Bl,[1,0,0,-1,-o,a+s]),M(this,Ml,r),M(this,kl,s),go(t,n),p(this,Ir).promise.catch(()=>{}).then(()=>{p(Vn,pa).delete(this),M(this,Xi,null),M(this,ha,null)})}render(){const e=()=>{p(this,Ms).read().then(({value:t,done:n})=>{if(n){p(this,Ir).resolve();return}p(this,ks)??M(this,ks,t.lang),Object.assign(p(this,ha),t.styles),L(this,pr,L2).call(this,t.items),e()},p(this,Ir).reject)};return M(this,Ms,p(this,fa).getReader()),p(Vn,pa).add(this),e(),p(this,Ir).promise}update({viewport:e,onBefore:t=null}){var s;const n=e.scale*(globalThis.devicePixelRatio||1),r=e.rotation;if(r!==p(this,da)&&(t==null||t(),M(this,da,r),go(p(this,ua),{rotation:r})),n!==p(this,Rr)){t==null||t(),M(this,Rr,n);const o={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:L(s=Vn,zr,hd).call(s,p(this,ks))};for(const a of p(this,Ps))o.properties=p(this,Ll).get(a),o.div=a,L(this,pr,em).call(this,o)}}cancel(){var t;const e=new To("TextLayer task cancelled.");(t=p(this,Ms))==null||t.cancel(e).catch(()=>{}),M(this,Ms,null),p(this,Ir).reject(e)}get textDivs(){return p(this,Ps)}get textContentItemsStr(){return p(this,Pl)}static cleanup(){if(!(p(this,pa).size>0)){p(this,Ls).clear();for(const{canvas:e}of p(this,Bs).values())e.remove();p(this,Bs).clear()}}};Ir=new WeakMap,sn=new WeakMap,Fl=new WeakMap,Nl=new WeakMap,ks=new WeakMap,Xi=new WeakMap,kl=new WeakMap,Ml=new WeakMap,Ms=new WeakMap,ua=new WeakMap,da=new WeakMap,Rr=new WeakMap,ha=new WeakMap,Pl=new WeakMap,fa=new WeakMap,Ps=new WeakMap,Ll=new WeakMap,Bl=new WeakMap,Ls=new WeakMap,Bs=new WeakMap,pa=new WeakMap,pr=new WeakSet,L2=function(e){var r,s;if(p(this,Fl))return;(s=p(this,Xi)).ctx||(s.ctx=L(r=Vn,zr,hd).call(r,p(this,ks)));const t=p(this,Ps),n=p(this,Pl);for(const o of e){if(t.length>AE){Oe("Ignoring additional textDivs for performance reasons."),M(this,Fl,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=p(this,sn);M(this,sn,document.createElement("span")),p(this,sn).classList.add("markedContent"),o.id!==null&&p(this,sn).setAttribute("id",`${o.id}`),a.append(p(this,sn))}else o.type==="endMarkedContent"&&M(this,sn,p(this,sn).parentNode);continue}n.push(o.str),L(this,pr,B2).call(this,o)}},B2=function(e){var g;const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};p(this,Ps).push(t);const r=Ue.transform(p(this,Bl),e.transform);let s=Math.atan2(r[1],r[0]);const o=p(this,ha)[e.fontName];o.vertical&&(s+=Math.PI/2);const a=p(this,Nl)&&o.fontSubstitution||o.fontFamily,c=Math.hypot(r[2],r[3]),l=c*L(g=Vn,zr,O2).call(g,a,p(this,ks));let u,d;s===0?(u=r[4],d=r[5]-l):(u=r[4]+l*Math.sin(s),d=r[5]-l*Math.cos(s));const h="calc(var(--scale-factor)*",f=t.style;p(this,sn)===p(this,ua)?(f.left=`${(100*u/p(this,Ml)).toFixed(2)}%`,f.top=`${(100*d/p(this,kl)).toFixed(2)}%`):(f.left=`${h}${u.toFixed(2)}px)`,f.top=`${h}${d.toFixed(2)}px)`),f.fontSize=`${h}${c.toFixed(2)}px)`,f.fontFamily=a,n.fontSize=c,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,p(this,Nl)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),s!==0&&(n.angle=s*(180/Math.PI));let b=!1;if(e.str.length>1)b=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const y=Math.abs(e.transform[0]),v=Math.abs(e.transform[3]);y!==v&&Math.max(y,v)/Math.min(y,v)>1.5&&(b=!0)}if(b&&(n.canvasWidth=o.vertical?e.height:e.width),p(this,Ll).set(t,n),p(this,Xi).div=t,p(this,Xi).properties=n,L(this,pr,em).call(this,p(this,Xi)),n.hasText&&p(this,sn).append(t),n.hasEOL){const y=document.createElement("br");y.setAttribute("role","presentation"),p(this,sn).append(y)}},em=function(e){const{div:t,properties:n,ctx:r,prevFontSize:s,prevFontFamily:o}=e,{style:a}=t;let c="";if(n.canvasWidth!==0&&n.hasText){const{fontFamily:l}=a,{canvasWidth:u,fontSize:d}=n;(s!==d||o!==l)&&(r.font=`${d*p(this,Rr)}px ${l}`,e.prevFontSize=d,e.prevFontFamily=l);const{width:h}=r.measureText(t.textContent);h>0&&(c=`scaleX(${u*p(this,Rr)/h})`)}n.angle!==0&&(c=`rotate(${n.angle}deg) ${c}`),c.length>0&&(a.transform=c)},zr=new WeakSet,hd=function(e=null){let t=p(this,Bs).get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1}),p(this,Bs).set(e,t)}return t},O2=function(e,t){const n=p(this,Ls).get(e);if(n)return n;const r=L(this,zr,hd).call(this,t),s=r.font;r.canvas.width=r.canvas.height=nn,r.font=`${nn}px ${e}`;const o=r.measureText("");let a=o.fontBoundingBoxAscent,c=Math.abs(o.fontBoundingBoxDescent);if(a){const d=a/(a+c);return p(this,Ls).set(e,d),r.canvas.width=r.canvas.height=0,r.font=s,d}r.strokeStyle="red",r.clearRect(0,0,nn,nn),r.strokeText("g",0,0);let l=r.getImageData(0,0,nn,nn).data;c=0;for(let d=l.length-1-3;d>=0;d-=4)if(l[d]>0){c=Math.ceil(d/4/nn);break}r.clearRect(0,0,nn,nn),r.strokeText("A",0,nn),l=r.getImageData(0,0,nn,nn).data,a=0;for(let d=0,h=l.length;d<h;d+=4)if(l[d]>0){a=nn-Math.floor(d/4/nn);break}r.canvas.width=r.canvas.height=0,r.font=s;const u=a?a/(a+c):EE;return p(this,Ls).set(e,u),u},W(Vn,zr),W(Vn,Ls,new Map),W(Vn,Bs,new Map),W(Vn,pa,new Set);let Xa=Vn;function wE(){e2("`renderTextLayer`, please use `TextLayer` instead.");const{textContentSource:i,container:e,viewport:t,...n}=arguments[0],r=Object.keys(n);r.length>0&&Oe("Ignoring `renderTextLayer` parameters: "+r.join(", "));const s=new Xa({textContentSource:i,container:e,viewport:t}),{textDivs:o,textContentItemsStr:a}=s;return{promise:s.render(),textDivs:o,textContentItemsStr:a}}function CE(){e2("`updateTextLayer`, please use `TextLayer` instead.")}class qc{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function r(s){var c;if(!s)return;let o=null;const a=s.name;if(a==="#text")o=s.value;else if(qc.shouldBuildText(a))(c=s==null?void 0:s.attributes)!=null&&c.textContent?o=s.attributes.textContent:s.value&&(o=s.value);else return;if(o!==null&&t.push({str:o}),!!s.children)for(const l of s.children)r(l)}return r(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const SE=65536,UE=100,IE=5e3,RE=Ht?HA:UA,FE=Ht?VA:Z1,NE=Ht?qA:SA,kE=Ht?GA:Q1;function ME(i){if(typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i}),typeof i!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!i.url&&!i.data&&!i.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const e=new tm,{docId:t}=e,n=i.url?PE(i.url):null,r=i.data?LE(i.data):null,s=i.httpHeaders||null,o=i.withCredentials===!0,a=i.password??null,c=i.range instanceof W2?i.range:null,l=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:SE;let u=i.worker instanceof Vo?i.worker:null;const d=i.verbosity,h=typeof i.docBaseUrl=="string"&&!ny(i.docBaseUrl)?i.docBaseUrl:null,f=typeof i.cMapUrl=="string"?i.cMapUrl:null,b=i.cMapPacked!==!1,g=i.CMapReaderFactory||FE,y=typeof i.standardFontDataUrl=="string"?i.standardFontDataUrl:null,v=i.StandardFontDataFactory||kE,x=i.stopAtErrors!==!0,D=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,A=i.isEvalSupported!==!1,T=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!Ht,E=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,I=typeof i.disableFontFace=="boolean"?i.disableFontFace:Ht,N=i.fontExtraProperties===!0,R=i.enableXfa===!0,P=i.ownerDocument||globalThis.document,j=i.disableRange===!0,U=i.disableStream===!0,B=i.disableAutoFetch===!0,S=i.pdfBug===!0,J=c?c.length:i.length??NaN,q=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!Ht&&!I,O=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:g===Z1&&v===Q1&&f&&y&&Tc(f,document.baseURI)&&Tc(y,document.baseURI),K=i.canvasFactory||new RE({ownerDocument:P}),H=i.filterFactory||new NE({docId:t,ownerDocument:P}),Y=null;yA(d);const F={canvasFactory:K,filterFactory:H};if(O||(F.cMapReaderFactory=new g({baseUrl:f,isCompressed:b}),F.standardFontDataFactory=new v({baseUrl:y})),!u){const ne={verbosity:d,port:cr.workerPort};u=ne.port?Vo.fromPort(ne):new Vo(ne),e._worker=u}const X={docId:t,apiVersion:"4.3.136",data:r,password:a,disableAutoFetch:B,rangeChunkSize:l,length:J,docBaseUrl:h,enableXfa:R,evaluatorOptions:{maxImageSize:D,disableFontFace:I,ignoreErrors:x,isEvalSupported:A,isOffscreenCanvasSupported:T,canvasMaxAreaInBytes:E,fontExtraProperties:N,useSystemFonts:q,cMapUrl:O?f:null,standardFontDataUrl:O?y:null}},$={disableFontFace:I,fontExtraProperties:N,ownerDocument:P,pdfBug:S,styleElement:Y,loadingParams:{disableAutoFetch:B,enableXfa:R}};return u.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const ne=u.messageHandler.sendWithPromise("GetDocRequest",X,r?[r.buffer]:null);let oe;return c?oe=new aE(c,{disableRange:j,disableStream:U}):r||(oe=(le=>Ht?function(){return typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype}()&&Tc(le.url)?new A0(le):new vE(le):Tc(le.url)?new A0(le):new gE(le))({url:n,length:J,httpHeaders:s,withCredentials:o,rangeChunkSize:l,disableRange:j,disableStream:U})),ne.then(pe=>{if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const le=new wc(t,pe,u.port),ge=new qE(le,e,oe,$,F);e._transport=ge,le.send("Ready",null)})}).catch(e._capability.reject),e}function PE(i){if(i instanceof URL)return i.href;try{return new URL(i,window.location).href}catch{if(Ht&&typeof i=="string")return i}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function LE(i){if(Ht&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return Kh(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i==null?void 0:i.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function E0(i){return typeof i=="object"&&Number.isInteger(i==null?void 0:i.num)&&i.num>=0&&Number.isInteger(i==null?void 0:i.gen)&&i.gen>=0}var Ph;const Lh=class Lh{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${St(Lh,Ph)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,n;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(r){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,r}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};Ph=new WeakMap,W(Lh,Ph,0);let tm=Lh;class W2{constructor(e,t,n=!1,r=null){this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const n of this._rangeListeners)n(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){nt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class BE{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ze(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Fr,ji,Mn,Lo,fd;class OE{constructor(e,t,n,r=!1){W(this,Mn);W(this,Fr,null);W(this,ji,!1);this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=r?new d0:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new q2,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:s=!1}={}){return new Fu({viewBox:this.view,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:s})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ze(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:n="display",annotationMode:r=Tr.ENABLE,transform:s=null,background:o=null,optionalContentConfigPromise:a=null,annotationCanvasMap:c=null,pageColors:l=null,printAnnotationStorage:u=null}){var D,A;(D=this._stats)==null||D.time("Overall");const d=this._transport.getRenderingIntent(n,r,u),{renderingIntent:h,cacheKey:f}=d;M(this,ji,!1),L(this,Mn,fd).call(this),a||(a=this._transport.getOptionalContentConfig(h));let b=this._intentStates.get(f);b||(b=Object.create(null),this._intentStates.set(f,b)),b.streamReaderCancelTimeout&&(clearTimeout(b.streamReaderCancelTimeout),b.streamReaderCancelTimeout=null);const g=!!(h&kn.PRINT);b.displayReadyCapability||(b.displayReadyCapability=Promise.withResolvers(),b.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(A=this._stats)==null||A.time("Page Request"),this._pumpOperatorList(d));const y=T=>{var E;b.renderTasks.delete(v),(this._maybeCleanupAfterRender||g)&&M(this,ji,!0),L(this,Mn,Lo).call(this,!g),T?(v.capability.reject(T),this._abortOperatorList({intentState:b,reason:T instanceof Error?T:new Error(T)})):v.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(E=globalThis.Stats)!=null&&E.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},v=new im({callback:y,params:{canvasContext:e,viewport:t,transform:s,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:b.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!g,pdfBug:this._pdfBug,pageColors:l});(b.renderTasks||(b.renderTasks=new Set)).add(v);const x=v.task;return Promise.all([b.displayReadyCapability.promise,a]).then(([T,E])=>{var I;if(this.destroyed){y();return}if((I=this._stats)==null||I.time("Rendering"),!(E.renderingIntent&h))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");v.initializeGraphics({transparency:T,optionalContentConfig:E}),v.operatorListChanged()}).catch(y),x}getOperatorList({intent:e="display",annotationMode:t=Tr.ENABLE,printAnnotationStorage:n=null}={}){var c;function r(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(a))}const s=this._transport.getRenderingIntent(e,t,n,!0);let o=this._intentStates.get(s.cacheKey);o||(o=Object.create(null),this._intentStates.set(s.cacheKey,o));let a;return o.opListReadCapability||(a=Object.create(null),a.operatorListChanged=r,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(a),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(c=this._stats)==null||c.time("Page Request"),this._pumpOperatorList(s)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>qc.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,r){function s(){o.read().then(function({value:c,done:l}){if(l){n(a);return}a.lang??(a.lang=c.lang),Object.assign(a.styles,c.styles),a.items.push(...c.items),s()},r)}const o=t.getReader(),a={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),M(this,ji,!1),L(this,Mn,fd).call(this),Promise.all(e)}cleanup(e=!1){M(this,ji,!0);const t=L(this,Mn,Lo).call(this,!1);return e&&t&&this._stats&&(this._stats=new d0),t}_startRenderPage(e,t){var r,s;const n=this._intentStates.get(t);n&&((r=this._stats)==null||r.timeEnd("Page Request"),(s=n.displayReadyCapability)==null||s.resolve(e))}_renderPageChunk(e,t){for(let n=0,r=e.length;n<r;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&L(this,Mn,Lo).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n}){const{map:r,transfer:s}=n,a=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:r},s).getReader(),c=this._intentStates.get(t);c.streamReader=a;const l=()=>{a.read().then(({value:u,done:d})=>{if(d){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(u,c),l())},u=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const d of c.renderTasks)d.operatorListChanged();L(this,Mn,Lo).call(this,!0)}if(c.displayReadyCapability)c.displayReadyCapability.reject(u);else if(c.opListReadCapability)c.opListReadCapability.reject(u);else throw u}})};l()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof ty){let r=UE;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new To(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,s]of this._intentStates)if(s===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}Fr=new WeakMap,ji=new WeakMap,Mn=new WeakSet,Lo=function(e=!1){if(L(this,Mn,fd).call(this),!p(this,ji)||this.destroyed)return!1;if(e)return M(this,Fr,setTimeout(()=>{M(this,Fr,null),L(this,Mn,Lo).call(this,!1)},IE)),!1;for(const{renderTasks:t,operatorList:n}of this._intentStates.values())if(t.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),M(this,ji,!1),!0},fd=function(){p(this,Fr)&&(clearTimeout(p(this,Fr)),M(this,Fr,null))};var Os,Bh;class WE{constructor(){W(this,Os,new Set);W(this,Bh,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};p(this,Bh).then(()=>{for(const r of p(this,Os))r.call(this,n)})}addEventListener(e,t){p(this,Os).add(t)}removeEventListener(e,t){p(this,Os).delete(t)}terminate(){p(this,Os).clear()}}Os=new WeakMap,Bh=new WeakMap;const Pi={isWorkerDisabled:!1,fakeWorkerId:0};Ht&&(Pi.isWorkerDisabled=!0,cr.workerSrc||(cr.workerSrc="./pdf.worker.mjs")),Pi.isSameOrigin=function(i,e){let t;try{if(t=new URL(i),!t.origin||t.origin==="null")return!1}catch{return!1}const n=new URL(e,t);return t.origin===n.origin},Pi.createCDNWrapper=function(i){const e=`await import("${i}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};var Ws,ga,pd;const gn=class gn{constructor({name:e=null,port:t=null,verbosity:n=bA()}={}){var r;if(this.name=e,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((r=p(gn,Ws))!=null&&r.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(p(gn,Ws)||M(gn,Ws,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return Ht?Promise.all([wi.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new wc("main","worker",e),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!Pi.isWorkerDisabled&&!p(gn,ga,pd)){let{workerSrc:e}=gn;try{Pi.isSameOrigin(window.location.href,e)||(e=Pi.createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new wc("main","worker",t),r=()=>{t.removeEventListener("error",s),n.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},s=()=>{this._webWorker||r()};t.addEventListener("error",s),n.on("test",a=>{if(t.removeEventListener("error",s),this.destroyed){r();return}a?(this._messageHandler=n,this._port=t,this._webWorker=t,this._readyCapability.resolve(),n.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),n.destroy(),t.terminate())}),n.on("ready",a=>{if(t.removeEventListener("error",s),this.destroyed){r();return}try{o()}catch{this._setupFakeWorker()}});const o=()=>{const a=new Uint8Array;n.send("test",a,[a.buffer])};o();return}catch{Yh("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){Pi.isWorkerDisabled||(Oe("Setting up fake worker."),Pi.isWorkerDisabled=!0),gn._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new WE;this._port=t;const n=`fake${Pi.fakeWorkerId++}`,r=new wc(n+"_worker",n,t);e.setup(r,t);const s=new wc(n,n+"_worker",t);this._messageHandler=s,this._readyCapability.resolve(),s.send("configure",{verbosity:this.verbosity})}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(e=p(gn,Ws))==null||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var n;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(n=p(this,Ws))==null?void 0:n.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new gn(e)}static get workerSrc(){if(cr.workerSrc)return cr.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return ze(this,"_setupFakeWorkerGlobal",(async()=>p(this,ga,pd)?p(this,ga,pd):(await import(this.workerSrc)).WorkerMessageHandler)())}};Ws=new WeakMap,ga=new WeakSet,pd=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},W(gn,ga),W(gn,Ws);let Vo=gn;var Yi,gi,ma,ya,mi,qs,Cc;class qE{constructor(e,t,n,r,s){W(this,qs);W(this,Yi,new Map);W(this,gi,new Map);W(this,ma,new Map);W(this,ya,new Map);W(this,mi,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new q2,this.fontLoader=new OA({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return ze(this,"annotationStorage",new sy)}getRenderingIntent(e,t=Tr.ENABLE,n=null,r=!1){let s=kn.DISPLAY,o=Xg;switch(e){case"any":s=kn.ANY;break;case"display":break;case"print":s=kn.PRINT;break;default:Oe(`getRenderingIntent - invalid intent: ${e}`)}switch(t){case Tr.DISABLE:s+=kn.ANNOTATIONS_DISABLE;break;case Tr.ENABLE:break;case Tr.ENABLE_FORMS:s+=kn.ANNOTATIONS_FORMS;break;case Tr.ENABLE_STORAGE:s+=kn.ANNOTATIONS_STORAGE,o=(s&kn.PRINT&&n instanceof w2?n:this.annotationStorage).serializable;break;default:Oe(`getRenderingIntent - invalid annotationMode: ${t}`)}return r&&(s+=kn.OPLIST),{renderingIntent:s,cacheKey:`${s}_${o.hash}`,annotationStorageSerializable:o}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=p(this,mi))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of p(this,gi).values())e.push(r._destroy());p(this,gi).clear(),p(this,ma).clear(),p(this,ya).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var r;this.commonObjs.clear(),this.fontLoader.clear(),p(this,Yi).clear(),this.filterFactory.destroy(),Xa.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new To("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,r)=>{Tt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},r.onPull=()=>{this._fullReader.read().then(function({value:s,done:o}){if(o){r.close();return}Tt(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{r.error(s)})},r.onCancel=s=>{this._fullReader.cancel(s),r.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",n=>{const r=Promise.withResolvers(),s=this._fullReader;return s.headersReady.then(()=>{var o;(!s.isStreamingSupported||!s.isRangeSupported)&&(this._lastProgress&&((o=t.onProgress)==null||o.call(t,this._lastProgress)),s.onProgress=a=>{var c;(c=t.onProgress)==null||c.call(t,{loaded:a.loaded,total:a.total})}),r.resolve({isStreamingSupported:s.isStreamingSupported,isRangeSupported:s.isRangeSupported,contentLength:s.contentLength})},r.reject),r.promise}),e.on("GetRangeReader",(n,r)=>{Tt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const s=this._networkStream.getRangeReader(n.begin,n.end);if(!s){r.close();return}r.onPull=()=>{s.read().then(function({value:o,done:a}){if(a){r.close();return}Tt(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{s.cancel(o),r.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new BE(n,this))}),e.on("DocException",function(n){let r;switch(n.name){case"PasswordException":r=new Dg(n.message,n.code);break;case"InvalidPDFException":r=new j1(n.message);break;case"MissingPDFException":r=new Do(n.message);break;case"UnexpectedResponseException":r=new Jh(n.message,n.status);break;case"UnknownErrorException":r=new Tg(n.message,n.details);break;default:nt("DocException - expected a valid Error.")}t._capability.reject(r)}),e.on("PasswordRequest",n=>{if(M(this,mi,Promise.withResolvers()),t.onPassword){const r=s=>{s instanceof Error?p(this,mi).reject(s):p(this,mi).resolve({password:s})};try{t.onPassword(r,n.code)}catch(s){p(this,mi).reject(s)}}else p(this,mi).reject(new Dg(n.message,n.code));return p(this,mi).promise}),e.on("DataLoaded",n=>{var r;(r=t.onProgress)==null||r.call(t,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;p(this,gi).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,r,s])=>{var o;if(this.destroyed||this.commonObjs.has(n))return null;switch(r){case"Font":const{disableFontFace:a,fontExtraProperties:c,pdfBug:l}=this._params;if("error"in s){const f=s.error;Oe(`Error during font loading: ${f}`),this.commonObjs.resolve(n,f);break}const u=l&&((o=globalThis.FontInspector)!=null&&o.enabled)?(f,b)=>globalThis.FontInspector.fontAdded(f,b):null,d=new WA(s,{disableFontFace:a,inspectFont:u});this.fontLoader.bind(d).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!c&&d.data&&(d.data=null),this.commonObjs.resolve(n,d)});break;case"CopyLocalImage":const{imageRef:h}=s;Tt(h,"The imageRef must be defined.");for(const f of p(this,gi).values())for(const[,b]of f.objs)if((b==null?void 0:b.ref)===h)return b.dataLen?(this.commonObjs.resolve(n,structuredClone(b)),b.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,s);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([n,r,s,o])=>{var c;if(this.destroyed)return;const a=p(this,gi).get(r);if(!a.objs.has(n)){if(a._intentStates.size===0){(c=o==null?void 0:o.bitmap)==null||c.close();return}switch(s){case"Image":a.objs.resolve(n,o),(o==null?void 0:o.dataLen)>fA&&(a._maybeCleanupAfterRender=!0);break;case"Pattern":a.objs.resolve(n,o);break;default:throw new Error(`Got unknown object type ${s}`)}}}),e.on("DocProgress",n=>{var r;this.destroyed||(r=t.onProgress)==null||r.call(t,{loaded:n.loaded,total:n.total})}),e.on("FetchBuiltInCMap",n=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(n):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),e.on("FetchStandardFontData",n=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(n):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&Oe("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((n=this._fullReader)==null?void 0:n.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=p(this,ma).get(t);if(n)return n;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&p(this,ya).set(s.refStr,e);const o=new OE(t,s,this,this._params.pdfBug);return p(this,gi).set(t,o),o});return p(this,ma).set(t,r),r}getPageIndex(e){return E0(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return L(this,qs,Cc).call(this,"GetFieldObjects")}hasJSActions(){return L(this,qs,Cc).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return L(this,qs,Cc).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return L(this,qs,Cc).call(this,"GetOptionalContentConfig").then(t=>new oE(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=p(this,Yi).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(r=>{var s,o;return{info:r[0],metadata:r[1]?new rE(r[1]):null,contentDispositionFilename:((s=this._fullReader)==null?void 0:s.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return p(this,Yi).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of p(this,gi).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),p(this,Yi).clear(),this.filterFactory.destroy(!0),Xa.cleanup()}}cachedPageNumber(e){if(!E0(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return p(this,ya).get(t)??null}}Yi=new WeakMap,gi=new WeakMap,ma=new WeakMap,ya=new WeakMap,mi=new WeakMap,qs=new WeakSet,Cc=function(e,t=null){const n=p(this,Yi).get(e);if(n)return n;const r=this.messageHandler.sendWithPromise(e,t);return p(this,Yi).set(e,r),r};const zu=Symbol("INITIAL_DATA");var Jn,Ol,nm;class q2{constructor(){W(this,Ol);W(this,Jn,Object.create(null))}get(e,t=null){if(t){const r=L(this,Ol,nm).call(this,e);return r.promise.then(()=>t(r.data)),null}const n=p(this,Jn)[e];if(!n||n.data===zu)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=p(this,Jn)[e];return!!t&&t.data!==zu}resolve(e,t=null){const n=L(this,Ol,nm).call(this,e);n.data=t,n.resolve()}clear(){var e;for(const t in p(this,Jn)){const{data:n}=p(this,Jn)[t];(e=n==null?void 0:n.bitmap)==null||e.close()}M(this,Jn,Object.create(null))}*[Symbol.iterator](){for(const e in p(this,Jn)){const{data:t}=p(this,Jn)[e];t!==zu&&(yield[e,t])}}}Jn=new WeakMap,Ol=new WeakSet,nm=function(e){var t;return(t=p(this,Jn))[e]||(t[e]={...Promise.withResolvers(),data:zu})};var Nr;class HE{constructor(e){W(this,Nr,null);M(this,Nr,e),this.onContinue=null}get promise(){return p(this,Nr).capability.promise}cancel(e=0){p(this,Nr).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=p(this,Nr).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=p(this,Nr);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}Nr=new WeakMap;var Hs;const ys=class ys{constructor({callback:e,params:t,objs:n,commonObjs:r,annotationCanvasMap:s,operatorList:o,pageIndex:a,canvasFactory:c,filterFactory:l,useRequestAnimationFrame:u=!1,pdfBug:d=!1,pageColors:h=null}){this.callback=e,this.params=t,this.objs=n,this.commonObjs=r,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=c,this.filterFactory=l,this._pdfBug=d,this.pageColors=h,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new HE(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var a,c;if(this.cancelled)return;if(this._canvas){if(p(ys,Hs).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");p(ys,Hs).add(this._canvas)}this._pdfBug&&((a=globalThis.StepperManager)!=null&&a.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:r,transform:s,background:o}=this.params;this.gfx=new Ho(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:s,viewport:r,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(e=null,t=0){var n;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),p(ys,Hs).delete(this._canvas),this.callback(e||new ty(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),p(ys,Hs).delete(this._canvas),this.callback())))}};Hs=new WeakMap,W(ys,Hs,new WeakSet);let im=ys;const VE="4.3.136",GE="0cec64437";function w0(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function oc(i){return Math.max(0,Math.min(255,255*i))}class C0{static CMYK_G([e,t,n,r]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=oc(e),[e,e,e]}static G_HTML([e]){const t=w0(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(oc)}static RGB_HTML(e){return`#${e.map(w0).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,n+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,n,r]){return[oc(1-Math.min(1,e+r)),oc(1-Math.min(1,n+r)),oc(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const r=1-e,s=1-t,o=1-n,a=Math.min(r,s,o);return["CMYK",r,s,o,a]}}class H2{static setupStorage(e,t,n,r,s){const o=r.getValue(t,{value:null});switch(n.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),s==="print")break;e.addEventListener("input",a=>{r.setValue(t,{value:a.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(o.value===n.attributes.xfaOn?e.setAttribute("checked",!0):o.value===n.attributes.xfaOff&&e.removeAttribute("checked"),s==="print")break;e.addEventListener("change",a=>{r.setValue(t,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),s==="print")break;e.addEventListener("input",a=>{r.setValue(t,{value:a.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const a of n.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{const c=a.target.options,l=c.selectedIndex===-1?"":c[c.selectedIndex].value;r.setValue(t,{value:l})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:r,linkService:s}){const{attributes:o}=t,a=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${r}`);for(const[c,l]of Object.entries(o))if(l!=null)switch(c){case"class":l.length&&e.setAttribute(c,l.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",l);break;case"style":Object.assign(e.style,l);break;case"textContent":e.textContent=l;break;default:(!a||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,l)}a&&s.addLinkAttributes(e,o.href,o.newWindow),n&&o.dataId&&this.setupStorage(e,o.dataId,t,n)}static render(e){var d,h;const t=e.annotationStorage,n=e.linkService,r=e.xfaHtml,s=e.intent||"display",o=document.createElement(r.name);r.attributes&&this.setAttributes({html:o,element:r,intent:s,linkService:n});const a=s!=="richText",c=e.div;if(c.append(o),e.viewport){const f=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=f}a&&c.setAttribute("class","xfaLayer xfaFont");const l=[];if(r.children.length===0){if(r.value){const f=document.createTextNode(r.value);o.append(f),a&&qc.shouldBuildText(r.name)&&l.push(f)}return{textDivs:l}}const u=[[r,-1,o]];for(;u.length>0;){const[f,b,g]=u.at(-1);if(b+1===f.children.length){u.pop();continue}const y=f.children[++u.at(-1)[1]];if(y===null)continue;const{name:v}=y;if(v==="#text"){const D=document.createTextNode(y.value);l.push(D),g.append(D);continue}const x=(d=y==null?void 0:y.attributes)!=null&&d.xmlns?document.createElementNS(y.attributes.xmlns,v):document.createElement(v);if(g.append(x),y.attributes&&this.setAttributes({html:x,element:y,storage:t,intent:s,linkService:n}),((h=y.children)==null?void 0:h.length)>0)u.push([y,-1,x]);else if(y.value){const D=document.createTextNode(y.value);a&&qc.shouldBuildText(v)&&l.push(D),x.append(D)}}for(const f of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))f.setAttribute("readOnly",!0);return{textDivs:l}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Mu=1e3,zE=9,yo=new WeakSet;function lr(i){return{width:i[2]-i[0],height:i[3]-i[1]}}class $E{static create(e){switch(e.data.annotationType){case bt.LINK:return new V2(e);case bt.TEXT:return new XE(e);case bt.WIDGET:switch(e.data.fieldType){case"Tx":return new jE(e);case"Btn":return e.data.radioButton?new $2(e):e.data.checkBox?new JE(e):new KE(e);case"Ch":return new ZE(e);case"Sig":return new YE(e)}return new Ao(e);case bt.POPUP:return new sm(e);case bt.FREETEXT:return new K2(e);case bt.LINE:return new ew(e);case bt.SQUARE:return new tw(e);case bt.CIRCLE:return new nw(e);case bt.POLYLINE:return new Z2(e);case bt.CARET:return new rw(e);case bt.INK:return new Q2(e);case bt.POLYGON:return new iw(e);case bt.HIGHLIGHT:return new sw(e);case bt.UNDERLINE:return new ow(e);case bt.SQUIGGLY:return new aw(e);case bt.STRIKEOUT:return new cw(e);case bt.STAMP:return new e_(e);case bt.FILEATTACHMENT:return new lw(e);default:return new pt(e)}}}var Vs,ba,va,Wl,rm;const o0=class o0{constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}={}){W(this,Wl);W(this,Vs,null);W(this,ba,!1);W(this,va,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:n}){return!!(e!=null&&e.str||t!=null&&t.str||n!=null&&n.str)}get hasPopupData(){return o0._hasPopupData(this.data)}updateEdited(e){var n;if(!this.container)return;p(this,Vs)||M(this,Vs,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&L(this,Wl,rm).call(this,t),(n=p(this,va))==null||n.popup.updateEdited(e)}resetEdited(){var e;p(this,Vs)&&(L(this,Wl,rm).call(this,p(this,Vs).rect),(e=p(this,va))==null||e.popup.resetEdited(),M(this,Vs,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:r}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",t.id),this instanceof Ao||(s.tabIndex=Mu);const{style:o}=s;if(o.zIndex=this.parent.zIndex++,t.popupRef&&s.setAttribute("aria-haspopup","dialog"),t.alternativeText&&(s.title=t.alternativeText),t.noRotate&&s.classList.add("norotate"),!t.rect||this instanceof sm){const{rotation:g}=t;return!t.hasOwnCanvas&&g!==0&&this.setRotation(g,s),s}const{width:a,height:c}=lr(t.rect);if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const g=t.borderStyle.horizontalCornerRadius,y=t.borderStyle.verticalCornerRadius;if(g>0||y>0){const x=`calc(${g}px * var(--scale-factor)) / calc(${y}px * var(--scale-factor))`;o.borderRadius=x}else if(this instanceof $2){const x=`calc(${a}px * var(--scale-factor)) / calc(${c}px * var(--scale-factor))`;o.borderRadius=x}switch(t.borderStyle.style){case rc.SOLID:o.borderStyle="solid";break;case rc.DASHED:o.borderStyle="dashed";break;case rc.BEVELED:Oe("Unimplemented border style: beveled");break;case rc.INSET:Oe("Unimplemented border style: inset");break;case rc.UNDERLINE:o.borderBottomStyle="solid";break}const v=t.borderColor||null;v?(M(this,ba,!0),o.borderColor=Ue.makeHexColor(v[0]|0,v[1]|0,v[2]|0)):o.borderWidth=0}const l=Ue.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:u,pageHeight:d,pageX:h,pageY:f}=r.rawDims;o.left=`${100*(l[0]-h)/u}%`,o.top=`${100*(l[1]-f)/d}%`;const{rotation:b}=t;return t.hasOwnCanvas||b===0?(o.width=`${100*a/u}%`,o.height=`${100*c/d}%`):this.setRotation(b,s),s}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:r}=this.parent.viewport.rawDims,{width:s,height:o}=lr(this.data.rect);let a,c;e%180===0?(a=100*s/n,c=100*o/r):(a=100*o/n,c=100*s/r),t.style.width=`${a}%`,t.style.height=`${c}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,r)=>{const s=r.detail[t],o=s[0],a=s.slice(1);r.target.style[n]=C0[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[n]:C0[`${o}_rgb`](a)})};return ze(this,"_commonActions",{display:t=>{const{display:n}=t.detail,r=n%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const r of Object.keys(t.detail)){const s=e[r]||n[r];s==null||s(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[r,s]of Object.entries(t)){const o=n[r];if(o){const a={detail:{[r]:s},target:e};o(a),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,r,s]=this.data.rect;if(e.length===1){const[,{x:g,y},{x:v,y:x}]=e[0];if(r===g&&s===y&&t===v&&n===x)return}const{style:o}=this.container;let a;if(p(this,ba)){const{borderColor:g,borderWidth:y}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${g}" stroke-width="${y}">`],this.container.classList.add("hasBorder")}const c=r-t,l=s-n,{svgFactory:u}=this,d=u.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const h=u.createElement("defs");d.append(h);const f=u.createElement("clipPath"),b=`clippath_${this.data.id}`;f.setAttribute("id",b),f.setAttribute("clipPathUnits","objectBoundingBox"),h.append(f);for(const[,{x:g,y},{x:v,y:x}]of e){const D=u.createElement("rect"),A=(v-t)/c,T=(s-y)/l,E=(g-v)/c,I=(y-x)/l;D.setAttribute("x",A),D.setAttribute("y",T),D.setAttribute("width",E),D.setAttribute("height",I),f.append(D),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${A}" y="${T}" width="${E}" height="${I}"/>`)}p(this,ba)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(d),this.container.style.clipPath=`url(#${b})`}_createPopup(){const{container:e,data:t}=this;e.setAttribute("aria-haspopup","dialog");const n=M(this,va,new sm({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(n.render())}render(){nt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:s,id:o,exportValues:a}of r){if(s===-1||o===t)continue;const c=typeof a=="string"?a:null,l=document.querySelector(`[data-element-id="${o}"]`);if(l&&!yo.has(l)){Oe(`_getElementsByName - element not allowed: ${o}`);continue}n.push({id:o,exportValue:c,domElement:l})}return n}for(const r of document.getElementsByName(e)){const{exportValue:s}=r,o=r.getAttribute("data-element-id");o!==t&&yo.has(r)&&n.push({id:o,exportValue:s,domElement:r})}return n}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};Vs=new WeakMap,ba=new WeakMap,va=new WeakMap,Wl=new WeakSet,rm=function(e){const{container:{style:t},data:{rect:n,rotation:r},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:o,pageX:a,pageY:c}}}}=this;n==null||n.splice(0,4,...e);const{width:l,height:u}=lr(e);t.left=`${100*(e[0]-a)/s}%`,t.top=`${100*(o-e[3]+c)/o}%`,r===0?(t.width=`${100*l/s}%`,t.height=`${100*u/o}%`):this.setRotation(r)};let pt=o0;var Dn,fs,G2,z2;class V2 extends pt{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});W(this,Dn);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:n}=this,r=document.createElement("a");r.setAttribute("data-element-id",t.id);let s=!1;return t.url?(n.addLinkAttributes(r,t.url,t.newWindow),s=!0):t.action?(this._bindNamedAction(r,t.action),s=!0):t.attachment?(L(this,Dn,G2).call(this,r,t.attachment,t.attachmentDest),s=!0):t.setOCGState?(L(this,Dn,z2).call(this,r,t.setOCGState),s=!0):t.dest?(this._bindLink(r,t.dest),s=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,t),s=!0),t.resetForm?(this._bindResetFormAction(r,t.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(r,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&this.container.append(r),this.container}_bindLink(t,n){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&L(this,Dn,fs).call(this)}_bindNamedAction(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),L(this,Dn,fs).call(this)}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(n.actions)){const o=r.get(s);o&&(t[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:s}}),!1})}t.onclick||(t.onclick=()=>!1),L(this,Dn,fs).call(this)}_bindResetFormAction(t,n){const r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),L(this,Dn,fs).call(this),!this._fieldObjects){Oe('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(t.onclick=()=>!1);return}t.onclick=()=>{var d;r==null||r();const{fields:s,refs:o,include:a}=n,c=[];if(s.length!==0||o.length!==0){const h=new Set(o);for(const f of s){const b=this._fieldObjects[f]||[];for(const{id:g}of b)h.add(g)}for(const f of Object.values(this._fieldObjects))for(const b of f)h.has(b.id)===a&&c.push(b)}else for(const h of Object.values(this._fieldObjects))c.push(...h);const l=this.annotationStorage,u=[];for(const h of c){const{id:f}=h;switch(u.push(f),h.type){case"text":{const g=h.defaultValue||"";l.setValue(f,{value:g});break}case"checkbox":case"radiobutton":{const g=h.defaultValue===h.exportValues;l.setValue(f,{value:g});break}case"combobox":case"listbox":{const g=h.defaultValue||"";l.setValue(f,{value:g});break}default:continue}const b=document.querySelector(`[data-element-id="${f}"]`);if(b){if(!yo.has(b)){Oe(`_bindResetFormAction - element not allowed: ${f}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:u,name:"ResetForm"}})),!1}}}Dn=new WeakSet,fs=function(){this.container.setAttribute("data-internal-link","")},G2=function(t,n,r=null){t.href=this.linkService.getAnchorUrl(""),n.description&&(t.title=n.description),t.onclick=()=>{var s;return(s=this.downloadManager)==null||s.openOrDownloadData(n.content,n.filename,r),!1},L(this,Dn,fs).call(this)},z2=function(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),L(this,Dn,fs).call(this)};class XE extends pt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Ao extends pt{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return an.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,r,s){n.includes("mouse")?e.addEventListener(n,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(n,o=>{var a;if(n==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}s&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(o)}}))})}_setEventListeners(e,t,n,r){var s,o,a;for(const[c,l]of n)(l==="Action"||(s=this.data.actions)!=null&&s[l])&&((l==="Focus"||l==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,c,l,r),l==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):l==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":Ue.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||zE,s=e.style;let o;const a=2,c=l=>Math.round(10*l)/10;if(this.data.multiLine){const l=Math.abs(this.data.rect[3]-this.data.rect[1]-a),u=Math.round(l/(Lf*r))||1,d=l/u;o=Math.min(r,c(d/Lf))}else{const l=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(r,c(l/Lf))}s.fontSize=`calc(${o}px * var(--scale-factor))`,s.color=Ue.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(s.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class jE extends Ao{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,r){const s=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=n),s.setValue(o.id,{[r]:n})}render(){var r,s;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let a=o.value||"";const c=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;c&&a.length>c&&(a=a.slice(0,c));let l=o.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;l&&this.data.comb&&(l=l.replaceAll(/\s+/g,""));const u={userValue:a,formattedValue:l,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=l??a,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",l??a),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),yo.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=Mu,this._setRequired(n,this.data.required),c&&(n.maxLength=c),n.addEventListener("input",h=>{e.setValue(t,{value:h.target.value}),this.setPropertyOnSiblings(n,"value",h.target.value,"value"),u.formattedValue=null}),n.addEventListener("resetform",h=>{const f=this.data.defaultFieldValue??"";n.value=u.userValue=f,u.formattedValue=null});let d=h=>{const{formattedValue:f}=u;f!=null&&(h.target.value=f),h.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",f=>{var g;if(u.focused)return;const{target:b}=f;u.userValue&&(b.value=u.userValue),u.lastCommittedValue=b.value,u.commitKey=1,(g=this.data.actions)!=null&&g.Focus||(u.focused=!0)}),n.addEventListener("updatefromsandbox",f=>{this.showElementAndHideCanvas(f.target);const b={value(g){u.userValue=g.detail.value??"",e.setValue(t,{value:u.userValue.toString()}),g.target.value=u.userValue},formattedValue(g){const{formattedValue:y}=g.detail;u.formattedValue=y,y!=null&&g.target!==document.activeElement&&(g.target.value=y),e.setValue(t,{formattedValue:y})},selRange(g){g.target.setSelectionRange(...g.detail.selRange)},charLimit:g=>{var D;const{charLimit:y}=g.detail,{target:v}=g;if(y===0){v.removeAttribute("maxLength");return}v.setAttribute("maxLength",y);let x=u.userValue;!x||x.length<=y||(x=x.slice(0,y),v.value=u.userValue=x,e.setValue(t,{value:x}),(D=this.linkService.eventBus)==null||D.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:x,willCommit:!0,commitKey:1,selStart:v.selectionStart,selEnd:v.selectionEnd}}))}};this._dispatchEventFromSandbox(b,f)}),n.addEventListener("keydown",f=>{var y;u.commitKey=1;let b=-1;if(f.key==="Escape"?b=0:f.key==="Enter"&&!this.data.multiLine?b=2:f.key==="Tab"&&(u.commitKey=3),b===-1)return;const{value:g}=f.target;u.lastCommittedValue!==g&&(u.lastCommittedValue=g,u.userValue=g,(y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:g,willCommit:!0,commitKey:b,selStart:f.target.selectionStart,selEnd:f.target.selectionEnd}}))});const h=d;d=null,n.addEventListener("blur",f=>{var g,y;if(!u.focused||!f.relatedTarget)return;(g=this.data.actions)!=null&&g.Blur||(u.focused=!1);const{value:b}=f.target;u.userValue=b,u.lastCommittedValue!==b&&((y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:b,willCommit:!0,commitKey:u.commitKey,selStart:f.target.selectionStart,selEnd:f.target.selectionEnd}})),h(f)}),(s=this.data.actions)!=null&&s.Keystroke&&n.addEventListener("beforeinput",f=>{var T;u.lastCommittedValue=null;const{data:b,target:g}=f,{value:y,selectionStart:v,selectionEnd:x}=g;let D=v,A=x;switch(f.inputType){case"deleteWordBackward":{const E=y.substring(0,v).match(/\w*[^\w]*$/);E&&(D-=E[0].length);break}case"deleteWordForward":{const E=y.substring(v).match(/^[^\w]*\w*/);E&&(A+=E[0].length);break}case"deleteContentBackward":v===x&&(D-=1);break;case"deleteContentForward":v===x&&(A+=1);break}f.preventDefault(),(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:y,change:b||"",willCommit:!1,selStart:D,selEnd:A}})}),this._setEventListeners(n,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],f=>f.target.value)}if(d&&n.addEventListener("blur",d),this.data.comb){const f=(this.data.rect[2]-this.data.rect[0])/c;n.classList.add("comb"),n.style.letterSpacing=`calc(${f}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class YE extends Ao{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class JE extends Ao{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(n,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return yo.add(s),s.setAttribute("data-element-id",n),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=t.fieldName,r&&s.setAttribute("checked",!0),s.setAttribute("exportValue",t.exportValue),s.tabIndex=Mu,s.addEventListener("change",o=>{const{name:a,checked:c}=o.target;for(const l of this._getElementsByName(a,n)){const u=c&&l.exportValue===t.exportValue;l.domElement&&(l.domElement.checked=u),e.setValue(l.id,{value:u})}e.setValue(n,{value:c})}),s.addEventListener("resetform",o=>{const a=t.defaultFieldValue||"Off";o.target.checked=a===t.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",o=>{const a={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(n,{value:c.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class $2 extends Ao{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(n,{value:r})),r)for(const o of this._getElementsByName(t.fieldName,n))e.setValue(o.id,{value:!1});const s=document.createElement("input");if(yo.add(s),s.setAttribute("data-element-id",n),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=t.fieldName,r&&s.setAttribute("checked",!0),s.tabIndex=Mu,s.addEventListener("change",o=>{const{name:a,checked:c}=o.target;for(const l of this._getElementsByName(a,n))e.setValue(l.id,{value:!1});e.setValue(n,{value:c})}),s.addEventListener("resetform",o=>{const a=t.defaultFieldValue;o.target.checked=a!=null&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;s.addEventListener("updatefromsandbox",a=>{const c={value:l=>{const u=o===l.detail.value;for(const d of this._getElementsByName(l.target.name)){const h=u&&d.id===n;d.domElement&&(d.domElement.checked=h),e.setValue(d.id,{value:h})}}};this._dispatchEventFromSandbox(c,a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class KE extends V2{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class ZE extends Ao{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");yo.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=Mu;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",u=>{const d=this.data.defaultFieldValue;for(const h of r.options)h.selected=h.value===d});for(const u of this.data.options){const d=document.createElement("option");d.textContent=u.displayValue,d.value=u.exportValue,n.value.includes(u.exportValue)&&(d.setAttribute("selected",!0),s=!1),r.append(d)}let o=null;if(s){const u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),r.prepend(u),o=()=>{u.remove(),r.removeEventListener("input",o),o=null},r.addEventListener("input",o)}const a=u=>{const d=u?"value":"textContent",{options:h,multiple:f}=r;return f?Array.prototype.filter.call(h,b=>b.selected).map(b=>b[d]):h.selectedIndex===-1?null:h[h.selectedIndex][d]};let c=a(!1);const l=u=>{const d=u.target.options;return Array.prototype.map.call(d,h=>({displayValue:h.textContent,exportValue:h.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",u=>{const d={value(h){o==null||o();const f=h.detail.value,b=new Set(Array.isArray(f)?f:[f]);for(const g of r.options)g.selected=b.has(g.value);e.setValue(t,{value:a(!0)}),c=a(!1)},multipleSelection(h){r.multiple=!0},remove(h){const f=r.options,b=h.detail.remove;f[b].selected=!1,r.remove(b),f.length>0&&Array.prototype.findIndex.call(f,y=>y.selected)===-1&&(f[0].selected=!0),e.setValue(t,{value:a(!0),items:l(h)}),c=a(!1)},clear(h){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),c=a(!1)},insert(h){const{index:f,displayValue:b,exportValue:g}=h.detail.insert,y=r.children[f],v=document.createElement("option");v.textContent=b,v.value=g,y?y.before(v):r.append(v),e.setValue(t,{value:a(!0),items:l(h)}),c=a(!1)},items(h){const{items:f}=h.detail;for(;r.length!==0;)r.remove(0);for(const b of f){const{displayValue:g,exportValue:y}=b,v=document.createElement("option");v.textContent=g,v.value=y,r.append(v)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:a(!0),items:l(h)}),c=a(!1)},indices(h){const f=new Set(h.detail.indices);for(const b of h.target.options)b.selected=f.has(b.index);e.setValue(t,{value:a(!0)}),c=a(!1)},editable(h){h.target.disabled=!h.detail.editable}};this._dispatchEventFromSandbox(d,u)}),r.addEventListener("input",u=>{var f;const d=a(!0),h=a(!1);e.setValue(t,{value:d}),u.preventDefault(),(f=this.linkService.eventBus)==null||f.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:c,change:h,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):r.addEventListener("input",function(u){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class sm extends pt{constructor(e){const{data:t,elements:n}=e;super(e,{isRenderable:pt._hasPopupData(t)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new QE({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const n of this.elements)n.popup=e,t.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(n=>`${J1}${n}`).join(",")),this.container}}var xa,Oh,Wh,_a,Gs,ht,Ji,zs,ql,Hl,Da,Ki,Kn,Zi,Vl,Qi,Gl,$s,Xs,it,gd,om,X2,j2,Y2,J2,md,yd,am;class QE{constructor({container:e,color:t,elements:n,titleObj:r,modificationDate:s,contentsObj:o,richText:a,parent:c,rect:l,parentRect:u,open:d}){W(this,it);W(this,xa,L(this,it,Y2).bind(this));W(this,Oh,L(this,it,am).bind(this));W(this,Wh,L(this,it,yd).bind(this));W(this,_a,L(this,it,md).bind(this));W(this,Gs,null);W(this,ht,null);W(this,Ji,null);W(this,zs,null);W(this,ql,null);W(this,Hl,null);W(this,Da,null);W(this,Ki,!1);W(this,Kn,null);W(this,Zi,null);W(this,Vl,null);W(this,Qi,null);W(this,Gl,null);W(this,$s,null);W(this,Xs,!1);var h;M(this,ht,e),M(this,Gl,r),M(this,Ji,o),M(this,Qi,a),M(this,Hl,c),M(this,Gs,t),M(this,Vl,l),M(this,Da,u),M(this,ql,n),M(this,zs,t2.toDateObject(s)),this.trigger=n.flatMap(f=>f.getElementsToTriggerPopup());for(const f of this.trigger)f.addEventListener("click",p(this,_a)),f.addEventListener("mouseenter",p(this,Wh)),f.addEventListener("mouseleave",p(this,Oh)),f.classList.add("popupTriggerArea");for(const f of n)(h=f.container)==null||h.addEventListener("keydown",p(this,xa));p(this,ht).hidden=!0,d&&L(this,it,md).call(this)}render(){if(p(this,Kn))return;const e=M(this,Kn,document.createElement("div"));if(e.className="popup",p(this,Gs)){const s=e.style.outlineColor=Ue.makeHexColor(...p(this,Gs));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`:e.style.backgroundColor=Ue.makeHexColor(...p(this,Gs).map(a=>Math.floor(.7*(255-a)+a)))}const t=document.createElement("span");t.className="header";const n=document.createElement("h1");if(t.append(n),{dir:n.dir,str:n.textContent}=p(this,Gl),e.append(t),p(this,zs)){const s=document.createElement("span");s.classList.add("popupDate"),s.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),s.setAttribute("data-l10n-args",JSON.stringify({date:p(this,zs).toLocaleDateString(),time:p(this,zs).toLocaleTimeString()})),t.append(s)}const r=p(this,it,gd);if(r)H2.render({xfaHtml:r,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const s=this._formatContents(p(this,Ji));e.append(s)}p(this,ht).append(e)}_formatContents({str:e,dir:t}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=t;const r=e.split(/(?:\r\n?|\n)/);for(let s=0,o=r.length;s<o;++s){const a=r[s];n.append(document.createTextNode(a)),s<o-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:e,popupContent:t}){var n;p(this,$s)||M(this,$s,{contentsObj:p(this,Ji),richText:p(this,Qi)}),e&&M(this,Zi,null),t&&(M(this,Qi,L(this,it,j2).call(this,t)),M(this,Ji,null)),(n=p(this,Kn))==null||n.remove(),M(this,Kn,null)}resetEdited(){var e;p(this,$s)&&({contentsObj:St(this,Ji)._,richText:St(this,Qi)._}=p(this,$s),M(this,$s,null),(e=p(this,Kn))==null||e.remove(),M(this,Kn,null),M(this,Zi,null))}forceHide(){M(this,Xs,this.isVisible),p(this,Xs)&&(p(this,ht).hidden=!0)}maybeShow(){p(this,Xs)&&(p(this,Kn)||L(this,it,yd).call(this),M(this,Xs,!1),p(this,ht).hidden=!1)}get isVisible(){return p(this,ht).hidden===!1}}xa=new WeakMap,Oh=new WeakMap,Wh=new WeakMap,_a=new WeakMap,Gs=new WeakMap,ht=new WeakMap,Ji=new WeakMap,zs=new WeakMap,ql=new WeakMap,Hl=new WeakMap,Da=new WeakMap,Ki=new WeakMap,Kn=new WeakMap,Zi=new WeakMap,Vl=new WeakMap,Qi=new WeakMap,Gl=new WeakMap,$s=new WeakMap,Xs=new WeakMap,it=new WeakSet,gd=function(){const e=p(this,Qi),t=p(this,Ji);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&p(this,Qi).html||null},om=function(){var e,t,n;return((n=(t=(e=p(this,it,gd))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.fontSize)||0},X2=function(){var e,t,n;return((n=(t=(e=p(this,it,gd))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.color)||null},j2=function(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:p(this,it,X2),fontSize:p(this,it,om)?`calc(${p(this,it,om)}px * var(--scale-factor))`:""}};for(const s of e.split(`
`))t.push({name:"span",value:s,attributes:r});return n},Y2=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&p(this,Ki))&&L(this,it,md).call(this)},J2=function(){if(p(this,Zi)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:r,pageY:s}}}=p(this,Hl);let o=!!p(this,Da),a=o?p(this,Da):p(this,Vl);for(const b of p(this,ql))if(!a||Ue.intersect(b.data.rect,a)!==null){a=b.data.rect,o=!0;break}const c=Ue.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),u=o?a[2]-a[0]+5:0,d=c[0]+u,h=c[1];M(this,Zi,[100*(d-r)/t,100*(h-s)/n]);const{style:f}=p(this,ht);f.left=`${p(this,Zi)[0]}%`,f.top=`${p(this,Zi)[1]}%`},md=function(){M(this,Ki,!p(this,Ki)),p(this,Ki)?(L(this,it,yd).call(this),p(this,ht).addEventListener("click",p(this,_a)),p(this,ht).addEventListener("keydown",p(this,xa))):(L(this,it,am).call(this),p(this,ht).removeEventListener("click",p(this,_a)),p(this,ht).removeEventListener("keydown",p(this,xa)))},yd=function(){p(this,Kn)||this.render(),this.isVisible?p(this,Ki)&&p(this,ht).classList.add("focused"):(L(this,it,J2).call(this),p(this,ht).hidden=!1,p(this,ht).style.zIndex=parseInt(p(this,ht).style.zIndex)+1e3)},am=function(){p(this,ht).classList.remove("focused"),!(p(this,Ki)||!this.isVisible)&&(p(this,ht).hidden=!0,p(this,ht).style.zIndex=parseInt(p(this,ht).style.zIndex)-1e3)};class K2 extends pt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Ge.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}var zl;class ew extends pt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});W(this,zl,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:n,height:r}=lr(t.rect),s=this.svgFactory.create(n,r,!0),o=M(this,zl,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return p(this,zl)}addHighlightArea(){this.container.classList.add("highlightArea")}}zl=new WeakMap;var $l;class tw extends pt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});W(this,$l,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:n,height:r}=lr(t.rect),s=this.svgFactory.create(n,r,!0),o=t.borderStyle.width,a=M(this,$l,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",n-o),a.setAttribute("height",r-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return p(this,$l)}addHighlightArea(){this.container.classList.add("highlightArea")}}$l=new WeakMap;var Xl;class nw extends pt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});W(this,Xl,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:n,height:r}=lr(t.rect),s=this.svgFactory.create(n,r,!0),o=t.borderStyle.width,a=M(this,Xl,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",n/2),a.setAttribute("cy",r/2),a.setAttribute("rx",n/2-o/2),a.setAttribute("ry",r/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return p(this,Xl)}addHighlightArea(){this.container.classList.add("highlightArea")}}Xl=new WeakMap;var jl;class Z2 extends pt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});W(this,jl,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const t=this.data,{width:n,height:r}=lr(t.rect),s=this.svgFactory.create(n,r,!0);let o=[];for(const c of t.vertices){const l=c.x-t.rect[0],u=t.rect[3]-c.y;o.push(l+","+u)}o=o.join(" ");const a=M(this,jl,this.svgFactory.createElement(this.svgElementName));return a.setAttribute("points",o),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return p(this,jl)}addHighlightArea(){this.container.classList.add("highlightArea")}}jl=new WeakMap;class iw extends Z2{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class rw extends pt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Yl;class Q2 extends pt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});W(this,Yl,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=Ge.INK}render(){this.container.classList.add(this.containerClassName);const t=this.data,{width:n,height:r}=lr(t.rect),s=this.svgFactory.create(n,r,!0);for(const o of t.inkLists){let a=[];for(const l of o){const u=l.x-t.rect[0],d=t.rect[3]-l.y;a.push(`${u},${d}`)}a=a.join(" ");const c=this.svgFactory.createElement(this.svgElementName);p(this,Yl).push(c),c.setAttribute("points",a),c.setAttribute("stroke-width",t.borderStyle.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),!t.popupRef&&this.hasPopupData&&this._createPopup(),s.append(c)}return this.container.append(s),this.container}getElementsToTriggerPopup(){return p(this,Yl)}addHighlightArea(){this.container.classList.add("highlightArea")}}Yl=new WeakMap;class sw extends pt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class ow extends pt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class aw extends pt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class cw extends pt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class e_ extends pt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Jl,Kl,cm;class lw extends pt{constructor(t){var r;super(t,{isRenderable:!0});W(this,Kl);W(this,Jl,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:n}=this;let r;n.hasAppearance||n.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),r.addEventListener("dblclick",L(this,Kl,cm).bind(this)),M(this,Jl,r);const{isMac:s}=an.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(s?o.metaKey:o.ctrlKey)&&L(this,Kl,cm).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),t.append(r),t}getElementsToTriggerPopup(){return p(this,Jl)}addHighlightArea(){this.container.classList.add("highlightArea")}}Jl=new WeakMap,Kl=new WeakSet,cm=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Zl,js,Ta,xo,t_,lm;class uw{constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:r,page:s,viewport:o}){W(this,xo);W(this,Zl,null);W(this,js,null);W(this,Ta,new Map);this.div=e,M(this,Zl,t),M(this,js,n),this.page=s,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=r}async render(e){var o;const{annotations:t}=e,n=this.div;go(n,this.viewport);const r=new Map,s={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new ey,annotationStorage:e.annotationStorage||new sy,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const a of t){if(a.noHTML)continue;const c=a.annotationType===bt.POPUP;if(c){const d=r.get(a.id);if(!d)continue;s.elements=d}else{const{width:d,height:h}=lr(a.rect);if(d<=0||h<=0)continue}s.data=a;const l=$E.create(s);if(!l.isRenderable)continue;if(!c&&a.popupRef){const d=r.get(a.popupRef);d?d.push(l):r.set(a.popupRef,[l])}const u=l.render();a.hidden&&(u.style.visibility="hidden"),L(this,xo,t_).call(this,u,a.id),l.annotationEditorType>0&&(p(this,Ta).set(l.data.id,l),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(l))}L(this,xo,lm).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,go(t,{rotation:e.rotation}),L(this,xo,lm).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(p(this,Ta).values())}getEditableAnnotation(e){return p(this,Ta).get(e)}}Zl=new WeakMap,js=new WeakMap,Ta=new WeakMap,xo=new WeakSet,t_=function(e,t){var r;const n=e.firstChild||e;n.id=`${J1}${t}`,this.div.append(e),(r=p(this,Zl))==null||r.moveElementInDOM(this.div,e,n,!1)},lm=function(){if(!p(this,js))return;const e=this.div;for(const[t,n]of p(this,js)){const r=e.querySelector(`[data-annotation-id="${t}"]`);if(!r)continue;n.className="annotationContent";const{firstChild:s}=r;s?s.nodeName==="CANVAS"?s.replaceWith(n):s.classList.contains("annotationContent")?s.after(n):s.before(n):r.append(n)}p(this,js).clear()};const $u=/\r\n?|\n/g;var Ql,eu,tu,nu,iu,Zn,yn,ru,bn,Aa,yt,n_,i_,r_,bd,dr,vd,xd,s_,dm,o_;const ot=class ot extends et{constructor(t){super({...t,name:"freeTextEditor"});W(this,yt);W(this,Ql,this.editorDivBlur.bind(this));W(this,eu,this.editorDivFocus.bind(this));W(this,tu,this.editorDivInput.bind(this));W(this,nu,this.editorDivKeydown.bind(this));W(this,iu,this.editorDivPaste.bind(this));W(this,Zn);W(this,yn,"");W(this,ru,`${this.id}-editor`);W(this,bn);W(this,Aa,null);M(this,Zn,t.color||ot._defaultColor||et._defaultLineColor),M(this,bn,t.fontSize||ot._defaultFontSize)}static get _keyboardManager(){const t=ot.prototype,n=o=>o.isEmpty(),r=mo.TRANSLATE_SMALL,s=mo.TRANSLATE_BIG;return ze(this,"_keyboardManager",new Nu([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[s,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,s],checker:n}]]))}static initialize(t,n){et.initialize(t,n,{strings:["pdfjs-free-text-default-content"]});const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case Pe.FREETEXT_SIZE:ot._defaultFontSize=n;break;case Pe.FREETEXT_COLOR:ot._defaultColor=n;break}}updateParams(t,n){switch(t){case Pe.FREETEXT_SIZE:L(this,yt,n_).call(this,n);break;case Pe.FREETEXT_COLOR:L(this,yt,i_).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Pe.FREETEXT_SIZE,ot._defaultFontSize],[Pe.FREETEXT_COLOR,ot._defaultColor||et._defaultLineColor]]}get propertiesToUpdate(){return[[Pe.FREETEXT_SIZE,p(this,bn)],[Pe.FREETEXT_COLOR,p(this,Zn)]]}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-ot._internalPadding*t,-(ot._internalPadding+p(this,bn))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(Ge.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",p(this,nu)),this.editorDiv.addEventListener("focus",p(this,eu)),this.editorDiv.addEventListener("blur",p(this,Ql)),this.editorDiv.addEventListener("input",p(this,tu)),this.editorDiv.addEventListener("paste",p(this,iu)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",p(this,ru)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",p(this,nu)),this.editorDiv.removeEventListener("focus",p(this,eu)),this.editorDiv.removeEventListener("blur",p(this,Ql)),this.editorDiv.removeEventListener("input",p(this,tu)),this.editorDiv.removeEventListener("paste",p(this,iu)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var t;this.width||(this.enableEditMode(),this.editorDiv.focus(),(t=this._initialOptions)!=null&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=p(this,yn),n=M(this,yn,L(this,yt,r_).call(this).trimEnd());if(t===n)return;const r=s=>{if(M(this,yn,s),!s){this.remove();return}L(this,yt,xd).call(this),this._uiManager.rebuild(this),L(this,yt,bd).call(this)};this.addCommands({cmd:()=>{r(n)},undo:()=>{r(t)},mustExec:!1}),L(this,yt,bd).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){ot._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,n;this.width&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",p(this,ru)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),et._l10nPromise.get("pdfjs-free-text-default-content").then(s=>{var o;return(o=this.editorDiv)==null?void 0:o.setAttribute("default-content",s)}),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${p(this,bn)}px * var(--scale-factor))`,r.color=p(this,Zn),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),rh(this,this.div,["dblclick","keydown"]),this.width){const[s,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=p(this,Aa);let[c,l]=this.getInitialTranslation();[c,l]=this.pageTranslationToScreen(c,l);const[u,d]=this.pageDimensions,[h,f]=this.pageTranslation;let b,g;switch(this.rotation){case 0:b=t+(a[0]-h)/u,g=n+this.height-(a[1]-f)/d;break;case 90:b=t+(a[0]-h)/u,g=n-(a[1]-f)/d,[c,l]=[l,-c];break;case 180:b=t-this.width+(a[0]-h)/u,g=n-(a[1]-f)/d,[c,l]=[-c,-l];break;case 270:b=t+(a[0]-h-this.height*d)/u,g=n+(a[1]-f-this.width*u)/d,[c,l]=[-l,c];break}this.setAt(b*s,g*o,c,l)}else this.setAt(t*s,n*o,this.width*s,this.height*o);L(this,yt,xd).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var b,g,y;const n=t.clipboardData||window.clipboardData,{types:r}=n;if(r.length===1&&r[0]==="text/plain")return;t.preventDefault();const s=L(b=ot,dr,dm).call(b,n.getData("text")||"").replaceAll($u,`
`);if(!s)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!s.includes(`
`)){a.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:l}=a,u=[],d=[];if(c.nodeType===Node.TEXT_NODE){const v=c.parentElement;if(d.push(c.nodeValue.slice(l).replaceAll($u,"")),v!==this.editorDiv){let x=u;for(const D of this.editorDiv.childNodes){if(D===v){x=d;continue}x.push(L(g=ot,dr,vd).call(g,D))}}u.push(c.nodeValue.slice(0,l).replaceAll($u,""))}else if(c===this.editorDiv){let v=u,x=0;for(const D of this.editorDiv.childNodes)x++===l&&(v=d),v.push(L(y=ot,dr,vd).call(y,D))}M(this,yn,`${u.join(`
`)}${s}${d.join(`
`)}`),L(this,yt,xd).call(this);const h=new Range;let f=u.reduce((v,x)=>v+x.length,0);for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const x=v.nodeValue.length;if(f<=x){h.setStart(v,f),h.setEnd(v,f);break}f-=x}o.removeAllRanges(),o.addRange(h)}get contentDiv(){return this.editorDiv}static deserialize(t,n,r){var a;let s=null;if(t instanceof K2){const{data:{defaultAppearanceData:{fontSize:c,fontColor:l},rect:u,rotation:d,id:h},textContent:f,textPosition:b,parent:{page:{pageNumber:g}}}=t;if(!f||f.length===0)return null;s=t={annotationType:Ge.FREETEXT,color:Array.from(l),fontSize:c,value:f.join(`
`),position:b,pageIndex:g-1,rect:u.slice(0),rotation:d,id:h,deleted:!1}}const o=super.deserialize(t,n,r);return M(o,bn,t.fontSize),M(o,Zn,Ue.makeHexColor(...t.color)),M(o,yn,L(a=ot,dr,dm).call(a,t.value)),o.annotationElementId=t.id||null,M(o,Aa,s),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const n=ot._internalPadding*this.parentScale,r=this.getRect(n,n),s=et._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:p(this,Zn)),o={annotationType:Ge.FREETEXT,color:s,fontSize:p(this,bn),value:L(this,yt,s_).call(this),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?o:this.annotationElementId&&!L(this,yt,o_).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(t){const n=super.renderAnnotationElement(t);if(this.deleted)return n;const{style:r}=n;r.fontSize=`calc(${p(this,bn)}px * var(--scale-factor))`,r.color=p(this,Zn),n.replaceChildren();for(const o of p(this,yn).split(`
`)){const a=document.createElement("div");a.append(o?document.createTextNode(o):document.createElement("br")),n.append(a)}const s=ot._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(s,s),popupContent:p(this,yn)}),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Ql=new WeakMap,eu=new WeakMap,tu=new WeakMap,nu=new WeakMap,iu=new WeakMap,Zn=new WeakMap,yn=new WeakMap,ru=new WeakMap,bn=new WeakMap,Aa=new WeakMap,yt=new WeakSet,n_=function(t){const n=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--scale-factor))`,this.translate(0,-(s-p(this,bn))*this.parentScale),M(this,bn,s),L(this,yt,bd).call(this)},r=p(this,bn);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Pe.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},i_=function(t){const n=s=>{M(this,Zn,this.editorDiv.style.color=s)},r=p(this,Zn);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Pe.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},r_=function(){var n;const t=[];this.editorDiv.normalize();for(const r of this.editorDiv.childNodes)t.push(L(n=ot,dr,vd).call(n,r));return t.join(`
`)},bd=function(){const[t,n]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:s,div:o}=this,a=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",s.div.append(this.div),r=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=r.width/t,this.height=r.height/n):(this.width=r.height/t,this.height=r.width/n),this.fixAndSetPosition()},dr=new WeakSet,vd=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll($u,"")},xd=function(){if(this.editorDiv.replaceChildren(),!!p(this,yn))for(const t of p(this,yn).split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}},s_=function(){return p(this,yn).replaceAll(" "," ")},dm=function(t){return t.replaceAll(" "," ")},o_=function(t){const{value:n,fontSize:r,color:s,pageIndex:o}=p(this,Aa);return this._hasBeenMoved||t.value!==n||t.fontSize!==r||t.color.some((a,c)=>a!==s[c])||t.pageIndex!==o},W(ot,dr),Le(ot,"_freeTextDefaultContent",""),Le(ot,"_internalPadding",0),Le(ot,"_defaultColor",null),Le(ot,"_defaultFontSize",10),Le(ot,"_type","freetext"),Le(ot,"_editorType",Ge.FREETEXT);let um=ot;var su,kr,Qn,Qt,a_,_d,c_,l_,fm;class hm{constructor(e,t=0,n=0,r=!0){W(this,Qt);W(this,su);W(this,kr,[]);W(this,Qn,[]);let s=1/0,o=-1/0,a=1/0,c=-1/0;const u=10**-4;for(const{x:v,y:x,width:D,height:A}of e){const T=Math.floor((v-t)/u)*u,E=Math.ceil((v+D+t)/u)*u,I=Math.floor((x-t)/u)*u,N=Math.ceil((x+A+t)/u)*u,R=[T,I,N,!0],P=[E,I,N,!1];p(this,kr).push(R,P),s=Math.min(s,T),o=Math.max(o,E),a=Math.min(a,I),c=Math.max(c,N)}const d=o-s+2*n,h=c-a+2*n,f=s-n,b=a-n,g=p(this,kr).at(r?-1:-2),y=[g[0],g[2]];for(const v of p(this,kr)){const[x,D,A]=v;v[0]=(x-f)/d,v[1]=(D-b)/h,v[2]=(A-b)/h}M(this,su,{x:f,y:b,width:d,height:h,lastPoint:y})}getOutlines(){p(this,kr).sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of p(this,kr))t[3]?(e.push(...L(this,Qt,fm).call(this,t)),L(this,Qt,c_).call(this,t)):(L(this,Qt,l_).call(this,t),e.push(...L(this,Qt,fm).call(this,t)));return L(this,Qt,a_).call(this,e)}}su=new WeakMap,kr=new WeakMap,Qn=new WeakMap,Qt=new WeakSet,a_=function(e){const t=[],n=new Set;for(const o of e){const[a,c,l]=o;t.push([a,c,o],[a,l,o])}t.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=t.length;o<a;o+=2){const c=t[o][2],l=t[o+1][2];c.push(l),l.push(c),n.add(c),n.add(l)}const r=[];let s;for(;n.size>0;){const o=n.values().next().value;let[a,c,l,u,d]=o;n.delete(o);let h=a,f=c;for(s=[a,l],r.push(s);;){let b;if(n.has(u))b=u;else if(n.has(d))b=d;else break;n.delete(b),[a,c,l,u,d]=b,h!==a&&(s.push(h,f,a,f===c?c:l),h=a),f=f===c?l:c}s.push(h,f)}return new dw(r,p(this,su))},_d=function(e){const t=p(this,Qn);let n=0,r=t.length-1;for(;n<=r;){const s=n+r>>1,o=t[s][0];if(o===e)return s;o<e?n=s+1:r=s-1}return r+1},c_=function([,e,t]){const n=L(this,Qt,_d).call(this,e);p(this,Qn).splice(n,0,[e,t])},l_=function([,e,t]){const n=L(this,Qt,_d).call(this,e);for(let r=n;r<p(this,Qn).length;r++){const[s,o]=p(this,Qn)[r];if(s!==e)break;if(s===e&&o===t){p(this,Qn).splice(r,1);return}}for(let r=n-1;r>=0;r--){const[s,o]=p(this,Qn)[r];if(s!==e)break;if(s===e&&o===t){p(this,Qn).splice(r,1);return}}},fm=function(e){const[t,n,r]=e,s=[[t,n,r]],o=L(this,Qt,_d).call(this,r);for(let a=0;a<o;a++){const[c,l]=p(this,Qn)[a];for(let u=0,d=s.length;u<d;u++){const[,h,f]=s[u];if(!(l<=h||f<=c)){if(h>=c){if(f>l)s[u][1]=l;else{if(d===1)return[];s.splice(u,1),u--,d--}continue}s[u][2]=c,f>l&&s.push([t,l,f])}}}return s};class u_{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(e,t){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof gm}}var ou,Ea;class dw extends u_{constructor(t,n){super();W(this,ou);W(this,Ea);M(this,Ea,t),M(this,ou,n)}toSVGPath(){const t=[];for(const n of p(this,Ea)){let[r,s]=n;t.push(`M${r} ${s}`);for(let o=2;o<n.length;o+=2){const a=n[o],c=n[o+1];a===r?(t.push(`V${c}`),s=c):c===s&&(t.push(`H${a}`),r=a)}t.push("Z")}return t.join(" ")}serialize([t,n,r,s],o){const a=[],c=r-t,l=s-n;for(const u of p(this,Ea)){const d=new Array(u.length);for(let h=0;h<u.length;h+=2)d[h]=t+u[h]*c,d[h+1]=s-u[h+1]*l;a.push(d)}return a}get box(){return p(this,ou)}}ou=new WeakMap,Ea=new WeakMap;var yi,er,wa,Ca,bi,Ve,Ys,Js,au,cu,Sa,Ua,Mr,lu,qh,Hh,uu,pm;const ki=class ki{constructor({x:e,y:t},n,r,s,o,a=0){W(this,uu);W(this,yi);W(this,er,[]);W(this,wa);W(this,Ca);W(this,bi,[]);W(this,Ve,new Float64Array(18));W(this,Ys);W(this,Js);W(this,au);W(this,cu);W(this,Sa);W(this,Ua);W(this,Mr,[]);M(this,yi,n),M(this,Ua,s*r),M(this,Ca,o),p(this,Ve).set([NaN,NaN,NaN,NaN,e,t],6),M(this,wa,a),M(this,cu,p(ki,lu)*r),M(this,au,p(ki,Hh)*r),M(this,Sa,r),p(this,Mr).push(e,t)}get free(){return!0}isEmpty(){return isNaN(p(this,Ve)[8])}add({x:e,y:t}){var R;M(this,Ys,e),M(this,Js,t);const[n,r,s,o]=p(this,yi);let[a,c,l,u]=p(this,Ve).subarray(8,12);const d=e-l,h=t-u,f=Math.hypot(d,h);if(f<p(this,au))return!1;const b=f-p(this,cu),g=b/f,y=g*d,v=g*h;let x=a,D=c;a=l,c=u,l+=y,u+=v,(R=p(this,Mr))==null||R.push(e,t);const A=-v/b,T=y/b,E=A*p(this,Ua),I=T*p(this,Ua);return p(this,Ve).set(p(this,Ve).subarray(2,8),0),p(this,Ve).set([l+E,u+I],4),p(this,Ve).set(p(this,Ve).subarray(14,18),12),p(this,Ve).set([l-E,u-I],16),isNaN(p(this,Ve)[6])?(p(this,bi).length===0&&(p(this,Ve).set([a+E,c+I],2),p(this,bi).push(NaN,NaN,NaN,NaN,(a+E-n)/s,(c+I-r)/o),p(this,Ve).set([a-E,c-I],14),p(this,er).push(NaN,NaN,NaN,NaN,(a-E-n)/s,(c-I-r)/o)),p(this,Ve).set([x,D,a,c,l,u],6),!this.isEmpty()):(p(this,Ve).set([x,D,a,c,l,u],6),Math.abs(Math.atan2(D-c,x-a)-Math.atan2(v,y))<Math.PI/2?([a,c,l,u]=p(this,Ve).subarray(2,6),p(this,bi).push(NaN,NaN,NaN,NaN,((a+l)/2-n)/s,((c+u)/2-r)/o),[a,c,x,D]=p(this,Ve).subarray(14,18),p(this,er).push(NaN,NaN,NaN,NaN,((x+a)/2-n)/s,((D+c)/2-r)/o),!0):([x,D,a,c,l,u]=p(this,Ve).subarray(0,6),p(this,bi).push(((x+5*a)/6-n)/s,((D+5*c)/6-r)/o,((5*a+l)/6-n)/s,((5*c+u)/6-r)/o,((a+l)/2-n)/s,((c+u)/2-r)/o),[l,u,a,c,x,D]=p(this,Ve).subarray(12,18),p(this,er).push(((x+5*a)/6-n)/s,((D+5*c)/6-r)/o,((5*a+l)/6-n)/s,((5*c+u)/6-r)/o,((a+l)/2-n)/s,((c+u)/2-r)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=p(this,bi),t=p(this,er),n=p(this,Ve).subarray(4,6),r=p(this,Ve).subarray(16,18),[s,o,a,c]=p(this,yi),[l,u,d,h]=L(this,uu,pm).call(this);if(isNaN(p(this,Ve)[6])&&!this.isEmpty())return`M${(p(this,Ve)[2]-s)/a} ${(p(this,Ve)[3]-o)/c} L${(p(this,Ve)[4]-s)/a} ${(p(this,Ve)[5]-o)/c} L${l} ${u} L${d} ${h} L${(p(this,Ve)[16]-s)/a} ${(p(this,Ve)[17]-o)/c} L${(p(this,Ve)[14]-s)/a} ${(p(this,Ve)[15]-o)/c} Z`;const f=[];f.push(`M${e[4]} ${e[5]}`);for(let b=6;b<e.length;b+=6)isNaN(e[b])?f.push(`L${e[b+4]} ${e[b+5]}`):f.push(`C${e[b]} ${e[b+1]} ${e[b+2]} ${e[b+3]} ${e[b+4]} ${e[b+5]}`);f.push(`L${(n[0]-s)/a} ${(n[1]-o)/c} L${l} ${u} L${d} ${h} L${(r[0]-s)/a} ${(r[1]-o)/c}`);for(let b=t.length-6;b>=6;b-=6)isNaN(t[b])?f.push(`L${t[b+4]} ${t[b+5]}`):f.push(`C${t[b]} ${t[b+1]} ${t[b+2]} ${t[b+3]} ${t[b+4]} ${t[b+5]}`);return f.push(`L${t[4]} ${t[5]} Z`),f.join(" ")}getOutlines(){var v;const e=p(this,bi),t=p(this,er),n=p(this,Ve),r=n.subarray(4,6),s=n.subarray(16,18),[o,a,c,l]=p(this,yi),u=new Float64Array((((v=p(this,Mr))==null?void 0:v.length)??0)+2);for(let x=0,D=u.length-2;x<D;x+=2)u[x]=(p(this,Mr)[x]-o)/c,u[x+1]=(p(this,Mr)[x+1]-a)/l;u[u.length-2]=(p(this,Ys)-o)/c,u[u.length-1]=(p(this,Js)-a)/l;const[d,h,f,b]=L(this,uu,pm).call(this);if(isNaN(n[6])&&!this.isEmpty()){const x=new Float64Array(36);return x.set([NaN,NaN,NaN,NaN,(n[2]-o)/c,(n[3]-a)/l,NaN,NaN,NaN,NaN,(n[4]-o)/c,(n[5]-a)/l,NaN,NaN,NaN,NaN,d,h,NaN,NaN,NaN,NaN,f,b,NaN,NaN,NaN,NaN,(n[16]-o)/c,(n[17]-a)/l,NaN,NaN,NaN,NaN,(n[14]-o)/c,(n[15]-a)/l],0),new gm(x,u,p(this,yi),p(this,Sa),p(this,wa),p(this,Ca))}const g=new Float64Array(p(this,bi).length+24+p(this,er).length);let y=e.length;for(let x=0;x<y;x+=2){if(isNaN(e[x])){g[x]=g[x+1]=NaN;continue}g[x]=e[x],g[x+1]=e[x+1]}g.set([NaN,NaN,NaN,NaN,(r[0]-o)/c,(r[1]-a)/l,NaN,NaN,NaN,NaN,d,h,NaN,NaN,NaN,NaN,f,b,NaN,NaN,NaN,NaN,(s[0]-o)/c,(s[1]-a)/l],y),y+=24;for(let x=t.length-6;x>=6;x-=6)for(let D=0;D<6;D+=2){if(isNaN(t[x+D])){g[y]=g[y+1]=NaN,y+=2;continue}g[y]=t[x+D],g[y+1]=t[x+D+1],y+=2}return g.set([NaN,NaN,NaN,NaN,t[4],t[5]],y),new gm(g,u,p(this,yi),p(this,Sa),p(this,wa),p(this,Ca))}};yi=new WeakMap,er=new WeakMap,wa=new WeakMap,Ca=new WeakMap,bi=new WeakMap,Ve=new WeakMap,Ys=new WeakMap,Js=new WeakMap,au=new WeakMap,cu=new WeakMap,Sa=new WeakMap,Ua=new WeakMap,Mr=new WeakMap,lu=new WeakMap,qh=new WeakMap,Hh=new WeakMap,uu=new WeakSet,pm=function(){const e=p(this,Ve).subarray(4,6),t=p(this,Ve).subarray(16,18),[n,r,s,o]=p(this,yi);return[(p(this,Ys)+(e[0]-t[0])/2-n)/s,(p(this,Js)+(e[1]-t[1])/2-r)/o,(p(this,Ys)+(t[0]-e[0])/2-n)/s,(p(this,Js)+(t[1]-e[1])/2-r)/o]},W(ki,lu,8),W(ki,qh,2),W(ki,Hh,p(ki,lu)+p(ki,qh));let ah=ki;var Ia,Ks,tr,du,vn,hu,ft,cn,Sc,Uc,d_;class gm extends u_{constructor(t,n,r,s,o,a){super();W(this,cn);W(this,Ia);W(this,Ks,null);W(this,tr);W(this,du);W(this,vn);W(this,hu);W(this,ft);M(this,ft,t),M(this,vn,n),M(this,Ia,r),M(this,hu,s),M(this,tr,o),M(this,du,a),L(this,cn,d_).call(this,a);const{x:c,y:l,width:u,height:d}=p(this,Ks);for(let h=0,f=t.length;h<f;h+=2)t[h]=(t[h]-c)/u,t[h+1]=(t[h+1]-l)/d;for(let h=0,f=n.length;h<f;h+=2)n[h]=(n[h]-c)/u,n[h+1]=(n[h+1]-l)/d}toSVGPath(){const t=[`M${p(this,ft)[4]} ${p(this,ft)[5]}`];for(let n=6,r=p(this,ft).length;n<r;n+=6){if(isNaN(p(this,ft)[n])){t.push(`L${p(this,ft)[n+4]} ${p(this,ft)[n+5]}`);continue}t.push(`C${p(this,ft)[n]} ${p(this,ft)[n+1]} ${p(this,ft)[n+2]} ${p(this,ft)[n+3]} ${p(this,ft)[n+4]} ${p(this,ft)[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,r,s],o){const a=r-t,c=s-n;let l,u;switch(o){case 0:l=L(this,cn,Sc).call(this,p(this,ft),t,s,a,-c),u=L(this,cn,Sc).call(this,p(this,vn),t,s,a,-c);break;case 90:l=L(this,cn,Uc).call(this,p(this,ft),t,n,a,c),u=L(this,cn,Uc).call(this,p(this,vn),t,n,a,c);break;case 180:l=L(this,cn,Sc).call(this,p(this,ft),r,n,-a,c),u=L(this,cn,Sc).call(this,p(this,vn),r,n,-a,c);break;case 270:l=L(this,cn,Uc).call(this,p(this,ft),r,s,-a,-c),u=L(this,cn,Uc).call(this,p(this,vn),r,s,-a,-c);break}return{outline:Array.from(l),points:[Array.from(u)]}}get box(){return p(this,Ks)}getNewOutline(t,n){const{x:r,y:s,width:o,height:a}=p(this,Ks),[c,l,u,d]=p(this,Ia),h=o*u,f=a*d,b=r*u+c,g=s*d+l,y=new ah({x:p(this,vn)[0]*h+b,y:p(this,vn)[1]*f+g},p(this,Ia),p(this,hu),t,p(this,du),n??p(this,tr));for(let v=2;v<p(this,vn).length;v+=2)y.add({x:p(this,vn)[v]*h+b,y:p(this,vn)[v+1]*f+g});return y.getOutlines()}}Ia=new WeakMap,Ks=new WeakMap,tr=new WeakMap,du=new WeakMap,vn=new WeakMap,hu=new WeakMap,ft=new WeakMap,cn=new WeakSet,Sc=function(t,n,r,s,o){const a=new Float64Array(t.length);for(let c=0,l=t.length;c<l;c+=2)a[c]=n+t[c]*s,a[c+1]=r+t[c+1]*o;return a},Uc=function(t,n,r,s,o){const a=new Float64Array(t.length);for(let c=0,l=t.length;c<l;c+=2)a[c]=n+t[c+1]*s,a[c+1]=r+t[c]*o;return a},d_=function(t){const n=p(this,ft);let r=n[4],s=n[5],o=r,a=s,c=r,l=s,u=r,d=s;const h=t?Math.max:Math.min;for(let v=6,x=n.length;v<x;v+=6){if(isNaN(n[v]))o=Math.min(o,n[v+4]),a=Math.min(a,n[v+5]),c=Math.max(c,n[v+4]),l=Math.max(l,n[v+5]),d<n[v+5]?(u=n[v+4],d=n[v+5]):d===n[v+5]&&(u=h(u,n[v+4]));else{const D=Ue.bezierBoundingBox(r,s,...n.slice(v,v+6));o=Math.min(o,D[0]),a=Math.min(a,D[1]),c=Math.max(c,D[2]),l=Math.max(l,D[3]),d<D[3]?(u=D[2],d=D[3]):d===D[3]&&(u=h(u,D[2]))}r=n[v+4],s=n[v+5]}const f=o-p(this,tr),b=a-p(this,tr),g=c-o+2*p(this,tr),y=l-a+2*p(this,tr);M(this,Ks,{x:f,y:b,width:g,height:y,lastPoint:[u,d]})};var fu,pu,ei,Zs,Ra,xt,gu,Fa,mu,yu,Pr,Na,st,mm,ym,h_,ps,f_,Dr;const Mi=class Mi{constructor({editor:e=null,uiManager:t=null}){W(this,st);W(this,fu,L(this,st,h_).bind(this));W(this,pu,L(this,st,f_).bind(this));W(this,ei,null);W(this,Zs,null);W(this,Ra);W(this,xt,null);W(this,gu,!1);W(this,Fa,!1);W(this,mu,null);W(this,yu);W(this,Pr,null);W(this,Na);var n;e?(M(this,Fa,!1),M(this,Na,Pe.HIGHLIGHT_COLOR),M(this,mu,e)):(M(this,Fa,!0),M(this,Na,Pe.HIGHLIGHT_DEFAULT_COLOR)),M(this,Pr,(e==null?void 0:e._uiManager)||t),M(this,yu,p(this,Pr)._eventBus),M(this,Ra,(e==null?void 0:e.color)||((n=p(this,Pr))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98")}static get _keyboardManager(){return ze(this,"_keyboardManager",new Nu([[["Escape","mac+Escape"],Mi.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Mi.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Mi.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Mi.prototype._moveToPrevious],[["Home","mac+Home"],Mi.prototype._moveToBeginning],[["End","mac+End"],Mi.prototype._moveToEnd]]))}renderButton(){const e=M(this,ei,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0),e.addEventListener("click",L(this,st,ps).bind(this)),e.addEventListener("keydown",p(this,fu));const t=M(this,Zs,document.createElement("span"));return t.className="swatch",t.setAttribute("aria-hidden",!0),t.style.backgroundColor=p(this,Ra),e.append(t),e}renderMainDropdown(){const e=M(this,xt,L(this,st,mm).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===p(this,ei)){L(this,st,ps).call(this,e);return}const t=e.target.getAttribute("data-color");t&&L(this,st,ym).call(this,t,e)}_moveToNext(e){var t,n;if(!p(this,st,Dr)){L(this,st,ps).call(this,e);return}if(e.target===p(this,ei)){(t=p(this,xt).firstChild)==null||t.focus();return}(n=e.target.nextSibling)==null||n.focus()}_moveToPrevious(e){var t,n;if(e.target===((t=p(this,xt))==null?void 0:t.firstChild)||e.target===p(this,ei)){p(this,st,Dr)&&this._hideDropdownFromKeyboard();return}p(this,st,Dr)||L(this,st,ps).call(this,e),(n=e.target.previousSibling)==null||n.focus()}_moveToBeginning(e){var t;if(!p(this,st,Dr)){L(this,st,ps).call(this,e);return}(t=p(this,xt).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!p(this,st,Dr)){L(this,st,ps).call(this,e);return}(t=p(this,xt).lastChild)==null||t.focus()}hideDropdown(){var e;(e=p(this,xt))==null||e.classList.add("hidden"),window.removeEventListener("pointerdown",p(this,pu))}_hideDropdownFromKeyboard(){var e;if(!p(this,Fa)){if(!p(this,st,Dr)){(e=p(this,mu))==null||e.unselect();return}this.hideDropdown(),p(this,ei).focus({preventScroll:!0,focusVisible:p(this,gu)})}}updateColor(e){if(p(this,Zs)&&(p(this,Zs).style.backgroundColor=e),!p(this,xt))return;const t=p(this,Pr).highlightColors.values();for(const n of p(this,xt).children)n.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=p(this,ei))==null||e.remove(),M(this,ei,null),M(this,Zs,null),(t=p(this,xt))==null||t.remove(),M(this,xt,null)}};fu=new WeakMap,pu=new WeakMap,ei=new WeakMap,Zs=new WeakMap,Ra=new WeakMap,xt=new WeakMap,gu=new WeakMap,Fa=new WeakMap,mu=new WeakMap,yu=new WeakMap,Pr=new WeakMap,Na=new WeakMap,st=new WeakSet,mm=function(){const e=document.createElement("div");e.addEventListener("contextmenu",ln),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[t,n]of p(this,Pr).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",n),r.title=t,r.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${t}`);const s=document.createElement("span");r.append(s),s.className="swatch",s.style.backgroundColor=n,r.setAttribute("aria-selected",n===p(this,Ra)),r.addEventListener("click",L(this,st,ym).bind(this,n)),e.append(r)}return e.addEventListener("keydown",p(this,fu)),e},ym=function(e,t){t.stopPropagation(),p(this,yu).dispatch("switchannotationeditorparams",{source:this,type:p(this,Na),value:e})},h_=function(e){Mi._keyboardManager.exec(this,e)},ps=function(e){if(p(this,st,Dr)){this.hideDropdown();return}if(M(this,gu,e.detail===0),window.addEventListener("pointerdown",p(this,pu)),p(this,xt)){p(this,xt).classList.remove("hidden");return}const t=M(this,xt,L(this,st,mm).call(this));p(this,ei).append(t)},f_=function(e){var t;(t=p(this,xt))!=null&&t.contains(e.target)||this.hideDropdown()},Dr=function(){return p(this,xt)&&!p(this,xt).classList.contains("hidden")};let ch=Mi;var ka,bu,Lr,Qs,Ma,Un,vu,xu,eo,ti,jt,xn,Vh,Pa,to,_t,La,vi,_u,He,bm,vm,p_,g_,m_,xm,Ic,Pn,Bo,y_,Dd,Rc,b_,v_,x_,__;const Ye=class Ye extends et{constructor(t){super({...t,name:"highlightEditor"});W(this,He);W(this,ka,null);W(this,bu,0);W(this,Lr);W(this,Qs,null);W(this,Ma,null);W(this,Un,null);W(this,vu,null);W(this,xu,0);W(this,eo,null);W(this,ti,null);W(this,jt,null);W(this,xn,!1);W(this,Vh,L(this,He,y_).bind(this));W(this,Pa,null);W(this,to);W(this,_t,null);W(this,La,"");W(this,vi);W(this,_u,"");this.color=t.color||Ye._defaultColor,M(this,vi,t.thickness||Ye._defaultThickness),M(this,to,t.opacity||Ye._defaultOpacity),M(this,Lr,t.boxes||null),M(this,_u,t.methodOfCreation||""),M(this,La,t.text||""),this._isDraggable=!1,t.highlightId>-1?(M(this,xn,!0),L(this,He,vm).call(this,t),L(this,He,Ic).call(this)):(M(this,ka,t.anchorNode),M(this,bu,t.anchorOffset),M(this,vu,t.focusNode),M(this,xu,t.focusOffset),L(this,He,bm).call(this),L(this,He,Ic).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=Ye.prototype;return ze(this,"_keyboardManager",new Nu([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:p(this,xn)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:p(this,vi),methodOfCreation:p(this,_u)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,n){var r;et.initialize(t,n),Ye._defaultColor||(Ye._defaultColor=((r=n.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(t,n){switch(t){case Pe.HIGHLIGHT_DEFAULT_COLOR:Ye._defaultColor=n;break;case Pe.HIGHLIGHT_THICKNESS:Ye._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return p(this,Pa)}updateParams(t,n){switch(t){case Pe.HIGHLIGHT_COLOR:L(this,He,p_).call(this,n);break;case Pe.HIGHLIGHT_THICKNESS:L(this,He,g_).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Pe.HIGHLIGHT_DEFAULT_COLOR,Ye._defaultColor],[Pe.HIGHLIGHT_THICKNESS,Ye._defaultThickness]]}get propertiesToUpdate(){return[[Pe.HIGHLIGHT_COLOR,this.color||Ye._defaultColor],[Pe.HIGHLIGHT_THICKNESS,p(this,vi)||Ye._defaultThickness],[Pe.HIGHLIGHT_FREE,p(this,xn)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(M(this,Ma,new ch({editor:this})),t.addColorPicker(p(this,Ma))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(L(this,He,Rc).call(this))}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,L(this,He,Rc).call(this))}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){L(this,He,xm).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(L(this,He,Ic).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let n=!1;this.parent&&!t?L(this,He,xm).call(this):t&&(L(this,He,Ic).call(this,t),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),n&&this.select()}rotate(t){var s,o,a;const{drawLayer:n}=this.parent;let r;p(this,xn)?(t=(t-this.rotation+360)%360,r=L(s=Ye,Pn,Bo).call(s,p(this,ti).box,t)):r=L(o=Ye,Pn,Bo).call(o,this,t),n.rotate(p(this,jt),t),n.rotate(p(this,_t),t),n.updateBox(p(this,jt),r),n.updateBox(p(this,_t),L(a=Ye,Pn,Bo).call(a,p(this,Un).box,t))}render(){if(this.div)return this.div;const t=super.render();p(this,La)&&(t.setAttribute("aria-label",p(this,La)),t.setAttribute("role","mark")),p(this,xn)?t.classList.add("free"):this.div.addEventListener("keydown",p(this,Vh));const n=M(this,eo,document.createElement("div"));t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=p(this,Qs);const[r,s]=this.parentDimensions;return this.setDims(this.width*r,this.height*s),rh(this,p(this,eo),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.parent.drawLayer.addClass(p(this,_t),"hovered")}pointerleave(){this.parent.drawLayer.removeClass(p(this,_t),"hovered")}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:L(this,He,Dd).call(this,!0);break;case 1:case 3:L(this,He,Dd).call(this,!1);break}}select(){var t,n;super.select(),p(this,_t)&&((t=this.parent)==null||t.drawLayer.removeClass(p(this,_t),"hovered"),(n=this.parent)==null||n.drawLayer.addClass(p(this,_t),"selected"))}unselect(){var t;super.unselect(),p(this,_t)&&((t=this.parent)==null||t.drawLayer.removeClass(p(this,_t),"selected"),p(this,xn)||L(this,He,Dd).call(this,!1))}get _mustFixPosition(){return!p(this,xn)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.show(p(this,jt),t),this.parent.drawLayer.show(p(this,_t),t))}static startHighlighting(t,n,{target:r,x:s,y:o}){const{x:a,y:c,width:l,height:u}=r.getBoundingClientRect(),d=g=>{L(this,Pn,x_).call(this,t,g)},h={capture:!0,passive:!1},f=g=>{g.preventDefault(),g.stopPropagation()},b=g=>{r.removeEventListener("pointermove",d),window.removeEventListener("blur",b),window.removeEventListener("pointerup",b),window.removeEventListener("pointerdown",f,h),window.removeEventListener("contextmenu",ln),L(this,Pn,__).call(this,t,g)};window.addEventListener("blur",b),window.addEventListener("pointerup",b),window.addEventListener("pointerdown",f,h),window.addEventListener("contextmenu",ln),r.addEventListener("pointermove",d),this._freeHighlight=new ah({x:s,y:o},[a,c,l,u],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static deserialize(t,n,r){var g;const s=super.deserialize(t,n,r),{rect:[o,a,c,l],color:u,quadPoints:d}=t;s.color=Ue.makeHexColor(...u),M(s,to,t.opacity);const[h,f]=s.pageDimensions;s.width=(c-o)/h,s.height=(l-a)/f;const b=M(s,Lr,[]);for(let y=0;y<d.length;y+=8)b.push({x:(d[4]-c)/h,y:(l-(1-d[y+5]))/f,width:(d[y+2]-d[y])/h,height:(d[y+5]-d[y+1])/f});return L(g=s,He,bm).call(g),s}serialize(t=!1){if(this.isEmpty()||t)return null;const n=this.getRect(0,0),r=et._colorManager.convert(this.color);return{annotationType:Ge.HIGHLIGHT,color:r,opacity:p(this,to),thickness:p(this,vi),quadPoints:L(this,He,b_).call(this),outlines:L(this,He,v_).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:L(this,He,Rc).call(this),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}};ka=new WeakMap,bu=new WeakMap,Lr=new WeakMap,Qs=new WeakMap,Ma=new WeakMap,Un=new WeakMap,vu=new WeakMap,xu=new WeakMap,eo=new WeakMap,ti=new WeakMap,jt=new WeakMap,xn=new WeakMap,Vh=new WeakMap,Pa=new WeakMap,to=new WeakMap,_t=new WeakMap,La=new WeakMap,vi=new WeakMap,_u=new WeakMap,He=new WeakSet,bm=function(){const t=new hm(p(this,Lr),.001);M(this,ti,t.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=p(this,ti).box;const n=new hm(p(this,Lr),.0025,.001,this._uiManager.direction==="ltr");M(this,Un,n.getOutlines());const{lastPoint:r}=p(this,Un).box;M(this,Pa,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},vm=function({highlightOutlines:t,highlightId:n,clipPathId:r}){var d,h;if(M(this,ti,t),M(this,Un,t.getNewOutline(p(this,vi)/2+1.5,.0025)),n>=0)M(this,jt,n),M(this,Qs,r),this.parent.drawLayer.finalizeLine(n,t),M(this,_t,this.parent.drawLayer.highlightOutline(p(this,Un)));else if(this.parent){const f=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(p(this,jt),t),this.parent.drawLayer.updateBox(p(this,jt),L(d=Ye,Pn,Bo).call(d,p(this,ti).box,(f-this.rotation+360)%360)),this.parent.drawLayer.updateLine(p(this,_t),p(this,Un)),this.parent.drawLayer.updateBox(p(this,_t),L(h=Ye,Pn,Bo).call(h,p(this,Un).box,f))}const{x:o,y:a,width:c,height:l}=t.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=c,this.height=l;break;case 90:{const[f,b]=this.parentDimensions;this.x=a,this.y=1-o,this.width=c*b/f,this.height=l*f/b;break}case 180:this.x=1-o,this.y=1-a,this.width=c,this.height=l;break;case 270:{const[f,b]=this.parentDimensions;this.x=1-a,this.y=o,this.width=c*b/f,this.height=l*f/b;break}}const{lastPoint:u}=p(this,Un).box;M(this,Pa,[(u[0]-o)/c,(u[1]-a)/l])},p_=function(t){const n=s=>{var o,a;this.color=s,(o=this.parent)==null||o.drawLayer.changeColor(p(this,jt),s),(a=p(this,Ma))==null||a.updateColor(s)},r=this.color;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Pe.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},g_=function(t){const n=p(this,vi),r=s=>{M(this,vi,s),L(this,He,m_).call(this,s)};this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Pe.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},m_=function(t){if(!p(this,xn))return;L(this,He,vm).call(this,{highlightOutlines:p(this,ti).getNewOutline(t/2)}),this.fixAndSetPosition();const[n,r]=this.parentDimensions;this.setDims(this.width*n,this.height*r)},xm=function(){p(this,jt)===null||!this.parent||(this.parent.drawLayer.remove(p(this,jt)),M(this,jt,null),this.parent.drawLayer.remove(p(this,_t)),M(this,_t,null))},Ic=function(t=this.parent){p(this,jt)===null&&({id:St(this,jt)._,clipPathId:St(this,Qs)._}=t.drawLayer.highlight(p(this,ti),this.color,p(this,to)),M(this,_t,t.drawLayer.highlightOutline(p(this,Un))),p(this,eo)&&(p(this,eo).style.clipPath=p(this,Qs)))},Pn=new WeakSet,Bo=function({x:t,y:n,width:r,height:s},o){switch(o){case 90:return{x:1-n-s,y:t,width:s,height:r};case 180:return{x:1-t-r,y:1-n-s,width:r,height:s};case 270:return{x:n,y:1-t-r,width:s,height:r}}return{x:t,y:n,width:r,height:s}},y_=function(t){Ye._keyboardManager.exec(this,t)},Dd=function(t){if(!p(this,ka))return;const n=window.getSelection();t?n.setPosition(p(this,ka),p(this,bu)):n.setPosition(p(this,vu),p(this,xu))},Rc=function(){return p(this,xn)?this.rotation:0},b_=function(){if(p(this,xn))return null;const[t,n]=this.pageDimensions,r=p(this,Lr),s=new Array(r.length*8);let o=0;for(const{x:a,y:c,width:l,height:u}of r){const d=a*t,h=(1-c-u)*n;s[o]=s[o+4]=d,s[o+1]=s[o+3]=h,s[o+2]=s[o+6]=d+l*t,s[o+5]=s[o+7]=h+u*n,o+=8}return s},v_=function(t){return p(this,ti).serialize(t,L(this,He,Rc).call(this))},x_=function(t,n){this._freeHighlight.add(n)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},__=function(t,n){this._freeHighlight.isEmpty()?t.drawLayer.removeFreeHighlight(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},W(Ye,Pn),Le(Ye,"_defaultColor",null),Le(Ye,"_defaultOpacity",1),Le(Ye,"_defaultThickness",12),Le(Ye,"_l10nPromise"),Le(Ye,"_type","highlight"),Le(Ye,"_editorType",Ge.HIGHLIGHT),Le(Ye,"_freeHighlightId",-1),Le(Ye,"_freeHighlight",null),Le(Ye,"_freeHighlightClipId","");let lh=Ye;var no,io,Du,Tu,Au,ro,xi,nr,In,so,oo,ao,co,lo,Br,Ae,D_,T_,A_,E_,Dm,w_,Tm,C_,S_,U_,I_,R_,gs,Am,Td,Ad,Oo,Em,Ed,gr,F_,wm,N_,k_,Cm,wd,Fc;const ut=class ut extends et{constructor(t){super({...t,name:"inkEditor"});W(this,Ae);W(this,no,0);W(this,io,0);W(this,Du,this.canvasPointermove.bind(this));W(this,Tu,this.canvasPointerleave.bind(this));W(this,Au,this.canvasPointerup.bind(this));W(this,ro,this.canvasPointerdown.bind(this));W(this,xi,null);W(this,nr,new Path2D);W(this,In,!1);W(this,so,!1);W(this,oo,!1);W(this,ao,null);W(this,co,0);W(this,lo,0);W(this,Br,null);this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,n){et.initialize(t,n)}static updateDefaultParams(t,n){switch(t){case Pe.INK_THICKNESS:ut._defaultThickness=n;break;case Pe.INK_COLOR:ut._defaultColor=n;break;case Pe.INK_OPACITY:ut._defaultOpacity=n/100;break}}updateParams(t,n){switch(t){case Pe.INK_THICKNESS:L(this,Ae,D_).call(this,n);break;case Pe.INK_COLOR:L(this,Ae,T_).call(this,n);break;case Pe.INK_OPACITY:L(this,Ae,A_).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Pe.INK_THICKNESS,ut._defaultThickness],[Pe.INK_COLOR,ut._defaultColor||et._defaultLineColor],[Pe.INK_OPACITY,Math.round(ut._defaultOpacity*100)]]}get propertiesToUpdate(){return[[Pe.INK_THICKNESS,this.thickness||ut._defaultThickness],[Pe.INK_COLOR,this.color||ut._defaultColor||et._defaultLineColor],[Pe.INK_OPACITY,Math.round(100*(this.opacity??ut._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(L(this,Ae,Td).call(this),L(this,Ae,Ad).call(this)),this.isAttachedToDOM||(this.parent.add(this),L(this,Ae,Oo).call(this)),L(this,Ae,Fc).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,p(this,xi)&&(clearTimeout(p(this,xi)),M(this,xi,null)),p(this,ao).disconnect(),M(this,ao,null),super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,n]=this.parentDimensions,r=this.width*t,s=this.height*n;this.setDimensions(r,s)}enableEditMode(){p(this,In)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",p(this,ro)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",p(this,ro)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){p(this,In)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),M(this,In,!0),this.div.classList.add("disabled"),L(this,Ae,Fc).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||p(this,In)||(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),L(this,Ae,w_).call(this,t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),L(this,Ae,Tm).call(this,t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),L(this,Ae,Am).call(this,t)}canvasPointerleave(t){L(this,Ae,Am).call(this,t)}get isResizable(){return!this.isEmpty()&&p(this,In)}render(){if(this.div)return this.div;let t,n;this.width&&(t=this.x,n=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[r,s,o,a]=L(this,Ae,E_).call(this);if(this.setAt(r,s,0,0),this.setDims(o,a),L(this,Ae,Td).call(this),this.width){const[c,l]=this.parentDimensions;this.setAspectRatio(this.width*c,this.height*l),this.setAt(t*c,n*l,this.width*c,this.height*l),M(this,oo,!0),L(this,Ae,Oo).call(this),this.setDims(this.width*c,this.height*l),L(this,Ae,gs).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return L(this,Ae,Ad).call(this),this.div}setDimensions(t,n){const r=Math.round(t),s=Math.round(n);if(p(this,co)===r&&p(this,lo)===s)return;M(this,co,r),M(this,lo,s),this.canvas.style.visibility="hidden";const[o,a]=this.parentDimensions;this.width=t/o,this.height=n/a,this.fixAndSetPosition(),p(this,In)&&L(this,Ae,Em).call(this,t,n),L(this,Ae,Oo).call(this),L(this,Ae,gs).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(t,n,r){var y,v,x;if(t instanceof Q2)return null;const s=super.deserialize(t,n,r);s.thickness=t.thickness,s.color=Ue.makeHexColor(...t.color),s.opacity=t.opacity;const[o,a]=s.pageDimensions,c=s.width*o,l=s.height*a,u=s.parentScale,d=t.thickness/2;M(s,In,!0),M(s,co,Math.round(c)),M(s,lo,Math.round(l));const{paths:h,rect:f,rotation:b}=t;for(let{bezier:D}of h){D=L(y=ut,gr,N_).call(y,D,f,b);const A=[];s.paths.push(A);let T=u*(D[0]-d),E=u*(D[1]-d);for(let N=2,R=D.length;N<R;N+=6){const P=u*(D[N]-d),j=u*(D[N+1]-d),U=u*(D[N+2]-d),B=u*(D[N+3]-d),S=u*(D[N+4]-d),J=u*(D[N+5]-d);A.push([[T,E],[P,j],[U,B],[S,J]]),T=S,E=J}const I=L(this,gr,F_).call(this,A);s.bezierPath2D.push(I)}const g=L(v=s,Ae,Cm).call(v);return M(s,io,Math.max(et.MIN_SIZE,g[2]-g[0])),M(s,no,Math.max(et.MIN_SIZE,g[3]-g[1])),L(x=s,Ae,Em).call(x,c,l),s}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),n=et._colorManager.convert(this.ctx.strokeStyle);return{annotationType:Ge.INK,color:n,thickness:this.thickness,opacity:this.opacity,paths:L(this,Ae,k_).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};no=new WeakMap,io=new WeakMap,Du=new WeakMap,Tu=new WeakMap,Au=new WeakMap,ro=new WeakMap,xi=new WeakMap,nr=new WeakMap,In=new WeakMap,so=new WeakMap,oo=new WeakMap,ao=new WeakMap,co=new WeakMap,lo=new WeakMap,Br=new WeakMap,Ae=new WeakSet,D_=function(t){const n=s=>{this.thickness=s,L(this,Ae,Fc).call(this)},r=this.thickness;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Pe.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},T_=function(t){const n=s=>{this.color=s,L(this,Ae,gs).call(this)},r=this.color;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Pe.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},A_=function(t){const n=s=>{this.opacity=s,L(this,Ae,gs).call(this)};t/=100;const r=this.opacity;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Pe.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},E_=function(){const{parentRotation:t,parentDimensions:[n,r]}=this;switch(t){case 90:return[0,r,r,n];case 180:return[n,r,n,r];case 270:return[n,0,r,n];default:return[0,0,n,r]}},Dm=function(){const{ctx:t,color:n,opacity:r,thickness:s,parentScale:o,scaleFactor:a}=this;t.lineWidth=s*o/a,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${n}${MA(r)}`},w_=function(t,n){this.canvas.addEventListener("contextmenu",ln),this.canvas.addEventListener("pointerleave",p(this,Tu)),this.canvas.addEventListener("pointermove",p(this,Du)),this.canvas.addEventListener("pointerup",p(this,Au)),this.canvas.removeEventListener("pointerdown",p(this,ro)),this.isEditing=!0,p(this,oo)||(M(this,oo,!0),L(this,Ae,Oo).call(this),this.thickness||(this.thickness=ut._defaultThickness),this.color||(this.color=ut._defaultColor||et._defaultLineColor),this.opacity??(this.opacity=ut._defaultOpacity)),this.currentPath.push([t,n]),M(this,so,!1),L(this,Ae,Dm).call(this),M(this,Br,()=>{L(this,Ae,U_).call(this),p(this,Br)&&window.requestAnimationFrame(p(this,Br))}),window.requestAnimationFrame(p(this,Br))},Tm=function(t,n){const[r,s]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===r&&n===s)return;const o=this.currentPath;let a=p(this,nr);if(o.push([t,n]),M(this,so,!0),o.length<=2){a.moveTo(...o[0]),a.lineTo(t,n);return}o.length===3&&(M(this,nr,a=new Path2D),a.moveTo(...o[0])),L(this,Ae,I_).call(this,a,...o.at(-3),...o.at(-2),t,n)},C_=function(){if(this.currentPath.length===0)return;const t=this.currentPath.at(-1);p(this,nr).lineTo(...t)},S_=function(t,n){M(this,Br,null),t=Math.min(Math.max(t,0),this.canvas.width),n=Math.min(Math.max(n,0),this.canvas.height),L(this,Ae,Tm).call(this,t,n),L(this,Ae,C_).call(this);let r;if(this.currentPath.length!==1)r=L(this,Ae,R_).call(this);else{const l=[t,n];r=[[l,l.slice(),l.slice(),l]]}const s=p(this,nr),o=this.currentPath;this.currentPath=[],M(this,nr,new Path2D);const a=()=>{this.allRawPaths.push(o),this.paths.push(r),this.bezierPath2D.push(s),this._uiManager.rebuild(this)},c=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(L(this,Ae,Td).call(this),L(this,Ae,Ad).call(this)),L(this,Ae,Fc).call(this))};this.addCommands({cmd:a,undo:c,mustExec:!0})},U_=function(){if(!p(this,so))return;M(this,so,!1);const t=Math.ceil(this.thickness*this.parentScale),n=this.currentPath.slice(-3),r=n.map(a=>a[0]),s=n.map(a=>a[1]);Math.min(...r)-t,Math.max(...r)+t,Math.min(...s)-t,Math.max(...s)+t;const{ctx:o}=this;o.save(),o.clearRect(0,0,this.canvas.width,this.canvas.height);for(const a of this.bezierPath2D)o.stroke(a);o.stroke(p(this,nr)),o.restore()},I_=function(t,n,r,s,o,a,c){const l=(n+s)/2,u=(r+o)/2,d=(s+a)/2,h=(o+c)/2;t.bezierCurveTo(l+2*(s-l)/3,u+2*(o-u)/3,d+2*(s-d)/3,h+2*(o-h)/3,d,h)},R_=function(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const n=[];let r,[s,o]=t[0];for(r=1;r<t.length-2;r++){const[f,b]=t[r],[g,y]=t[r+1],v=(f+g)/2,x=(b+y)/2,D=[s+2*(f-s)/3,o+2*(b-o)/3],A=[v+2*(f-v)/3,x+2*(b-x)/3];n.push([[s,o],D,A,[v,x]]),[s,o]=[v,x]}const[a,c]=t[r],[l,u]=t[r+1],d=[s+2*(a-s)/3,o+2*(c-o)/3],h=[l+2*(a-l)/3,u+2*(c-u)/3];return n.push([[s,o],d,h,[l,u]]),n},gs=function(){if(this.isEmpty()){L(this,Ae,Ed).call(this);return}L(this,Ae,Dm).call(this);const{canvas:t,ctx:n}=this;n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,t.width,t.height),L(this,Ae,Ed).call(this);for(const r of this.bezierPath2D)n.stroke(r)},Am=function(t){this.canvas.removeEventListener("pointerleave",p(this,Tu)),this.canvas.removeEventListener("pointermove",p(this,Du)),this.canvas.removeEventListener("pointerup",p(this,Au)),this.canvas.addEventListener("pointerdown",p(this,ro)),p(this,xi)&&clearTimeout(p(this,xi)),M(this,xi,setTimeout(()=>{M(this,xi,null),this.canvas.removeEventListener("contextmenu",ln)},10)),L(this,Ae,S_).call(this,t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Td=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Ad=function(){M(this,ao,new ResizeObserver(t=>{const n=t[0].contentRect;n.width&&n.height&&this.setDimensions(n.width,n.height)})),p(this,ao).observe(this.div)},Oo=function(){if(!p(this,oo))return;const[t,n]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*n),L(this,Ae,Ed).call(this)},Em=function(t,n){const r=L(this,Ae,wd).call(this),s=(t-r)/p(this,io),o=(n-r)/p(this,no);this.scaleFactor=Math.min(s,o)},Ed=function(){const t=L(this,Ae,wd).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)},gr=new WeakSet,F_=function(t){const n=new Path2D;for(let r=0,s=t.length;r<s;r++){const[o,a,c,l]=t[r];r===0&&n.moveTo(...o),n.bezierCurveTo(a[0],a[1],c[0],c[1],l[0],l[1])}return n},wm=function(t,n,r){const[s,o,a,c]=n;switch(r){case 0:for(let l=0,u=t.length;l<u;l+=2)t[l]+=s,t[l+1]=c-t[l+1];break;case 90:for(let l=0,u=t.length;l<u;l+=2){const d=t[l];t[l]=t[l+1]+s,t[l+1]=d+o}break;case 180:for(let l=0,u=t.length;l<u;l+=2)t[l]=a-t[l],t[l+1]+=o;break;case 270:for(let l=0,u=t.length;l<u;l+=2){const d=t[l];t[l]=a-t[l+1],t[l+1]=c-d}break;default:throw new Error("Invalid rotation")}return t},N_=function(t,n,r){const[s,o,a,c]=n;switch(r){case 0:for(let l=0,u=t.length;l<u;l+=2)t[l]-=s,t[l+1]=c-t[l+1];break;case 90:for(let l=0,u=t.length;l<u;l+=2){const d=t[l];t[l]=t[l+1]-o,t[l+1]=d-s}break;case 180:for(let l=0,u=t.length;l<u;l+=2)t[l]=a-t[l],t[l+1]-=o;break;case 270:for(let l=0,u=t.length;l<u;l+=2){const d=t[l];t[l]=c-t[l+1],t[l+1]=a-d}break;default:throw new Error("Invalid rotation")}return t},k_=function(t,n,r,s){var u,d;const o=[],a=this.thickness/2,c=t*n+a,l=t*r+a;for(const h of this.paths){const f=[],b=[];for(let g=0,y=h.length;g<y;g++){const[v,x,D,A]=h[g];if(v[0]===A[0]&&v[1]===A[1]&&y===1){const B=t*v[0]+c,S=t*v[1]+l;f.push(B,S),b.push(B,S);break}const T=t*v[0]+c,E=t*v[1]+l,I=t*x[0]+c,N=t*x[1]+l,R=t*D[0]+c,P=t*D[1]+l,j=t*A[0]+c,U=t*A[1]+l;g===0&&(f.push(T,E),b.push(T,E)),f.push(I,N,R,P,j,U),b.push(I,N),g===y-1&&b.push(j,U)}o.push({bezier:L(u=ut,gr,wm).call(u,f,s,this.rotation),points:L(d=ut,gr,wm).call(d,b,s,this.rotation)})}return o},Cm=function(){let t=1/0,n=-1/0,r=1/0,s=-1/0;for(const o of this.paths)for(const[a,c,l,u]of o){const d=Ue.bezierBoundingBox(...a,...c,...l,...u);t=Math.min(t,d[0]),r=Math.min(r,d[1]),n=Math.max(n,d[2]),s=Math.max(s,d[3])}return[t,r,n,s]},wd=function(){return p(this,In)?Math.ceil(this.thickness*this.parentScale):0},Fc=function(t=!1){if(this.isEmpty())return;if(!p(this,In)){L(this,Ae,gs).call(this);return}const n=L(this,Ae,Cm).call(this),r=L(this,Ae,wd).call(this);M(this,io,Math.max(et.MIN_SIZE,n[2]-n[0])),M(this,no,Math.max(et.MIN_SIZE,n[3]-n[1]));const s=Math.ceil(r+p(this,io)*this.scaleFactor),o=Math.ceil(r+p(this,no)*this.scaleFactor),[a,c]=this.parentDimensions;this.width=s/a,this.height=o/c,this.setAspectRatio(s,o);const l=this.translationX,u=this.translationY;this.translationX=-n[0],this.translationY=-n[1],L(this,Ae,Oo).call(this),L(this,Ae,gs).call(this),M(this,co,s),M(this,lo,o),this.setDims(s,o);const d=t?r/this.scaleFactor/2:0;this.translate(l-this.translationX-d,u-this.translationY-d)},W(ut,gr),Le(ut,"_defaultColor",null),Le(ut,"_defaultOpacity",1),Le(ut,"_defaultThickness",1),Le(ut,"_type","ink"),Le(ut,"_editorType",Ge.INK);let _m=ut;var Mt,Pt,Or,ir,Wr,Ba,_i,uo,Di,ni,Eu,$e,Nc,kc,Cd,Um,M_,P_,Im,Sd,L_;const Wc=class Wc extends et{constructor(t){super({...t,name:"stampEditor"});W(this,$e);W(this,Mt,null);W(this,Pt,null);W(this,Or,null);W(this,ir,null);W(this,Wr,null);W(this,Ba,"");W(this,_i,null);W(this,uo,null);W(this,Di,null);W(this,ni,!1);W(this,Eu,!1);M(this,ir,t.bitmapUrl),M(this,Wr,t.bitmapFile)}static initialize(t,n){et.initialize(t,n)}static get supportedTypes(){return ze(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(n=>`image/${n}`))}static get supportedTypesStr(){return ze(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,n){n.pasteEditor(Ge.STAMP,{bitmapFile:t.getAsFile()})}remove(){var t,n;p(this,Pt)&&(M(this,Mt,null),this._uiManager.imageManager.deleteId(p(this,Pt)),(t=p(this,_i))==null||t.remove(),M(this,_i,null),(n=p(this,uo))==null||n.disconnect(),M(this,uo,null),p(this,Di)&&(clearTimeout(p(this,Di)),M(this,Di,null))),super.remove()}rebuild(){if(!this.parent){p(this,Pt)&&L(this,$e,Cd).call(this);return}super.rebuild(),this.div!==null&&(p(this,Pt)&&p(this,_i)===null&&L(this,$e,Cd).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(p(this,Or)||p(this,Mt)||p(this,ir)||p(this,Wr)||p(this,Pt))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;if(this.width&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),p(this,Mt)?L(this,$e,Um).call(this):L(this,$e,Cd).call(this),this.width){const[r,s]=this.parentDimensions;this.setAt(t*r,n*s,this.width*r,this.height*s)}return this.div}getImageForAltText(){return p(this,_i)}static deserialize(t,n,r){if(t instanceof e_)return null;const s=super.deserialize(t,n,r),{rect:o,bitmapUrl:a,bitmapId:c,isSvg:l,accessibilityData:u}=t;c&&r.imageManager.isValidId(c)?M(s,Pt,c):M(s,ir,a),M(s,ni,l);const[d,h]=s.pageDimensions;return s.width=(o[2]-o[0])/d,s.height=(o[3]-o[1])/h,u&&(s.altTextData=u),s}serialize(t=!1,n=null){if(this.isEmpty())return null;const r={annotationType:Ge.STAMP,bitmapId:p(this,Pt),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:p(this,ni),structTreeParentId:this._structTreeParentId};if(t)return r.bitmapUrl=L(this,$e,Sd).call(this,!0),r.accessibilityData=this.altTextData,r;const{decorative:s,altText:o}=this.altTextData;if(!s&&o&&(r.accessibilityData={type:"Figure",alt:o}),n===null)return r;n.stamps||(n.stamps=new Map);const a=p(this,ni)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!n.stamps.has(p(this,Pt)))n.stamps.set(p(this,Pt),{area:a,serialized:r}),r.bitmap=L(this,$e,Sd).call(this,!1);else if(p(this,ni)){const c=n.stamps.get(p(this,Pt));a>c.area&&(c.area=a,c.serialized.bitmap.close(),c.serialized.bitmap=L(this,$e,Sd).call(this,!1))}return r}};Mt=new WeakMap,Pt=new WeakMap,Or=new WeakMap,ir=new WeakMap,Wr=new WeakMap,Ba=new WeakMap,_i=new WeakMap,uo=new WeakMap,Di=new WeakMap,ni=new WeakMap,Eu=new WeakMap,$e=new WeakSet,Nc=function(t,n=!1){if(!t){this.remove();return}M(this,Mt,t.bitmap),n||(M(this,Pt,t.id),M(this,ni,t.isSvg)),t.file&&M(this,Ba,t.file.name),L(this,$e,Um).call(this)},kc=function(){M(this,Or,null),this._uiManager.enableWaiting(!1),p(this,_i)&&this.div.focus()},Cd=function(){if(p(this,Pt)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(p(this,Pt)).then(n=>L(this,$e,Nc).call(this,n,!0)).finally(()=>L(this,$e,kc).call(this));return}if(p(this,ir)){const n=p(this,ir);M(this,ir,null),this._uiManager.enableWaiting(!0),M(this,Or,this._uiManager.imageManager.getFromUrl(n).then(r=>L(this,$e,Nc).call(this,r)).finally(()=>L(this,$e,kc).call(this)));return}if(p(this,Wr)){const n=p(this,Wr);M(this,Wr,null),this._uiManager.enableWaiting(!0),M(this,Or,this._uiManager.imageManager.getFromFile(n).then(r=>L(this,$e,Nc).call(this,r)).finally(()=>L(this,$e,kc).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=Wc.supportedTypesStr,M(this,Or,new Promise(n=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);L(this,$e,Nc).call(this,r)}n()}),t.addEventListener("cancel",()=>{this.remove(),n()})}).finally(()=>L(this,$e,kc).call(this))),t.click()},Um=function(){const{div:t}=this;let{width:n,height:r}=p(this,Mt);const[s,o]=this.pageDimensions,a=.75;if(this.width)n=this.width*s,r=this.height*o;else if(n>a*s||r>a*o){const d=Math.min(a*s/n,a*o/r);n*=d,r*=d}const[c,l]=this.parentDimensions;this.setDims(n*c/s,r*l/o),this._uiManager.enableWaiting(!1);const u=M(this,_i,document.createElement("canvas"));t.append(u),t.hidden=!1,L(this,$e,Im).call(this,n,r),L(this,$e,L_).call(this),p(this,Eu)||(this.parent.addUndoableEditor(this),M(this,Eu,!0)),this._reportTelemetry({action:"inserted_image"}),p(this,Ba)&&u.setAttribute("aria-label",p(this,Ba))},M_=function(t,n){var a;const[r,s]=this.parentDimensions;this.width=t/r,this.height=n/s,this.setDims(t,n),(a=this._initialOptions)!=null&&a.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,p(this,Di)!==null&&clearTimeout(p(this,Di)),M(this,Di,setTimeout(()=>{M(this,Di,null),L(this,$e,Im).call(this,t,n)},200))},P_=function(t,n){const{width:r,height:s}=p(this,Mt);let o=r,a=s,c=p(this,Mt);for(;o>2*t||a>2*n;){const l=o,u=a;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*n&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const d=new OffscreenCanvas(o,a);d.getContext("2d").drawImage(c,0,0,l,u,0,0,o,a),c=d.transferToImageBitmap()}return c},Im=function(t,n){t=Math.ceil(t),n=Math.ceil(n);const r=p(this,_i);if(!r||r.width===t&&r.height===n)return;r.width=t,r.height=n;const s=p(this,ni)?p(this,Mt):L(this,$e,P_).call(this,t,n);if(this._uiManager.hasMLManager&&!this.hasAltText()){const c=new OffscreenCanvas(t,n).getContext("2d");c.drawImage(s,0,0,s.width,s.height,0,0,t,n),this._uiManager.mlGuess({service:"image-to-text",request:{data:c.getImageData(0,0,t,n).data,width:t,height:n,channels:4}}).then(l=>{const u=(l==null?void 0:l.output)||"";this.parent&&u&&!this.hasAltText()&&(this.altTextData={altText:u,decorative:!1})})}const o=r.getContext("2d");o.filter=this._uiManager.hcmFilter,o.drawImage(s,0,0,s.width,s.height,0,0,t,n)},Sd=function(t){if(t){if(p(this,ni)){const s=this._uiManager.imageManager.getSvgUrl(p(this,Pt));if(s)return s}const n=document.createElement("canvas");return{width:n.width,height:n.height}=p(this,Mt),n.getContext("2d").drawImage(p(this,Mt),0,0),n.toDataURL()}if(p(this,ni)){const[n,r]=this.pageDimensions,s=Math.round(this.width*n*$r.PDF_TO_CSS_UNITS),o=Math.round(this.height*r*$r.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(s,o);return a.getContext("2d").drawImage(p(this,Mt),0,0,p(this,Mt).width,p(this,Mt).height,0,0,s,o),a.transferToImageBitmap()}return structuredClone(p(this,Mt))},L_=function(){M(this,uo,new ResizeObserver(t=>{const n=t[0].contentRect;n.width&&n.height&&L(this,$e,M_).call(this,n.width,n.height)})),p(this,uo).observe(this.div)},Le(Wc,"_type","stamp"),Le(Wc,"_editorType",Ge.STAMP);let Sm=Wc;var ho,Oa,Ti,fo,rr,sr,or,_n,qr,Wa,qa,Yt,Fe,Hr,Lt,B_,Fm,Nm,km,Ud;const Gn=class Gn{constructor({uiManager:e,pageIndex:t,div:n,accessibilityManager:r,annotationLayer:s,drawLayer:o,textLayer:a,viewport:c,l10n:l}){W(this,Lt);W(this,ho);W(this,Oa,!1);W(this,Ti,null);W(this,fo,null);W(this,rr,null);W(this,sr,null);W(this,or,null);W(this,_n,new Map);W(this,qr,!1);W(this,Wa,!1);W(this,qa,!1);W(this,Yt,null);W(this,Fe);const u=[...p(Gn,Hr).values()];if(!Gn._initialized){Gn._initialized=!0;for(const d of u)d.initialize(l,e)}e.registerEditorTypes(u),M(this,Fe,e),this.pageIndex=t,this.div=n,M(this,ho,r),M(this,Ti,s),this.viewport=c,M(this,Yt,a),this.drawLayer=o,p(this,Fe).addLayer(this)}get isEmpty(){return p(this,_n).size===0}get isInvisible(){return this.isEmpty&&p(this,Fe).getMode()===Ge.NONE}updateToolbar(e){p(this,Fe).updateToolbar(e)}updateMode(e=p(this,Fe).getMode()){switch(L(this,Lt,Ud).call(this),e){case Ge.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Ge.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case Ge.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const n of p(Gn,Hr).values())t.toggle(`${n._type}Editing`,e===n._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=p(this,Yt))==null?void 0:t.div)}addInkEditorIfNeeded(e){if(p(this,Fe).getMode()!==Ge.INK)return;if(!e){for(const n of p(this,_n).values())if(n.isEmpty()){n.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){p(this,Fe).setEditingState(e)}addCommands(e){p(this,Fe).addCommands(e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=p(this,Ti))==null||t.div.classList.toggle("disabled",!e)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const n of p(this,_n).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(p(this,Fe).removeChangedExistingAnnotation(n),e.add(n.annotationElementId));if(!p(this,Ti))return;const t=p(this,Ti).getEditableAnnotations();for(const n of t){if(n.hide(),p(this,Fe).isDeletedAnnotationElement(n.data.id)||e.has(n.data.id))continue;const r=this.deserialize(n);r&&(this.addOrRebuild(r),r.enableEditing())}}disable(){var r;M(this,qa,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const s of p(this,_n).values())if(s.disableEditing(),!!s.annotationElementId){if(s.serialize()!==null){e.set(s.annotationElementId,s);continue}else t.set(s.annotationElementId,s);(r=this.getEditableAnnotation(s.annotationElementId))==null||r.show(),s.remove()}if(p(this,Ti)){const s=p(this,Ti).getEditableAnnotations();for(const o of s){const{id:a}=o.data;if(p(this,Fe).isDeletedAnnotationElement(a))continue;let c=t.get(a);if(c){c.resetAnnotationElement(o),c.show(!1),o.show();continue}c=e.get(a),c&&(p(this,Fe).addChangedExistingAnnotation(c),c.renderAnnotationElement(o),c.show(!1)),o.show()}}L(this,Lt,Ud).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const s of p(Gn,Hr).values())n.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),M(this,qa,!1)}getEditableAnnotation(e){var t;return((t=p(this,Ti))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){p(this,Fe).getActive()!==e&&p(this,Fe).setActiveEditor(e)}enableTextSelection(){var e;this.div.tabIndex=-1,(e=p(this,Yt))!=null&&e.div&&!p(this,sr)&&(M(this,sr,L(this,Lt,B_).bind(this)),p(this,Yt).div.addEventListener("pointerdown",p(this,sr)),p(this,Yt).div.classList.add("highlighting"))}disableTextSelection(){var e;this.div.tabIndex=0,(e=p(this,Yt))!=null&&e.div&&p(this,sr)&&(p(this,Yt).div.removeEventListener("pointerdown",p(this,sr)),M(this,sr,null),p(this,Yt).div.classList.remove("highlighting"))}enableClick(){p(this,rr)||(M(this,rr,this.pointerdown.bind(this)),M(this,fo,this.pointerup.bind(this)),this.div.addEventListener("pointerdown",p(this,rr)),this.div.addEventListener("pointerup",p(this,fo)))}disableClick(){p(this,rr)&&(this.div.removeEventListener("pointerdown",p(this,rr)),this.div.removeEventListener("pointerup",p(this,fo)),M(this,rr,null),M(this,fo,null))}attach(e){p(this,_n).set(e.id,e);const{annotationElementId:t}=e;t&&p(this,Fe).isDeletedAnnotationElement(t)&&p(this,Fe).removeDeletedAnnotationElement(e)}detach(e){var t;p(this,_n).delete(e.id),(t=p(this,ho))==null||t.removePointerInTextLayer(e.contentDiv),!p(this,qa)&&e.annotationElementId&&p(this,Fe).addDeletedAnnotationElement(e)}remove(e){this.detach(e),p(this,Fe).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,p(this,Wa)||this.addInkEditorIfNeeded(!1)}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(p(this,Fe).addDeletedAnnotationElement(e.annotationElementId),et.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),p(this,Fe).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),p(this,Fe).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var n;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!p(this,or)&&(e._focusEventsAllowed=!1,M(this,or,setTimeout(()=>{M(this,or,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0}),t.focus())},0))),e._structTreeParentId=(n=p(this,ho))==null?void 0:n.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getNextId(){return p(this,Fe).getId()}canCreateNewEmptyEditor(){var e;return(e=p(this,Lt,Fm))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){p(this,Fe).updateToolbar(e),p(this,Fe).updateMode(e);const{offsetX:n,offsetY:r}=L(this,Lt,km).call(this),s=this.getNextId(),o=L(this,Lt,Nm).call(this,{parent:this,id:s,x:n,y:r,uiManager:p(this,Fe),isCentered:!0,...t});o&&this.add(o)}deserialize(e){var t;return((t=p(Gn,Hr).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,p(this,Fe)))||null}createAndAddNewEditor(e,t,n={}){const r=this.getNextId(),s=L(this,Lt,Nm).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:p(this,Fe),isCentered:t,...n});return s&&this.add(s),s}addNewEditor(){this.createAndAddNewEditor(L(this,Lt,km).call(this),!0)}setSelected(e){p(this,Fe).setSelected(e)}toggleSelected(e){p(this,Fe).toggleSelected(e)}isSelected(e){return p(this,Fe).isSelected(e)}unselect(e){p(this,Fe).unselect(e)}pointerup(e){const{isMac:t}=an.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&p(this,qr)){if(M(this,qr,!1),!p(this,Oa)){M(this,Oa,!0);return}if(p(this,Fe).getMode()===Ge.STAMP){p(this,Fe).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(p(this,Fe).getMode()===Ge.HIGHLIGHT&&this.enableTextSelection(),p(this,qr)){M(this,qr,!1);return}const{isMac:t}=an.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;M(this,qr,!0);const n=p(this,Fe).getActive();M(this,Oa,!n||n.isEmpty())}findNewParent(e,t,n){const r=p(this,Fe).findParent(t,n);return r===null||r===this?!1:(r.changeParent(e),!0)}destroy(){var e,t;((e=p(this,Fe).getActive())==null?void 0:e.parent)===this&&(p(this,Fe).commitOrRemove(),p(this,Fe).setActiveEditor(null)),p(this,or)&&(clearTimeout(p(this,or)),M(this,or,null));for(const n of p(this,_n).values())(t=p(this,ho))==null||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,p(this,_n).clear(),p(this,Fe).removeLayer(this)}render({viewport:e}){this.viewport=e,go(this.div,e);for(const t of p(this,Fe).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){p(this,Fe).commitOrRemove(),L(this,Lt,Ud).call(this);const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,go(this.div,{rotation:n}),t!==n)for(const r of p(this,_n).values())r.rotate(n);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return p(this,Fe).viewParameters.realScale}};ho=new WeakMap,Oa=new WeakMap,Ti=new WeakMap,fo=new WeakMap,rr=new WeakMap,sr=new WeakMap,or=new WeakMap,_n=new WeakMap,qr=new WeakMap,Wa=new WeakMap,qa=new WeakMap,Yt=new WeakMap,Fe=new WeakMap,Hr=new WeakMap,Lt=new WeakSet,B_=function(e){if(p(this,Fe).unselectAll(),e.target===p(this,Yt).div){const{isMac:t}=an.platform;if(e.button!==0||e.ctrlKey&&t)return;p(this,Fe).showAllEditors("highlight",!0,!0),p(this,Yt).div.classList.add("free"),lh.startHighlighting(this,p(this,Fe).direction==="ltr",e),p(this,Yt).div.addEventListener("pointerup",()=>{p(this,Yt).div.classList.remove("free")},{once:!0}),e.preventDefault()}},Fm=function(){return p(Gn,Hr).get(p(this,Fe).getMode())},Nm=function(e){const t=p(this,Lt,Fm);return t?new t.prototype.constructor(e):null},km=function(){const{x:e,y:t,width:n,height:r}=this.div.getBoundingClientRect(),s=Math.max(0,e),o=Math.max(0,t),a=Math.min(window.innerWidth,e+n),c=Math.min(window.innerHeight,t+r),l=(s+a)/2-e,u=(o+c)/2-t,[d,h]=this.viewport.rotation%180===0?[l,u]:[u,l];return{offsetX:d,offsetY:h}},Ud=function(){M(this,Wa,!0);for(const e of p(this,_n).values())e.isEmpty()&&e.remove();M(this,Wa,!1)},Le(Gn,"_initialized",!1),W(Gn,Hr,new Map([um,_m,Sm,lh].map(e=>[e._editorType,e])));let Rm=Gn;var Ai,wu,Dt,Vr,Cu,Pm,_o,Lm,O_;const It=class It{constructor({pageIndex:e}){W(this,_o);W(this,Ai,null);W(this,wu,0);W(this,Dt,new Map);W(this,Vr,new Map);this.pageIndex=e}setParent(e){if(!p(this,Ai)){M(this,Ai,e);return}if(p(this,Ai)!==e){if(p(this,Dt).size>0)for(const t of p(this,Dt).values())t.remove(),e.append(t);M(this,Ai,e)}}static get _svgFactory(){return ze(this,"_svgFactory",new ey)}highlight(e,t,n,r=!1){const s=St(this,wu)._++,o=L(this,_o,Lm).call(this,e.box);o.classList.add("highlight"),e.free&&o.classList.add("free");const a=It._svgFactory.createElement("defs");o.append(a);const c=It._svgFactory.createElement("path");a.append(c);const l=`path_p${this.pageIndex}_${s}`;c.setAttribute("id",l),c.setAttribute("d",e.toSVGPath()),r&&p(this,Vr).set(s,c);const u=L(this,_o,O_).call(this,a,l),d=It._svgFactory.createElement("use");return o.append(d),o.setAttribute("fill",t),o.setAttribute("fill-opacity",n),d.setAttribute("href",`#${l}`),p(this,Dt).set(s,o),{id:s,clipPathId:`url(#${u})`}}highlightOutline(e){const t=St(this,wu)._++,n=L(this,_o,Lm).call(this,e.box);n.classList.add("highlightOutline");const r=It._svgFactory.createElement("defs");n.append(r);const s=It._svgFactory.createElement("path");r.append(s);const o=`path_p${this.pageIndex}_${t}`;s.setAttribute("id",o),s.setAttribute("d",e.toSVGPath()),s.setAttribute("vector-effect","non-scaling-stroke");let a;if(e.free){n.classList.add("free");const u=It._svgFactory.createElement("mask");r.append(u),a=`mask_p${this.pageIndex}_${t}`,u.setAttribute("id",a),u.setAttribute("maskUnits","objectBoundingBox");const d=It._svgFactory.createElement("rect");u.append(d),d.setAttribute("width","1"),d.setAttribute("height","1"),d.setAttribute("fill","white");const h=It._svgFactory.createElement("use");u.append(h),h.setAttribute("href",`#${o}`),h.setAttribute("stroke","none"),h.setAttribute("fill","black"),h.setAttribute("fill-rule","nonzero"),h.classList.add("mask")}const c=It._svgFactory.createElement("use");n.append(c),c.setAttribute("href",`#${o}`),a&&c.setAttribute("mask",`url(#${a})`);const l=c.cloneNode();return n.append(l),c.classList.add("mainOutline"),l.classList.add("secondaryOutline"),p(this,Dt).set(t,n),t}finalizeLine(e,t){const n=p(this,Vr).get(e);p(this,Vr).delete(e),this.updateBox(e,t.box),n.setAttribute("d",t.toSVGPath())}updateLine(e,t){p(this,Dt).get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}removeFreeHighlight(e){this.remove(e),p(this,Vr).delete(e)}updatePath(e,t){p(this,Vr).get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){var n;L(n=It,Cu,Pm).call(n,p(this,Dt).get(e),t)}show(e,t){p(this,Dt).get(e).classList.toggle("hidden",!t)}rotate(e,t){p(this,Dt).get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){p(this,Dt).get(e).setAttribute("fill",t)}changeOpacity(e,t){p(this,Dt).get(e).setAttribute("fill-opacity",t)}addClass(e,t){p(this,Dt).get(e).classList.add(t)}removeClass(e,t){p(this,Dt).get(e).classList.remove(t)}remove(e){p(this,Ai)!==null&&(p(this,Dt).get(e).remove(),p(this,Dt).delete(e))}destroy(){M(this,Ai,null);for(const e of p(this,Dt).values())e.remove();p(this,Dt).clear()}};Ai=new WeakMap,wu=new WeakMap,Dt=new WeakMap,Vr=new WeakMap,Cu=new WeakSet,Pm=function(e,{x:t=0,y:n=0,width:r=1,height:s=1}={}){const{style:o}=e;o.top=`${100*n}%`,o.left=`${100*t}%`,o.width=`${100*r}%`,o.height=`${100*s}%`},_o=new WeakSet,Lm=function(e){var n;const t=It._svgFactory.create(1,1,!0);return p(this,Ai).append(t),t.setAttribute("aria-hidden",!0),L(n=It,Cu,Pm).call(n,t,e),t},O_=function(e,t){const n=It._svgFactory.createElement("clipPath");e.append(n);const r=`clip_${t}`;n.setAttribute("id",r),n.setAttribute("clipPathUnits","objectBoundingBox");const s=It._svgFactory.createElement("use");return n.append(s),s.setAttribute("href",`#${t}`),s.classList.add("clip"),r},W(It,Cu);let Mm=It;Me.AbortException;Me.AnnotationEditorLayer;Me.AnnotationEditorParamsType;Me.AnnotationEditorType;Me.AnnotationEditorUIManager;Me.AnnotationLayer;Me.AnnotationMode;Me.CMapCompressionType;Me.ColorPicker;Me.DOMSVGFactory;Me.DrawLayer;Me.FeatureTest;var hw=Me.GlobalWorkerOptions;Me.ImageKind;Me.InvalidPDFException;Me.MissingPDFException;Me.OPS;Me.Outliner;Me.PDFDataRangeTransport;Me.PDFDateString;Me.PDFWorker;Me.PasswordResponses;Me.PermissionFlag;Me.PixelsPerInch;Me.RenderingCancelledException;Me.TextLayer;Me.UnexpectedResponseException;Me.Util;Me.VerbosityLevel;Me.XfaLayer;Me.build;Me.createValidAbsoluteUrl;Me.fetchData;var fw=Me.getDocument;Me.getFilenameFromUrl;Me.getPdfFilenameFromUrl;Me.getXfaPageViewport;Me.isDataScheme;Me.isPdfFile;Me.noContextMenu;Me.normalizeUnicode;Me.renderTextLayer;Me.setLayerDimensions;Me.shadow;Me.updateTextLayer;Me.version;var Vf={exports:{}},S0;function pw(){return S0||(S0=1,(function(i){var e=(function(t){var n=Object.prototype,r=n.hasOwnProperty,s=Object.defineProperty||function(H,Y,F){H[Y]=F.value},o,a=typeof Symbol=="function"?Symbol:{},c=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function d(H,Y,F){return Object.defineProperty(H,Y,{value:F,enumerable:!0,configurable:!0,writable:!0}),H[Y]}try{d({},"")}catch{d=function(Y,F,X){return Y[F]=X}}function h(H,Y,F,X){var $=Y&&Y.prototype instanceof D?Y:D,ne=Object.create($.prototype),oe=new q(X||[]);return s(ne,"_invoke",{value:U(H,F,oe)}),ne}t.wrap=h;function f(H,Y,F){try{return{type:"normal",arg:H.call(Y,F)}}catch(X){return{type:"throw",arg:X}}}var b="suspendedStart",g="suspendedYield",y="executing",v="completed",x={};function D(){}function A(){}function T(){}var E={};d(E,c,function(){return this});var I=Object.getPrototypeOf,N=I&&I(I(O([])));N&&N!==n&&r.call(N,c)&&(E=N);var R=T.prototype=D.prototype=Object.create(E);A.prototype=T,s(R,"constructor",{value:T,configurable:!0}),s(T,"constructor",{value:A,configurable:!0}),A.displayName=d(T,u,"GeneratorFunction");function P(H){["next","throw","return"].forEach(function(Y){d(H,Y,function(F){return this._invoke(Y,F)})})}t.isGeneratorFunction=function(H){var Y=typeof H=="function"&&H.constructor;return Y?Y===A||(Y.displayName||Y.name)==="GeneratorFunction":!1},t.mark=function(H){return Object.setPrototypeOf?Object.setPrototypeOf(H,T):(H.__proto__=T,d(H,u,"GeneratorFunction")),H.prototype=Object.create(R),H},t.awrap=function(H){return{__await:H}};function j(H,Y){function F(ne,oe,pe,le){var ge=f(H[ne],H,oe);if(ge.type==="throw")le(ge.arg);else{var ye=ge.arg,De=ye.value;return De&&typeof De=="object"&&r.call(De,"__await")?Y.resolve(De.__await).then(function(we){F("next",we,pe,le)},function(we){F("throw",we,pe,le)}):Y.resolve(De).then(function(we){ye.value=we,pe(ye)},function(we){return F("throw",we,pe,le)})}}var X;function $(ne,oe){function pe(){return new Y(function(le,ge){F(ne,oe,le,ge)})}return X=X?X.then(pe,pe):pe()}s(this,"_invoke",{value:$})}P(j.prototype),d(j.prototype,l,function(){return this}),t.AsyncIterator=j,t.async=function(H,Y,F,X,$){$===void 0&&($=Promise);var ne=new j(h(H,Y,F,X),$);return t.isGeneratorFunction(Y)?ne:ne.next().then(function(oe){return oe.done?oe.value:ne.next()})};function U(H,Y,F){var X=b;return function(ne,oe){if(X===y)throw new Error("Generator is already running");if(X===v){if(ne==="throw")throw oe;return K()}for(F.method=ne,F.arg=oe;;){var pe=F.delegate;if(pe){var le=B(pe,F);if(le){if(le===x)continue;return le}}if(F.method==="next")F.sent=F._sent=F.arg;else if(F.method==="throw"){if(X===b)throw X=v,F.arg;F.dispatchException(F.arg)}else F.method==="return"&&F.abrupt("return",F.arg);X=y;var ge=f(H,Y,F);if(ge.type==="normal"){if(X=F.done?v:g,ge.arg===x)continue;return{value:ge.arg,done:F.done}}else ge.type==="throw"&&(X=v,F.method="throw",F.arg=ge.arg)}}}function B(H,Y){var F=Y.method,X=H.iterator[F];if(X===o)return Y.delegate=null,F==="throw"&&H.iterator.return&&(Y.method="return",Y.arg=o,B(H,Y),Y.method==="throw")||F!=="return"&&(Y.method="throw",Y.arg=new TypeError("The iterator does not provide a '"+F+"' method")),x;var $=f(X,H.iterator,Y.arg);if($.type==="throw")return Y.method="throw",Y.arg=$.arg,Y.delegate=null,x;var ne=$.arg;if(!ne)return Y.method="throw",Y.arg=new TypeError("iterator result is not an object"),Y.delegate=null,x;if(ne.done)Y[H.resultName]=ne.value,Y.next=H.nextLoc,Y.method!=="return"&&(Y.method="next",Y.arg=o);else return ne;return Y.delegate=null,x}P(R),d(R,u,"Generator"),d(R,c,function(){return this}),d(R,"toString",function(){return"[object Generator]"});function S(H){var Y={tryLoc:H[0]};1 in H&&(Y.catchLoc=H[1]),2 in H&&(Y.finallyLoc=H[2],Y.afterLoc=H[3]),this.tryEntries.push(Y)}function J(H){var Y=H.completion||{};Y.type="normal",delete Y.arg,H.completion=Y}function q(H){this.tryEntries=[{tryLoc:"root"}],H.forEach(S,this),this.reset(!0)}t.keys=function(H){var Y=Object(H),F=[];for(var X in Y)F.push(X);return F.reverse(),function $(){for(;F.length;){var ne=F.pop();if(ne in Y)return $.value=ne,$.done=!1,$}return $.done=!0,$}};function O(H){if(H){var Y=H[c];if(Y)return Y.call(H);if(typeof H.next=="function")return H;if(!isNaN(H.length)){var F=-1,X=function $(){for(;++F<H.length;)if(r.call(H,F))return $.value=H[F],$.done=!1,$;return $.value=o,$.done=!0,$};return X.next=X}}return{next:K}}t.values=O;function K(){return{value:o,done:!0}}return q.prototype={constructor:q,reset:function(H){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(J),!H)for(var Y in this)Y.charAt(0)==="t"&&r.call(this,Y)&&!isNaN(+Y.slice(1))&&(this[Y]=o)},stop:function(){this.done=!0;var H=this.tryEntries[0],Y=H.completion;if(Y.type==="throw")throw Y.arg;return this.rval},dispatchException:function(H){if(this.done)throw H;var Y=this;function F(le,ge){return ne.type="throw",ne.arg=H,Y.next=le,ge&&(Y.method="next",Y.arg=o),!!ge}for(var X=this.tryEntries.length-1;X>=0;--X){var $=this.tryEntries[X],ne=$.completion;if($.tryLoc==="root")return F("end");if($.tryLoc<=this.prev){var oe=r.call($,"catchLoc"),pe=r.call($,"finallyLoc");if(oe&&pe){if(this.prev<$.catchLoc)return F($.catchLoc,!0);if(this.prev<$.finallyLoc)return F($.finallyLoc)}else if(oe){if(this.prev<$.catchLoc)return F($.catchLoc,!0)}else if(pe){if(this.prev<$.finallyLoc)return F($.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(H,Y){for(var F=this.tryEntries.length-1;F>=0;--F){var X=this.tryEntries[F];if(X.tryLoc<=this.prev&&r.call(X,"finallyLoc")&&this.prev<X.finallyLoc){var $=X;break}}$&&(H==="break"||H==="continue")&&$.tryLoc<=Y&&Y<=$.finallyLoc&&($=null);var ne=$?$.completion:{};return ne.type=H,ne.arg=Y,$?(this.method="next",this.next=$.finallyLoc,x):this.complete(ne)},complete:function(H,Y){if(H.type==="throw")throw H.arg;return H.type==="break"||H.type==="continue"?this.next=H.arg:H.type==="return"?(this.rval=this.arg=H.arg,this.method="return",this.next="end"):H.type==="normal"&&Y&&(this.next=Y),x},finish:function(H){for(var Y=this.tryEntries.length-1;Y>=0;--Y){var F=this.tryEntries[Y];if(F.finallyLoc===H)return this.complete(F.completion,F.afterLoc),J(F),x}},catch:function(H){for(var Y=this.tryEntries.length-1;Y>=0;--Y){var F=this.tryEntries[Y];if(F.tryLoc===H){var X=F.completion;if(X.type==="throw"){var $=X.arg;J(F)}return $}}throw new Error("illegal catch attempt")},delegateYield:function(H,Y,F){return this.delegate={iterator:O(H),resultName:Y,nextLoc:F},this.method==="next"&&(this.arg=o),x}},t})(i.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})(Vf)),Vf.exports}var Gf,U0;function cy(){return U0||(U0=1,Gf=(i,e)=>`${i}-${e}-${Math.random().toString(16).slice(3,8)}`),Gf}var zf,I0;function W_(){if(I0)return zf;I0=1;const i=cy();let e=0;return zf=({id:t,action:n,payload:r={}})=>{let s=t;return typeof s>"u"&&(s=i("Job",e),e+=1),{id:s,action:n,payload:r}},zf}var ac={},R0;function ly(){if(R0)return ac;R0=1;let i=!1;return ac.logging=i,ac.setLogging=e=>{i=e},ac.log=(...e)=>i?console.log.apply(this,e):null,ac}var $f,F0;function gw(){if(F0)return $f;F0=1;const i=W_(),{log:e}=ly(),t=cy();let n=0;return $f=()=>{const r=t("Scheduler",n),s={},o={};let a=[];n+=1;const c=()=>a.length,l=()=>Object.keys(s).length,u=()=>{if(a.length!==0){const g=Object.keys(s);for(let y=0;y<g.length;y+=1)if(typeof o[g[y]]>"u"){a[0](s[g[y]]);break}}},d=(g,y)=>new Promise((v,x)=>{const D=i({action:g,payload:y});a.push(async A=>{a.shift(),o[A.id]=D;try{v(await A[g].apply(this,[...y,D.id]))}catch(T){x(T)}finally{delete o[A.id],u()}}),e(`[${r}]: Add ${D.id} to JobQueue`),e(`[${r}]: JobQueue length=${a.length}`),u()});return{addWorker:g=>(s[g.id]=g,e(`[${r}]: Add ${g.id}`),e(`[${r}]: Number of workers=${l()}`),u(),g.id),addJob:async(g,...y)=>{if(l()===0)throw Error(`[${r}]: You need to have at least one worker before adding jobs`);return d(g,y)},terminate:async()=>{Object.keys(s).forEach(async g=>{await s[g].terminate()}),a=[]},getQueueLen:c,getNumWorkers:l}},$f}function Mc(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Xf,N0;function mw(){if(N0)return Xf;N0=1;function i(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}return Xf=i,Xf}var jf,k0;function yw(){if(k0)return jf;k0=1;const i=mw();return jf=e=>{const t={};return typeof WorkerGlobalScope<"u"?t.type="webworker":i()?t.type="electron":typeof document=="object"?t.type="browser":typeof process=="object"&&typeof Mc=="function"&&(t.type="node"),typeof e>"u"?t:t[e]},jf}var Yf,M0;function bw(){if(M0)return Yf;M0=1;const e=yw()("type")==="browser"?t=>new URL(t,window.location.href).href:t=>t;return Yf=t=>{const n={...t};return["corePath","workerPath","langPath"].forEach(r=>{t[r]&&(n[r]=e(n[r]))}),n},Yf}var Jf,P0;function vw(){return P0||(P0=1,Jf=i=>{const e=[],t=[],n=[],r=[],s=[];return i.blocks&&i.blocks.forEach(o=>{o.paragraphs.forEach(a=>{a.lines.forEach(c=>{c.words.forEach(l=>{l.symbols.forEach(u=>{s.push({...u,page:i,block:o,paragraph:a,line:c,word:l})}),r.push({...l,page:i,block:o,paragraph:a,line:c})}),n.push({...c,page:i,block:o,paragraph:a})}),t.push({...a,page:i,block:o})}),e.push({...o,page:i})}),{...i,blocks:e,paragraphs:t,lines:n,words:r,symbols:s}}),Jf}var Kf,L0;function q_(){return L0||(L0=1,Kf={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),Kf}const xw="tesseract.js",_w="5.1.0",Dw="Pure Javascript Multilingual OCR",Tw="src/index.js",Aw="src/index.d.ts",Ew="dist/tesseract.min.js",ww="dist/tesseract.min.js",Cw={start:"node scripts/server.js",build:"rimraf dist && webpack --config scripts/webpack.config.prod.js && rollup -c scripts/rollup.esm.mjs","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json",prepublishOnly:"npm run build",wait:"rimraf dist && wait-on http://localhost:3000/dist/tesseract.min.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:* test:node:all","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser-tpl":"mocha-headless-chrome -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:detect":"npm run test:browser-tpl -- -f ./tests/detect.test.html","test:browser:recognize":"npm run test:browser-tpl -- -f ./tests/recognize.test.html","test:browser:scheduler":"npm run test:browser-tpl -- -f ./tests/scheduler.test.html","test:browser:FS":"npm run test:browser-tpl -- -f ./tests/FS.test.html",lint:"eslint src","lint:fix":"eslint --fix src",postinstall:"opencollective-postinstall || true"},Sw={"./src/worker/node/index.js":"./src/worker/browser/index.js"},Uw="",Iw=["jeromewu"],Rw="Apache-2.0",Fw={"@babel/core":"^7.21.4","@babel/eslint-parser":"^7.21.3","@babel/preset-env":"^7.21.4","@rollup/plugin-commonjs":"^24.1.0",acorn:"^8.8.2","babel-loader":"^9.1.2",buffer:"^6.0.3",cors:"^2.8.5",eslint:"^7.32.0","eslint-config-airbnb-base":"^14.2.1","eslint-plugin-import":"^2.27.5","expect.js":"^0.3.1",express:"^4.18.2",mocha:"^10.2.0","mocha-headless-chrome":"^4.0.0","npm-run-all":"^4.1.5",nyc:"^15.1.0",rimraf:"^5.0.0",rollup:"^3.20.7","wait-on":"^7.0.1",webpack:"^5.79.0","webpack-bundle-analyzer":"^4.8.0","webpack-cli":"^5.0.1","webpack-dev-middleware":"^6.0.2","rollup-plugin-sourcemaps":"^0.6.3"},Nw={"bmp-js":"^0.1.0","idb-keyval":"^6.2.0","is-electron":"^2.2.2","is-url":"^1.2.4","node-fetch":"^2.6.9","opencollective-postinstall":"^2.0.3","regenerator-runtime":"^0.13.3","tesseract.js-core":"^5.1.0","wasm-feature-detect":"^1.2.11",zlibjs:"^0.3.1"},kw={"@rollup/pluginutils":"^5.0.2"},Mw={type:"git",url:"https://github.com/naptha/tesseract.js.git"},Pw={url:"https://github.com/naptha/tesseract.js/issues"},Lw="https://github.com/naptha/tesseract.js",Bw={type:"opencollective",url:"https://opencollective.com/tesseractjs"},Ow={name:xw,version:_w,description:Dw,main:Tw,types:Aw,unpkg:Ew,jsdelivr:ww,scripts:Cw,browser:Sw,author:Uw,contributors:Iw,license:Rw,devDependencies:Fw,dependencies:Nw,overrides:kw,repository:Mw,bugs:Pw,homepage:Lw,collective:Bw};var Zf,B0;function Ww(){return B0||(B0=1,Zf={workerBlobURL:!0,logger:()=>{}}),Zf}var Qf,O0;function qw(){if(O0)return Qf;O0=1;const i=Ow.version;return Qf={...Ww(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${i}/dist/worker.min.js`},Qf}var ep,W0;function Hw(){return W0||(W0=1,ep=({workerPath:i,workerBlobURL:e})=>{let t;if(Blob&&URL&&e){const n=new Blob([`importScripts("${i}");`],{type:"application/javascript"});t=new Worker(URL.createObjectURL(n))}else t=new Worker(i);return t}),ep}var tp,q0;function Vw(){return q0||(q0=1,tp=i=>{i.terminate()}),tp}var np,H0;function Gw(){return H0||(H0=1,np=(i,e)=>{i.onmessage=({data:t})=>{e(t)}}),np}var ip,V0;function zw(){return V0||(V0=1,ip=async(i,e)=>{i.postMessage(e)}),ip}var rp,G0;function $w(){if(G0)return rp;G0=1;const i=t=>new Promise((n,r)=>{const s=new FileReader;s.onload=()=>{n(s.result)},s.onerror=({target:{error:{code:o}}})=>{r(Error(`File could not be read! Code=${o}`))},s.readAsArrayBuffer(t)}),e=async t=>{let n=t;if(typeof t>"u")return"undefined";if(typeof t=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(t)?n=atob(t.split(",")[1]).split("").map(r=>r.charCodeAt(0)):n=await(await fetch(t)).arrayBuffer();else if(typeof HTMLElement<"u"&&t instanceof HTMLElement)t.tagName==="IMG"&&(n=await e(t.src)),t.tagName==="VIDEO"&&(n=await e(t.poster)),t.tagName==="CANVAS"&&await new Promise(r=>{t.toBlob(async s=>{n=await i(s),r()})});else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas){const r=await t.convertToBlob();n=await i(r)}else(t instanceof File||t instanceof Blob)&&(n=await i(t));return new Uint8Array(n)};return rp=e,rp}var sp,z0;function Xw(){if(z0)return sp;z0=1;const i=qw(),e=Hw(),t=Vw(),n=Gw(),r=zw(),s=$w();return sp={defaultOptions:i,spawnWorker:e,terminateWorker:t,onMessage:n,send:r,loadImage:s},sp}var op,$0;function H_(){if($0)return op;$0=1;const i=bw(),e=vw(),t=W_(),{log:n}=ly(),r=cy(),s=q_(),{defaultOptions:o,spawnWorker:a,terminateWorker:c,onMessage:l,loadImage:u,send:d}=Xw();let h=0;return op=async(f="eng",b=s.LSTM_ONLY,g={},y={})=>{const v=r("Worker",h),{logger:x,errorHandler:D,...A}=i({...o,...g}),T={},E={},I=typeof f=="string"?f.split("+"):f;let N=b,R=y;const P=[s.DEFAULT,s.LSTM_ONLY].includes(b)&&!A.legacyCore;let j,U;const B=new Promise((Q,V)=>{U=Q,j=V}),S=Q=>{j(Q.message)};let J=a(A);J.onerror=S,h+=1;const q=(Q,V)=>{T[Q]=V},O=(Q,V)=>{E[Q]=V},K=({id:Q,action:V,payload:z})=>new Promise((ee,ue)=>{n(`[${v}]: Start ${Q}, action=${V}`);const he=`${V}-${Q}`;q(he,ee),O(he,ue),d(J,{workerId:v,jobId:Q,action:V,payload:z})}),H=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),Y=Q=>K(t({id:Q,action:"load",payload:{options:{lstmOnly:P,corePath:A.corePath,logging:A.logging}}})),F=(Q,V,z)=>K(t({id:z,action:"FS",payload:{method:"writeFile",args:[Q,V]}})),X=(Q,V)=>K(t({id:V,action:"FS",payload:{method:"readFile",args:[Q,{encoding:"utf8"}]}})),$=(Q,V)=>K(t({id:V,action:"FS",payload:{method:"unlink",args:[Q]}})),ne=(Q,V,z)=>K(t({id:z,action:"FS",payload:{method:Q,args:V}})),oe=()=>console.warn("`loadLanguage` is depreciated and should be removed from code (workers now come with language pre-loaded)"),pe=(Q,V)=>K(t({id:V,action:"loadLanguage",payload:{langs:Q,options:{langPath:A.langPath,dataPath:A.dataPath,cachePath:A.cachePath,cacheMethod:A.cacheMethod,gzip:A.gzip,lstmOnly:[s.LSTM_ONLY,s.TESSERACT_LSTM_COMBINED].includes(N)&&!A.legacyLang}}})),le=()=>console.warn("`initialize` is depreciated and should be removed from code (workers now come pre-initialized)"),ge=(Q,V,z,ee)=>K(t({id:ee,action:"initialize",payload:{langs:Q,oem:V,config:z}})),ye=(Q="eng",V,z,ee)=>{if(P&&[s.TESSERACT_ONLY,s.TESSERACT_LSTM_COMBINED].includes(V))throw Error("Legacy model requested but code missing.");const ue=V||N;N=ue;const he=z||R;R=he;const Z=(typeof Q=="string"?Q.split("+"):Q).filter(ie=>!I.includes(ie));return I.push(...Z),Z.length>0?pe(Z,ee).then(()=>ge(Q,ue,he,ee)):ge(Q,ue,he,ee)},De=(Q={},V)=>K(t({id:V,action:"setParameters",payload:{params:Q}})),we=async(Q,V={},z={blocks:!0,text:!0,hocr:!0,tsv:!0},ee)=>K(t({id:ee,action:"recognize",payload:{image:await u(Q),options:V,output:z}})),Se=(Q="Tesseract OCR Result",V=!1,z)=>(console.log("`getPDF` function is depreciated. `recognize` option `savePDF` should be used instead."),K(t({id:z,action:"getPDF",payload:{title:Q,textonly:V}}))),We=async(Q,V)=>{if(P)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return K(t({id:V,action:"detect",payload:{image:await u(Q)}}))},C=async()=>(J!==null&&(c(J),J=null),Promise.resolve());l(J,({workerId:Q,jobId:V,status:z,action:ee,data:ue})=>{const he=`${ee}-${V}`;if(z==="resolve"){n(`[${Q}]: Complete ${V}`);let re=ue;ee==="recognize"?re=e(ue):ee==="getPDF"&&(re=Array.from({...ue,length:Object.keys(ue).length})),T[he]({jobId:V,data:re})}else if(z==="reject")if(E[he](ue),ee==="load"&&j(ue),D)D(ue);else throw Error(ue);else z==="progress"&&x({...ue,userJobId:V})});const ae={id:v,worker:J,setResolve:q,setReject:O,load:H,writeText:F,readText:X,removeFile:$,FS:ne,loadLanguage:oe,initialize:le,reinitialize:ye,setParameters:De,recognize:we,getPDF:Se,detect:We,terminate:C};return Y().then(()=>pe(f)).then(()=>ge(f,b,y)).then(()=>U(ae)).catch(()=>{}),B},op}var ap,X0;function jw(){if(X0)return ap;X0=1;const i=H_();return ap={recognize:async(n,r,s)=>{const o=await i(r,1,s);return o.recognize(n).finally(async()=>{await o.terminate()})},detect:async(n,r)=>{const s=await i("osd",0,r);return s.detect(n).finally(async()=>{await s.terminate()})}},ap}var cp,j0;function Yw(){return j0||(j0=1,cp={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),cp}var lp,Y0;function Jw(){return Y0||(Y0=1,lp={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),lp}var up,J0;function Kw(){if(J0)return up;J0=1,pw();const i=gw(),e=H_(),t=jw(),n=Yw(),r=q_(),s=Jw(),{setLogging:o}=ly();return up={languages:n,OEM:r,PSM:s,createScheduler:i,createWorker:e,setLogging:o,...t},up}var Zw=Kw();const Qw=zh(Zw);var En={},uy="1.13.7",K0=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},sf=Array.prototype,dy=Object.prototype,Z0=typeof Symbol<"u"?Symbol.prototype:null,eC=sf.push,Pu=sf.slice,Hc=dy.toString,tC=dy.hasOwnProperty,V_=typeof ArrayBuffer<"u",nC=typeof DataView<"u",iC=Array.isArray,Q0=Object.keys,eb=Object.create,tb=V_&&ArrayBuffer.isView,rC=isNaN,sC=isFinite,G_=!{toString:null}.propertyIsEnumerable("toString"),nb=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],oC=Math.pow(2,53)-1;function en(i,e){return e=e==null?i.length-1:+e,function(){for(var t=Math.max(arguments.length-e,0),n=Array(t),r=0;r<t;r++)n[r]=arguments[r+e];switch(e){case 0:return i.call(this,n);case 1:return i.call(this,arguments[0],n);case 2:return i.call(this,arguments[0],arguments[1],n)}var s=Array(e+1);for(r=0;r<e;r++)s[r]=arguments[r];return s[e]=n,i.apply(this,s)}}function Zr(i){var e=typeof i;return e==="function"||e==="object"&&!!i}function z_(i){return i===null}function hy(i){return i===void 0}function fy(i){return i===!0||i===!1||Hc.call(i)==="[object Boolean]"}function $_(i){return!!(i&&i.nodeType===1)}function zt(i){var e="[object "+i+"]";return function(t){return Hc.call(t)===e}}const of=zt("String"),py=zt("Number"),X_=zt("Date"),j_=zt("RegExp"),Y_=zt("Error"),gy=zt("Symbol"),my=zt("ArrayBuffer");var J_=zt("Function"),aC=K0.document&&K0.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof aC!="function"&&(J_=function(i){return typeof i=="function"||!1});const Gt=J_,K_=zt("Object");var Z_=nC&&(!/\[native code\]/.test(String(DataView))||K_(new DataView(new ArrayBuffer(8)))),yy=typeof Map<"u"&&K_(new Map),cC=zt("DataView");function lC(i){return i!=null&&Gt(i.getInt8)&&my(i.buffer)}const Vc=Z_?lC:cC,Qr=iC||zt("Array");function es(i,e){return i!=null&&tC.call(i,e)}var Bm=zt("Arguments");(function(){Bm(arguments)||(Bm=function(i){return es(i,"callee")})})();const af=Bm;function Q_(i){return!gy(i)&&sC(i)&&!isNaN(parseFloat(i))}function by(i){return py(i)&&rC(i)}function vy(i){return function(){return i}}function eD(i){return function(e){var t=i(e);return typeof t=="number"&&t>=0&&t<=oC}}function tD(i){return function(e){return e==null?void 0:e[i]}}const uh=tD("byteLength"),uC=eD(uh);var dC=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function hC(i){return tb?tb(i)&&!Vc(i):uC(i)&&dC.test(Hc.call(i))}const xy=V_?hC:vy(!1),un=tD("length");function fC(i){for(var e={},t=i.length,n=0;n<t;++n)e[i[n]]=!0;return{contains:function(r){return e[r]===!0},push:function(r){return e[r]=!0,i.push(r)}}}function nD(i,e){e=fC(e);var t=nb.length,n=i.constructor,r=Gt(n)&&n.prototype||dy,s="constructor";for(es(i,s)&&!e.contains(s)&&e.push(s);t--;)s=nb[t],s in i&&i[s]!==r[s]&&!e.contains(s)&&e.push(s)}function At(i){if(!Zr(i))return[];if(Q0)return Q0(i);var e=[];for(var t in i)es(i,t)&&e.push(t);return G_&&nD(i,e),e}function iD(i){if(i==null)return!0;var e=un(i);return typeof e=="number"&&(Qr(i)||of(i)||af(i))?e===0:un(At(i))===0}function _y(i,e){var t=At(e),n=t.length;if(i==null)return!n;for(var r=Object(i),s=0;s<n;s++){var o=t[s];if(e[o]!==r[o]||!(o in r))return!1}return!0}function Ke(i){if(i instanceof Ke)return i;if(!(this instanceof Ke))return new Ke(i);this._wrapped=i}Ke.VERSION=uy;Ke.prototype.value=function(){return this._wrapped};Ke.prototype.valueOf=Ke.prototype.toJSON=Ke.prototype.value;Ke.prototype.toString=function(){return String(this._wrapped)};function ib(i){return new Uint8Array(i.buffer||i,i.byteOffset||0,uh(i))}var rb="[object DataView]";function Om(i,e,t,n){if(i===e)return i!==0||1/i===1/e;if(i==null||e==null)return!1;if(i!==i)return e!==e;var r=typeof i;return r!=="function"&&r!=="object"&&typeof e!="object"?!1:rD(i,e,t,n)}function rD(i,e,t,n){i instanceof Ke&&(i=i._wrapped),e instanceof Ke&&(e=e._wrapped);var r=Hc.call(i);if(r!==Hc.call(e))return!1;if(Z_&&r=="[object Object]"&&Vc(i)){if(!Vc(e))return!1;r=rb}switch(r){case"[object RegExp]":case"[object String]":return""+i==""+e;case"[object Number]":return+i!=+i?+e!=+e:+i==0?1/+i===1/e:+i==+e;case"[object Date]":case"[object Boolean]":return+i==+e;case"[object Symbol]":return Z0.valueOf.call(i)===Z0.valueOf.call(e);case"[object ArrayBuffer]":case rb:return rD(ib(i),ib(e),t,n)}var s=r==="[object Array]";if(!s&&xy(i)){var o=uh(i);if(o!==uh(e))return!1;if(i.buffer===e.buffer&&i.byteOffset===e.byteOffset)return!0;s=!0}if(!s){if(typeof i!="object"||typeof e!="object")return!1;var a=i.constructor,c=e.constructor;if(a!==c&&!(Gt(a)&&a instanceof a&&Gt(c)&&c instanceof c)&&"constructor"in i&&"constructor"in e)return!1}t=t||[],n=n||[];for(var l=t.length;l--;)if(t[l]===i)return n[l]===e;if(t.push(i),n.push(e),s){if(l=i.length,l!==e.length)return!1;for(;l--;)if(!Om(i[l],e[l],t,n))return!1}else{var u=At(i),d;if(l=u.length,At(e).length!==l)return!1;for(;l--;)if(d=u[l],!(es(e,d)&&Om(i[d],e[d],t,n)))return!1}return t.pop(),n.pop(),!0}function sD(i,e){return Om(i,e)}function Ja(i){if(!Zr(i))return[];var e=[];for(var t in i)e.push(t);return G_&&nD(i,e),e}function Dy(i){var e=un(i);return function(t){if(t==null)return!1;var n=Ja(t);if(un(n))return!1;for(var r=0;r<e;r++)if(!Gt(t[i[r]]))return!1;return i!==cD||!Gt(t[Ty])}}var Ty="forEach",oD="has",Ay=["clear","delete"],aD=["get",oD,"set"],pC=Ay.concat(Ty,aD),cD=Ay.concat(aD),gC=["add"].concat(Ay,Ty,oD);const lD=yy?Dy(pC):zt("Map"),uD=yy?Dy(cD):zt("WeakMap"),dD=yy?Dy(gC):zt("Set"),hD=zt("WeakSet");function Eo(i){for(var e=At(i),t=e.length,n=Array(t),r=0;r<t;r++)n[r]=i[e[r]];return n}function fD(i){for(var e=At(i),t=e.length,n=Array(t),r=0;r<t;r++)n[r]=[e[r],i[e[r]]];return n}function Ey(i){for(var e={},t=At(i),n=0,r=t.length;n<r;n++)e[i[t[n]]]=t[n];return e}function Gc(i){var e=[];for(var t in i)Gt(i[t])&&e.push(t);return e.sort()}function wy(i,e){return function(t){var n=arguments.length;if(e&&(t=Object(t)),n<2||t==null)return t;for(var r=1;r<n;r++)for(var s=arguments[r],o=i(s),a=o.length,c=0;c<a;c++){var l=o[c];(!e||t[l]===void 0)&&(t[l]=s[l])}return t}}const Cy=wy(Ja),ja=wy(At),Sy=wy(Ja,!0);function mC(){return function(){}}function pD(i){if(!Zr(i))return{};if(eb)return eb(i);var e=mC();e.prototype=i;var t=new e;return e.prototype=null,t}function gD(i,e){var t=pD(i);return e&&ja(t,e),t}function mD(i){return Zr(i)?Qr(i)?i.slice():Cy({},i):i}function yD(i,e){return e(i),i}function Uy(i){return Qr(i)?i:[i]}Ke.toPath=Uy;function Lu(i){return Ke.toPath(i)}function Iy(i,e){for(var t=e.length,n=0;n<t;n++){if(i==null)return;i=i[e[n]]}return t?i:void 0}function Ry(i,e,t){var n=Iy(i,Lu(e));return hy(n)?t:n}function bD(i,e){e=Lu(e);for(var t=e.length,n=0;n<t;n++){var r=e[n];if(!es(i,r))return!1;i=i[r]}return!!t}function cf(i){return i}function bo(i){return i=ja({},i),function(e){return _y(e,i)}}function lf(i){return i=Lu(i),function(e){return Iy(e,i)}}function Bu(i,e,t){if(e===void 0)return i;switch(t??3){case 1:return function(n){return i.call(e,n)};case 3:return function(n,r,s){return i.call(e,n,r,s)};case 4:return function(n,r,s,o){return i.call(e,n,r,s,o)}}return function(){return i.apply(e,arguments)}}function vD(i,e,t){return i==null?cf:Gt(i)?Bu(i,e,t):Zr(i)&&!Qr(i)?bo(i):lf(i)}function uf(i,e){return vD(i,e,1/0)}Ke.iteratee=uf;function dn(i,e,t){return Ke.iteratee!==uf?Ke.iteratee(i,e):vD(i,e,t)}function xD(i,e,t){e=dn(e,t);for(var n=At(i),r=n.length,s={},o=0;o<r;o++){var a=n[o];s[a]=e(i[a],a,i)}return s}function Fy(){}function _D(i){return i==null?Fy:function(e){return Ry(i,e)}}function DD(i,e,t){var n=Array(Math.max(0,i));e=Bu(e,t,1);for(var r=0;r<i;r++)n[r]=e(r);return n}function dh(i,e){return e==null&&(e=i,i=0),i+Math.floor(Math.random()*(e-i+1))}const Ya=Date.now||function(){return new Date().getTime()};function TD(i){var e=function(s){return i[s]},t="(?:"+At(i).join("|")+")",n=RegExp(t),r=RegExp(t,"g");return function(s){return s=s==null?"":""+s,n.test(s)?s.replace(r,e):s}}const AD={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},ED=TD(AD),yC=Ey(AD),wD=TD(yC),CD=Ke.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var dp=/(.)^/,bC={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},vC=/\\|'|\r|\n|\u2028|\u2029/g;function xC(i){return"\\"+bC[i]}var _C=/^\s*(\w|\$)+\s*$/;function SD(i,e,t){!e&&t&&(e=t),e=Sy({},e,Ke.templateSettings);var n=RegExp([(e.escape||dp).source,(e.interpolate||dp).source,(e.evaluate||dp).source].join("|")+"|$","g"),r=0,s="__p+='";i.replace(n,function(l,u,d,h,f){return s+=i.slice(r,f).replace(vC,xC),r=f+l.length,u?s+=`'+
((__t=(`+u+`))==null?'':_.escape(__t))+
'`:d?s+=`'+
((__t=(`+d+`))==null?'':__t)+
'`:h&&(s+=`';
`+h+`
__p+='`),l}),s+=`';
`;var o=e.variable;if(o){if(!_C.test(o))throw new Error("variable is not a bare identifier: "+o)}else s=`with(obj||{}){
`+s+`}
`,o="obj";s=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+s+`return __p;
`;var a;try{a=new Function(o,"_",s)}catch(l){throw l.source=s,l}var c=function(l){return a.call(this,l,Ke)};return c.source="function("+o+`){
`+s+"}",c}function UD(i,e,t){e=Lu(e);var n=e.length;if(!n)return Gt(t)?t.call(i):t;for(var r=0;r<n;r++){var s=i==null?void 0:i[e[r]];s===void 0&&(s=t,r=n),i=Gt(s)?s.call(i):s}return i}var DC=0;function ID(i){var e=++DC+"";return i?i+e:e}function RD(i){var e=Ke(i);return e._chain=!0,e}function FD(i,e,t,n,r){if(!(n instanceof e))return i.apply(t,r);var s=pD(i.prototype),o=i.apply(s,r);return Zr(o)?o:s}var wo=en(function(i,e){var t=wo.placeholder,n=function(){for(var r=0,s=e.length,o=Array(s),a=0;a<s;a++)o[a]=e[a]===t?arguments[r++]:e[a];for(;r<arguments.length;)o.push(arguments[r++]);return FD(i,n,this,this,o)};return n});wo.placeholder=Ke;const Ny=en(function(i,e,t){if(!Gt(i))throw new TypeError("Bind must be called on a function");var n=en(function(r){return FD(i,n,e,this,t.concat(r))});return n}),Tn=eD(un);function Co(i,e,t,n){if(n=n||[],!e&&e!==0)e=1/0;else if(e<=0)return n.concat(i);for(var r=n.length,s=0,o=un(i);s<o;s++){var a=i[s];if(Tn(a)&&(Qr(a)||af(a)))if(e>1)Co(a,e-1,t,n),r=n.length;else for(var c=0,l=a.length;c<l;)n[r++]=a[c++];else t||(n[r++]=a)}return n}const ND=en(function(i,e){e=Co(e,!1,!1);var t=e.length;if(t<1)throw new Error("bindAll must be passed function names");for(;t--;){var n=e[t];i[n]=Ny(i[n],i)}return i});function kD(i,e){var t=function(n){var r=t.cache,s=""+(e?e.apply(this,arguments):n);return es(r,s)||(r[s]=i.apply(this,arguments)),r[s]};return t.cache={},t}const ky=en(function(i,e,t){return setTimeout(function(){return i.apply(null,t)},e)}),MD=wo(ky,Ke,1);function PD(i,e,t){var n,r,s,o,a=0;t||(t={});var c=function(){a=t.leading===!1?0:Ya(),n=null,o=i.apply(r,s),n||(r=s=null)},l=function(){var u=Ya();!a&&t.leading===!1&&(a=u);var d=e-(u-a);return r=this,s=arguments,d<=0||d>e?(n&&(clearTimeout(n),n=null),a=u,o=i.apply(r,s),n||(r=s=null)):!n&&t.trailing!==!1&&(n=setTimeout(c,d)),o};return l.cancel=function(){clearTimeout(n),a=0,n=r=s=null},l}function LD(i,e,t){var n,r,s,o,a,c=function(){var u=Ya()-r;e>u?n=setTimeout(c,e-u):(n=null,t||(o=i.apply(a,s)),n||(s=a=null))},l=en(function(u){return a=this,s=u,r=Ya(),n||(n=setTimeout(c,e),t&&(o=i.apply(a,s))),o});return l.cancel=function(){clearTimeout(n),n=s=a=null},l}function BD(i,e){return wo(e,i)}function df(i){return function(){return!i.apply(this,arguments)}}function OD(){var i=arguments,e=i.length-1;return function(){for(var t=e,n=i[e].apply(this,arguments);t--;)n=i[t].call(this,n);return n}}function WD(i,e){return function(){if(--i<1)return e.apply(this,arguments)}}function My(i,e){var t;return function(){return--i>0&&(t=e.apply(this,arguments)),i<=1&&(e=null),t}}const qD=wo(My,2);function Py(i,e,t){e=dn(e,t);for(var n=At(i),r,s=0,o=n.length;s<o;s++)if(r=n[s],e(i[r],r,i))return r}function HD(i){return function(e,t,n){t=dn(t,n);for(var r=un(e),s=i>0?0:r-1;s>=0&&s<r;s+=i)if(t(e[s],s,e))return s;return-1}}const hf=HD(1),Ly=HD(-1);function By(i,e,t,n){t=dn(t,n,1);for(var r=t(e),s=0,o=un(i);s<o;){var a=Math.floor((s+o)/2);t(i[a])<r?s=a+1:o=a}return s}function VD(i,e,t){return function(n,r,s){var o=0,a=un(n);if(typeof s=="number")i>0?o=s>=0?s:Math.max(s+a,o):a=s>=0?Math.min(s+1,a):s+a+1;else if(t&&s&&a)return s=t(n,r),n[s]===r?s:-1;if(r!==r)return s=e(Pu.call(n,o,a),by),s>=0?s+o:-1;for(s=i>0?o:a-1;s>=0&&s<a;s+=i)if(n[s]===r)return s;return-1}}const Oy=VD(1,hf,By),GD=VD(-1,Ly);function zc(i,e,t){var n=Tn(i)?hf:Py,r=n(i,e,t);if(r!==void 0&&r!==-1)return i[r]}function zD(i,e){return zc(i,bo(e))}function ii(i,e,t){e=Bu(e,t);var n,r;if(Tn(i))for(n=0,r=i.length;n<r;n++)e(i[n],n,i);else{var s=At(i);for(n=0,r=s.length;n<r;n++)e(i[s[n]],s[n],i)}return i}function hr(i,e,t){e=dn(e,t);for(var n=!Tn(i)&&At(i),r=(n||i).length,s=Array(r),o=0;o<r;o++){var a=n?n[o]:o;s[o]=e(i[a],a,i)}return s}function $D(i){var e=function(t,n,r,s){var o=!Tn(t)&&At(t),a=(o||t).length,c=i>0?0:a-1;for(s||(r=t[o?o[c]:c],c+=i);c>=0&&c<a;c+=i){var l=o?o[c]:c;r=n(r,t[l],l,t)}return r};return function(t,n,r,s){var o=arguments.length>=3;return e(t,Bu(n,s,4),r,o)}}const Go=$D(1),hh=$D(-1);function Xr(i,e,t){var n=[];return e=dn(e,t),ii(i,function(r,s,o){e(r,s,o)&&n.push(r)}),n}function XD(i,e,t){return Xr(i,df(dn(e)),t)}function fh(i,e,t){e=dn(e,t);for(var n=!Tn(i)&&At(i),r=(n||i).length,s=0;s<r;s++){var o=n?n[s]:s;if(!e(i[o],o,i))return!1}return!0}function ph(i,e,t){e=dn(e,t);for(var n=!Tn(i)&&At(i),r=(n||i).length,s=0;s<r;s++){var o=n?n[s]:s;if(e(i[o],o,i))return!0}return!1}function Bn(i,e,t,n){return Tn(i)||(i=Eo(i)),(typeof t!="number"||n)&&(t=0),Oy(i,e,t)>=0}const jD=en(function(i,e,t){var n,r;return Gt(e)?r=e:(e=Lu(e),n=e.slice(0,-1),e=e[e.length-1]),hr(i,function(s){var o=r;if(!o){if(n&&n.length&&(s=Iy(s,n)),s==null)return;o=s[e]}return o==null?o:o.apply(s,t)})});function ff(i,e){return hr(i,lf(e))}function YD(i,e){return Xr(i,bo(e))}function Wy(i,e,t){var n=-1/0,r=-1/0,s,o;if(e==null||typeof e=="number"&&typeof i[0]!="object"&&i!=null){i=Tn(i)?i:Eo(i);for(var a=0,c=i.length;a<c;a++)s=i[a],s!=null&&s>n&&(n=s)}else e=dn(e,t),ii(i,function(l,u,d){o=e(l,u,d),(o>r||o===-1/0&&n===-1/0)&&(n=l,r=o)});return n}function JD(i,e,t){var n=1/0,r=1/0,s,o;if(e==null||typeof e=="number"&&typeof i[0]!="object"&&i!=null){i=Tn(i)?i:Eo(i);for(var a=0,c=i.length;a<c;a++)s=i[a],s!=null&&s<n&&(n=s)}else e=dn(e,t),ii(i,function(l,u,d){o=e(l,u,d),(o<r||o===1/0&&n===1/0)&&(n=l,r=o)});return n}var TC=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function qy(i){return i?Qr(i)?Pu.call(i):of(i)?i.match(TC):Tn(i)?hr(i,cf):Eo(i):[]}function Hy(i,e,t){if(e==null||t)return Tn(i)||(i=Eo(i)),i[dh(i.length-1)];var n=qy(i),r=un(n);e=Math.max(Math.min(e,r),0);for(var s=r-1,o=0;o<e;o++){var a=dh(o,s),c=n[o];n[o]=n[a],n[a]=c}return n.slice(0,e)}function KD(i){return Hy(i,1/0)}function ZD(i,e,t){var n=0;return e=dn(e,t),ff(hr(i,function(r,s,o){return{value:r,index:n++,criteria:e(r,s,o)}}).sort(function(r,s){var o=r.criteria,a=s.criteria;if(o!==a){if(o>a||o===void 0)return 1;if(o<a||a===void 0)return-1}return r.index-s.index}),"value")}function pf(i,e){return function(t,n,r){var s=e?[[],[]]:{};return n=dn(n,r),ii(t,function(o,a){var c=n(o,a,t);i(s,o,c)}),s}}const QD=pf(function(i,e,t){es(i,t)?i[t].push(e):i[t]=[e]}),eT=pf(function(i,e,t){i[t]=e}),tT=pf(function(i,e,t){es(i,t)?i[t]++:i[t]=1}),nT=pf(function(i,e,t){i[t?0:1].push(e)},!0);function iT(i){return i==null?0:Tn(i)?i.length:At(i).length}function AC(i,e,t){return e in t}const Vy=en(function(i,e){var t={},n=e[0];if(i==null)return t;Gt(n)?(e.length>1&&(n=Bu(n,e[1])),e=Ja(i)):(n=AC,e=Co(e,!1,!1),i=Object(i));for(var r=0,s=e.length;r<s;r++){var o=e[r],a=i[o];n(a,o,i)&&(t[o]=a)}return t}),rT=en(function(i,e){var t=e[0],n;return Gt(t)?(t=df(t),e.length>1&&(n=e[1])):(e=hr(Co(e,!1,!1),String),t=function(r,s){return!Bn(e,s)}),Vy(i,t,n)});function Gy(i,e,t){return Pu.call(i,0,Math.max(0,i.length-(e==null||t?1:e)))}function zo(i,e,t){return i==null||i.length<1?e==null||t?void 0:[]:e==null||t?i[0]:Gy(i,i.length-e)}function po(i,e,t){return Pu.call(i,e==null||t?1:e)}function sT(i,e,t){return i==null||i.length<1?e==null||t?void 0:[]:e==null||t?i[i.length-1]:po(i,Math.max(0,i.length-e))}function oT(i){return Xr(i,Boolean)}function aT(i,e){return Co(i,e,!1)}const zy=en(function(i,e){return e=Co(e,!0,!0),Xr(i,function(t){return!Bn(e,t)})}),cT=en(function(i,e){return zy(i,e)});function $c(i,e,t,n){fy(e)||(n=t,t=e,e=!1),t!=null&&(t=dn(t,n));for(var r=[],s=[],o=0,a=un(i);o<a;o++){var c=i[o],l=t?t(c,o,i):c;e&&!t?((!o||s!==l)&&r.push(c),s=l):t?Bn(s,l)||(s.push(l),r.push(c)):Bn(r,c)||r.push(c)}return r}const lT=en(function(i){return $c(Co(i,!0,!0))});function uT(i){for(var e=[],t=arguments.length,n=0,r=un(i);n<r;n++){var s=i[n];if(!Bn(e,s)){var o;for(o=1;o<t&&Bn(arguments[o],s);o++);o===t&&e.push(s)}}return e}function Xc(i){for(var e=i&&Wy(i,un).length||0,t=Array(e),n=0;n<e;n++)t[n]=ff(i,n);return t}const dT=en(Xc);function hT(i,e){for(var t={},n=0,r=un(i);n<r;n++)e?t[i[n]]=e[n]:t[i[n][0]]=i[n][1];return t}function fT(i,e,t){e==null&&(e=i||0,i=0),t||(t=e<i?-1:1);for(var n=Math.max(Math.ceil((e-i)/t),0),r=Array(n),s=0;s<n;s++,i+=t)r[s]=i;return r}function pT(i,e){if(e==null||e<1)return[];for(var t=[],n=0,r=i.length;n<r;)t.push(Pu.call(i,n,n+=e));return t}function $y(i,e){return i._chain?Ke(e).chain():e}function Xy(i){return ii(Gc(i),function(e){var t=Ke[e]=i[e];Ke.prototype[e]=function(){var n=[this._wrapped];return eC.apply(n,arguments),$y(this,t.apply(Ke,n))}}),Ke}ii(["pop","push","reverse","shift","sort","splice","unshift"],function(i){var e=sf[i];Ke.prototype[i]=function(){var t=this._wrapped;return t!=null&&(e.apply(t,arguments),(i==="shift"||i==="splice")&&t.length===0&&delete t[0]),$y(this,t)}});ii(["concat","join","slice"],function(i){var e=sf[i];Ke.prototype[i]=function(){var t=this._wrapped;return t!=null&&(t=e.apply(t,arguments)),$y(this,t)}});const EC=Object.freeze(Object.defineProperty({__proto__:null,VERSION:uy,after:WD,all:fh,allKeys:Ja,any:ph,assign:ja,before:My,bind:Ny,bindAll:ND,chain:RD,chunk:pT,clone:mD,collect:hr,compact:oT,compose:OD,constant:vy,contains:Bn,countBy:tT,create:gD,debounce:LD,default:Ke,defaults:Sy,defer:MD,delay:ky,detect:zc,difference:zy,drop:po,each:ii,escape:ED,every:fh,extend:Cy,extendOwn:ja,filter:Xr,find:zc,findIndex:hf,findKey:Py,findLastIndex:Ly,findWhere:zD,first:zo,flatten:aT,foldl:Go,foldr:hh,forEach:ii,functions:Gc,get:Ry,groupBy:QD,has:bD,head:zo,identity:cf,include:Bn,includes:Bn,indexBy:eT,indexOf:Oy,initial:Gy,inject:Go,intersection:uT,invert:Ey,invoke:jD,isArguments:af,isArray:Qr,isArrayBuffer:my,isBoolean:fy,isDataView:Vc,isDate:X_,isElement:$_,isEmpty:iD,isEqual:sD,isError:Y_,isFinite:Q_,isFunction:Gt,isMap:lD,isMatch:_y,isNaN:by,isNull:z_,isNumber:py,isObject:Zr,isRegExp:j_,isSet:dD,isString:of,isSymbol:gy,isTypedArray:xy,isUndefined:hy,isWeakMap:uD,isWeakSet:hD,iteratee:uf,keys:At,last:sT,lastIndexOf:GD,map:hr,mapObject:xD,matcher:bo,matches:bo,max:Wy,memoize:kD,methods:Gc,min:JD,mixin:Xy,negate:df,noop:Fy,now:Ya,object:hT,omit:rT,once:qD,pairs:fD,partial:wo,partition:nT,pick:Vy,pluck:ff,property:lf,propertyOf:_D,random:dh,range:fT,reduce:Go,reduceRight:hh,reject:XD,rest:po,restArguments:en,result:UD,sample:Hy,select:Xr,shuffle:KD,size:iT,some:ph,sortBy:ZD,sortedIndex:By,tail:po,take:zo,tap:yD,template:SD,templateSettings:CD,throttle:PD,times:DD,toArray:qy,toPath:Uy,transpose:Xc,unescape:wD,union:lT,uniq:$c,unique:$c,uniqueId:ID,unzip:Xc,values:Eo,where:YD,without:cT,wrap:BD,zip:dT},Symbol.toStringTag,{value:"Module"}));var Wm=Xy(EC);Wm._=Wm;const wC=Object.freeze(Object.defineProperty({__proto__:null,VERSION:uy,after:WD,all:fh,allKeys:Ja,any:ph,assign:ja,before:My,bind:Ny,bindAll:ND,chain:RD,chunk:pT,clone:mD,collect:hr,compact:oT,compose:OD,constant:vy,contains:Bn,countBy:tT,create:gD,debounce:LD,default:Wm,defaults:Sy,defer:MD,delay:ky,detect:zc,difference:zy,drop:po,each:ii,escape:ED,every:fh,extend:Cy,extendOwn:ja,filter:Xr,find:zc,findIndex:hf,findKey:Py,findLastIndex:Ly,findWhere:zD,first:zo,flatten:aT,foldl:Go,foldr:hh,forEach:ii,functions:Gc,get:Ry,groupBy:QD,has:bD,head:zo,identity:cf,include:Bn,includes:Bn,indexBy:eT,indexOf:Oy,initial:Gy,inject:Go,intersection:uT,invert:Ey,invoke:jD,isArguments:af,isArray:Qr,isArrayBuffer:my,isBoolean:fy,isDataView:Vc,isDate:X_,isElement:$_,isEmpty:iD,isEqual:sD,isError:Y_,isFinite:Q_,isFunction:Gt,isMap:lD,isMatch:_y,isNaN:by,isNull:z_,isNumber:py,isObject:Zr,isRegExp:j_,isSet:dD,isString:of,isSymbol:gy,isTypedArray:xy,isUndefined:hy,isWeakMap:uD,isWeakSet:hD,iteratee:uf,keys:At,last:sT,lastIndexOf:GD,map:hr,mapObject:xD,matcher:bo,matches:bo,max:Wy,memoize:kD,methods:Gc,min:JD,mixin:Xy,negate:df,noop:Fy,now:Ya,object:hT,omit:rT,once:qD,pairs:fD,partial:wo,partition:nT,pick:Vy,pluck:ff,property:lf,propertyOf:_D,random:dh,range:fT,reduce:Go,reduceRight:hh,reject:XD,rest:po,restArguments:en,result:UD,sample:Hy,select:Xr,shuffle:KD,size:iT,some:ph,sortBy:ZD,sortedIndex:By,tail:po,take:zo,tap:yD,template:SD,templateSettings:CD,throttle:PD,times:DD,toArray:qy,toPath:Uy,transpose:Xc,unescape:wD,union:lT,uniq:$c,unique:$c,uniqueId:ID,unzip:Xc,values:Eo,where:YD,without:cT,wrap:BD,zip:dT},Symbol.toStringTag,{value:"Module"})),gt=$1(wC);var Xu={};const CC={},Pc=Object.freeze(Object.defineProperty({__proto__:null,default:CC},Symbol.toStringTag,{value:"Module"})),SC=$1(Pc);var wn={},hp={exports:{}},ju={exports:{}},sb;function Ka(){if(sb)return ju.exports;sb=1;var i=(function(){return this===void 0})();if(i)ju.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:i,propertyIsWritable:function(u,d){var h=Object.getOwnPropertyDescriptor(u,d);return!!(!h||h.writable||h.set)}};else{var e={}.hasOwnProperty,t={}.toString,n={}.constructor.prototype,r=function(u){var d=[];for(var h in u)e.call(u,h)&&d.push(h);return d},s=function(u,d){return{value:u[d]}},o=function(u,d,h){return u[d]=h.value,u},a=function(u){return u},c=function(u){try{return Object(u).constructor.prototype}catch{return n}},l=function(u){try{return t.call(u)==="[object Array]"}catch{return!1}};ju.exports={isArray:l,keys:r,names:r,defineProperty:o,getDescriptor:s,freeze:a,getPrototypeOf:c,isES5:i,propertyIsWritable:function(){return!0}}}return ju.exports}var cc,ob;function at(){if(ob)return cc;ob=1;var i={},e=Ka(),t=typeof navigator>"u",n={e:{}},r,s=typeof self<"u"?self:typeof window<"u"?window:typeof Ln<"u"?Ln:cc!==void 0?cc:null;function o(){try{var $=r;return r=null,$.apply(this,arguments)}catch(ne){return n.e=ne,n}}function a($){return r=$,o}var c=function($,ne){var oe={}.hasOwnProperty;function pe(){this.constructor=$,this.constructor$=ne;for(var le in ne.prototype)oe.call(ne.prototype,le)&&le.charAt(le.length-1)!=="$"&&(this[le+"$"]=ne.prototype[le])}return pe.prototype=ne.prototype,$.prototype=new pe,$.prototype};function l($){return $==null||$===!0||$===!1||typeof $=="string"||typeof $=="number"}function u($){return typeof $=="function"||typeof $=="object"&&$!==null}function d($){return l($)?new Error(I($)):$}function h($,ne){var oe=$.length,pe=new Array(oe+1),le;for(le=0;le<oe;++le)pe[le]=$[le];return pe[le]=ne,pe}function f($,ne,oe){if(e.isES5){var pe=Object.getOwnPropertyDescriptor($,ne);if(pe!=null)return pe.get==null&&pe.set==null?pe.value:oe}else return{}.hasOwnProperty.call($,ne)?$[ne]:void 0}function b($,ne,oe){if(l($))return $;var pe={value:oe,configurable:!0,enumerable:!1,writable:!0};return e.defineProperty($,ne,pe),$}function g($){throw $}var y=(function(){var $=[Array.prototype,Object.prototype,Function.prototype],ne=function(le){for(var ge=0;ge<$.length;++ge)if($[ge]===le)return!0;return!1};if(e.isES5){var oe=Object.getOwnPropertyNames;return function(le){for(var ge=[],ye=Object.create(null);le!=null&&!ne(le);){var De;try{De=oe(le)}catch{return ge}for(var we=0;we<De.length;++we){var Se=De[we];if(!ye[Se]){ye[Se]=!0;var We=Object.getOwnPropertyDescriptor(le,Se);We!=null&&We.get==null&&We.set==null&&ge.push(Se)}}le=e.getPrototypeOf(le)}return ge}}else{var pe={}.hasOwnProperty;return function(le){if(ne(le))return[];var ge=[];e:for(var ye in le)if(pe.call(le,ye))ge.push(ye);else{for(var De=0;De<$.length;++De)if(pe.call($[De],ye))continue e;ge.push(ye)}return ge}}})(),v=/this\s*\.\s*\S+\s*=/;function x($){try{if(typeof $=="function"){var ne=e.names($.prototype),oe=e.isES5&&ne.length>1,pe=ne.length>0&&!(ne.length===1&&ne[0]==="constructor"),le=v.test($+"")&&e.names($).length>0;if(oe||pe||le)return!0}return!1}catch{return!1}}function D($){return $}var A=/^[a-z$_][a-z$_0-9]*$/i;function T($){return A.test($)}function E($,ne,oe){for(var pe=new Array($),le=0;le<$;++le)pe[le]=ne+le+oe;return pe}function I($){try{return $+""}catch{return"[no string representation]"}}function N($){return $!==null&&typeof $=="object"&&typeof $.message=="string"&&typeof $.name=="string"}function R($){try{b($,"isOperational",!0)}catch{}}function P($){return $==null?!1:$ instanceof Error.__BluebirdErrorTypes__.OperationalError||$.isOperational===!0}function j($){return N($)&&e.propertyIsWritable($,"stack")}var U=(function(){return"stack"in new Error?function($){return j($)?$:new Error(I($))}:function($){if(j($))return $;try{throw new Error(I($))}catch(ne){return ne}}})();function B($){return{}.toString.call($)}function S($,ne,oe){for(var pe=e.names($),le=0;le<pe.length;++le){var ge=pe[le];if(oe(ge))try{e.defineProperty(ne,ge,e.getDescriptor($,ge))}catch{}}}var J=function($){return e.isArray($)?$:null};if(typeof Symbol<"u"&&Symbol.iterator){var q=typeof Array.from=="function"?function($){return Array.from($)}:function($){for(var ne=[],oe=$[Symbol.iterator](),pe;!(pe=oe.next()).done;)ne.push(pe.value);return ne};J=function($){return e.isArray($)?$:$!=null&&typeof $[Symbol.iterator]=="function"?q($):null}}var O=typeof process<"u"&&B(process).toLowerCase()==="[object process]",K=typeof process<"u"&&typeof i<"u";function H($){return K?i[$]:void 0}function Y(){if(typeof Promise=="function")try{var $=new Promise(function(){});if({}.toString.call($)==="[object Promise]")return Promise}catch{}}function F($,ne){return $.bind(ne)}var X={isClass:x,isIdentifier:T,inheritedDataKeys:y,getDataPropertyOrDefault:f,thrower:g,isArray:e.isArray,asArray:J,notEnumerableProp:b,isPrimitive:l,isObject:u,isError:N,canEvaluate:t,errorObj:n,tryCatch:a,inherits:c,withAppended:h,maybeWrapAsError:d,toFastProperties:D,filledRange:E,toString:I,canAttachTrace:j,ensureErrorObject:U,originatesFromRejection:P,markAsOriginatingFromRejection:R,classString:B,copyDescriptors:S,hasDevTools:typeof chrome<"u"&&chrome&&typeof chrome.loadTimes=="function",isNode:O,hasEnvVariables:K,env:H,global:s,getNativePromise:Y,domainBind:F};X.isRecentNode=X.isNode&&(function(){var $=process.versions.node.split(".").map(Number);return $[0]===0&&$[1]>10||$[0]>0})(),X.isNode&&X.toFastProperties(process);try{throw new Error}catch($){X.lastLineError=$}return cc=X,cc}var Yu={exports:{}},fp,ab;function UC(){if(ab)return fp;ab=1;var i=at(),e,t=function(){throw new Error(`No async scheduler available

    See http://goo.gl/MqrFmX
`)},n=i.getNativePromise();if(i.isNode&&typeof MutationObserver>"u"){var r=Ln.setImmediate,s=process.nextTick;e=i.isRecentNode?function(a){r.call(Ln,a)}:function(a){s.call(process,a)}}else if(typeof n=="function"&&typeof n.resolve=="function"){var o=n.resolve();e=function(a){o.then(a)}}else typeof MutationObserver<"u"&&!(typeof window<"u"&&window.navigator&&(window.navigator.standalone||window.cordova))?e=(function(){var a=document.createElement("div"),c={attributes:!0},l=!1,u=document.createElement("div"),d=new MutationObserver(function(){a.classList.toggle("foo"),l=!1});d.observe(u,c);var h=function(){l||(l=!0,u.classList.toggle("foo"))};return function(b){var g=new MutationObserver(function(){g.disconnect(),b()});g.observe(a,c),h()}})():typeof setImmediate<"u"?e=function(a){setImmediate(a)}:typeof setTimeout<"u"?e=function(a){setTimeout(a,0)}:e=t;return fp=e,fp}var pp,cb;function IC(){if(cb)return pp;cb=1;function i(t,n,r,s,o){for(var a=0;a<o;++a)r[a+s]=t[a+n],t[a+n]=void 0}function e(t){this._capacity=t,this._length=0,this._front=0}return e.prototype._willBeOverCapacity=function(t){return this._capacity<t},e.prototype._pushOne=function(t){var n=this.length();this._checkCapacity(n+1);var r=this._front+n&this._capacity-1;this[r]=t,this._length=n+1},e.prototype.push=function(t,n,r){var s=this.length()+3;if(this._willBeOverCapacity(s)){this._pushOne(t),this._pushOne(n),this._pushOne(r);return}var o=this._front+s-3;this._checkCapacity(s);var a=this._capacity-1;this[o+0&a]=t,this[o+1&a]=n,this[o+2&a]=r,this._length=s},e.prototype.shift=function(){var t=this._front,n=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,n},e.prototype.length=function(){return this._length},e.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},e.prototype._resizeTo=function(t){var n=this._capacity;this._capacity=t;var r=this._front,s=this._length,o=r+s&n-1;i(this,0,this,n,o)},pp=e,pp}var lb;function RC(){if(lb)return Yu.exports;lb=1;var i;try{throw new Error}catch(c){i=c}var e=UC(),t=IC(),n=at();function r(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new t(16),this._normalQueue=new t(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var c=this;this.drainQueues=function(){c._drainQueues()},this._schedule=e}r.prototype.setScheduler=function(c){var l=this._schedule;return this._schedule=c,this._customScheduler=!0,l},r.prototype.hasCustomScheduler=function(){return this._customScheduler},r.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},r.prototype.disableTrampolineIfNecessary=function(){n.hasDevTools&&(this._trampolineEnabled=!1)},r.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},r.prototype.fatalError=function(c,l){l?(process.stderr.write("Fatal "+(c instanceof Error?c.stack:c)+`
`),process.exit(2)):this.throwLater(c)},r.prototype.throwLater=function(c,l){if(arguments.length===1&&(l=c,c=function(){throw l}),typeof setTimeout<"u")setTimeout(function(){c(l)},0);else try{this._schedule(function(){c(l)})}catch{throw new Error(`No async scheduler available

    See http://goo.gl/MqrFmX
`)}};function s(c,l,u){this._lateQueue.push(c,l,u),this._queueTick()}function o(c,l,u){this._normalQueue.push(c,l,u),this._queueTick()}function a(c){this._normalQueue._pushOne(c),this._queueTick()}return n.hasDevTools?(r.prototype.invokeLater=function(c,l,u){this._trampolineEnabled?s.call(this,c,l,u):this._schedule(function(){setTimeout(function(){c.call(l,u)},100)})},r.prototype.invoke=function(c,l,u){this._trampolineEnabled?o.call(this,c,l,u):this._schedule(function(){c.call(l,u)})},r.prototype.settlePromises=function(c){this._trampolineEnabled?a.call(this,c):this._schedule(function(){c._settlePromises()})}):(r.prototype.invokeLater=s,r.prototype.invoke=o,r.prototype.settlePromises=a),r.prototype._drainQueue=function(c){for(;c.length()>0;){var l=c.shift();if(typeof l!="function"){l._settlePromises();continue}var u=c.shift(),d=c.shift();l.call(u,d)}},r.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},r.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},r.prototype._reset=function(){this._isTickUsed=!1},Yu.exports=r,Yu.exports.firstLineError=i,Yu.exports}var gp,ub;function jr(){if(ub)return gp;ub=1;var i=Ka(),e=i.freeze,t=at(),n=t.inherits,r=t.notEnumerableProp;function s(v,x){function D(A){if(!(this instanceof D))return new D(A);r(this,"message",typeof A=="string"?A:x),r(this,"name",v),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return n(D,Error),D}var o,a,c=s("Warning","warning"),l=s("CancellationError","cancellation error"),u=s("TimeoutError","timeout error"),d=s("AggregateError","aggregate error");try{o=TypeError,a=RangeError}catch{o=s("TypeError","type error"),a=s("RangeError","range error")}for(var h="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),f=0;f<h.length;++f)typeof Array.prototype[h[f]]=="function"&&(d.prototype[h[f]]=Array.prototype[h[f]]);i.defineProperty(d.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),d.prototype.isOperational=!0;var b=0;d.prototype.toString=function(){var v=Array(b*4+1).join(" "),x=`
`+v+`AggregateError of:
`;b++,v=Array(b*4+1).join(" ");for(var D=0;D<this.length;++D){for(var A=this[D]===this?"[Circular AggregateError]":this[D]+"",T=A.split(`
`),E=0;E<T.length;++E)T[E]=v+T[E];A=T.join(`
`),x+=A+`
`}return b--,x};function g(v){if(!(this instanceof g))return new g(v);r(this,"name","OperationalError"),r(this,"message",v),this.cause=v,this.isOperational=!0,v instanceof Error?(r(this,"message",v.message),r(this,"stack",v.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}n(g,Error);var y=Error.__BluebirdErrorTypes__;return y||(y=e({CancellationError:l,TimeoutError:u,OperationalError:g,RejectionError:g,AggregateError:d}),i.defineProperty(Error,"__BluebirdErrorTypes__",{value:y,writable:!1,enumerable:!1,configurable:!1})),gp={Error,TypeError:o,RangeError:a,CancellationError:y.CancellationError,OperationalError:y.OperationalError,TimeoutError:y.TimeoutError,AggregateError:y.AggregateError,Warning:c},gp}var mp,db;function FC(){return db||(db=1,mp=function(i,e){var t=at(),n=t.errorObj,r=t.isObject;function s(d,h){if(r(d)){if(d instanceof i)return d;var f=a(d);if(f===n){h&&h._pushContext();var b=i.reject(f.e);return h&&h._popContext(),b}else if(typeof f=="function"){if(l(d)){var b=new i(e);return d._then(b._fulfill,b._reject,void 0,b,null),b}return u(d,f,h)}}return d}function o(d){return d.then}function a(d){try{return o(d)}catch(h){return n.e=h,n}}var c={}.hasOwnProperty;function l(d){try{return c.call(d,"_promise0")}catch{return!1}}function u(d,h,f){var b=new i(e),g=b;f&&f._pushContext(),b._captureStackTrace(),f&&f._popContext();var y=!0,v=t.tryCatch(h).call(d,x,D);y=!1,b&&v===n&&(b._rejectCallback(v.e,!0,!0),b=null);function x(A){b&&(b._resolveCallback(A),b=null)}function D(A){b&&(b._rejectCallback(A,y,!0),b=null)}return g}return s}),mp}var yp,hb;function NC(){return hb||(hb=1,yp=function(i,e,t,n,r){var s=at();s.isArray;function o(c){switch(c){case-2:return[];case-3:return{}}}function a(c){var l=this._promise=new i(e);c instanceof i&&l._propagateFrom(c,3),l._setOnCancel(this),this._values=c,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return s.inherits(a,r),a.prototype.length=function(){return this._length},a.prototype.promise=function(){return this._promise},a.prototype._init=function c(l,u){var d=t(this._values,this._promise);if(d instanceof i){d=d._target();var h=d._bitField;if(this._values=d,(h&50397184)===0)return this._promise._setAsyncGuaranteed(),d._then(c,this._reject,void 0,this,u);if((h&33554432)!==0)d=d._value();else return(h&16777216)!==0?this._reject(d._reason()):this._cancel()}if(d=s.asArray(d),d===null){var f=n("expecting an array or an iterable object but got "+s.classString(d)).reason();this._promise._rejectCallback(f,!1);return}if(d.length===0){u===-5?this._resolveEmptyArray():this._resolve(o(u));return}this._iterate(d)},a.prototype._iterate=function(c){var l=this.getActualLength(c.length);this._length=l,this._values=this.shouldCopyValues()?new Array(l):this._values;for(var u=this._promise,d=!1,h=null,f=0;f<l;++f){var b=t(c[f],u);b instanceof i?(b=b._target(),h=b._bitField):h=null,d?h!==null&&b.suppressUnhandledRejections():h!==null?(h&50397184)===0?(b._proxy(this,f),this._values[f]=b):(h&33554432)!==0?d=this._promiseFulfilled(b._value(),f):(h&16777216)!==0?d=this._promiseRejected(b._reason(),f):d=this._promiseCancelled(f):d=this._promiseFulfilled(b,f)}d||u._setAsyncGuaranteed()},a.prototype._isResolved=function(){return this._values===null},a.prototype._resolve=function(c){this._values=null,this._promise._fulfill(c)},a.prototype._cancel=function(){this._isResolved()||!this._promise._isCancellable()||(this._values=null,this._promise._cancel())},a.prototype._reject=function(c){this._values=null,this._promise._rejectCallback(c,!1)},a.prototype._promiseFulfilled=function(c,l){this._values[l]=c;var u=++this._totalResolved;return u>=this._length?(this._resolve(this._values),!0):!1},a.prototype._promiseCancelled=function(){return this._cancel(),!0},a.prototype._promiseRejected=function(c){return this._totalResolved++,this._reject(c),!0},a.prototype._resultCancelled=function(){if(!this._isResolved()){var c=this._values;if(this._cancel(),c instanceof i)c.cancel();else for(var l=0;l<c.length;++l)c[l]instanceof i&&c[l].cancel()}},a.prototype.shouldCopyValues=function(){return!0},a.prototype.getActualLength=function(c){return c},a}),yp}var bp,fb;function kC(){return fb||(fb=1,bp=function(i){var e=!1,t=[];i.prototype._promiseCreated=function(){},i.prototype._pushContext=function(){},i.prototype._popContext=function(){return null},i._peekContext=i.prototype._peekContext=function(){};function n(){this._trace=new n.CapturedTrace(s())}n.prototype._pushContext=function(){this._trace!==void 0&&(this._trace._promiseCreated=null,t.push(this._trace))},n.prototype._popContext=function(){if(this._trace!==void 0){var o=t.pop(),a=o._promiseCreated;return o._promiseCreated=null,a}return null};function r(){if(e)return new n}function s(){var o=t.length-1;if(o>=0)return t[o]}return n.CapturedTrace=null,n.create=r,n.deactivateLongStackTraces=function(){},n.activateLongStackTraces=function(){var o=i.prototype._pushContext,a=i.prototype._popContext,c=i._peekContext,l=i.prototype._peekContext,u=i.prototype._promiseCreated;n.deactivateLongStackTraces=function(){i.prototype._pushContext=o,i.prototype._popContext=a,i._peekContext=c,i.prototype._peekContext=l,i.prototype._promiseCreated=u,e=!1},e=!0,i.prototype._pushContext=n.prototype._pushContext,i.prototype._popContext=n.prototype._popContext,i._peekContext=i.prototype._peekContext=s,i.prototype._promiseCreated=function(){var d=this._peekContext();d&&d._promiseCreated==null&&(d._promiseCreated=this)}},n}),bp}var vp,pb;function MC(){return pb||(pb=1,vp=function(i,e){var t=i._getDomain,n=i._async,r=jr().Warning,s=at(),o=s.canAttachTrace,a,c,l=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,u=/\((?:timers\.js):\d+:\d+\)/,d=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,h=null,f=null,b=!1,g,y=!!(s.env("BLUEBIRD_DEBUG")!=0&&(s.env("BLUEBIRD_DEBUG")||s.env("NODE_ENV")==="development")),v=!!(s.env("BLUEBIRD_WARNINGS")!=0&&(y||s.env("BLUEBIRD_WARNINGS"))),x=!!(s.env("BLUEBIRD_LONG_STACK_TRACES")!=0&&(y||s.env("BLUEBIRD_LONG_STACK_TRACES"))),D=s.env("BLUEBIRD_W_FORGOTTEN_RETURN")!=0&&(v||!!s.env("BLUEBIRD_W_FORGOTTEN_RETURN"));i.prototype.suppressUnhandledRejections=function(){var Z=this._target();Z._bitField=Z._bitField&-1048577|524288},i.prototype._ensurePossibleRejectionHandled=function(){(this._bitField&524288)===0&&(this._setRejectionIsUnhandled(),n.invokeLater(this._notifyUnhandledRejection,this,void 0))},i.prototype._notifyUnhandledRejectionIsHandled=function(){Se("rejectionHandled",a,void 0,this)},i.prototype._setReturnedNonUndefined=function(){this._bitField=this._bitField|268435456},i.prototype._returnedNonUndefined=function(){return(this._bitField&268435456)!==0},i.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var Z=this._settledValue();this._setUnhandledRejectionIsNotified(),Se("unhandledRejection",c,Z,this)}},i.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=this._bitField|262144},i.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&-262145},i.prototype._isUnhandledRejectionNotified=function(){return(this._bitField&262144)>0},i.prototype._setRejectionIsUnhandled=function(){this._bitField=this._bitField|1048576},i.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&-1048577,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},i.prototype._isRejectionUnhandled=function(){return(this._bitField&1048576)>0},i.prototype._warn=function(Z,ie,ce){return ne(Z,ie,ce||this)},i.onPossiblyUnhandledRejection=function(Z){var ie=t();c=typeof Z=="function"?ie===null?Z:s.domainBind(ie,Z):void 0},i.onUnhandledRejectionHandled=function(Z){var ie=t();a=typeof Z=="function"?ie===null?Z:s.domainBind(ie,Z):void 0};var A=function(){};i.longStackTraces=function(){if(n.haveItemsQueued()&&!re.longStackTraces)throw new Error(`cannot enable long stack traces after promises have been created

    See http://goo.gl/MqrFmX
`);if(!re.longStackTraces&&ae()){var Z=i.prototype._captureStackTrace,ie=i.prototype._attachExtraTrace;re.longStackTraces=!0,A=function(){if(n.haveItemsQueued()&&!re.longStackTraces)throw new Error(`cannot enable long stack traces after promises have been created

    See http://goo.gl/MqrFmX
`);i.prototype._captureStackTrace=Z,i.prototype._attachExtraTrace=ie,e.deactivateLongStackTraces(),n.enableTrampoline(),re.longStackTraces=!1},i.prototype._captureStackTrace=Y,i.prototype._attachExtraTrace=F,e.activateLongStackTraces(),n.disableTrampolineIfNecessary()}},i.hasLongStackTraces=function(){return re.longStackTraces&&ae()};var T=(function(){try{if(typeof CustomEvent=="function"){var Z=new CustomEvent("CustomEvent");return s.global.dispatchEvent(Z),function(ie,ce){var fe=new CustomEvent(ie.toLowerCase(),{detail:ce,cancelable:!0});return!s.global.dispatchEvent(fe)}}else if(typeof Event=="function"){var Z=new Event("CustomEvent");return s.global.dispatchEvent(Z),function(ce,fe){var xe=new Event(ce.toLowerCase(),{cancelable:!0});return xe.detail=fe,!s.global.dispatchEvent(xe)}}else{var Z=document.createEvent("CustomEvent");return Z.initCustomEvent("testingtheevent",!1,!0,{}),s.global.dispatchEvent(Z),function(ce,fe){var xe=document.createEvent("CustomEvent");return xe.initCustomEvent(ce.toLowerCase(),!1,!0,fe),!s.global.dispatchEvent(xe)}}}catch{}return function(){return!1}})(),E=(function(){return s.isNode?function(){return process.emit.apply(process,arguments)}:s.global?function(Z){var ie="on"+Z.toLowerCase(),ce=s.global[ie];return ce?(ce.apply(s.global,[].slice.call(arguments,1)),!0):!1}:function(){return!1}})();function I(Z,ie){return{promise:ie}}var N={promiseCreated:I,promiseFulfilled:I,promiseRejected:I,promiseResolved:I,promiseCancelled:I,promiseChained:function(Z,ie,ce){return{promise:ie,child:ce}},warning:function(Z,ie){return{warning:ie}},unhandledRejection:function(Z,ie,ce){return{reason:ie,promise:ce}},rejectionHandled:I},R=function(Z){var ie=!1;try{ie=E.apply(null,arguments)}catch(fe){n.throwLater(fe),ie=!0}var ce=!1;try{ce=T(Z,N[Z].apply(null,arguments))}catch(fe){n.throwLater(fe),ce=!0}return ce||ie};i.config=function(Z){if(Z=Object(Z),"longStackTraces"in Z&&(Z.longStackTraces?i.longStackTraces():!Z.longStackTraces&&i.hasLongStackTraces()&&A()),"warnings"in Z){var ie=Z.warnings;re.warnings=!!ie,D=re.warnings,s.isObject(ie)&&"wForgottenReturn"in ie&&(D=!!ie.wForgottenReturn)}if("cancellation"in Z&&Z.cancellation&&!re.cancellation){if(n.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");i.prototype._clearCancellationData=J,i.prototype._propagateFrom=q,i.prototype._onCancel=B,i.prototype._setOnCancel=S,i.prototype._attachCancellationCallback=U,i.prototype._execute=j,K=q,re.cancellation=!0}return"monitoring"in Z&&(Z.monitoring&&!re.monitoring?(re.monitoring=!0,i.prototype._fireEvent=R):!Z.monitoring&&re.monitoring&&(re.monitoring=!1,i.prototype._fireEvent=P)),i};function P(){return!1}i.prototype._fireEvent=P,i.prototype._execute=function(Z,ie,ce){try{Z(ie,ce)}catch(fe){return fe}},i.prototype._onCancel=function(){},i.prototype._setOnCancel=function(Z){},i.prototype._attachCancellationCallback=function(Z){},i.prototype._captureStackTrace=function(){},i.prototype._attachExtraTrace=function(){},i.prototype._clearCancellationData=function(){},i.prototype._propagateFrom=function(Z,ie){};function j(Z,ie,ce){var fe=this;try{Z(ie,ce,function(xe){if(typeof xe!="function")throw new TypeError("onCancel must be a function, got: "+s.toString(xe));fe._attachCancellationCallback(xe)})}catch(xe){return xe}}function U(Z){if(!this._isCancellable())return this;var ie=this._onCancel();ie!==void 0?s.isArray(ie)?ie.push(Z):this._setOnCancel([ie,Z]):this._setOnCancel(Z)}function B(){return this._onCancelField}function S(Z){this._onCancelField=Z}function J(){this._cancellationParent=void 0,this._onCancelField=void 0}function q(Z,ie){if((ie&1)!==0){this._cancellationParent=Z;var ce=Z._branchesRemainingToCancel;ce===void 0&&(ce=0),Z._branchesRemainingToCancel=ce+1}(ie&2)!==0&&Z._isBound()&&this._setBoundTo(Z._boundTo)}function O(Z,ie){(ie&2)!==0&&Z._isBound()&&this._setBoundTo(Z._boundTo)}var K=O;function H(){var Z=this._boundTo;return Z!==void 0&&Z instanceof i?Z.isFulfilled()?Z.value():void 0:Z}function Y(){this._trace=new ue(this._peekContext())}function F(Z,ie){if(o(Z)){var ce=this._trace;if(ce!==void 0&&ie&&(ce=ce._parent),ce!==void 0)ce.attachExtraTrace(Z);else if(!Z.__stackCleaned__){var fe=De(Z);s.notEnumerableProp(Z,"stack",fe.message+`
`+fe.stack.join(`
`)),s.notEnumerableProp(Z,"__stackCleaned__",!0)}}}function X(Z,ie,ce,fe,xe){if(Z===void 0&&ie!==null&&D){if(xe!==void 0&&xe._returnedNonUndefined()||(fe._bitField&65535)===0)return;ce&&(ce=ce+" ");var se="",me="";if(ie._trace){for(var be=ie._trace.stack.split(`
`),_e=ge(be),Ie=_e.length-1;Ie>=0;--Ie){var Re=_e[Ie];if(!u.test(Re)){var Je=Re.match(d);Je&&(se="at "+Je[1]+":"+Je[2]+":"+Je[3]+" ");break}}if(_e.length>0){for(var fn=_e[0],Ie=0;Ie<be.length;++Ie)if(be[Ie]===fn){Ie>0&&(me=`
`+be[Ie-1]);break}}}var Ct="a promise was created in a "+ce+"handler "+se+"but was not returned from it, see http://goo.gl/rRqMUw"+me;fe._warn(Ct,!0,ie)}}function $(Z,ie){var ce=Z+" is deprecated and will be removed in a future version.";return ie&&(ce+=" Use "+ie+" instead."),ne(ce)}function ne(Z,ie,ce){if(re.warnings){var fe=new r(Z),xe;if(ie)ce._attachExtraTrace(fe);else if(re.longStackTraces&&(xe=i._peekContext()))xe.attachExtraTrace(fe);else{var se=De(fe);fe.stack=se.message+`
`+se.stack.join(`
`)}R("warning",fe)||we(fe,"",!0)}}function oe(Z,ie){for(var ce=0;ce<ie.length-1;++ce)ie[ce].push("From previous event:"),ie[ce]=ie[ce].join(`
`);return ce<ie.length&&(ie[ce]=ie[ce].join(`
`)),Z+`
`+ie.join(`
`)}function pe(Z){for(var ie=0;ie<Z.length;++ie)(Z[ie].length===0||ie+1<Z.length&&Z[ie][0]===Z[ie+1][0])&&(Z.splice(ie,1),ie--)}function le(Z){for(var ie=Z[0],ce=1;ce<Z.length;++ce){for(var fe=Z[ce],xe=ie.length-1,se=ie[xe],me=-1,be=fe.length-1;be>=0;--be)if(fe[be]===se){me=be;break}for(var be=me;be>=0;--be){var _e=fe[be];if(ie[xe]===_e)ie.pop(),xe--;else break}ie=fe}}function ge(Z){for(var ie=[],ce=0;ce<Z.length;++ce){var fe=Z[ce],xe=fe==="    (No stack trace)"||h.test(fe),se=xe&&Q(fe);xe&&!se&&(b&&fe.charAt(0)!==" "&&(fe="    "+fe),ie.push(fe))}return ie}function ye(Z){for(var ie=Z.stack.replace(/\s+$/g,"").split(`
`),ce=0;ce<ie.length;++ce){var fe=ie[ce];if(fe==="    (No stack trace)"||h.test(fe))break}return ce>0&&Z.name!="SyntaxError"&&(ie=ie.slice(ce)),ie}function De(Z){var ie=Z.stack,ce=Z.toString();return ie=typeof ie=="string"&&ie.length>0?ye(Z):["    (No stack trace)"],{message:ce,stack:Z.name=="SyntaxError"?ie:ge(ie)}}function we(Z,ie,ce){if(typeof console<"u"){var fe;if(s.isObject(Z)){var xe=Z.stack;fe=ie+f(xe,Z)}else fe=ie+String(Z);typeof g=="function"?g(fe,ce):(typeof console.log=="function"||typeof console.log=="object")&&console.log(fe)}}function Se(Z,ie,ce,fe){var xe=!1;try{typeof ie=="function"&&(xe=!0,Z==="rejectionHandled"?ie(fe):ie(ce,fe))}catch(se){n.throwLater(se)}Z==="unhandledRejection"?!R(Z,ce,fe)&&!xe&&we(ce,"Unhandled rejection "):R(Z,fe)}function We(Z){var ie;if(typeof Z=="function")ie="[function "+(Z.name||"anonymous")+"]";else{ie=Z&&typeof Z.toString=="function"?Z.toString():s.toString(Z);var ce=/\[object [a-zA-Z0-9$_]+\]/;if(ce.test(ie))try{var fe=JSON.stringify(Z);ie=fe}catch{}ie.length===0&&(ie="(empty array)")}return"(<"+C(ie)+">, no stack trace)"}function C(Z){var ie=41;return Z.length<ie?Z:Z.substr(0,ie-3)+"..."}function ae(){return typeof he=="function"}var Q=function(){return!1},V=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function z(Z){var ie=Z.match(V);if(ie)return{fileName:ie[1],line:parseInt(ie[2],10)}}function ee(Z,ie){if(ae()){for(var ce=Z.stack.split(`
`),fe=ie.stack.split(`
`),xe=-1,se=-1,me,be,_e=0;_e<ce.length;++_e){var Ie=z(ce[_e]);if(Ie){me=Ie.fileName,xe=Ie.line;break}}for(var _e=0;_e<fe.length;++_e){var Ie=z(fe[_e]);if(Ie){be=Ie.fileName,se=Ie.line;break}}xe<0||se<0||!me||!be||me!==be||xe>=se||(Q=function(Re){if(l.test(Re))return!0;var Je=z(Re);return!!(Je&&Je.fileName===me&&xe<=Je.line&&Je.line<=se)})}}function ue(Z){this._parent=Z,this._promisesCreated=0;var ie=this._length=1+(Z===void 0?0:Z._length);he(this,ue),ie>32&&this.uncycle()}s.inherits(ue,Error),e.CapturedTrace=ue,ue.prototype.uncycle=function(){var Z=this._length;if(!(Z<2)){for(var ie=[],ce={},fe=0,xe=this;xe!==void 0;++fe)ie.push(xe),xe=xe._parent;Z=this._length=fe;for(var fe=Z-1;fe>=0;--fe){var se=ie[fe].stack;ce[se]===void 0&&(ce[se]=fe)}for(var fe=0;fe<Z;++fe){var me=ie[fe].stack,be=ce[me];if(be!==void 0&&be!==fe){be>0&&(ie[be-1]._parent=void 0,ie[be-1]._length=1),ie[fe]._parent=void 0,ie[fe]._length=1;var _e=fe>0?ie[fe-1]:this;be<Z-1?(_e._parent=ie[be+1],_e._parent.uncycle(),_e._length=_e._parent._length+1):(_e._parent=void 0,_e._length=1);for(var Ie=_e._length+1,Re=fe-2;Re>=0;--Re)ie[Re]._length=Ie,Ie++;return}}}},ue.prototype.attachExtraTrace=function(Z){if(!Z.__stackCleaned__){this.uncycle();for(var ie=De(Z),ce=ie.message,fe=[ie.stack],xe=this;xe!==void 0;)fe.push(ge(xe.stack.split(`
`))),xe=xe._parent;le(fe),pe(fe),s.notEnumerableProp(Z,"stack",oe(ce,fe)),s.notEnumerableProp(Z,"__stackCleaned__",!0)}};var he=(function(){var ie=/^\s*at\s*/,ce=function(me,be){return typeof me=="string"?me:be.name!==void 0&&be.message!==void 0?be.toString():We(be)};if(typeof Error.stackTraceLimit=="number"&&typeof Error.captureStackTrace=="function"){Error.stackTraceLimit+=6,h=ie,f=ce;var fe=Error.captureStackTrace;return Q=function(me){return l.test(me)},function(me,be){Error.stackTraceLimit+=6,fe(me,be),Error.stackTraceLimit-=6}}var xe=new Error;if(typeof xe.stack=="string"&&xe.stack.split(`
`)[0].indexOf("stackDetection@")>=0)return h=/@/,f=ce,b=!0,function(be){be.stack=new Error().stack};var se;try{throw new Error}catch(me){se="stack"in me}return!("stack"in xe)&&se&&typeof Error.stackTraceLimit=="number"?(h=ie,f=ce,function(be){Error.stackTraceLimit+=6;try{throw new Error}catch(_e){be.stack=_e.stack}Error.stackTraceLimit-=6}):(f=function(me,be){return typeof me=="string"?me:(typeof be=="object"||typeof be=="function")&&be.name!==void 0&&be.message!==void 0?be.toString():We(be)},null)})();typeof console<"u"&&typeof console.warn<"u"&&(g=function(Z){console.warn(Z)},s.isNode&&process.stderr.isTTY?g=function(Z,ie){var ce=ie?"\x1B[33m":"\x1B[31m";console.warn(ce+Z+`\x1B[0m
`)}:!s.isNode&&typeof new Error().stack=="string"&&(g=function(Z,ie){console.warn("%c"+Z,ie?"color: darkorange":"color: red")}));var re={warnings:v,longStackTraces:!1,cancellation:!1,monitoring:!1};return x&&i.longStackTraces(),{longStackTraces:function(){return re.longStackTraces},warnings:function(){return re.warnings},cancellation:function(){return re.cancellation},monitoring:function(){return re.monitoring},propagateFromFunction:function(){return K},boundValueFunction:function(){return H},checkForgottenReturns:X,setBounds:ee,warn:ne,deprecated:$,CapturedTrace:ue,fireDomEvent:T,fireGlobalEvent:E}}),vp}var xp,gb;function PC(){return gb||(gb=1,xp=function(i,e){var t=at(),n=i.CancellationError,r=t.errorObj;function s(d,h,f){this.promise=d,this.type=h,this.handler=f,this.called=!1,this.cancelPromise=null}s.prototype.isFinallyHandler=function(){return this.type===0};function o(d){this.finallyHandler=d}o.prototype._resultCancelled=function(){a(this.finallyHandler)};function a(d,h){return d.cancelPromise!=null?(arguments.length>1?d.cancelPromise._reject(h):d.cancelPromise._cancel(),d.cancelPromise=null,!0):!1}function c(){return u.call(this,this.promise._target()._settledValue())}function l(d){if(!a(this,d))return r.e=d,r}function u(d){var h=this.promise,f=this.handler;if(!this.called){this.called=!0;var b=this.isFinallyHandler()?f.call(h._boundValue()):f.call(h._boundValue(),d);if(b!==void 0){h._setReturnedNonUndefined();var g=e(b,h);if(g instanceof i){if(this.cancelPromise!=null)if(g._isCancelled()){var y=new n("late cancellation observer");return h._attachExtraTrace(y),r.e=y,r}else g.isPending()&&g._attachCancellationCallback(new o(this));return g._then(c,l,void 0,this,void 0)}}}return h.isRejected()?(a(this),r.e=d,r):(a(this),d)}return i.prototype._passThrough=function(d,h,f,b){return typeof d!="function"?this.then():this._then(f,b,void 0,new s(this,h,d),void 0)},i.prototype.lastly=i.prototype.finally=function(d){return this._passThrough(d,0,u,u)},i.prototype.tap=function(d){return this._passThrough(d,1,u)},s}),xp}var _p,mb;function LC(){return mb||(mb=1,_p=function(i){var e=at(),t=Ka().keys,n=e.tryCatch,r=e.errorObj;function s(o,a,c){return function(l){var u=c._boundValue();e:for(var d=0;d<o.length;++d){var h=o[d];if(h===Error||h!=null&&h.prototype instanceof Error){if(l instanceof h)return n(a).call(u,l)}else if(typeof h=="function"){var f=n(h).call(u,l);if(f===r)return f;if(f)return n(a).call(u,l)}else if(e.isObject(l)){for(var b=t(h),g=0;g<b.length;++g){var y=b[g];if(h[y]!=l[y])continue e}return n(a).call(u,l)}}return i}}return s}),_p}var Dp,yb;function gT(){if(yb)return Dp;yb=1;var i=at(),e=i.maybeWrapAsError,t=jr(),n=t.OperationalError,r=Ka();function s(l){return l instanceof Error&&r.getPrototypeOf(l)===Error.prototype}var o=/^(?:name|message|stack|cause)$/;function a(l){var u;if(s(l)){u=new n(l),u.name=l.name,u.message=l.message,u.stack=l.stack;for(var d=r.keys(l),h=0;h<d.length;++h){var f=d[h];o.test(f)||(u[f]=l[f])}return u}return i.markAsOriginatingFromRejection(l),l}function c(l,u){return function(d,h){if(l!==null){if(d){var f=a(e(d));l._attachExtraTrace(f),l._reject(f)}else if(!u)l._fulfill(h);else{for(var b=arguments.length,g=new Array(Math.max(b-1,0)),y=1;y<b;++y)g[y-1]=arguments[y];l._fulfill(g)}l=null}}}return Dp=c,Dp}var Tp,bb;function BC(){return bb||(bb=1,Tp=function(i,e,t,n,r){var s=at(),o=s.tryCatch;i.method=function(a){if(typeof a!="function")throw new i.TypeError("expecting a function but got "+s.classString(a));return function(){var c=new i(e);c._captureStackTrace(),c._pushContext();var l=o(a).apply(this,arguments),u=c._popContext();return r.checkForgottenReturns(l,u,"Promise.method",c),c._resolveFromSyncValue(l),c}},i.attempt=i.try=function(a){if(typeof a!="function")return n("expecting a function but got "+s.classString(a));var c=new i(e);c._captureStackTrace(),c._pushContext();var l;if(arguments.length>1){r.deprecated("calling Promise.try with more than 1 argument");var u=arguments[1],d=arguments[2];l=s.isArray(u)?o(a).apply(d,u):o(a).call(d,u)}else l=o(a)();var h=c._popContext();return r.checkForgottenReturns(l,h,"Promise.try",c),c._resolveFromSyncValue(l),c},i.prototype._resolveFromSyncValue=function(a){a===s.errorObj?this._rejectCallback(a.e,!1):this._resolveCallback(a,!0)}}),Tp}var Ap,vb;function OC(){return vb||(vb=1,Ap=function(i,e,t,n){var r=!1,s=function(l,u){this._reject(u)},o=function(l,u){u.promiseRejectionQueued=!0,u.bindingPromise._then(s,s,null,this,l)},a=function(l,u){(this._bitField&50397184)===0&&this._resolveCallback(u.target)},c=function(l,u){u.promiseRejectionQueued||this._reject(l)};i.prototype.bind=function(l){r||(r=!0,i.prototype._propagateFrom=n.propagateFromFunction(),i.prototype._boundValue=n.boundValueFunction());var u=t(l),d=new i(e);d._propagateFrom(this,1);var h=this._target();if(d._setBoundTo(u),u instanceof i){var f={promiseRejectionQueued:!1,promise:d,target:h,bindingPromise:u};h._then(e,o,void 0,d,f),u._then(a,c,void 0,d,f),d._setOnCancel(u)}else d._resolveCallback(h);return d},i.prototype._setBoundTo=function(l){l!==void 0?(this._bitField=this._bitField|2097152,this._boundTo=l):this._bitField=this._bitField&-2097153},i.prototype._isBound=function(){return(this._bitField&2097152)===2097152},i.bind=function(l,u){return i.resolve(u).bind(l)}}),Ap}var Ep,xb;function WC(){return xb||(xb=1,Ep=function(i,e,t,n){var r=at(),s=r.tryCatch,o=r.errorObj,a=i._async;i.prototype.break=i.prototype.cancel=function(){if(!n.cancellation())return this._warn("cancellation is disabled");for(var c=this,l=c;c._isCancellable();){if(!c._cancelBy(l)){l._isFollowing()?l._followee().cancel():l._cancelBranched();break}var u=c._cancellationParent;if(u==null||!u._isCancellable()){c._isFollowing()?c._followee().cancel():c._cancelBranched();break}else c._isFollowing()&&c._followee().cancel(),c._setWillBeCancelled(),l=c,c=u}},i.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},i.prototype._enoughBranchesHaveCancelled=function(){return this._branchesRemainingToCancel===void 0||this._branchesRemainingToCancel<=0},i.prototype._cancelBy=function(c){return c===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),this._enoughBranchesHaveCancelled()?(this._invokeOnCancel(),!0):!1)},i.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},i.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),a.invoke(this._cancelPromises,this,void 0))},i.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},i.prototype._unsetOnCancel=function(){this._onCancelField=void 0},i.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},i.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},i.prototype._doInvokeOnCancel=function(c,l){if(r.isArray(c))for(var u=0;u<c.length;++u)this._doInvokeOnCancel(c[u],l);else if(c!==void 0)if(typeof c=="function"){if(!l){var d=s(c).call(this._boundValue());d===o&&(this._attachExtraTrace(d.e),a.throwLater(d.e))}}else c._resultCancelled(this)},i.prototype._invokeOnCancel=function(){var c=this._onCancel();this._unsetOnCancel(),a.invoke(this._doInvokeOnCancel,this,c)},i.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},i.prototype._resultCancelled=function(){this.cancel()}}),Ep}var wp,_b;function qC(){return _b||(_b=1,wp=function(i){function e(){return this.value}function t(){throw this.reason}i.prototype.return=i.prototype.thenReturn=function(n){return n instanceof i&&n.suppressUnhandledRejections(),this._then(e,void 0,void 0,{value:n},void 0)},i.prototype.throw=i.prototype.thenThrow=function(n){return this._then(t,void 0,void 0,{reason:n},void 0)},i.prototype.catchThrow=function(n){if(arguments.length<=1)return this._then(void 0,t,void 0,{reason:n},void 0);var r=arguments[1],s=function(){throw r};return this.caught(n,s)},i.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof i&&n.suppressUnhandledRejections(),this._then(void 0,e,void 0,{value:n},void 0);var r=arguments[1];r instanceof i&&r.suppressUnhandledRejections();var s=function(){return r};return this.caught(n,s)}}),wp}var Cp,Db;function HC(){return Db||(Db=1,Cp=function(i){function e(c){c!==void 0?(c=c._target(),this._bitField=c._bitField,this._settledValueField=c._isFateSealed()?c._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var t=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError(`cannot get fulfillment value of a non-fulfilled promise

    See http://goo.gl/MqrFmX
`);return this._settledValue()},n=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError(`cannot get rejection reason of a non-rejected promise

    See http://goo.gl/MqrFmX
`);return this._settledValue()},r=e.prototype.isFulfilled=function(){return(this._bitField&33554432)!==0},s=e.prototype.isRejected=function(){return(this._bitField&16777216)!==0},o=e.prototype.isPending=function(){return(this._bitField&50397184)===0},a=e.prototype.isResolved=function(){return(this._bitField&50331648)!==0};e.prototype.isCancelled=function(){return(this._bitField&8454144)!==0},i.prototype.__isCancelled=function(){return(this._bitField&65536)===65536},i.prototype._isCancelled=function(){return this._target().__isCancelled()},i.prototype.isCancelled=function(){return(this._target()._bitField&8454144)!==0},i.prototype.isPending=function(){return o.call(this._target())},i.prototype.isRejected=function(){return s.call(this._target())},i.prototype.isFulfilled=function(){return r.call(this._target())},i.prototype.isResolved=function(){return a.call(this._target())},i.prototype.value=function(){return t.call(this._target())},i.prototype.reason=function(){var c=this._target();return c._unsetRejectionIsUnhandled(),n.call(c)},i.prototype._value=function(){return this._settledValue()},i.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},i.PromiseInspection=e}),Cp}var Sp,Tb;function VC(){return Tb||(Tb=1,Sp=function(i,e,t,n,r,s){var o=at(),a=o.canEvaluate,c=o.tryCatch,l=o.errorObj,u;if(a){for(var d=function(x){return new Function("value","holder",`                             
	            'use strict';                                                    
	            holder.pIndex = value;                                           
	            holder.checkFulfillment(this);                                   
	            `.replace(/Index/g,x))},h=function(x){return new Function("promise","holder",`                           
	            'use strict';                                                    
	            holder.pIndex = promise;                                         
	            `.replace(/Index/g,x))},f=function(x){for(var D=new Array(x),A=0;A<D.length;++A)D[A]="this.p"+(A+1);var T=D.join(" = ")+" = null;",E=`var promise;
`+D.map(function(P){return`                                                         
	                promise = `+P+`;                                      
	                if (promise instanceof Promise) {                            
	                    promise.cancel();                                        
	                }                                                            
	            `}).join(`
`),I=D.join(", "),N="Holder$"+x,R=`return function(tryCatch, errorObj, Promise, async) {    
	            'use strict';                                                    
	            function [TheName](fn) {                                         
	                [TheProperties]                                              
	                this.fn = fn;                                                
	                this.asyncNeeded = true;                                     
	                this.now = 0;                                                
	            }                                                                
	                                                                             
	            [TheName].prototype._callFunction = function(promise) {          
	                promise._pushContext();                                      
	                var ret = tryCatch(this.fn)([ThePassedArguments]);           
	                promise._popContext();                                       
	                if (ret === errorObj) {                                      
	                    promise._rejectCallback(ret.e, false);                   
	                } else {                                                     
	                    promise._resolveCallback(ret);                           
	                }                                                            
	            };                                                               
	                                                                             
	            [TheName].prototype.checkFulfillment = function(promise) {       
	                var now = ++this.now;                                        
	                if (now === [TheTotal]) {                                    
	                    if (this.asyncNeeded) {                                  
	                        async.invoke(this._callFunction, this, promise);     
	                    } else {                                                 
	                        this._callFunction(promise);                         
	                    }                                                        
	                                                                             
	                }                                                            
	            };                                                               
	                                                                             
	            [TheName].prototype._resultCancelled = function() {              
	                [CancellationCode]                                           
	            };                                                               
	                                                                             
	            return [TheName];                                                
	        }(tryCatch, errorObj, Promise, async);                               
	        `;return R=R.replace(/\[TheName\]/g,N).replace(/\[TheTotal\]/g,x).replace(/\[ThePassedArguments\]/g,I).replace(/\[TheProperties\]/g,T).replace(/\[CancellationCode\]/g,E),new Function("tryCatch","errorObj","Promise","async",R)(c,l,i,r)},b=[],g=[],y=[],v=0;v<8;++v)b.push(f(v+1)),g.push(d(v+1)),y.push(h(v+1));u=function(x){this._reject(x)}}i.join=function(){var x=arguments.length-1,D;if(x>0&&typeof arguments[x]=="function"&&(D=arguments[x],x<=8&&a)){var S=new i(n);S._captureStackTrace();for(var A=b[x-1],T=new A(D),E=g,I=0;I<x;++I){var N=t(arguments[I],S);if(N instanceof i){N=N._target();var R=N._bitField;(R&50397184)===0?(N._then(E[I],u,void 0,S,T),y[I](N,T),T.asyncNeeded=!1):(R&33554432)!==0?E[I].call(S,N._value(),T):(R&16777216)!==0?S._reject(N._reason()):S._cancel()}else E[I].call(S,N,T)}if(!S._isFateSealed()){if(T.asyncNeeded){var P=s();P!==null&&(T.fn=o.domainBind(P,T.fn))}S._setAsyncGuaranteed(),S._setOnCancel(T)}return S}for(var j=arguments.length,U=new Array(j),B=0;B<j;++B)U[B]=arguments[B];D&&U.pop();var S=new e(U).promise();return D!==void 0?S.spread(D):S}}),Sp}var Up,Ab;function GC(){return Ab||(Ab=1,Up=function(i,e,t,n,r,s){var o=i._getDomain,a=at(),c=a.tryCatch,l=a.errorObj,u=i._async;function d(f,b,g,y){this.constructor$(f),this._promise._captureStackTrace();var v=o();this._callback=v===null?b:a.domainBind(v,b),this._preservedValues=y===r?new Array(this.length()):null,this._limit=g,this._inFlight=0,this._queue=[],u.invoke(this._asyncInit,this,void 0)}a.inherits(d,e),d.prototype._asyncInit=function(){this._init$(void 0,-2)},d.prototype._init=function(){},d.prototype._promiseFulfilled=function(f,b){var g=this._values,y=this.length(),v=this._preservedValues,x=this._limit;if(b<0){if(b=b*-1-1,g[b]=f,x>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(x>=1&&this._inFlight>=x)return g[b]=f,this._queue.push(b),!1;v!==null&&(v[b]=f);var D=this._promise,A=this._callback,T=D._boundValue();D._pushContext();var E=c(A).call(T,f,b,y),I=D._popContext();if(s.checkForgottenReturns(E,I,v!==null?"Promise.filter":"Promise.map",D),E===l)return this._reject(E.e),!0;var N=n(E,this._promise);if(N instanceof i){N=N._target();var R=N._bitField;if((R&50397184)===0)return x>=1&&this._inFlight++,g[b]=N,N._proxy(this,(b+1)*-1),!1;if((R&33554432)!==0)E=N._value();else return(R&16777216)!==0?(this._reject(N._reason()),!0):(this._cancel(),!0)}g[b]=E}var P=++this._totalResolved;return P>=y?(v!==null?this._filter(g,v):this._resolve(g),!0):!1},d.prototype._drainQueue=function(){for(var f=this._queue,b=this._limit,g=this._values;f.length>0&&this._inFlight<b;){if(this._isResolved())return;var y=f.pop();this._promiseFulfilled(g[y],y)}},d.prototype._filter=function(f,b){for(var g=b.length,y=new Array(g),v=0,x=0;x<g;++x)f[x]&&(y[v++]=b[x]);y.length=v,this._resolve(y)},d.prototype.preservedValues=function(){return this._preservedValues};function h(f,b,g,y){if(typeof b!="function")return t("expecting a function but got "+a.classString(b));var v=0;if(g!==void 0)if(typeof g=="object"&&g!==null){if(typeof g.concurrency!="number")return i.reject(new TypeError("'concurrency' must be a number but it is "+a.classString(g.concurrency)));v=g.concurrency}else return i.reject(new TypeError("options argument must be an object but it is "+a.classString(g)));return v=typeof v=="number"&&isFinite(v)&&v>=1?v:0,new d(f,b,v,y).promise()}i.prototype.map=function(f,b){return h(this,f,b,null)},i.map=function(f,b,g,y){return h(f,b,g,y)}}),Up}var Ip,Eb;function zC(){if(Eb)return Ip;Eb=1;var i=Object.create;if(i){var e=i(null),t=i(null);e[" size"]=t[" size"]=0}return Ip=function(n){var r=at(),s=r.canEvaluate,o=r.isIdentifier,a,c;{var l=function(y){return new Function("ensureMethod",`                                    
	        return function(obj) {                                               
	            'use strict'                                                     
	            var len = this.length;                                           
	            ensureMethod(obj, 'methodName');                                 
	            switch(len) {                                                    
	                case 1: return obj.methodName(this[0]);                      
	                case 2: return obj.methodName(this[0], this[1]);             
	                case 3: return obj.methodName(this[0], this[1], this[2]);    
	                case 0: return obj.methodName();                             
	                default:                                                     
	                    return obj.methodName.apply(obj, this);                  
	            }                                                                
	        };                                                                   
	        `.replace(/methodName/g,y))(h)},u=function(y){return new Function("obj",`                                             
	        'use strict';                                                        
	        return obj.propertyName;                                             
	        `.replace("propertyName",y))},d=function(y,v,x){var D=x[y];if(typeof D!="function"){if(!o(y))return null;if(D=v(y),x[y]=D,x[" size"]++,x[" size"]>512){for(var A=Object.keys(x),T=0;T<256;++T)delete x[A[T]];x[" size"]=A.length-256}}return D};a=function(y){return d(y,l,e)},c=function(y){return d(y,u,t)}}function h(y,v){var x;if(y!=null&&(x=y[v]),typeof x!="function"){var D="Object "+r.classString(y)+" has no method '"+r.toString(v)+"'";throw new n.TypeError(D)}return x}function f(y){var v=this.pop(),x=h(y,v);return x.apply(y,this)}n.prototype.call=function(y){for(var v=arguments.length,x=new Array(Math.max(v-1,0)),D=1;D<v;++D)x[D-1]=arguments[D];if(s){var A=a(y);if(A!==null)return this._then(A,void 0,void 0,x,void 0)}return x.push(y),this._then(f,void 0,void 0,x,void 0)};function b(y){return y[this]}function g(y){var v=+this;return v<0&&(v=Math.max(0,v+y.length)),y[v]}n.prototype.get=function(y){var v=typeof y=="number",x;if(v)x=g;else if(s){var D=c(y);x=D!==null?D:b}else x=b;return this._then(x,void 0,void 0,y,void 0)}},Ip}var Rp,wb;function $C(){return wb||(wb=1,Rp=function(i,e,t,n,r,s){var o=at(),a=jr().TypeError,c=at().inherits,l=o.errorObj,u=o.tryCatch,d={};function h(D){setTimeout(function(){throw D},0)}function f(D){var A=t(D);return A!==D&&typeof D._isDisposable=="function"&&typeof D._getDisposer=="function"&&D._isDisposable()&&A._setDisposable(D._getDisposer()),A}function b(D,A){var T=0,E=D.length,I=new i(r);function N(){if(T>=E)return I._fulfill();var R=f(D[T++]);if(R instanceof i&&R._isDisposable()){try{R=t(R._getDisposer().tryDispose(A),D.promise)}catch(P){return h(P)}if(R instanceof i)return R._then(N,h,null,null,null)}N()}return N(),I}function g(D,A,T){this._data=D,this._promise=A,this._context=T}g.prototype.data=function(){return this._data},g.prototype.promise=function(){return this._promise},g.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():d},g.prototype.tryDispose=function(D){var A=this.resource(),T=this._context;T!==void 0&&T._pushContext();var E=A!==d?this.doDispose(A,D):null;return T!==void 0&&T._popContext(),this._promise._unsetDisposable(),this._data=null,E},g.isDisposer=function(D){return D!=null&&typeof D.resource=="function"&&typeof D.tryDispose=="function"};function y(D,A,T){this.constructor$(D,A,T)}c(y,g),y.prototype.doDispose=function(D,A){var T=this.data();return T.call(D,D,A)};function v(D){return g.isDisposer(D)?(this.resources[this.index]._setDisposable(D),D.promise()):D}function x(D){this.length=D,this.promise=null,this[D-1]=null}x.prototype._resultCancelled=function(){for(var D=this.length,A=0;A<D;++A){var T=this[A];T instanceof i&&T.cancel()}},i.using=function(){var D=arguments.length;if(D<2)return e("you must pass at least 2 arguments to Promise.using");var A=arguments[D-1];if(typeof A!="function")return e("expecting a function but got "+o.classString(A));var T,E=!0;D===2&&Array.isArray(arguments[0])?(T=arguments[0],D=T.length,E=!1):(T=arguments,D--);for(var I=new x(D),N=0;N<D;++N){var R=T[N];if(g.isDisposer(R)){var P=R;R=R.promise(),R._setDisposable(P)}else{var j=t(R);j instanceof i&&(R=j._then(v,null,null,{resources:I,index:N},void 0))}I[N]=R}for(var U=new Array(I.length),N=0;N<U.length;++N)U[N]=i.resolve(I[N]).reflect();var B=i.all(U).then(function(J){for(var q=0;q<J.length;++q){var O=J[q];if(O.isRejected())return l.e=O.error(),l;if(!O.isFulfilled()){B.cancel();return}J[q]=O.value()}S._pushContext(),A=u(A);var K=E?A.apply(void 0,J):A(J),H=S._popContext();return s.checkForgottenReturns(K,H,"Promise.using",S),K}),S=B.lastly(function(){var J=new i.PromiseInspection(B);return b(I,J)});return I.promise=S,S._setOnCancel(I),S},i.prototype._setDisposable=function(D){this._bitField=this._bitField|131072,this._disposer=D},i.prototype._isDisposable=function(){return(this._bitField&131072)>0},i.prototype._getDisposer=function(){return this._disposer},i.prototype._unsetDisposable=function(){this._bitField=this._bitField&-131073,this._disposer=void 0},i.prototype.disposer=function(D){if(typeof D=="function")return new y(D,this,n());throw new a}}),Rp}var Fp,Cb;function XC(){return Cb||(Cb=1,Fp=function(i,e,t){var n=at(),r=i.TimeoutError;function s(d){this.handle=d}s.prototype._resultCancelled=function(){clearTimeout(this.handle)};var o=function(d){return a(+this).thenReturn(d)},a=i.delay=function(d,h){var f,b;return h!==void 0?(f=i.resolve(h)._then(o,null,null,d,void 0),t.cancellation()&&h instanceof i&&f._setOnCancel(h)):(f=new i(e),b=setTimeout(function(){f._fulfill()},+d),t.cancellation()&&f._setOnCancel(new s(b)),f._captureStackTrace()),f._setAsyncGuaranteed(),f};i.prototype.delay=function(d){return a(d,this)};var c=function(d,h,f){var b;typeof h!="string"?h instanceof Error?b=h:b=new r("operation timed out"):b=new r(h),n.markAsOriginatingFromRejection(b),d._attachExtraTrace(b),d._reject(b),f!=null&&f.cancel()};function l(d){return clearTimeout(this.handle),d}function u(d){throw clearTimeout(this.handle),d}i.prototype.timeout=function(d,h){d=+d;var f,b,g=new s(setTimeout(function(){f.isPending()&&c(f,h,b)},d));return t.cancellation()?(b=this.then(),f=b._then(l,u,void 0,g,void 0),f._setOnCancel(g)):f=this._then(l,u,void 0,g,void 0),f}}),Fp}var Np,Sb;function jC(){return Sb||(Sb=1,Np=function(i,e,t,n,r,s){var o=jr(),a=o.TypeError,c=at(),l=c.errorObj,u=c.tryCatch,d=[];function h(b,g,y){for(var v=0;v<g.length;++v){y._pushContext();var x=u(g[v])(b);if(y._popContext(),x===l){y._pushContext();var D=i.reject(l.e);return y._popContext(),D}var A=n(x,y);if(A instanceof i)return A}return null}function f(b,g,y,v){if(s.cancellation()){var x=new i(t),D=this._finallyPromise=new i(t);this._promise=x.lastly(function(){return D}),x._captureStackTrace(),x._setOnCancel(this)}else{var A=this._promise=new i(t);A._captureStackTrace()}this._stack=v,this._generatorFunction=b,this._receiver=g,this._generator=void 0,this._yieldHandlers=typeof y=="function"?[y].concat(d):d,this._yieldedPromise=null,this._cancellationPhase=!1}c.inherits(f,r),f.prototype._isResolved=function(){return this._promise===null},f.prototype._cleanup=function(){this._promise=this._generator=null,s.cancellation()&&this._finallyPromise!==null&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},f.prototype._promiseCancelled=function(){if(!this._isResolved()){var b=typeof this._generator.return<"u",g;if(b)this._promise._pushContext(),g=u(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var y=new i.CancellationError("generator .return() sentinel");i.coroutine.returnSentinel=y,this._promise._attachExtraTrace(y),this._promise._pushContext(),g=u(this._generator.throw).call(this._generator,y),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(g)}},f.prototype._promiseFulfilled=function(b){this._yieldedPromise=null,this._promise._pushContext();var g=u(this._generator.next).call(this._generator,b);this._promise._popContext(),this._continue(g)},f.prototype._promiseRejected=function(b){this._yieldedPromise=null,this._promise._attachExtraTrace(b),this._promise._pushContext();var g=u(this._generator.throw).call(this._generator,b);this._promise._popContext(),this._continue(g)},f.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof i){var b=this._yieldedPromise;this._yieldedPromise=null,b.cancel()}},f.prototype.promise=function(){return this._promise},f.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},f.prototype._continue=function(b){var g=this._promise;if(b===l)return this._cleanup(),this._cancellationPhase?g.cancel():g._rejectCallback(b.e,!1);var y=b.value;if(b.done===!0)return this._cleanup(),this._cancellationPhase?g.cancel():g._resolveCallback(y);var v=n(y,this._promise);if(!(v instanceof i)&&(v=h(v,this._yieldHandlers,this._promise),v===null)){this._promiseRejected(new a(`A value %s was yielded that could not be treated as a promise

    See http://goo.gl/MqrFmX

`.replace("%s",y)+`From coroutine:
`+this._stack.split(`
`).slice(1,-7).join(`
`)));return}v=v._target();var x=v._bitField;(x&50397184)===0?(this._yieldedPromise=v,v._proxy(this,null)):(x&33554432)!==0?i._async.invoke(this._promiseFulfilled,this,v._value()):(x&16777216)!==0?i._async.invoke(this._promiseRejected,this,v._reason()):this._promiseCancelled()},i.coroutine=function(b,g){if(typeof b!="function")throw new a(`generatorFunction must be a function

    See http://goo.gl/MqrFmX
`);var y=Object(g).yieldHandler,v=f,x=new Error().stack;return function(){var D=b.apply(this,arguments),A=new v(void 0,void 0,y,x),T=A.promise();return A._generator=D,A._promiseFulfilled(void 0),T}},i.coroutine.addYieldHandler=function(b){if(typeof b!="function")throw new a("expecting a function but got "+c.classString(b));d.push(b)},i.spawn=function(b){if(s.deprecated("Promise.spawn()","Promise.coroutine()"),typeof b!="function")return e(`generatorFunction must be a function

    See http://goo.gl/MqrFmX
`);var g=new f(b,this),y=g.promise();return g._run(i.spawn),y}}),Np}var kp,Ub;function YC(){return Ub||(Ub=1,kp=function(i){var e=at(),t=i._async,n=e.tryCatch,r=e.errorObj;function s(c,l){var u=this;if(!e.isArray(c))return o.call(u,c,l);var d=n(l).apply(u._boundValue(),[null].concat(c));d===r&&t.throwLater(d.e)}function o(c,l){var u=this,d=u._boundValue(),h=c===void 0?n(l).call(d,null):n(l).call(d,null,c);h===r&&t.throwLater(h.e)}function a(c,l){var u=this;if(!c){var d=new Error(c+"");d.cause=c,c=d}var h=n(l).call(u._boundValue(),c);h===r&&t.throwLater(h.e)}i.prototype.asCallback=i.prototype.nodeify=function(c,l){if(typeof c=="function"){var u=o;l!==void 0&&Object(l).spread&&(u=s),this._then(u,a,void 0,this,c)}return this}}),kp}var Mp,Ib;function JC(){return Ib||(Ib=1,Mp=function(i,e){var t={},n=at(),r=gT(),s=n.withAppended,o=n.maybeWrapAsError,a=n.canEvaluate,c=jr().TypeError,l="Async",u={__isPromisified__:!0},d=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],h=new RegExp("^(?:"+d.join("|")+")$"),f=function(B){return n.isIdentifier(B)&&B.charAt(0)!=="_"&&B!=="constructor"};function b(B){return!h.test(B)}function g(B){try{return B.__isPromisified__===!0}catch{return!1}}function y(B,S,J){var q=n.getDataPropertyOrDefault(B,S+J,u);return q?g(q):!1}function v(B,S,J){for(var q=0;q<B.length;q+=2){var O=B[q];if(J.test(O)){for(var K=O.replace(J,""),H=0;H<B.length;H+=2)if(B[H]===K)throw new c(`Cannot promisify an API that has normal methods with '%s'-suffix

    See http://goo.gl/MqrFmX
`.replace("%s",S))}}}function x(B,S,J,q){for(var O=n.inheritedDataKeys(B),K=[],H=0;H<O.length;++H){var Y=O[H],F=B[Y],X=q===f?!0:f(Y);typeof F=="function"&&!g(F)&&!y(B,Y,S)&&q(Y,F,B,X)&&K.push(Y,F)}return v(K,S,J),K}var D=function(B){return B.replace(/([$])/,"\\$")},A;{var T=function(B){for(var S=[B],J=Math.max(0,B-1-3),q=B-1;q>=J;--q)S.push(q);for(var q=B+1;q<=3;++q)S.push(q);return S},E=function(B){return n.filledRange(B,"_arg","")},I=function(B){return n.filledRange(Math.max(B,3),"_arg","")},N=function(B){return typeof B.length=="number"?Math.max(Math.min(B.length,1024),0):0};A=function(B,S,J,q,O,K){var H=Math.max(0,N(q)-1),Y=T(H),F=typeof B=="string"||S===t;function X(pe){var le=E(pe).join(", "),ge=pe>0?", ":"",ye;return F?ye=`ret = callback.call(this, {{args}}, nodeback); break;
`:ye=S===void 0?`ret = callback({{args}}, nodeback); break;
`:`ret = callback.call(receiver, {{args}}, nodeback); break;
`,ye.replace("{{args}}",le).replace(", ",ge)}function $(){for(var pe="",le=0;le<Y.length;++le)pe+="case "+Y[le]+":"+X(Y[le]);return pe+=`                                                             
	        default:                                                             
	            var args = new Array(len + 1);                                   
	            var i = 0;                                                       
	            for (var i = 0; i < len; ++i) {                                  
	               args[i] = arguments[i];                                       
	            }                                                                
	            args[i] = nodeback;                                              
	            [CodeForCall]                                                    
	            break;                                                           
	        `.replace("[CodeForCall]",F?`ret = callback.apply(this, args);
`:`ret = callback.apply(receiver, args);
`),pe}var ne=typeof B=="string"?"this != null ? this['"+B+"'] : fn":"fn",oe=`'use strict';                                                
	        var ret = function (Parameters) {                                    
	            'use strict';                                                    
	            var len = arguments.length;                                      
	            var promise = new Promise(INTERNAL);                             
	            promise._captureStackTrace();                                    
	            var nodeback = nodebackForPromise(promise, `+K+`);   
	            var ret;                                                         
	            var callback = tryCatch([GetFunctionCode]);                      
	            switch(len) {                                                    
	                [CodeForSwitchCase]                                          
	            }                                                                
	            if (ret === errorObj) {                                          
	                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);
	            }                                                                
	            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     
	            return promise;                                                  
	        };                                                                   
	        notEnumerableProp(ret, '__isPromisified__', true);                   
	        return ret;                                                          
	    `.replace("[CodeForSwitchCase]",$()).replace("[GetFunctionCode]",ne);return oe=oe.replace("Parameters",I(H)),new Function("Promise","fn","receiver","withAppended","maybeWrapAsError","nodebackForPromise","tryCatch","errorObj","notEnumerableProp","INTERNAL",oe)(i,q,S,s,o,r,n.tryCatch,n.errorObj,n.notEnumerableProp,e)}}function R(B,S,J,q,O,K){var H=(function(){return this})(),Y=B;typeof Y=="string"&&(B=q);function F(){var X=S;S===t&&(X=this);var $=new i(e);$._captureStackTrace();var ne=typeof Y=="string"&&this!==H?this[Y]:B,oe=r($,K);try{ne.apply(X,s(arguments,oe))}catch(pe){$._rejectCallback(o(pe),!0,!0)}return $._isFateSealed()||$._setAsyncGuaranteed(),$}return n.notEnumerableProp(F,"__isPromisified__",!0),F}var P=a?A:R;function j(B,S,J,q,O){for(var K=new RegExp(D(S)+"$"),H=x(B,S,K,J),Y=0,F=H.length;Y<F;Y+=2){var X=H[Y],$=H[Y+1],ne=X+S;if(q===P)B[ne]=P(X,t,X,$,S,O);else{var oe=q($,function(){return P(X,t,X,$,S,O)});n.notEnumerableProp(oe,"__isPromisified__",!0),B[ne]=oe}}return n.toFastProperties(B),B}function U(B,S,J){return P(B,S,void 0,B,null,J)}i.promisify=function(B,S){if(typeof B!="function")throw new c("expecting a function but got "+n.classString(B));if(g(B))return B;S=Object(S);var J=S.context===void 0?t:S.context,q=!!S.multiArgs,O=U(B,J,q);return n.copyDescriptors(B,O,b),O},i.promisifyAll=function(B,S){if(typeof B!="function"&&typeof B!="object")throw new c(`the target of promisifyAll must be an object or a function

    See http://goo.gl/MqrFmX
`);S=Object(S);var J=!!S.multiArgs,q=S.suffix;typeof q!="string"&&(q=l);var O=S.filter;typeof O!="function"&&(O=f);var K=S.promisifier;if(typeof K!="function"&&(K=P),!n.isIdentifier(q))throw new RangeError(`suffix must be a valid identifier

    See http://goo.gl/MqrFmX
`);for(var H=n.inheritedDataKeys(B),Y=0;Y<H.length;++Y){var F=B[H[Y]];H[Y]!=="constructor"&&n.isClass(F)&&(j(F.prototype,q,O,K,J),j(F,q,O,K,J))}return j(B,q,O,K,J)}}),Mp}var Pp,Rb;function KC(){return Rb||(Rb=1,Pp=function(i,e,t,n){var r=at(),s=r.isObject,o=Ka(),a;typeof Map=="function"&&(a=Map);var c=(function(){var h=0,f=0;function b(g,y){this[h]=g,this[h+f]=y,h++}return function(y){f=y.size,h=0;var v=new Array(y.size*2);return y.forEach(b,v),v}})(),l=function(h){for(var f=new a,b=h.length/2|0,g=0;g<b;++g){var y=h[b+g],v=h[g];f.set(y,v)}return f};function u(h){var f=!1,b;if(a!==void 0&&h instanceof a)b=c(h),f=!0;else{var g=o.keys(h),y=g.length;b=new Array(y*2);for(var v=0;v<y;++v){var x=g[v];b[v]=h[x],b[v+y]=x}}this.constructor$(b),this._isMap=f,this._init$(void 0,-3)}r.inherits(u,e),u.prototype._init=function(){},u.prototype._promiseFulfilled=function(h,f){this._values[f]=h;var b=++this._totalResolved;if(b>=this._length){var g;if(this._isMap)g=l(this._values);else{g={};for(var y=this.length(),v=0,x=this.length();v<x;++v)g[this._values[v+y]]=this._values[v]}return this._resolve(g),!0}return!1},u.prototype.shouldCopyValues=function(){return!1},u.prototype.getActualLength=function(h){return h>>1};function d(h){var f,b=t(h);if(s(b))b instanceof i?f=b._then(i.props,void 0,void 0,void 0,void 0):f=new u(b).promise();else return n(`cannot await properties of a non-object

    See http://goo.gl/MqrFmX
`);return b instanceof i&&f._propagateFrom(b,2),f}i.prototype.props=function(){return d(this)},i.props=function(h){return d(h)}}),Pp}var Lp,Fb;function ZC(){return Fb||(Fb=1,Lp=function(i,e,t,n){var r=at(),s=function(a){return a.then(function(c){return o(c,a)})};function o(a,c){var l=t(a);if(l instanceof i)return s(l);if(a=r.asArray(a),a===null)return n("expecting an array or an iterable object but got "+r.classString(a));var u=new i(e);c!==void 0&&u._propagateFrom(c,3);for(var d=u._fulfill,h=u._reject,f=0,b=a.length;f<b;++f){var g=a[f];g===void 0&&!(f in a)||i.cast(g)._then(d,h,void 0,u,null)}return u}i.race=function(a){return o(a,void 0)},i.prototype.race=function(){return o(this,void 0)}}),Lp}var Bp,Nb;function QC(){return Nb||(Nb=1,Bp=function(i,e,t,n,r,s){var o=i._getDomain,a=at(),c=a.tryCatch;function l(b,g,y,v){this.constructor$(b);var x=o();this._fn=x===null?g:a.domainBind(x,g),y!==void 0&&(y=i.resolve(y),y._attachCancellationCallback(this)),this._initialValue=y,this._currentCancellable=null,v===r?this._eachValues=Array(this._length):v===0?this._eachValues=null:this._eachValues=void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}a.inherits(l,e),l.prototype._gotAccum=function(b){this._eachValues!==void 0&&this._eachValues!==null&&b!==r&&this._eachValues.push(b)},l.prototype._eachComplete=function(b){return this._eachValues!==null&&this._eachValues.push(b),this._eachValues},l.prototype._init=function(){},l.prototype._resolveEmptyArray=function(){this._resolve(this._eachValues!==void 0?this._eachValues:this._initialValue)},l.prototype.shouldCopyValues=function(){return!1},l.prototype._resolve=function(b){this._promise._resolveCallback(b),this._values=null},l.prototype._resultCancelled=function(b){if(b===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof i&&this._currentCancellable.cancel(),this._initialValue instanceof i&&this._initialValue.cancel())},l.prototype._iterate=function(b){this._values=b;var g,y,v=b.length;if(this._initialValue!==void 0?(g=this._initialValue,y=0):(g=i.resolve(b[0]),y=1),this._currentCancellable=g,!g.isRejected())for(;y<v;++y){var x={accum:null,value:b[y],index:y,length:v,array:this};g=g._then(h,void 0,void 0,x,void 0)}this._eachValues!==void 0&&(g=g._then(this._eachComplete,void 0,void 0,this,void 0)),g._then(u,u,void 0,g,this)},i.prototype.reduce=function(b,g){return d(this,b,g,null)},i.reduce=function(b,g,y,v){return d(b,g,y,v)};function u(b,g){this.isFulfilled()?g._resolve(b):g._reject(b)}function d(b,g,y,v){if(typeof g!="function")return t("expecting a function but got "+a.classString(g));var x=new l(b,g,y,v);return x.promise()}function h(b){this.accum=b,this.array._gotAccum(b);var g=n(this.value,this.array._promise);return g instanceof i?(this.array._currentCancellable=g,g._then(f,void 0,void 0,this,void 0)):f.call(this,g)}function f(b){var g=this.array,y=g._promise,v=c(g._fn);y._pushContext();var x;g._eachValues!==void 0?x=v.call(y._boundValue(),b,this.index,this.length):x=v.call(y._boundValue(),this.accum,b,this.index,this.length),x instanceof i&&(g._currentCancellable=x);var D=y._popContext();return s.checkForgottenReturns(x,D,g._eachValues!==void 0?"Promise.each":"Promise.reduce",y),x}}),Bp}var Op,kb;function eS(){return kb||(kb=1,Op=function(i,e,t){var n=i.PromiseInspection,r=at();function s(o){this.constructor$(o)}r.inherits(s,e),s.prototype._promiseResolved=function(o,a){this._values[o]=a;var c=++this._totalResolved;return c>=this._length?(this._resolve(this._values),!0):!1},s.prototype._promiseFulfilled=function(o,a){var c=new n;return c._bitField=33554432,c._settledValueField=o,this._promiseResolved(a,c)},s.prototype._promiseRejected=function(o,a){var c=new n;return c._bitField=16777216,c._settledValueField=o,this._promiseResolved(a,c)},i.settle=function(o){return t.deprecated(".settle()",".reflect()"),new s(o).promise()},i.prototype.settle=function(){return i.settle(this)}}),Op}var Wp,Mb;function tS(){return Mb||(Mb=1,Wp=function(i,e,t){var n=at(),r=jr().RangeError,s=jr().AggregateError,o=n.isArray,a={};function c(u){this.constructor$(u),this._howMany=0,this._unwrap=!1,this._initialized=!1}n.inherits(c,e),c.prototype._init=function(){if(this._initialized){if(this._howMany===0){this._resolve([]);return}this._init$(void 0,-5);var u=o(this._values);!this._isResolved()&&u&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},c.prototype.init=function(){this._initialized=!0,this._init()},c.prototype.setUnwrap=function(){this._unwrap=!0},c.prototype.howMany=function(){return this._howMany},c.prototype.setHowMany=function(u){this._howMany=u},c.prototype._promiseFulfilled=function(u){return this._addFulfilled(u),this._fulfilled()===this.howMany()?(this._values.length=this.howMany(),this.howMany()===1&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0):!1},c.prototype._promiseRejected=function(u){return this._addRejected(u),this._checkOutcome()},c.prototype._promiseCancelled=function(){return this._values instanceof i||this._values==null?this._cancel():(this._addRejected(a),this._checkOutcome())},c.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var u=new s,d=this.length();d<this._values.length;++d)this._values[d]!==a&&u.push(this._values[d]);return u.length>0?this._reject(u):this._cancel(),!0}return!1},c.prototype._fulfilled=function(){return this._totalResolved},c.prototype._rejected=function(){return this._values.length-this.length()},c.prototype._addRejected=function(u){this._values.push(u)},c.prototype._addFulfilled=function(u){this._values[this._totalResolved++]=u},c.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},c.prototype._getRangeError=function(u){var d="Input array must contain at least "+this._howMany+" items but contains only "+u+" items";return new r(d)},c.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))};function l(u,d){if((d|0)!==d||d<0)return t(`expecting a positive integer

    See http://goo.gl/MqrFmX
`);var h=new c(u),f=h.promise();return h.setHowMany(d),h.init(),f}i.some=function(u,d){return l(u,d)},i.prototype.some=function(u){return l(this,u)},i._SomePromiseArray=c}),Wp}var qp,Pb;function nS(){return Pb||(Pb=1,qp=function(i,e){var t=i.map;i.prototype.filter=function(n,r){return t(this,n,r,e)},i.filter=function(n,r,s){return t(n,r,s,e)}}),qp}var Hp,Lb;function iS(){return Lb||(Lb=1,Hp=function(i,e){var t=i.reduce,n=i.all;function r(){return n(this)}function s(o,a){return t(o,a,e,e)}i.prototype.each=function(o){return t(this,o,e,0)._then(r,void 0,void 0,this,void 0)},i.prototype.mapSeries=function(o){return t(this,o,e,e)},i.each=function(o,a){return t(o,a,e,0)._then(r,void 0,void 0,o,void 0)},i.mapSeries=s}),Hp}var Vp,Bb;function rS(){return Bb||(Bb=1,Vp=function(i){var e=i._SomePromiseArray;function t(n){var r=new e(n),s=r.promise();return r.setHowMany(1),r.setUnwrap(),r.init(),s}i.any=function(n){return t(n)},i.prototype.any=function(){return t(this)}}),Vp}var Ob;function sS(){return Ob||(Ob=1,(function(i){i.exports=function(){var e=function(){return new h(`circular promise resolution chain

    See http://goo.gl/MqrFmX
`)},t=function(){return new U.PromiseInspection(this._target())},n=function(q){return U.reject(new h(q))};function r(){}var s={},o=at(),a;o.isNode?a=function(){var q=process.domain;return q===void 0&&(q=null),q}:a=function(){return null},o.notEnumerableProp(U,"_getDomain",a);var c=Ka(),l=RC(),u=new l;c.defineProperty(U,"_async",{value:u});var d=jr(),h=U.TypeError=d.TypeError;U.RangeError=d.RangeError;var f=U.CancellationError=d.CancellationError;U.TimeoutError=d.TimeoutError,U.OperationalError=d.OperationalError,U.RejectionError=d.OperationalError,U.AggregateError=d.AggregateError;var b=function(){},g={},y={},v=FC()(U,b),x=NC()(U,b,v,n,r),D=kC()(U),A=D.create,T=MC()(U,D);T.CapturedTrace;var E=PC()(U,v),I=LC()(y),N=gT(),R=o.errorObj,P=o.tryCatch;function j(q,O){if(typeof O!="function")throw new h("expecting a function but got "+o.classString(O));if(q.constructor!==U)throw new h(`the promise constructor cannot be invoked directly

    See http://goo.gl/MqrFmX
`)}function U(q){this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,q!==b&&(j(this,q),this._resolveFromExecutor(q)),this._promiseCreated(),this._fireEvent("promiseCreated",this)}U.prototype.toString=function(){return"[object Promise]"},U.prototype.caught=U.prototype.catch=function(q){var O=arguments.length;if(O>1){var K=new Array(O-1),H=0,Y;for(Y=0;Y<O-1;++Y){var F=arguments[Y];if(o.isObject(F))K[H++]=F;else return n("expecting an object but got A catch statement predicate "+o.classString(F))}return K.length=H,q=arguments[Y],this.then(void 0,I(K,q,this))}return this.then(void 0,q)},U.prototype.reflect=function(){return this._then(t,t,void 0,this,void 0)},U.prototype.then=function(q,O){if(T.warnings()&&arguments.length>0&&typeof q!="function"&&typeof O!="function"){var K=".then() only accepts functions but was passed: "+o.classString(q);arguments.length>1&&(K+=", "+o.classString(O)),this._warn(K)}return this._then(q,O,void 0,void 0,void 0)},U.prototype.done=function(q,O){var K=this._then(q,O,void 0,void 0,void 0);K._setIsFinal()},U.prototype.spread=function(q){return typeof q!="function"?n("expecting a function but got "+o.classString(q)):this.all()._then(q,void 0,void 0,g,void 0)},U.prototype.toJSON=function(){var q={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(q.fulfillmentValue=this.value(),q.isFulfilled=!0):this.isRejected()&&(q.rejectionReason=this.reason(),q.isRejected=!0),q},U.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new x(this).promise()},U.prototype.error=function(q){return this.caught(o.originatesFromRejection,q)},U.getNewLibraryCopy=i.exports,U.is=function(q){return q instanceof U},U.fromNode=U.fromCallback=function(q){var O=new U(b);O._captureStackTrace();var K=arguments.length>1?!!Object(arguments[1]).multiArgs:!1,H=P(q)(N(O,K));return H===R&&O._rejectCallback(H.e,!0),O._isFateSealed()||O._setAsyncGuaranteed(),O},U.all=function(q){return new x(q).promise()},U.cast=function(q){var O=v(q);return O instanceof U||(O=new U(b),O._captureStackTrace(),O._setFulfilled(),O._rejectionHandler0=q),O},U.resolve=U.fulfilled=U.cast,U.reject=U.rejected=function(q){var O=new U(b);return O._captureStackTrace(),O._rejectCallback(q,!0),O},U.setScheduler=function(q){if(typeof q!="function")throw new h("expecting a function but got "+o.classString(q));return u.setScheduler(q)},U.prototype._then=function(q,O,K,H,Y){var F=Y!==void 0,X=F?Y:new U(b),$=this._target(),ne=$._bitField;F||(X._propagateFrom(this,3),X._captureStackTrace(),H===void 0&&(this._bitField&2097152)!==0&&((ne&50397184)!==0?H=this._boundValue():H=$===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,X));var oe=a();if((ne&50397184)!==0){var pe,le,ge=$._settlePromiseCtx;(ne&33554432)!==0?(le=$._rejectionHandler0,pe=q):(ne&16777216)!==0?(le=$._fulfillmentHandler0,pe=O,$._unsetRejectionIsUnhandled()):(ge=$._settlePromiseLateCancellationObserver,le=new f("late cancellation observer"),$._attachExtraTrace(le),pe=O),u.invoke(ge,$,{handler:oe===null?pe:typeof pe=="function"&&o.domainBind(oe,pe),promise:X,receiver:H,value:le})}else $._addCallbacks(q,O,X,H,oe);return X},U.prototype._length=function(){return this._bitField&65535},U.prototype._isFateSealed=function(){return(this._bitField&117506048)!==0},U.prototype._isFollowing=function(){return(this._bitField&67108864)===67108864},U.prototype._setLength=function(q){this._bitField=this._bitField&-65536|q&65535},U.prototype._setFulfilled=function(){this._bitField=this._bitField|33554432,this._fireEvent("promiseFulfilled",this)},U.prototype._setRejected=function(){this._bitField=this._bitField|16777216,this._fireEvent("promiseRejected",this)},U.prototype._setFollowing=function(){this._bitField=this._bitField|67108864,this._fireEvent("promiseResolved",this)},U.prototype._setIsFinal=function(){this._bitField=this._bitField|4194304},U.prototype._isFinal=function(){return(this._bitField&4194304)>0},U.prototype._unsetCancelled=function(){this._bitField=this._bitField&-65537},U.prototype._setCancelled=function(){this._bitField=this._bitField|65536,this._fireEvent("promiseCancelled",this)},U.prototype._setWillBeCancelled=function(){this._bitField=this._bitField|8388608},U.prototype._setAsyncGuaranteed=function(){u.hasCustomScheduler()||(this._bitField=this._bitField|134217728)},U.prototype._receiverAt=function(q){var O=q===0?this._receiver0:this[q*4-4+3];if(O!==s)return O===void 0&&this._isBound()?this._boundValue():O},U.prototype._promiseAt=function(q){return this[q*4-4+2]},U.prototype._fulfillmentHandlerAt=function(q){return this[q*4-4+0]},U.prototype._rejectionHandlerAt=function(q){return this[q*4-4+1]},U.prototype._boundValue=function(){},U.prototype._migrateCallback0=function(q){q._bitField;var O=q._fulfillmentHandler0,K=q._rejectionHandler0,H=q._promise0,Y=q._receiverAt(0);Y===void 0&&(Y=s),this._addCallbacks(O,K,H,Y,null)},U.prototype._migrateCallbackAt=function(q,O){var K=q._fulfillmentHandlerAt(O),H=q._rejectionHandlerAt(O),Y=q._promiseAt(O),F=q._receiverAt(O);F===void 0&&(F=s),this._addCallbacks(K,H,Y,F,null)},U.prototype._addCallbacks=function(q,O,K,H,Y){var F=this._length();if(F>=65531&&(F=0,this._setLength(0)),F===0)this._promise0=K,this._receiver0=H,typeof q=="function"&&(this._fulfillmentHandler0=Y===null?q:o.domainBind(Y,q)),typeof O=="function"&&(this._rejectionHandler0=Y===null?O:o.domainBind(Y,O));else{var X=F*4-4;this[X+2]=K,this[X+3]=H,typeof q=="function"&&(this[X+0]=Y===null?q:o.domainBind(Y,q)),typeof O=="function"&&(this[X+1]=Y===null?O:o.domainBind(Y,O))}return this._setLength(F+1),F},U.prototype._proxy=function(q,O){this._addCallbacks(void 0,void 0,O,q,null)},U.prototype._resolveCallback=function(q,O){if((this._bitField&117506048)===0){if(q===this)return this._rejectCallback(e(),!1);var K=v(q,this);if(!(K instanceof U))return this._fulfill(q);O&&this._propagateFrom(K,2);var H=K._target();if(H===this){this._reject(e());return}var Y=H._bitField;if((Y&50397184)===0){var F=this._length();F>0&&H._migrateCallback0(this);for(var X=1;X<F;++X)H._migrateCallbackAt(this,X);this._setFollowing(),this._setLength(0),this._setFollowee(H)}else if((Y&33554432)!==0)this._fulfill(H._value());else if((Y&16777216)!==0)this._reject(H._reason());else{var $=new f("late cancellation observer");H._attachExtraTrace($),this._reject($)}}},U.prototype._rejectCallback=function(q,O,K){var H=o.ensureErrorObject(q),Y=H===q;if(!Y&&!K&&T.warnings()){var F="a promise was rejected with a non-error: "+o.classString(q);this._warn(F,!0)}this._attachExtraTrace(H,O?Y:!1),this._reject(q)},U.prototype._resolveFromExecutor=function(q){var O=this;this._captureStackTrace(),this._pushContext();var K=!0,H=this._execute(q,function(Y){O._resolveCallback(Y)},function(Y){O._rejectCallback(Y,K)});K=!1,this._popContext(),H!==void 0&&O._rejectCallback(H,!0)},U.prototype._settlePromiseFromHandler=function(q,O,K,H){var Y=H._bitField;if((Y&65536)===0){H._pushContext();var F;O===g?!K||typeof K.length!="number"?(F=R,F.e=new h("cannot .spread() a non-array: "+o.classString(K))):F=P(q).apply(this._boundValue(),K):F=P(q).call(O,K);var X=H._popContext();Y=H._bitField,(Y&65536)===0&&(F===y?H._reject(K):F===R?H._rejectCallback(F.e,!1):(T.checkForgottenReturns(F,X,"",H,this),H._resolveCallback(F)))}},U.prototype._target=function(){for(var q=this;q._isFollowing();)q=q._followee();return q},U.prototype._followee=function(){return this._rejectionHandler0},U.prototype._setFollowee=function(q){this._rejectionHandler0=q},U.prototype._settlePromise=function(q,O,K,H){var Y=q instanceof U,F=this._bitField,X=(F&134217728)!==0;(F&65536)!==0?(Y&&q._invokeInternalOnCancel(),K instanceof E&&K.isFinallyHandler()?(K.cancelPromise=q,P(O).call(K,H)===R&&q._reject(R.e)):O===t?q._fulfill(t.call(K)):K instanceof r?K._promiseCancelled(q):Y||q instanceof x?q._cancel():K.cancel()):typeof O=="function"?Y?(X&&q._setAsyncGuaranteed(),this._settlePromiseFromHandler(O,K,H,q)):O.call(K,H,q):K instanceof r?K._isResolved()||((F&33554432)!==0?K._promiseFulfilled(H,q):K._promiseRejected(H,q)):Y&&(X&&q._setAsyncGuaranteed(),(F&33554432)!==0?q._fulfill(H):q._reject(H))},U.prototype._settlePromiseLateCancellationObserver=function(q){var O=q.handler,K=q.promise,H=q.receiver,Y=q.value;typeof O=="function"?K instanceof U?this._settlePromiseFromHandler(O,H,Y,K):O.call(H,Y,K):K instanceof U&&K._reject(Y)},U.prototype._settlePromiseCtx=function(q){this._settlePromise(q.promise,q.handler,q.receiver,q.value)},U.prototype._settlePromise0=function(q,O,K){var H=this._promise0,Y=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(H,q,Y,O)},U.prototype._clearCallbackDataAtIndex=function(q){var O=q*4-4;this[O+2]=this[O+3]=this[O+0]=this[O+1]=void 0},U.prototype._fulfill=function(q){var O=this._bitField;if(!((O&117506048)>>>16)){if(q===this){var K=e();return this._attachExtraTrace(K),this._reject(K)}this._setFulfilled(),this._rejectionHandler0=q,(O&65535)>0&&((O&134217728)!==0?this._settlePromises():u.settlePromises(this))}},U.prototype._reject=function(q){var O=this._bitField;if(!((O&117506048)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=q,this._isFinal())return u.fatalError(q,o.isNode);(O&65535)>0?u.settlePromises(this):this._ensurePossibleRejectionHandled()}},U.prototype._fulfillPromises=function(q,O){for(var K=1;K<q;K++){var H=this._fulfillmentHandlerAt(K),Y=this._promiseAt(K),F=this._receiverAt(K);this._clearCallbackDataAtIndex(K),this._settlePromise(Y,H,F,O)}},U.prototype._rejectPromises=function(q,O){for(var K=1;K<q;K++){var H=this._rejectionHandlerAt(K),Y=this._promiseAt(K),F=this._receiverAt(K);this._clearCallbackDataAtIndex(K),this._settlePromise(Y,H,F,O)}},U.prototype._settlePromises=function(){var q=this._bitField,O=q&65535;if(O>0){if((q&16842752)!==0){var K=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,K,q),this._rejectPromises(O,K)}else{var H=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,H,q),this._fulfillPromises(O,H)}this._setLength(0)}this._clearCancellationData()},U.prototype._settledValue=function(){var q=this._bitField;if((q&33554432)!==0)return this._rejectionHandler0;if((q&16777216)!==0)return this._fulfillmentHandler0};function B(q){this.promise._resolveCallback(q)}function S(q){this.promise._rejectCallback(q,!1)}U.defer=U.pending=function(){T.deprecated("Promise.defer","new Promise");var q=new U(b);return{promise:q,resolve:B,reject:S}},o.notEnumerableProp(U,"_makeSelfResolutionError",e),BC()(U,b,v,n,T),OC()(U,b,v,T),WC()(U,x,n,T),qC()(U),HC()(U),VC()(U,x,v,b,u,a),U.Promise=U,U.version="3.4.7",GC()(U,x,n,v,b,T),zC()(U),$C()(U,n,v,A,b,T),XC()(U,b,T),jC()(U,n,b,v,r,T),YC()(U),JC()(U,b),KC()(U,x,v,n),ZC()(U,b,v,n),QC()(U,x,n,v,b,T),eS()(U,x,T),tS()(U,x,n),nS()(U,b),iS()(U,b),rS()(U),o.toFastProperties(U),o.toFastProperties(U.prototype);function J(q){var O=new U(b);O._fulfillmentHandler0=q,O._rejectionHandler0=q,O._promise0=q,O._receiver0=q}return J({a:1}),J({b:2}),J({c:3}),J(1),J(function(){}),J(void 0),J(!1),J(new U(b)),T.setBounds(l.firstLineError,o.lastLineError),U}})(hp)),hp.exports}var Wb;function ts(){if(Wb)return wn;Wb=1;var i=gt,e=sS()();wn.defer=t,wn.when=e.resolve,wn.resolve=e.resolve,wn.all=e.all,wn.props=e.props,wn.reject=e.reject,wn.promisify=e.promisify,wn.mapSeries=e.mapSeries,wn.attempt=e.attempt,wn.nfcall=function(n){var r=Array.prototype.slice.call(arguments,1),s=e.promisify(n);return s.apply(null,r)},e.prototype.fail=e.prototype.caught,e.prototype.also=function(n){return this.then(function(r){var s=i.extend({},r,n(r));return e.props(s)})};function t(){var n,r,s=new e.Promise(function(o,a){n=o,r=a});return{resolve:n,reject:r,promise:s}}return wn}var Ze={},qb;function So(){if(qb)return Ze;qb=1;var i=gt,e=Ze.types={document:"document",paragraph:"paragraph",run:"run",text:"text",tab:"tab",hyperlink:"hyperlink",noteReference:"noteReference",image:"image",note:"note",commentReference:"commentReference",comment:"comment",table:"table",tableRow:"tableRow",tableCell:"tableCell",break:"break",bookmarkStart:"bookmarkStart"};function t(T,E){return E=E||{},{type:e.document,children:T,notes:E.notes||new u({}),comments:E.comments||[]}}function n(T,E){E=E||{};var I=E.indent||{};return{type:e.paragraph,children:T,styleId:E.styleId||null,styleName:E.styleName||null,numbering:E.numbering||null,alignment:E.alignment||null,indent:{start:I.start||null,end:I.end||null,firstLine:I.firstLine||null,hanging:I.hanging||null}}}function r(T,E){return E=E||{},{type:e.run,children:T,styleId:E.styleId||null,styleName:E.styleName||null,isBold:!!E.isBold,isUnderline:!!E.isUnderline,isItalic:!!E.isItalic,isStrikethrough:!!E.isStrikethrough,isAllCaps:!!E.isAllCaps,isSmallCaps:!!E.isSmallCaps,verticalAlignment:E.verticalAlignment||s.baseline,font:E.font||null,fontSize:E.fontSize||null}}var s={baseline:"baseline",superscript:"superscript",subscript:"subscript"};function o(T){return{type:e.text,value:T}}function a(){return{type:e.tab}}function c(T,E){return{type:e.hyperlink,children:T,href:E.href,anchor:E.anchor,targetFrame:E.targetFrame}}function l(T){return{type:e.noteReference,noteType:T.noteType,noteId:T.noteId}}function u(T){this._notes=i.indexBy(T,function(E){return b(E.noteType,E.noteId)})}u.prototype.resolve=function(T){return this.findNoteByKey(b(T.noteType,T.noteId))},u.prototype.findNoteByKey=function(T){return this._notes[T]||null};function d(T){return{type:e.note,noteType:T.noteType,noteId:T.noteId,body:T.body}}function h(T){return{type:e.commentReference,commentId:T.commentId}}function f(T){return{type:e.comment,commentId:T.commentId,body:T.body,authorName:T.authorName,authorInitials:T.authorInitials}}function b(T,E){return T+"-"+E}function g(T){return{type:e.image,read:function(E){return E?T.readImage(E):T.readImage().then(function(I){return Buffer.from(I)})},readAsArrayBuffer:function(){return T.readImage()},readAsBase64String:function(){return T.readImage("base64")},readAsBuffer:function(){return T.readImage().then(function(E){return Buffer.from(E)})},altText:T.altText,contentType:T.contentType}}function y(T,E){return E=E||{},{type:e.table,children:T,styleId:E.styleId||null,styleName:E.styleName||null}}function v(T,E){return E=E||{},{type:e.tableRow,children:T,isHeader:E.isHeader||!1}}function x(T,E){return E=E||{},{type:e.tableCell,children:T,colSpan:E.colSpan==null?1:E.colSpan,rowSpan:E.rowSpan==null?1:E.rowSpan}}function D(T){return{type:e.break,breakType:T}}function A(T){return{type:e.bookmarkStart,name:T.name}}return Ze.document=Ze.Document=t,Ze.paragraph=Ze.Paragraph=n,Ze.run=Ze.Run=r,Ze.text=Ze.Text=o,Ze.tab=Ze.Tab=a,Ze.Hyperlink=c,Ze.noteReference=Ze.NoteReference=l,Ze.Notes=u,Ze.Note=d,Ze.commentReference=h,Ze.comment=f,Ze.Image=g,Ze.Table=y,Ze.TableRow=v,Ze.TableCell=x,Ze.lineBreak=D("line"),Ze.pageBreak=D("page"),Ze.columnBreak=D("column"),Ze.BookmarkStart=A,Ze.verticalAlignment=s,Ze}var Fo={},Hb;function fr(){if(Hb)return Fo;Hb=1;var i=gt;Fo.Result=e,Fo.success=t,Fo.warning=n,Fo.error=r;function e(c,l){this.value=c,this.messages=l||[]}e.prototype.map=function(c){return new e(c(this.value),this.messages)},e.prototype.flatMap=function(c){var l=c(this.value);return new e(l.value,s([this,l]))},e.prototype.flatMapThen=function(c){var l=this;return c(this.value).then(function(u){return new e(u.value,s([l,u]))})},e.combine=function(c){var l=i.flatten(i.pluck(c,"value")),u=s(c);return new e(l,u)};function t(c){return new e(c,[])}function n(c){return{type:"warning",message:c}}function r(c){return{type:"error",message:c.message,error:c}}function s(c){var l=[];return i.flatten(i.pluck(c,"messages"),!0).forEach(function(u){o(l,u)||l.push(u)}),l}function o(c,l){return i.find(c,a.bind(null,l))!==void 0}function a(c,l){return c.type===l.type&&c.message===l.message}return Fo}var lc={},uc={},Vb;function oS(){if(Vb)return uc;Vb=1,uc.byteLength=a,uc.toByteArray=l,uc.fromByteArray=h;for(var i=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,s=n.length;r<s;++r)i[r]=n[r],e[n.charCodeAt(r)]=r;e[45]=62,e[95]=63;function o(f){var b=f.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var g=f.indexOf("=");g===-1&&(g=b);var y=g===b?0:4-g%4;return[g,y]}function a(f){var b=o(f),g=b[0],y=b[1];return(g+y)*3/4-y}function c(f,b,g){return(b+g)*3/4-g}function l(f){var b,g=o(f),y=g[0],v=g[1],x=new t(c(f,y,v)),D=0,A=v>0?y-4:y,T;for(T=0;T<A;T+=4)b=e[f.charCodeAt(T)]<<18|e[f.charCodeAt(T+1)]<<12|e[f.charCodeAt(T+2)]<<6|e[f.charCodeAt(T+3)],x[D++]=b>>16&255,x[D++]=b>>8&255,x[D++]=b&255;return v===2&&(b=e[f.charCodeAt(T)]<<2|e[f.charCodeAt(T+1)]>>4,x[D++]=b&255),v===1&&(b=e[f.charCodeAt(T)]<<10|e[f.charCodeAt(T+1)]<<4|e[f.charCodeAt(T+2)]>>2,x[D++]=b>>8&255,x[D++]=b&255),x}function u(f){return i[f>>18&63]+i[f>>12&63]+i[f>>6&63]+i[f&63]}function d(f,b,g){for(var y,v=[],x=b;x<g;x+=3)y=(f[x]<<16&16711680)+(f[x+1]<<8&65280)+(f[x+2]&255),v.push(u(y));return v.join("")}function h(f){for(var b,g=f.length,y=g%3,v=[],x=16383,D=0,A=g-y;D<A;D+=x)v.push(d(f,D,D+x>A?A:D+x));return y===1?(b=f[g-1],v.push(i[b>>2]+i[b<<4&63]+"==")):y===2&&(b=(f[g-2]<<8)+f[g-1],v.push(i[b>>10]+i[b>>4&63]+i[b<<2&63]+"=")),v.join("")}return uc}var Gp={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var Gb;function aS(){return Gb||(Gb=1,(function(i,e){(function(t){i.exports=t()})(function(){return(function t(n,r,s){function o(l,u){if(!r[l]){if(!n[l]){var d=typeof Mc=="function"&&Mc;if(!u&&d)return d(l,!0);if(a)return a(l,!0);var h=new Error("Cannot find module '"+l+"'");throw h.code="MODULE_NOT_FOUND",h}var f=r[l]={exports:{}};n[l][0].call(f.exports,function(b){var g=n[l][1][b];return o(g||b)},f,f.exports,t,n,r,s)}return r[l].exports}for(var a=typeof Mc=="function"&&Mc,c=0;c<s.length;c++)o(s[c]);return o})({1:[function(t,n,r){var s=t("./utils"),o=t("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(c){for(var l,u,d,h,f,b,g,y=[],v=0,x=c.length,D=x,A=s.getTypeOf(c)!=="string";v<c.length;)D=x-v,d=A?(l=c[v++],u=v<x?c[v++]:0,v<x?c[v++]:0):(l=c.charCodeAt(v++),u=v<x?c.charCodeAt(v++):0,v<x?c.charCodeAt(v++):0),h=l>>2,f=(3&l)<<4|u>>4,b=1<D?(15&u)<<2|d>>6:64,g=2<D?63&d:64,y.push(a.charAt(h)+a.charAt(f)+a.charAt(b)+a.charAt(g));return y.join("")},r.decode=function(c){var l,u,d,h,f,b,g=0,y=0,v="data:";if(c.substr(0,v.length)===v)throw new Error("Invalid base64 input, it looks like a data url.");var x,D=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===a.charAt(64)&&D--,c.charAt(c.length-2)===a.charAt(64)&&D--,D%1!=0)throw new Error("Invalid base64 input, bad content length.");for(x=o.uint8array?new Uint8Array(0|D):new Array(0|D);g<c.length;)l=a.indexOf(c.charAt(g++))<<2|(h=a.indexOf(c.charAt(g++)))>>4,u=(15&h)<<4|(f=a.indexOf(c.charAt(g++)))>>2,d=(3&f)<<6|(b=a.indexOf(c.charAt(g++))),x[y++]=l,f!==64&&(x[y++]=u),b!==64&&(x[y++]=d);return x}},{"./support":30,"./utils":32}],2:[function(t,n,r){var s=t("./external"),o=t("./stream/DataWorker"),a=t("./stream/Crc32Probe"),c=t("./stream/DataLengthProbe");function l(u,d,h,f,b){this.compressedSize=u,this.uncompressedSize=d,this.crc32=h,this.compression=f,this.compressedContent=b}l.prototype={getContentWorker:function(){var u=new o(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),d=this;return u.on("end",function(){if(this.streamInfo.data_length!==d.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),u},getCompressedWorker:function(){return new o(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},l.createWorkerFrom=function(u,d,h){return u.pipe(new a).pipe(new c("uncompressedSize")).pipe(d.compressWorker(h)).pipe(new c("compressedSize")).withStreamInfo("compression",d)},n.exports=l},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,n,r){var s=t("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},r.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,n,r){var s=t("./utils"),o=(function(){for(var a,c=[],l=0;l<256;l++){a=l;for(var u=0;u<8;u++)a=1&a?3988292384^a>>>1:a>>>1;c[l]=a}return c})();n.exports=function(a,c){return a!==void 0&&a.length?s.getTypeOf(a)!=="string"?(function(l,u,d,h){var f=o,b=h+d;l^=-1;for(var g=h;g<b;g++)l=l>>>8^f[255&(l^u[g])];return-1^l})(0|c,a,a.length,0):(function(l,u,d,h){var f=o,b=h+d;l^=-1;for(var g=h;g<b;g++)l=l>>>8^f[255&(l^u.charCodeAt(g))];return-1^l})(0|c,a,a.length,0):0}},{"./utils":32}],5:[function(t,n,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(t,n,r){var s=null;s=typeof Promise<"u"?Promise:t("lie"),n.exports={Promise:s}},{lie:37}],7:[function(t,n,r){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=t("pako"),a=t("./utils"),c=t("./stream/GenericWorker"),l=s?"uint8array":"array";function u(d,h){c.call(this,"FlateWorker/"+d),this._pako=null,this._pakoAction=d,this._pakoOptions=h,this.meta={}}r.magic="\b\0",a.inherits(u,c),u.prototype.processChunk=function(d){this.meta=d.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(l,d.data),!1)},u.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var d=this;this._pako.onData=function(h){d.push({data:h,meta:d.meta})}},r.compressWorker=function(d){return new u("Deflate",d)},r.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,n,r){function s(f,b){var g,y="";for(g=0;g<b;g++)y+=String.fromCharCode(255&f),f>>>=8;return y}function o(f,b,g,y,v,x){var D,A,T=f.file,E=f.compression,I=x!==l.utf8encode,N=a.transformTo("string",x(T.name)),R=a.transformTo("string",l.utf8encode(T.name)),P=T.comment,j=a.transformTo("string",x(P)),U=a.transformTo("string",l.utf8encode(P)),B=R.length!==T.name.length,S=U.length!==P.length,J="",q="",O="",K=T.dir,H=T.date,Y={crc32:0,compressedSize:0,uncompressedSize:0};b&&!g||(Y.crc32=f.crc32,Y.compressedSize=f.compressedSize,Y.uncompressedSize=f.uncompressedSize);var F=0;b&&(F|=8),I||!B&&!S||(F|=2048);var X=0,$=0;K&&(X|=16),v==="UNIX"?($=798,X|=(function(oe,pe){var le=oe;return oe||(le=pe?16893:33204),(65535&le)<<16})(T.unixPermissions,K)):($=20,X|=(function(oe){return 63&(oe||0)})(T.dosPermissions)),D=H.getUTCHours(),D<<=6,D|=H.getUTCMinutes(),D<<=5,D|=H.getUTCSeconds()/2,A=H.getUTCFullYear()-1980,A<<=4,A|=H.getUTCMonth()+1,A<<=5,A|=H.getUTCDate(),B&&(q=s(1,1)+s(u(N),4)+R,J+="up"+s(q.length,2)+q),S&&(O=s(1,1)+s(u(j),4)+U,J+="uc"+s(O.length,2)+O);var ne="";return ne+=`
\0`,ne+=s(F,2),ne+=E.magic,ne+=s(D,2),ne+=s(A,2),ne+=s(Y.crc32,4),ne+=s(Y.compressedSize,4),ne+=s(Y.uncompressedSize,4),ne+=s(N.length,2),ne+=s(J.length,2),{fileRecord:d.LOCAL_FILE_HEADER+ne+N+J,dirRecord:d.CENTRAL_FILE_HEADER+s($,2)+ne+s(j.length,2)+"\0\0\0\0"+s(X,4)+s(y,4)+N+J+j}}var a=t("../utils"),c=t("../stream/GenericWorker"),l=t("../utf8"),u=t("../crc32"),d=t("../signature");function h(f,b,g,y){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=b,this.zipPlatform=g,this.encodeFileName=y,this.streamFiles=f,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(h,c),h.prototype.push=function(f){var b=f.meta.percent||0,g=this.entriesCount,y=this._sources.length;this.accumulate?this.contentBuffer.push(f):(this.bytesWritten+=f.data.length,c.prototype.push.call(this,{data:f.data,meta:{currentFile:this.currentFile,percent:g?(b+100*(g-y-1))/g:100}}))},h.prototype.openedSource=function(f){this.currentSourceOffset=this.bytesWritten,this.currentFile=f.file.name;var b=this.streamFiles&&!f.file.dir;if(b){var g=o(f,b,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:g.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(f){this.accumulate=!1;var b=this.streamFiles&&!f.file.dir,g=o(f,b,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(g.dirRecord),b)this.push({data:(function(y){return d.DATA_DESCRIPTOR+s(y.crc32,4)+s(y.compressedSize,4)+s(y.uncompressedSize,4)})(f),meta:{percent:100}});else for(this.push({data:g.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var f=this.bytesWritten,b=0;b<this.dirRecords.length;b++)this.push({data:this.dirRecords[b],meta:{percent:100}});var g=this.bytesWritten-f,y=(function(v,x,D,A,T){var E=a.transformTo("string",T(A));return d.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(v,2)+s(v,2)+s(x,4)+s(D,4)+s(E.length,2)+E})(this.dirRecords.length,g,f,this.zipComment,this.encodeFileName);this.push({data:y,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(f){this._sources.push(f);var b=this;return f.on("data",function(g){b.processChunk(g)}),f.on("end",function(){b.closedSource(b.previous.streamInfo),b._sources.length?b.prepareNextSource():b.end()}),f.on("error",function(g){b.error(g)}),this},h.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(f){var b=this._sources;if(!c.prototype.error.call(this,f))return!1;for(var g=0;g<b.length;g++)try{b[g].error(f)}catch{}return!0},h.prototype.lock=function(){c.prototype.lock.call(this);for(var f=this._sources,b=0;b<f.length;b++)f[b].lock()},n.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,n,r){var s=t("../compressions"),o=t("./ZipFileWorker");r.generateWorker=function(a,c,l){var u=new o(c.streamFiles,l,c.platform,c.encodeFileName),d=0;try{a.forEach(function(h,f){d++;var b=(function(x,D){var A=x||D,T=s[A];if(!T)throw new Error(A+" is not a valid compression method !");return T})(f.options.compression,c.compression),g=f.options.compressionOptions||c.compressionOptions||{},y=f.dir,v=f.date;f._compressWorker(b,g).withStreamInfo("file",{name:h,dir:y,date:v,comment:f.comment||"",unixPermissions:f.unixPermissions,dosPermissions:f.dosPermissions}).pipe(u)}),u.entriesCount=d}catch(h){u.error(h)}return u}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,n,r){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new s;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(s.prototype=t("./object")).loadAsync=t("./load"),s.support=t("./support"),s.defaults=t("./defaults"),s.version="3.10.1",s.loadAsync=function(o,a){return new s().loadAsync(o,a)},s.external=t("./external"),n.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,n,r){var s=t("./utils"),o=t("./external"),a=t("./utf8"),c=t("./zipEntries"),l=t("./stream/Crc32Probe"),u=t("./nodejsUtils");function d(h){return new o.Promise(function(f,b){var g=h.decompressed.getContentWorker().pipe(new l);g.on("error",function(y){b(y)}).on("end",function(){g.streamInfo.crc32!==h.decompressed.crc32?b(new Error("Corrupted zip : CRC32 mismatch")):f()}).resume()})}n.exports=function(h,f){var b=this;return f=s.extend(f||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),u.isNode&&u.isStream(h)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",h,!0,f.optimizedBinaryString,f.base64).then(function(g){var y=new c(f);return y.load(g),y}).then(function(g){var y=[o.Promise.resolve(g)],v=g.files;if(f.checkCRC32)for(var x=0;x<v.length;x++)y.push(d(v[x]));return o.Promise.all(y)}).then(function(g){for(var y=g.shift(),v=y.files,x=0;x<v.length;x++){var D=v[x],A=D.fileNameStr,T=s.resolve(D.fileNameStr);b.file(T,D.decompressed,{binary:!0,optimizedBinaryString:!0,date:D.date,dir:D.dir,comment:D.fileCommentStr.length?D.fileCommentStr:null,unixPermissions:D.unixPermissions,dosPermissions:D.dosPermissions,createFolders:f.createFolders}),D.dir||(b.file(T).unsafeOriginalName=A)}return y.zipComment.length&&(b.comment=y.zipComment),b})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,n,r){var s=t("../utils"),o=t("../stream/GenericWorker");function a(c,l){o.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(l)}s.inherits(a,o),a.prototype._bindStream=function(c){var l=this;(this._stream=c).pause(),c.on("data",function(u){l.push({data:u,meta:{percent:0}})}).on("error",function(u){l.isPaused?this.generatedError=u:l.error(u)}).on("end",function(){l.isPaused?l._upstreamEnded=!0:l.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,n,r){var s=t("readable-stream").Readable;function o(a,c,l){s.call(this,c),this._helper=a;var u=this;a.on("data",function(d,h){u.push(d)||u._helper.pause(),l&&l(h)}).on("error",function(d){u.emit("error",d)}).on("end",function(){u.push(null)})}t("../utils").inherits(o,s),o.prototype._read=function(){this._helper.resume()},n.exports=o},{"../utils":32,"readable-stream":16}],14:[function(t,n,r){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,o);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,o)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var o=new Buffer(s);return o.fill(0),o},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(t,n,r){function s(T,E,I){var N,R=a.getTypeOf(E),P=a.extend(I||{},u);P.date=P.date||new Date,P.compression!==null&&(P.compression=P.compression.toUpperCase()),typeof P.unixPermissions=="string"&&(P.unixPermissions=parseInt(P.unixPermissions,8)),P.unixPermissions&&16384&P.unixPermissions&&(P.dir=!0),P.dosPermissions&&16&P.dosPermissions&&(P.dir=!0),P.dir&&(T=v(T)),P.createFolders&&(N=y(T))&&x.call(this,N,!0);var j=R==="string"&&P.binary===!1&&P.base64===!1;I&&I.binary!==void 0||(P.binary=!j),(E instanceof d&&E.uncompressedSize===0||P.dir||!E||E.length===0)&&(P.base64=!1,P.binary=!0,E="",P.compression="STORE",R="string");var U=null;U=E instanceof d||E instanceof c?E:b.isNode&&b.isStream(E)?new g(T,E):a.prepareContent(T,E,P.binary,P.optimizedBinaryString,P.base64);var B=new h(T,U,P);this.files[T]=B}var o=t("./utf8"),a=t("./utils"),c=t("./stream/GenericWorker"),l=t("./stream/StreamHelper"),u=t("./defaults"),d=t("./compressedObject"),h=t("./zipObject"),f=t("./generate"),b=t("./nodejsUtils"),g=t("./nodejs/NodejsStreamInputAdapter"),y=function(T){T.slice(-1)==="/"&&(T=T.substring(0,T.length-1));var E=T.lastIndexOf("/");return 0<E?T.substring(0,E):""},v=function(T){return T.slice(-1)!=="/"&&(T+="/"),T},x=function(T,E){return E=E!==void 0?E:u.createFolders,T=v(T),this.files[T]||s.call(this,T,null,{dir:!0,createFolders:E}),this.files[T]};function D(T){return Object.prototype.toString.call(T)==="[object RegExp]"}var A={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(T){var E,I,N;for(E in this.files)N=this.files[E],(I=E.slice(this.root.length,E.length))&&E.slice(0,this.root.length)===this.root&&T(I,N)},filter:function(T){var E=[];return this.forEach(function(I,N){T(I,N)&&E.push(N)}),E},file:function(T,E,I){if(arguments.length!==1)return T=this.root+T,s.call(this,T,E,I),this;if(D(T)){var N=T;return this.filter(function(P,j){return!j.dir&&N.test(P)})}var R=this.files[this.root+T];return R&&!R.dir?R:null},folder:function(T){if(!T)return this;if(D(T))return this.filter(function(R,P){return P.dir&&T.test(R)});var E=this.root+T,I=x.call(this,E),N=this.clone();return N.root=I.name,N},remove:function(T){T=this.root+T;var E=this.files[T];if(E||(T.slice(-1)!=="/"&&(T+="/"),E=this.files[T]),E&&!E.dir)delete this.files[T];else for(var I=this.filter(function(R,P){return P.name.slice(0,T.length)===T}),N=0;N<I.length;N++)delete this.files[I[N].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(T){var E,I={};try{if((I=a.extend(T||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=I.type.toLowerCase(),I.compression=I.compression.toUpperCase(),I.type==="binarystring"&&(I.type="string"),!I.type)throw new Error("No output type specified.");a.checkSupport(I.type),I.platform!=="darwin"&&I.platform!=="freebsd"&&I.platform!=="linux"&&I.platform!=="sunos"||(I.platform="UNIX"),I.platform==="win32"&&(I.platform="DOS");var N=I.comment||this.comment||"";E=f.generateWorker(this,I,N)}catch(R){(E=new c("error")).error(R)}return new l(E,I.type||"string",I.mimeType)},generateAsync:function(T,E){return this.generateInternalStream(T).accumulate(E)},generateNodeStream:function(T,E){return(T=T||{}).type||(T.type="nodebuffer"),this.generateInternalStream(T).toNodejsStream(E)}};n.exports=A},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,n,r){n.exports=t("stream")},{stream:void 0}],17:[function(t,n,r){var s=t("./DataReader");function o(a){s.call(this,a);for(var c=0;c<this.data.length;c++)a[c]=255&a[c]}t("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var c=a.charCodeAt(0),l=a.charCodeAt(1),u=a.charCodeAt(2),d=a.charCodeAt(3),h=this.length-4;0<=h;--h)if(this.data[h]===c&&this.data[h+1]===l&&this.data[h+2]===u&&this.data[h+3]===d)return h-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var c=a.charCodeAt(0),l=a.charCodeAt(1),u=a.charCodeAt(2),d=a.charCodeAt(3),h=this.readData(4);return c===h[0]&&l===h[1]&&u===h[2]&&d===h[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,c},n.exports=o},{"../utils":32,"./DataReader":18}],18:[function(t,n,r){var s=t("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var c,l=0;for(this.checkOffset(a),c=this.index+a-1;c>=this.index;c--)l=(l<<8)+this.byteAt(c);return this.index+=a,l},readString:function(a){return s.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},n.exports=o},{"../utils":32}],19:[function(t,n,r){var s=t("./Uint8ArrayReader");function o(a){s.call(this,a)}t("../utils").inherits(o,s),o.prototype.readData=function(a){this.checkOffset(a);var c=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,c},n.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,n,r){var s=t("./DataReader");function o(a){s.call(this,a)}t("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var c=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,c},n.exports=o},{"../utils":32,"./DataReader":18}],21:[function(t,n,r){var s=t("./ArrayReader");function o(a){s.call(this,a)}t("../utils").inherits(o,s),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,c},n.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(t,n,r){var s=t("../utils"),o=t("../support"),a=t("./ArrayReader"),c=t("./StringReader"),l=t("./NodeBufferReader"),u=t("./Uint8ArrayReader");n.exports=function(d){var h=s.getTypeOf(d);return s.checkSupport(h),h!=="string"||o.uint8array?h==="nodebuffer"?new l(d):o.uint8array?new u(s.transformTo("uint8array",d)):new a(s.transformTo("array",d)):new c(d)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,n,r){r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,n,r){var s=t("./GenericWorker"),o=t("../utils");function a(c){s.call(this,"ConvertWorker to "+c),this.destType=c}o.inherits(a,s),a.prototype.processChunk=function(c){this.push({data:o.transformTo(this.destType,c.data),meta:c.meta})},n.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(t,n,r){var s=t("./GenericWorker"),o=t("../crc32");function a(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(a,s),a.prototype.processChunk=function(c){this.streamInfo.crc32=o(c.data,this.streamInfo.crc32||0),this.push(c)},n.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,n,r){var s=t("../utils"),o=t("./GenericWorker");function a(c){o.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}s.inherits(a,o),a.prototype.processChunk=function(c){if(c){var l=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=l+c.data.length}o.prototype.processChunk.call(this,c)},n.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(t,n,r){var s=t("../utils"),o=t("./GenericWorker");function a(c){o.call(this,"DataWorker");var l=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(u){l.dataIsReady=!0,l.data=u,l.max=u&&u.length||0,l.type=s.getTypeOf(u),l.isPaused||l._tickAndRepeat()},function(u){l.error(u)})}s.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,l=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,l);break;case"uint8array":c=this.data.subarray(this.index,l);break;case"array":case"nodebuffer":c=this.data.slice(this.index,l)}return this.index=l,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(t,n,r){function s(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var c=0;c<this._listeners[o].length;c++)this._listeners[o][c].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(c){a.processChunk(c)}),o.on("end",function(){a.end()}),o.on("error",function(c){a.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},n.exports=s},{}],29:[function(t,n,r){var s=t("../utils"),o=t("./ConvertWorker"),a=t("./GenericWorker"),c=t("../base64"),l=t("../support"),u=t("../external"),d=null;if(l.nodestream)try{d=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function h(b,g){return new u.Promise(function(y,v){var x=[],D=b._internalType,A=b._outputType,T=b._mimeType;b.on("data",function(E,I){x.push(E),g&&g(I)}).on("error",function(E){x=[],v(E)}).on("end",function(){try{var E=(function(I,N,R){switch(I){case"blob":return s.newBlob(s.transformTo("arraybuffer",N),R);case"base64":return c.encode(N);default:return s.transformTo(I,N)}})(A,(function(I,N){var R,P=0,j=null,U=0;for(R=0;R<N.length;R++)U+=N[R].length;switch(I){case"string":return N.join("");case"array":return Array.prototype.concat.apply([],N);case"uint8array":for(j=new Uint8Array(U),R=0;R<N.length;R++)j.set(N[R],P),P+=N[R].length;return j;case"nodebuffer":return Buffer.concat(N);default:throw new Error("concat : unsupported type '"+I+"'")}})(D,x),T);y(E)}catch(I){v(I)}x=[]}).resume()})}function f(b,g,y){var v=g;switch(g){case"blob":case"arraybuffer":v="uint8array";break;case"base64":v="string"}try{this._internalType=v,this._outputType=g,this._mimeType=y,s.checkSupport(v),this._worker=b.pipe(new o(v)),b.lock()}catch(x){this._worker=new a("error"),this._worker.error(x)}}f.prototype={accumulate:function(b){return h(this,b)},on:function(b,g){var y=this;return b==="data"?this._worker.on(b,function(v){g.call(y,v.data,v.meta)}):this._worker.on(b,function(){s.delay(g,arguments,y)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(b){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new d(this,{objectMode:this._outputType!=="nodebuffer"},b)}},n.exports=f},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,n,r){if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",r.nodebuffer=typeof Buffer<"u",r.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")r.blob=!1;else{var s=new ArrayBuffer(0);try{r.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(s),r.blob=o.getBlob("application/zip").size===0}catch{r.blob=!1}}}try{r.nodestream=!!t("readable-stream").Readable}catch{r.nodestream=!1}},{"readable-stream":16}],31:[function(t,n,r){for(var s=t("./utils"),o=t("./support"),a=t("./nodejsUtils"),c=t("./stream/GenericWorker"),l=new Array(256),u=0;u<256;u++)l[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;l[254]=l[254]=1;function d(){c.call(this,"utf-8 decode"),this.leftOver=null}function h(){c.call(this,"utf-8 encode")}r.utf8encode=function(f){return o.nodebuffer?a.newBufferFrom(f,"utf-8"):(function(b){var g,y,v,x,D,A=b.length,T=0;for(x=0;x<A;x++)(64512&(y=b.charCodeAt(x)))==55296&&x+1<A&&(64512&(v=b.charCodeAt(x+1)))==56320&&(y=65536+(y-55296<<10)+(v-56320),x++),T+=y<128?1:y<2048?2:y<65536?3:4;for(g=o.uint8array?new Uint8Array(T):new Array(T),x=D=0;D<T;x++)(64512&(y=b.charCodeAt(x)))==55296&&x+1<A&&(64512&(v=b.charCodeAt(x+1)))==56320&&(y=65536+(y-55296<<10)+(v-56320),x++),y<128?g[D++]=y:(y<2048?g[D++]=192|y>>>6:(y<65536?g[D++]=224|y>>>12:(g[D++]=240|y>>>18,g[D++]=128|y>>>12&63),g[D++]=128|y>>>6&63),g[D++]=128|63&y);return g})(f)},r.utf8decode=function(f){return o.nodebuffer?s.transformTo("nodebuffer",f).toString("utf-8"):(function(b){var g,y,v,x,D=b.length,A=new Array(2*D);for(g=y=0;g<D;)if((v=b[g++])<128)A[y++]=v;else if(4<(x=l[v]))A[y++]=65533,g+=x-1;else{for(v&=x===2?31:x===3?15:7;1<x&&g<D;)v=v<<6|63&b[g++],x--;1<x?A[y++]=65533:v<65536?A[y++]=v:(v-=65536,A[y++]=55296|v>>10&1023,A[y++]=56320|1023&v)}return A.length!==y&&(A.subarray?A=A.subarray(0,y):A.length=y),s.applyFromCharCode(A)})(f=s.transformTo(o.uint8array?"uint8array":"array",f))},s.inherits(d,c),d.prototype.processChunk=function(f){var b=s.transformTo(o.uint8array?"uint8array":"array",f.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var g=b;(b=new Uint8Array(g.length+this.leftOver.length)).set(this.leftOver,0),b.set(g,this.leftOver.length)}else b=this.leftOver.concat(b);this.leftOver=null}var y=(function(x,D){var A;for((D=D||x.length)>x.length&&(D=x.length),A=D-1;0<=A&&(192&x[A])==128;)A--;return A<0||A===0?D:A+l[x[A]]>D?A:D})(b),v=b;y!==b.length&&(o.uint8array?(v=b.subarray(0,y),this.leftOver=b.subarray(y,b.length)):(v=b.slice(0,y),this.leftOver=b.slice(y,b.length))),this.push({data:r.utf8decode(v),meta:f.meta})},d.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=d,s.inherits(h,c),h.prototype.processChunk=function(f){this.push({data:r.utf8encode(f.data),meta:f.meta})},r.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,n,r){var s=t("./support"),o=t("./base64"),a=t("./nodejsUtils"),c=t("./external");function l(g){return g}function u(g,y){for(var v=0;v<g.length;++v)y[v]=255&g.charCodeAt(v);return y}t("setimmediate"),r.newBlob=function(g,y){r.checkSupport("blob");try{return new Blob([g],{type:y})}catch{try{var v=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return v.append(g),v.getBlob(y)}catch{throw new Error("Bug : can't construct the Blob.")}}};var d={stringifyByChunk:function(g,y,v){var x=[],D=0,A=g.length;if(A<=v)return String.fromCharCode.apply(null,g);for(;D<A;)y==="array"||y==="nodebuffer"?x.push(String.fromCharCode.apply(null,g.slice(D,Math.min(D+v,A)))):x.push(String.fromCharCode.apply(null,g.subarray(D,Math.min(D+v,A)))),D+=v;return x.join("")},stringifyByChar:function(g){for(var y="",v=0;v<g.length;v++)y+=String.fromCharCode(g[v]);return y},applyCanBeUsed:{uint8array:(function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}})()}};function h(g){var y=65536,v=r.getTypeOf(g),x=!0;if(v==="uint8array"?x=d.applyCanBeUsed.uint8array:v==="nodebuffer"&&(x=d.applyCanBeUsed.nodebuffer),x)for(;1<y;)try{return d.stringifyByChunk(g,v,y)}catch{y=Math.floor(y/2)}return d.stringifyByChar(g)}function f(g,y){for(var v=0;v<g.length;v++)y[v]=g[v];return y}r.applyFromCharCode=h;var b={};b.string={string:l,array:function(g){return u(g,new Array(g.length))},arraybuffer:function(g){return b.string.uint8array(g).buffer},uint8array:function(g){return u(g,new Uint8Array(g.length))},nodebuffer:function(g){return u(g,a.allocBuffer(g.length))}},b.array={string:h,array:l,arraybuffer:function(g){return new Uint8Array(g).buffer},uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return a.newBufferFrom(g)}},b.arraybuffer={string:function(g){return h(new Uint8Array(g))},array:function(g){return f(new Uint8Array(g),new Array(g.byteLength))},arraybuffer:l,uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return a.newBufferFrom(new Uint8Array(g))}},b.uint8array={string:h,array:function(g){return f(g,new Array(g.length))},arraybuffer:function(g){return g.buffer},uint8array:l,nodebuffer:function(g){return a.newBufferFrom(g)}},b.nodebuffer={string:h,array:function(g){return f(g,new Array(g.length))},arraybuffer:function(g){return b.nodebuffer.uint8array(g).buffer},uint8array:function(g){return f(g,new Uint8Array(g.length))},nodebuffer:l},r.transformTo=function(g,y){if(y=y||"",!g)return y;r.checkSupport(g);var v=r.getTypeOf(y);return b[v][g](y)},r.resolve=function(g){for(var y=g.split("/"),v=[],x=0;x<y.length;x++){var D=y[x];D==="."||D===""&&x!==0&&x!==y.length-1||(D===".."?v.pop():v.push(D))}return v.join("/")},r.getTypeOf=function(g){return typeof g=="string"?"string":Object.prototype.toString.call(g)==="[object Array]"?"array":s.nodebuffer&&a.isBuffer(g)?"nodebuffer":s.uint8array&&g instanceof Uint8Array?"uint8array":s.arraybuffer&&g instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(g){if(!s[g.toLowerCase()])throw new Error(g+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(g){var y,v,x="";for(v=0;v<(g||"").length;v++)x+="\\x"+((y=g.charCodeAt(v))<16?"0":"")+y.toString(16).toUpperCase();return x},r.delay=function(g,y,v){setImmediate(function(){g.apply(v||null,y||[])})},r.inherits=function(g,y){function v(){}v.prototype=y.prototype,g.prototype=new v},r.extend=function(){var g,y,v={};for(g=0;g<arguments.length;g++)for(y in arguments[g])Object.prototype.hasOwnProperty.call(arguments[g],y)&&v[y]===void 0&&(v[y]=arguments[g][y]);return v},r.prepareContent=function(g,y,v,x,D){return c.Promise.resolve(y).then(function(A){return s.blob&&(A instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(A))!==-1)&&typeof FileReader<"u"?new c.Promise(function(T,E){var I=new FileReader;I.onload=function(N){T(N.target.result)},I.onerror=function(N){E(N.target.error)},I.readAsArrayBuffer(A)}):A}).then(function(A){var T=r.getTypeOf(A);return T?(T==="arraybuffer"?A=r.transformTo("uint8array",A):T==="string"&&(D?A=o.decode(A):v&&x!==!0&&(A=(function(E){return u(E,s.uint8array?new Uint8Array(E.length):new Array(E.length))})(A))),A):c.Promise.reject(new Error("Can't read the data of '"+g+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,n,r){var s=t("./reader/readerFor"),o=t("./utils"),a=t("./signature"),c=t("./zipEntry"),l=t("./support");function u(d){this.files=[],this.loadOptions=d}u.prototype={checkSignature:function(d){if(!this.reader.readAndCheckSignature(d)){this.reader.index-=4;var h=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(h)+", expected "+o.pretty(d)+")")}},isSignature:function(d,h){var f=this.reader.index;this.reader.setIndex(d);var b=this.reader.readString(4)===h;return this.reader.setIndex(f),b},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var d=this.reader.readData(this.zipCommentLength),h=l.uint8array?"uint8array":"array",f=o.transformTo(h,d);this.zipComment=this.loadOptions.decodeFileName(f)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var d,h,f,b=this.zip64EndOfCentralSize-44;0<b;)d=this.reader.readInt(2),h=this.reader.readInt(4),f=this.reader.readData(h),this.zip64ExtensibleData[d]={id:d,length:h,value:f}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var d,h;for(d=0;d<this.files.length;d++)h=this.files[d],this.reader.setIndex(h.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),h.readLocalPart(this.reader),h.handleUTF8(),h.processAttributes()},readCentralDir:function(){var d;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(d=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(d);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var d=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(d<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(d);var h=d;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(d=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(d),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var f=this.centralDirOffset+this.centralDirSize;this.zip64&&(f+=20,f+=12+this.zip64EndOfCentralSize);var b=h-f;if(0<b)this.isSignature(h,a.CENTRAL_FILE_HEADER)||(this.reader.zero=b);else if(b<0)throw new Error("Corrupted zip: missing "+Math.abs(b)+" bytes.")},prepareReader:function(d){this.reader=s(d)},load:function(d){this.prepareReader(d),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,n,r){var s=t("./reader/readerFor"),o=t("./utils"),a=t("./compressedObject"),c=t("./crc32"),l=t("./utf8"),u=t("./compressions"),d=t("./support");function h(f,b){this.options=f,this.loadOptions=b}h.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(f){var b,g;if(f.skip(22),this.fileNameLength=f.readInt(2),g=f.readInt(2),this.fileName=f.readData(this.fileNameLength),f.skip(g),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((b=(function(y){for(var v in u)if(Object.prototype.hasOwnProperty.call(u,v)&&u[v].magic===y)return u[v];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,b,f.readData(this.compressedSize))},readCentralPart:function(f){this.versionMadeBy=f.readInt(2),f.skip(2),this.bitFlag=f.readInt(2),this.compressionMethod=f.readString(2),this.date=f.readDate(),this.crc32=f.readInt(4),this.compressedSize=f.readInt(4),this.uncompressedSize=f.readInt(4);var b=f.readInt(2);if(this.extraFieldsLength=f.readInt(2),this.fileCommentLength=f.readInt(2),this.diskNumberStart=f.readInt(2),this.internalFileAttributes=f.readInt(2),this.externalFileAttributes=f.readInt(4),this.localHeaderOffset=f.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");f.skip(b),this.readExtraFields(f),this.parseZIP64ExtraField(f),this.fileComment=f.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var f=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),f==0&&(this.dosPermissions=63&this.externalFileAttributes),f==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var f=s(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=f.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=f.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=f.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=f.readInt(4))}},readExtraFields:function(f){var b,g,y,v=f.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});f.index+4<v;)b=f.readInt(2),g=f.readInt(2),y=f.readData(g),this.extraFields[b]={id:b,length:g,value:y};f.setIndex(v)},handleUTF8:function(){var f=d.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=l.utf8decode(this.fileName),this.fileCommentStr=l.utf8decode(this.fileComment);else{var b=this.findExtraFieldUnicodePath();if(b!==null)this.fileNameStr=b;else{var g=o.transformTo(f,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(g)}var y=this.findExtraFieldUnicodeComment();if(y!==null)this.fileCommentStr=y;else{var v=o.transformTo(f,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(v)}}},findExtraFieldUnicodePath:function(){var f=this.extraFields[28789];if(f){var b=s(f.value);return b.readInt(1)!==1||c(this.fileName)!==b.readInt(4)?null:l.utf8decode(b.readData(f.length-5))}return null},findExtraFieldUnicodeComment:function(){var f=this.extraFields[25461];if(f){var b=s(f.value);return b.readInt(1)!==1||c(this.fileComment)!==b.readInt(4)?null:l.utf8decode(b.readData(f.length-5))}return null}},n.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,n,r){function s(b,g,y){this.name=b,this.dir=y.dir,this.date=y.date,this.comment=y.comment,this.unixPermissions=y.unixPermissions,this.dosPermissions=y.dosPermissions,this._data=g,this._dataBinary=y.binary,this.options={compression:y.compression,compressionOptions:y.compressionOptions}}var o=t("./stream/StreamHelper"),a=t("./stream/DataWorker"),c=t("./utf8"),l=t("./compressedObject"),u=t("./stream/GenericWorker");s.prototype={internalStream:function(b){var g=null,y="string";try{if(!b)throw new Error("No output type specified.");var v=(y=b.toLowerCase())==="string"||y==="text";y!=="binarystring"&&y!=="text"||(y="string"),g=this._decompressWorker();var x=!this._dataBinary;x&&!v&&(g=g.pipe(new c.Utf8EncodeWorker)),!x&&v&&(g=g.pipe(new c.Utf8DecodeWorker))}catch(D){(g=new u("error")).error(D)}return new o(g,y,"")},async:function(b,g){return this.internalStream(b).accumulate(g)},nodeStream:function(b,g){return this.internalStream(b||"nodebuffer").toNodejsStream(g)},_compressWorker:function(b,g){if(this._data instanceof l&&this._data.compression.magic===b.magic)return this._data.getCompressedWorker();var y=this._decompressWorker();return this._dataBinary||(y=y.pipe(new c.Utf8EncodeWorker)),l.createWorkerFrom(y,b,g)},_decompressWorker:function(){return this._data instanceof l?this._data.getContentWorker():this._data instanceof u?this._data:new a(this._data)}};for(var d=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},f=0;f<d.length;f++)s.prototype[d[f]]=h;n.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,n,r){(function(s){var o,a,c=s.MutationObserver||s.WebKitMutationObserver;if(c){var l=0,u=new c(b),d=s.document.createTextNode("");u.observe(d,{characterData:!0}),o=function(){d.data=l=++l%2}}else if(s.setImmediate||s.MessageChannel===void 0)o="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var g=s.document.createElement("script");g.onreadystatechange=function(){b(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:function(){setTimeout(b,0)};else{var h=new s.MessageChannel;h.port1.onmessage=b,o=function(){h.port2.postMessage(0)}}var f=[];function b(){var g,y;a=!0;for(var v=f.length;v;){for(y=f,f=[],g=-1;++g<v;)y[g]();v=f.length}a=!1}n.exports=function(g){f.push(g)!==1||a||o()}}).call(this,typeof Ln<"u"?Ln:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,n,r){var s=t("immediate");function o(){}var a={},c=["REJECTED"],l=["FULFILLED"],u=["PENDING"];function d(v){if(typeof v!="function")throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,v!==o&&g(this,v)}function h(v,x,D){this.promise=v,typeof x=="function"&&(this.onFulfilled=x,this.callFulfilled=this.otherCallFulfilled),typeof D=="function"&&(this.onRejected=D,this.callRejected=this.otherCallRejected)}function f(v,x,D){s(function(){var A;try{A=x(D)}catch(T){return a.reject(v,T)}A===v?a.reject(v,new TypeError("Cannot resolve promise with itself")):a.resolve(v,A)})}function b(v){var x=v&&v.then;if(v&&(typeof v=="object"||typeof v=="function")&&typeof x=="function")return function(){x.apply(v,arguments)}}function g(v,x){var D=!1;function A(I){D||(D=!0,a.reject(v,I))}function T(I){D||(D=!0,a.resolve(v,I))}var E=y(function(){x(T,A)});E.status==="error"&&A(E.value)}function y(v,x){var D={};try{D.value=v(x),D.status="success"}catch(A){D.status="error",D.value=A}return D}(n.exports=d).prototype.finally=function(v){if(typeof v!="function")return this;var x=this.constructor;return this.then(function(D){return x.resolve(v()).then(function(){return D})},function(D){return x.resolve(v()).then(function(){throw D})})},d.prototype.catch=function(v){return this.then(null,v)},d.prototype.then=function(v,x){if(typeof v!="function"&&this.state===l||typeof x!="function"&&this.state===c)return this;var D=new this.constructor(o);return this.state!==u?f(D,this.state===l?v:x,this.outcome):this.queue.push(new h(D,v,x)),D},h.prototype.callFulfilled=function(v){a.resolve(this.promise,v)},h.prototype.otherCallFulfilled=function(v){f(this.promise,this.onFulfilled,v)},h.prototype.callRejected=function(v){a.reject(this.promise,v)},h.prototype.otherCallRejected=function(v){f(this.promise,this.onRejected,v)},a.resolve=function(v,x){var D=y(b,x);if(D.status==="error")return a.reject(v,D.value);var A=D.value;if(A)g(v,A);else{v.state=l,v.outcome=x;for(var T=-1,E=v.queue.length;++T<E;)v.queue[T].callFulfilled(x)}return v},a.reject=function(v,x){v.state=c,v.outcome=x;for(var D=-1,A=v.queue.length;++D<A;)v.queue[D].callRejected(x);return v},d.resolve=function(v){return v instanceof this?v:a.resolve(new this(o),v)},d.reject=function(v){var x=new this(o);return a.reject(x,v)},d.all=function(v){var x=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var D=v.length,A=!1;if(!D)return this.resolve([]);for(var T=new Array(D),E=0,I=-1,N=new this(o);++I<D;)R(v[I],I);return N;function R(P,j){x.resolve(P).then(function(U){T[j]=U,++E!==D||A||(A=!0,a.resolve(N,T))},function(U){A||(A=!0,a.reject(N,U))})}},d.race=function(v){var x=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var D=v.length,A=!1;if(!D)return this.resolve([]);for(var T=-1,E=new this(o);++T<D;)I=v[T],x.resolve(I).then(function(N){A||(A=!0,a.resolve(E,N))},function(N){A||(A=!0,a.reject(E,N))});var I;return E}},{immediate:36}],38:[function(t,n,r){var s={};(0,t("./lib/utils/common").assign)(s,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),n.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,n,r){var s=t("./zlib/deflate"),o=t("./utils/common"),a=t("./utils/strings"),c=t("./zlib/messages"),l=t("./zlib/zstream"),u=Object.prototype.toString,d=0,h=-1,f=0,b=8;function g(v){if(!(this instanceof g))return new g(v);this.options=o.assign({level:h,method:b,chunkSize:16384,windowBits:15,memLevel:8,strategy:f,to:""},v||{});var x=this.options;x.raw&&0<x.windowBits?x.windowBits=-x.windowBits:x.gzip&&0<x.windowBits&&x.windowBits<16&&(x.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var D=s.deflateInit2(this.strm,x.level,x.method,x.windowBits,x.memLevel,x.strategy);if(D!==d)throw new Error(c[D]);if(x.header&&s.deflateSetHeader(this.strm,x.header),x.dictionary){var A;if(A=typeof x.dictionary=="string"?a.string2buf(x.dictionary):u.call(x.dictionary)==="[object ArrayBuffer]"?new Uint8Array(x.dictionary):x.dictionary,(D=s.deflateSetDictionary(this.strm,A))!==d)throw new Error(c[D]);this._dict_set=!0}}function y(v,x){var D=new g(x);if(D.push(v,!0),D.err)throw D.msg||c[D.err];return D.result}g.prototype.push=function(v,x){var D,A,T=this.strm,E=this.options.chunkSize;if(this.ended)return!1;A=x===~~x?x:x===!0?4:0,typeof v=="string"?T.input=a.string2buf(v):u.call(v)==="[object ArrayBuffer]"?T.input=new Uint8Array(v):T.input=v,T.next_in=0,T.avail_in=T.input.length;do{if(T.avail_out===0&&(T.output=new o.Buf8(E),T.next_out=0,T.avail_out=E),(D=s.deflate(T,A))!==1&&D!==d)return this.onEnd(D),!(this.ended=!0);T.avail_out!==0&&(T.avail_in!==0||A!==4&&A!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(T.output,T.next_out))):this.onData(o.shrinkBuf(T.output,T.next_out)))}while((0<T.avail_in||T.avail_out===0)&&D!==1);return A===4?(D=s.deflateEnd(this.strm),this.onEnd(D),this.ended=!0,D===d):A!==2||(this.onEnd(d),!(T.avail_out=0))},g.prototype.onData=function(v){this.chunks.push(v)},g.prototype.onEnd=function(v){v===d&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},r.Deflate=g,r.deflate=y,r.deflateRaw=function(v,x){return(x=x||{}).raw=!0,y(v,x)},r.gzip=function(v,x){return(x=x||{}).gzip=!0,y(v,x)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,n,r){var s=t("./zlib/inflate"),o=t("./utils/common"),a=t("./utils/strings"),c=t("./zlib/constants"),l=t("./zlib/messages"),u=t("./zlib/zstream"),d=t("./zlib/gzheader"),h=Object.prototype.toString;function f(g){if(!(this instanceof f))return new f(g);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},g||{});var y=this.options;y.raw&&0<=y.windowBits&&y.windowBits<16&&(y.windowBits=-y.windowBits,y.windowBits===0&&(y.windowBits=-15)),!(0<=y.windowBits&&y.windowBits<16)||g&&g.windowBits||(y.windowBits+=32),15<y.windowBits&&y.windowBits<48&&(15&y.windowBits)==0&&(y.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var v=s.inflateInit2(this.strm,y.windowBits);if(v!==c.Z_OK)throw new Error(l[v]);this.header=new d,s.inflateGetHeader(this.strm,this.header)}function b(g,y){var v=new f(y);if(v.push(g,!0),v.err)throw v.msg||l[v.err];return v.result}f.prototype.push=function(g,y){var v,x,D,A,T,E,I=this.strm,N=this.options.chunkSize,R=this.options.dictionary,P=!1;if(this.ended)return!1;x=y===~~y?y:y===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof g=="string"?I.input=a.binstring2buf(g):h.call(g)==="[object ArrayBuffer]"?I.input=new Uint8Array(g):I.input=g,I.next_in=0,I.avail_in=I.input.length;do{if(I.avail_out===0&&(I.output=new o.Buf8(N),I.next_out=0,I.avail_out=N),(v=s.inflate(I,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&R&&(E=typeof R=="string"?a.string2buf(R):h.call(R)==="[object ArrayBuffer]"?new Uint8Array(R):R,v=s.inflateSetDictionary(this.strm,E)),v===c.Z_BUF_ERROR&&P===!0&&(v=c.Z_OK,P=!1),v!==c.Z_STREAM_END&&v!==c.Z_OK)return this.onEnd(v),!(this.ended=!0);I.next_out&&(I.avail_out!==0&&v!==c.Z_STREAM_END&&(I.avail_in!==0||x!==c.Z_FINISH&&x!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(D=a.utf8border(I.output,I.next_out),A=I.next_out-D,T=a.buf2string(I.output,D),I.next_out=A,I.avail_out=N-A,A&&o.arraySet(I.output,I.output,D,A,0),this.onData(T)):this.onData(o.shrinkBuf(I.output,I.next_out)))),I.avail_in===0&&I.avail_out===0&&(P=!0)}while((0<I.avail_in||I.avail_out===0)&&v!==c.Z_STREAM_END);return v===c.Z_STREAM_END&&(x=c.Z_FINISH),x===c.Z_FINISH?(v=s.inflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===c.Z_OK):x!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(I.avail_out=0))},f.prototype.onData=function(g){this.chunks.push(g)},f.prototype.onEnd=function(g){g===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},r.Inflate=f,r.inflate=b,r.inflateRaw=function(g,y){return(y=y||{}).raw=!0,b(g,y)},r.ungzip=b},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,n,r){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";r.assign=function(c){for(var l=Array.prototype.slice.call(arguments,1);l.length;){var u=l.shift();if(u){if(typeof u!="object")throw new TypeError(u+"must be non-object");for(var d in u)u.hasOwnProperty(d)&&(c[d]=u[d])}}return c},r.shrinkBuf=function(c,l){return c.length===l?c:c.subarray?c.subarray(0,l):(c.length=l,c)};var o={arraySet:function(c,l,u,d,h){if(l.subarray&&c.subarray)c.set(l.subarray(u,u+d),h);else for(var f=0;f<d;f++)c[h+f]=l[u+f]},flattenChunks:function(c){var l,u,d,h,f,b;for(l=d=0,u=c.length;l<u;l++)d+=c[l].length;for(b=new Uint8Array(d),l=h=0,u=c.length;l<u;l++)f=c[l],b.set(f,h),h+=f.length;return b}},a={arraySet:function(c,l,u,d,h){for(var f=0;f<d;f++)c[h+f]=l[u+f]},flattenChunks:function(c){return[].concat.apply([],c)}};r.setTyped=function(c){c?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,o)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,a))},r.setTyped(s)},{}],42:[function(t,n,r){var s=t("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var c=new s.Buf8(256),l=0;l<256;l++)c[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function u(d,h){if(h<65537&&(d.subarray&&a||!d.subarray&&o))return String.fromCharCode.apply(null,s.shrinkBuf(d,h));for(var f="",b=0;b<h;b++)f+=String.fromCharCode(d[b]);return f}c[254]=c[254]=1,r.string2buf=function(d){var h,f,b,g,y,v=d.length,x=0;for(g=0;g<v;g++)(64512&(f=d.charCodeAt(g)))==55296&&g+1<v&&(64512&(b=d.charCodeAt(g+1)))==56320&&(f=65536+(f-55296<<10)+(b-56320),g++),x+=f<128?1:f<2048?2:f<65536?3:4;for(h=new s.Buf8(x),g=y=0;y<x;g++)(64512&(f=d.charCodeAt(g)))==55296&&g+1<v&&(64512&(b=d.charCodeAt(g+1)))==56320&&(f=65536+(f-55296<<10)+(b-56320),g++),f<128?h[y++]=f:(f<2048?h[y++]=192|f>>>6:(f<65536?h[y++]=224|f>>>12:(h[y++]=240|f>>>18,h[y++]=128|f>>>12&63),h[y++]=128|f>>>6&63),h[y++]=128|63&f);return h},r.buf2binstring=function(d){return u(d,d.length)},r.binstring2buf=function(d){for(var h=new s.Buf8(d.length),f=0,b=h.length;f<b;f++)h[f]=d.charCodeAt(f);return h},r.buf2string=function(d,h){var f,b,g,y,v=h||d.length,x=new Array(2*v);for(f=b=0;f<v;)if((g=d[f++])<128)x[b++]=g;else if(4<(y=c[g]))x[b++]=65533,f+=y-1;else{for(g&=y===2?31:y===3?15:7;1<y&&f<v;)g=g<<6|63&d[f++],y--;1<y?x[b++]=65533:g<65536?x[b++]=g:(g-=65536,x[b++]=55296|g>>10&1023,x[b++]=56320|1023&g)}return u(x,b)},r.utf8border=function(d,h){var f;for((h=h||d.length)>d.length&&(h=d.length),f=h-1;0<=f&&(192&d[f])==128;)f--;return f<0||f===0?h:f+c[d[f]]>h?f:h}},{"./common":41}],43:[function(t,n,r){n.exports=function(s,o,a,c){for(var l=65535&s|0,u=s>>>16&65535|0,d=0;a!==0;){for(a-=d=2e3<a?2e3:a;u=u+(l=l+o[c++]|0)|0,--d;);l%=65521,u%=65521}return l|u<<16|0}},{}],44:[function(t,n,r){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,n,r){var s=(function(){for(var o,a=[],c=0;c<256;c++){o=c;for(var l=0;l<8;l++)o=1&o?3988292384^o>>>1:o>>>1;a[c]=o}return a})();n.exports=function(o,a,c,l){var u=s,d=l+c;o^=-1;for(var h=l;h<d;h++)o=o>>>8^u[255&(o^a[h])];return-1^o}},{}],46:[function(t,n,r){var s,o=t("../utils/common"),a=t("./trees"),c=t("./adler32"),l=t("./crc32"),u=t("./messages"),d=0,h=4,f=0,b=-2,g=-1,y=4,v=2,x=8,D=9,A=286,T=30,E=19,I=2*A+1,N=15,R=3,P=258,j=P+R+1,U=42,B=113,S=1,J=2,q=3,O=4;function K(C,ae){return C.msg=u[ae],ae}function H(C){return(C<<1)-(4<C?9:0)}function Y(C){for(var ae=C.length;0<=--ae;)C[ae]=0}function F(C){var ae=C.state,Q=ae.pending;Q>C.avail_out&&(Q=C.avail_out),Q!==0&&(o.arraySet(C.output,ae.pending_buf,ae.pending_out,Q,C.next_out),C.next_out+=Q,ae.pending_out+=Q,C.total_out+=Q,C.avail_out-=Q,ae.pending-=Q,ae.pending===0&&(ae.pending_out=0))}function X(C,ae){a._tr_flush_block(C,0<=C.block_start?C.block_start:-1,C.strstart-C.block_start,ae),C.block_start=C.strstart,F(C.strm)}function $(C,ae){C.pending_buf[C.pending++]=ae}function ne(C,ae){C.pending_buf[C.pending++]=ae>>>8&255,C.pending_buf[C.pending++]=255&ae}function oe(C,ae){var Q,V,z=C.max_chain_length,ee=C.strstart,ue=C.prev_length,he=C.nice_match,re=C.strstart>C.w_size-j?C.strstart-(C.w_size-j):0,Z=C.window,ie=C.w_mask,ce=C.prev,fe=C.strstart+P,xe=Z[ee+ue-1],se=Z[ee+ue];C.prev_length>=C.good_match&&(z>>=2),he>C.lookahead&&(he=C.lookahead);do if(Z[(Q=ae)+ue]===se&&Z[Q+ue-1]===xe&&Z[Q]===Z[ee]&&Z[++Q]===Z[ee+1]){ee+=2,Q++;do;while(Z[++ee]===Z[++Q]&&Z[++ee]===Z[++Q]&&Z[++ee]===Z[++Q]&&Z[++ee]===Z[++Q]&&Z[++ee]===Z[++Q]&&Z[++ee]===Z[++Q]&&Z[++ee]===Z[++Q]&&Z[++ee]===Z[++Q]&&ee<fe);if(V=P-(fe-ee),ee=fe-P,ue<V){if(C.match_start=ae,he<=(ue=V))break;xe=Z[ee+ue-1],se=Z[ee+ue]}}while((ae=ce[ae&ie])>re&&--z!=0);return ue<=C.lookahead?ue:C.lookahead}function pe(C){var ae,Q,V,z,ee,ue,he,re,Z,ie,ce=C.w_size;do{if(z=C.window_size-C.lookahead-C.strstart,C.strstart>=ce+(ce-j)){for(o.arraySet(C.window,C.window,ce,ce,0),C.match_start-=ce,C.strstart-=ce,C.block_start-=ce,ae=Q=C.hash_size;V=C.head[--ae],C.head[ae]=ce<=V?V-ce:0,--Q;);for(ae=Q=ce;V=C.prev[--ae],C.prev[ae]=ce<=V?V-ce:0,--Q;);z+=ce}if(C.strm.avail_in===0)break;if(ue=C.strm,he=C.window,re=C.strstart+C.lookahead,Z=z,ie=void 0,ie=ue.avail_in,Z<ie&&(ie=Z),Q=ie===0?0:(ue.avail_in-=ie,o.arraySet(he,ue.input,ue.next_in,ie,re),ue.state.wrap===1?ue.adler=c(ue.adler,he,ie,re):ue.state.wrap===2&&(ue.adler=l(ue.adler,he,ie,re)),ue.next_in+=ie,ue.total_in+=ie,ie),C.lookahead+=Q,C.lookahead+C.insert>=R)for(ee=C.strstart-C.insert,C.ins_h=C.window[ee],C.ins_h=(C.ins_h<<C.hash_shift^C.window[ee+1])&C.hash_mask;C.insert&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[ee+R-1])&C.hash_mask,C.prev[ee&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=ee,ee++,C.insert--,!(C.lookahead+C.insert<R)););}while(C.lookahead<j&&C.strm.avail_in!==0)}function le(C,ae){for(var Q,V;;){if(C.lookahead<j){if(pe(C),C.lookahead<j&&ae===d)return S;if(C.lookahead===0)break}if(Q=0,C.lookahead>=R&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+R-1])&C.hash_mask,Q=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),Q!==0&&C.strstart-Q<=C.w_size-j&&(C.match_length=oe(C,Q)),C.match_length>=R)if(V=a._tr_tally(C,C.strstart-C.match_start,C.match_length-R),C.lookahead-=C.match_length,C.match_length<=C.max_lazy_match&&C.lookahead>=R){for(C.match_length--;C.strstart++,C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+R-1])&C.hash_mask,Q=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart,--C.match_length!=0;);C.strstart++}else C.strstart+=C.match_length,C.match_length=0,C.ins_h=C.window[C.strstart],C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+1])&C.hash_mask;else V=a._tr_tally(C,0,C.window[C.strstart]),C.lookahead--,C.strstart++;if(V&&(X(C,!1),C.strm.avail_out===0))return S}return C.insert=C.strstart<R-1?C.strstart:R-1,ae===h?(X(C,!0),C.strm.avail_out===0?q:O):C.last_lit&&(X(C,!1),C.strm.avail_out===0)?S:J}function ge(C,ae){for(var Q,V,z;;){if(C.lookahead<j){if(pe(C),C.lookahead<j&&ae===d)return S;if(C.lookahead===0)break}if(Q=0,C.lookahead>=R&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+R-1])&C.hash_mask,Q=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),C.prev_length=C.match_length,C.prev_match=C.match_start,C.match_length=R-1,Q!==0&&C.prev_length<C.max_lazy_match&&C.strstart-Q<=C.w_size-j&&(C.match_length=oe(C,Q),C.match_length<=5&&(C.strategy===1||C.match_length===R&&4096<C.strstart-C.match_start)&&(C.match_length=R-1)),C.prev_length>=R&&C.match_length<=C.prev_length){for(z=C.strstart+C.lookahead-R,V=a._tr_tally(C,C.strstart-1-C.prev_match,C.prev_length-R),C.lookahead-=C.prev_length-1,C.prev_length-=2;++C.strstart<=z&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+R-1])&C.hash_mask,Q=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),--C.prev_length!=0;);if(C.match_available=0,C.match_length=R-1,C.strstart++,V&&(X(C,!1),C.strm.avail_out===0))return S}else if(C.match_available){if((V=a._tr_tally(C,0,C.window[C.strstart-1]))&&X(C,!1),C.strstart++,C.lookahead--,C.strm.avail_out===0)return S}else C.match_available=1,C.strstart++,C.lookahead--}return C.match_available&&(V=a._tr_tally(C,0,C.window[C.strstart-1]),C.match_available=0),C.insert=C.strstart<R-1?C.strstart:R-1,ae===h?(X(C,!0),C.strm.avail_out===0?q:O):C.last_lit&&(X(C,!1),C.strm.avail_out===0)?S:J}function ye(C,ae,Q,V,z){this.good_length=C,this.max_lazy=ae,this.nice_length=Q,this.max_chain=V,this.func=z}function De(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=x,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*I),this.dyn_dtree=new o.Buf16(2*(2*T+1)),this.bl_tree=new o.Buf16(2*(2*E+1)),Y(this.dyn_ltree),Y(this.dyn_dtree),Y(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(N+1),this.heap=new o.Buf16(2*A+1),Y(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*A+1),Y(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function we(C){var ae;return C&&C.state?(C.total_in=C.total_out=0,C.data_type=v,(ae=C.state).pending=0,ae.pending_out=0,ae.wrap<0&&(ae.wrap=-ae.wrap),ae.status=ae.wrap?U:B,C.adler=ae.wrap===2?0:1,ae.last_flush=d,a._tr_init(ae),f):K(C,b)}function Se(C){var ae=we(C);return ae===f&&(function(Q){Q.window_size=2*Q.w_size,Y(Q.head),Q.max_lazy_match=s[Q.level].max_lazy,Q.good_match=s[Q.level].good_length,Q.nice_match=s[Q.level].nice_length,Q.max_chain_length=s[Q.level].max_chain,Q.strstart=0,Q.block_start=0,Q.lookahead=0,Q.insert=0,Q.match_length=Q.prev_length=R-1,Q.match_available=0,Q.ins_h=0})(C.state),ae}function We(C,ae,Q,V,z,ee){if(!C)return b;var ue=1;if(ae===g&&(ae=6),V<0?(ue=0,V=-V):15<V&&(ue=2,V-=16),z<1||D<z||Q!==x||V<8||15<V||ae<0||9<ae||ee<0||y<ee)return K(C,b);V===8&&(V=9);var he=new De;return(C.state=he).strm=C,he.wrap=ue,he.gzhead=null,he.w_bits=V,he.w_size=1<<he.w_bits,he.w_mask=he.w_size-1,he.hash_bits=z+7,he.hash_size=1<<he.hash_bits,he.hash_mask=he.hash_size-1,he.hash_shift=~~((he.hash_bits+R-1)/R),he.window=new o.Buf8(2*he.w_size),he.head=new o.Buf16(he.hash_size),he.prev=new o.Buf16(he.w_size),he.lit_bufsize=1<<z+6,he.pending_buf_size=4*he.lit_bufsize,he.pending_buf=new o.Buf8(he.pending_buf_size),he.d_buf=1*he.lit_bufsize,he.l_buf=3*he.lit_bufsize,he.level=ae,he.strategy=ee,he.method=Q,Se(C)}s=[new ye(0,0,0,0,function(C,ae){var Q=65535;for(Q>C.pending_buf_size-5&&(Q=C.pending_buf_size-5);;){if(C.lookahead<=1){if(pe(C),C.lookahead===0&&ae===d)return S;if(C.lookahead===0)break}C.strstart+=C.lookahead,C.lookahead=0;var V=C.block_start+Q;if((C.strstart===0||C.strstart>=V)&&(C.lookahead=C.strstart-V,C.strstart=V,X(C,!1),C.strm.avail_out===0)||C.strstart-C.block_start>=C.w_size-j&&(X(C,!1),C.strm.avail_out===0))return S}return C.insert=0,ae===h?(X(C,!0),C.strm.avail_out===0?q:O):(C.strstart>C.block_start&&(X(C,!1),C.strm.avail_out),S)}),new ye(4,4,8,4,le),new ye(4,5,16,8,le),new ye(4,6,32,32,le),new ye(4,4,16,16,ge),new ye(8,16,32,32,ge),new ye(8,16,128,128,ge),new ye(8,32,128,256,ge),new ye(32,128,258,1024,ge),new ye(32,258,258,4096,ge)],r.deflateInit=function(C,ae){return We(C,ae,x,15,8,0)},r.deflateInit2=We,r.deflateReset=Se,r.deflateResetKeep=we,r.deflateSetHeader=function(C,ae){return C&&C.state?C.state.wrap!==2?b:(C.state.gzhead=ae,f):b},r.deflate=function(C,ae){var Q,V,z,ee;if(!C||!C.state||5<ae||ae<0)return C?K(C,b):b;if(V=C.state,!C.output||!C.input&&C.avail_in!==0||V.status===666&&ae!==h)return K(C,C.avail_out===0?-5:b);if(V.strm=C,Q=V.last_flush,V.last_flush=ae,V.status===U)if(V.wrap===2)C.adler=0,$(V,31),$(V,139),$(V,8),V.gzhead?($(V,(V.gzhead.text?1:0)+(V.gzhead.hcrc?2:0)+(V.gzhead.extra?4:0)+(V.gzhead.name?8:0)+(V.gzhead.comment?16:0)),$(V,255&V.gzhead.time),$(V,V.gzhead.time>>8&255),$(V,V.gzhead.time>>16&255),$(V,V.gzhead.time>>24&255),$(V,V.level===9?2:2<=V.strategy||V.level<2?4:0),$(V,255&V.gzhead.os),V.gzhead.extra&&V.gzhead.extra.length&&($(V,255&V.gzhead.extra.length),$(V,V.gzhead.extra.length>>8&255)),V.gzhead.hcrc&&(C.adler=l(C.adler,V.pending_buf,V.pending,0)),V.gzindex=0,V.status=69):($(V,0),$(V,0),$(V,0),$(V,0),$(V,0),$(V,V.level===9?2:2<=V.strategy||V.level<2?4:0),$(V,3),V.status=B);else{var ue=x+(V.w_bits-8<<4)<<8;ue|=(2<=V.strategy||V.level<2?0:V.level<6?1:V.level===6?2:3)<<6,V.strstart!==0&&(ue|=32),ue+=31-ue%31,V.status=B,ne(V,ue),V.strstart!==0&&(ne(V,C.adler>>>16),ne(V,65535&C.adler)),C.adler=1}if(V.status===69)if(V.gzhead.extra){for(z=V.pending;V.gzindex<(65535&V.gzhead.extra.length)&&(V.pending!==V.pending_buf_size||(V.gzhead.hcrc&&V.pending>z&&(C.adler=l(C.adler,V.pending_buf,V.pending-z,z)),F(C),z=V.pending,V.pending!==V.pending_buf_size));)$(V,255&V.gzhead.extra[V.gzindex]),V.gzindex++;V.gzhead.hcrc&&V.pending>z&&(C.adler=l(C.adler,V.pending_buf,V.pending-z,z)),V.gzindex===V.gzhead.extra.length&&(V.gzindex=0,V.status=73)}else V.status=73;if(V.status===73)if(V.gzhead.name){z=V.pending;do{if(V.pending===V.pending_buf_size&&(V.gzhead.hcrc&&V.pending>z&&(C.adler=l(C.adler,V.pending_buf,V.pending-z,z)),F(C),z=V.pending,V.pending===V.pending_buf_size)){ee=1;break}ee=V.gzindex<V.gzhead.name.length?255&V.gzhead.name.charCodeAt(V.gzindex++):0,$(V,ee)}while(ee!==0);V.gzhead.hcrc&&V.pending>z&&(C.adler=l(C.adler,V.pending_buf,V.pending-z,z)),ee===0&&(V.gzindex=0,V.status=91)}else V.status=91;if(V.status===91)if(V.gzhead.comment){z=V.pending;do{if(V.pending===V.pending_buf_size&&(V.gzhead.hcrc&&V.pending>z&&(C.adler=l(C.adler,V.pending_buf,V.pending-z,z)),F(C),z=V.pending,V.pending===V.pending_buf_size)){ee=1;break}ee=V.gzindex<V.gzhead.comment.length?255&V.gzhead.comment.charCodeAt(V.gzindex++):0,$(V,ee)}while(ee!==0);V.gzhead.hcrc&&V.pending>z&&(C.adler=l(C.adler,V.pending_buf,V.pending-z,z)),ee===0&&(V.status=103)}else V.status=103;if(V.status===103&&(V.gzhead.hcrc?(V.pending+2>V.pending_buf_size&&F(C),V.pending+2<=V.pending_buf_size&&($(V,255&C.adler),$(V,C.adler>>8&255),C.adler=0,V.status=B)):V.status=B),V.pending!==0){if(F(C),C.avail_out===0)return V.last_flush=-1,f}else if(C.avail_in===0&&H(ae)<=H(Q)&&ae!==h)return K(C,-5);if(V.status===666&&C.avail_in!==0)return K(C,-5);if(C.avail_in!==0||V.lookahead!==0||ae!==d&&V.status!==666){var he=V.strategy===2?(function(re,Z){for(var ie;;){if(re.lookahead===0&&(pe(re),re.lookahead===0)){if(Z===d)return S;break}if(re.match_length=0,ie=a._tr_tally(re,0,re.window[re.strstart]),re.lookahead--,re.strstart++,ie&&(X(re,!1),re.strm.avail_out===0))return S}return re.insert=0,Z===h?(X(re,!0),re.strm.avail_out===0?q:O):re.last_lit&&(X(re,!1),re.strm.avail_out===0)?S:J})(V,ae):V.strategy===3?(function(re,Z){for(var ie,ce,fe,xe,se=re.window;;){if(re.lookahead<=P){if(pe(re),re.lookahead<=P&&Z===d)return S;if(re.lookahead===0)break}if(re.match_length=0,re.lookahead>=R&&0<re.strstart&&(ce=se[fe=re.strstart-1])===se[++fe]&&ce===se[++fe]&&ce===se[++fe]){xe=re.strstart+P;do;while(ce===se[++fe]&&ce===se[++fe]&&ce===se[++fe]&&ce===se[++fe]&&ce===se[++fe]&&ce===se[++fe]&&ce===se[++fe]&&ce===se[++fe]&&fe<xe);re.match_length=P-(xe-fe),re.match_length>re.lookahead&&(re.match_length=re.lookahead)}if(re.match_length>=R?(ie=a._tr_tally(re,1,re.match_length-R),re.lookahead-=re.match_length,re.strstart+=re.match_length,re.match_length=0):(ie=a._tr_tally(re,0,re.window[re.strstart]),re.lookahead--,re.strstart++),ie&&(X(re,!1),re.strm.avail_out===0))return S}return re.insert=0,Z===h?(X(re,!0),re.strm.avail_out===0?q:O):re.last_lit&&(X(re,!1),re.strm.avail_out===0)?S:J})(V,ae):s[V.level].func(V,ae);if(he!==q&&he!==O||(V.status=666),he===S||he===q)return C.avail_out===0&&(V.last_flush=-1),f;if(he===J&&(ae===1?a._tr_align(V):ae!==5&&(a._tr_stored_block(V,0,0,!1),ae===3&&(Y(V.head),V.lookahead===0&&(V.strstart=0,V.block_start=0,V.insert=0))),F(C),C.avail_out===0))return V.last_flush=-1,f}return ae!==h?f:V.wrap<=0?1:(V.wrap===2?($(V,255&C.adler),$(V,C.adler>>8&255),$(V,C.adler>>16&255),$(V,C.adler>>24&255),$(V,255&C.total_in),$(V,C.total_in>>8&255),$(V,C.total_in>>16&255),$(V,C.total_in>>24&255)):(ne(V,C.adler>>>16),ne(V,65535&C.adler)),F(C),0<V.wrap&&(V.wrap=-V.wrap),V.pending!==0?f:1)},r.deflateEnd=function(C){var ae;return C&&C.state?(ae=C.state.status)!==U&&ae!==69&&ae!==73&&ae!==91&&ae!==103&&ae!==B&&ae!==666?K(C,b):(C.state=null,ae===B?K(C,-3):f):b},r.deflateSetDictionary=function(C,ae){var Q,V,z,ee,ue,he,re,Z,ie=ae.length;if(!C||!C.state||(ee=(Q=C.state).wrap)===2||ee===1&&Q.status!==U||Q.lookahead)return b;for(ee===1&&(C.adler=c(C.adler,ae,ie,0)),Q.wrap=0,ie>=Q.w_size&&(ee===0&&(Y(Q.head),Q.strstart=0,Q.block_start=0,Q.insert=0),Z=new o.Buf8(Q.w_size),o.arraySet(Z,ae,ie-Q.w_size,Q.w_size,0),ae=Z,ie=Q.w_size),ue=C.avail_in,he=C.next_in,re=C.input,C.avail_in=ie,C.next_in=0,C.input=ae,pe(Q);Q.lookahead>=R;){for(V=Q.strstart,z=Q.lookahead-(R-1);Q.ins_h=(Q.ins_h<<Q.hash_shift^Q.window[V+R-1])&Q.hash_mask,Q.prev[V&Q.w_mask]=Q.head[Q.ins_h],Q.head[Q.ins_h]=V,V++,--z;);Q.strstart=V,Q.lookahead=R-1,pe(Q)}return Q.strstart+=Q.lookahead,Q.block_start=Q.strstart,Q.insert=Q.lookahead,Q.lookahead=0,Q.match_length=Q.prev_length=R-1,Q.match_available=0,C.next_in=he,C.input=re,C.avail_in=ue,Q.wrap=ee,f},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,n,r){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,n,r){n.exports=function(s,o){var a,c,l,u,d,h,f,b,g,y,v,x,D,A,T,E,I,N,R,P,j,U,B,S,J;a=s.state,c=s.next_in,S=s.input,l=c+(s.avail_in-5),u=s.next_out,J=s.output,d=u-(o-s.avail_out),h=u+(s.avail_out-257),f=a.dmax,b=a.wsize,g=a.whave,y=a.wnext,v=a.window,x=a.hold,D=a.bits,A=a.lencode,T=a.distcode,E=(1<<a.lenbits)-1,I=(1<<a.distbits)-1;e:do{D<15&&(x+=S[c++]<<D,D+=8,x+=S[c++]<<D,D+=8),N=A[x&E];t:for(;;){if(x>>>=R=N>>>24,D-=R,(R=N>>>16&255)===0)J[u++]=65535&N;else{if(!(16&R)){if((64&R)==0){N=A[(65535&N)+(x&(1<<R)-1)];continue t}if(32&R){a.mode=12;break e}s.msg="invalid literal/length code",a.mode=30;break e}P=65535&N,(R&=15)&&(D<R&&(x+=S[c++]<<D,D+=8),P+=x&(1<<R)-1,x>>>=R,D-=R),D<15&&(x+=S[c++]<<D,D+=8,x+=S[c++]<<D,D+=8),N=T[x&I];n:for(;;){if(x>>>=R=N>>>24,D-=R,!(16&(R=N>>>16&255))){if((64&R)==0){N=T[(65535&N)+(x&(1<<R)-1)];continue n}s.msg="invalid distance code",a.mode=30;break e}if(j=65535&N,D<(R&=15)&&(x+=S[c++]<<D,(D+=8)<R&&(x+=S[c++]<<D,D+=8)),f<(j+=x&(1<<R)-1)){s.msg="invalid distance too far back",a.mode=30;break e}if(x>>>=R,D-=R,(R=u-d)<j){if(g<(R=j-R)&&a.sane){s.msg="invalid distance too far back",a.mode=30;break e}if(B=v,(U=0)===y){if(U+=b-R,R<P){for(P-=R;J[u++]=v[U++],--R;);U=u-j,B=J}}else if(y<R){if(U+=b+y-R,(R-=y)<P){for(P-=R;J[u++]=v[U++],--R;);if(U=0,y<P){for(P-=R=y;J[u++]=v[U++],--R;);U=u-j,B=J}}}else if(U+=y-R,R<P){for(P-=R;J[u++]=v[U++],--R;);U=u-j,B=J}for(;2<P;)J[u++]=B[U++],J[u++]=B[U++],J[u++]=B[U++],P-=3;P&&(J[u++]=B[U++],1<P&&(J[u++]=B[U++]))}else{for(U=u-j;J[u++]=J[U++],J[u++]=J[U++],J[u++]=J[U++],2<(P-=3););P&&(J[u++]=J[U++],1<P&&(J[u++]=J[U++]))}break}}break}}while(c<l&&u<h);c-=P=D>>3,x&=(1<<(D-=P<<3))-1,s.next_in=c,s.next_out=u,s.avail_in=c<l?l-c+5:5-(c-l),s.avail_out=u<h?h-u+257:257-(u-h),a.hold=x,a.bits=D}},{}],49:[function(t,n,r){var s=t("../utils/common"),o=t("./adler32"),a=t("./crc32"),c=t("./inffast"),l=t("./inftrees"),u=1,d=2,h=0,f=-2,b=1,g=852,y=592;function v(U){return(U>>>24&255)+(U>>>8&65280)+((65280&U)<<8)+((255&U)<<24)}function x(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function D(U){var B;return U&&U.state?(B=U.state,U.total_in=U.total_out=B.total=0,U.msg="",B.wrap&&(U.adler=1&B.wrap),B.mode=b,B.last=0,B.havedict=0,B.dmax=32768,B.head=null,B.hold=0,B.bits=0,B.lencode=B.lendyn=new s.Buf32(g),B.distcode=B.distdyn=new s.Buf32(y),B.sane=1,B.back=-1,h):f}function A(U){var B;return U&&U.state?((B=U.state).wsize=0,B.whave=0,B.wnext=0,D(U)):f}function T(U,B){var S,J;return U&&U.state?(J=U.state,B<0?(S=0,B=-B):(S=1+(B>>4),B<48&&(B&=15)),B&&(B<8||15<B)?f:(J.window!==null&&J.wbits!==B&&(J.window=null),J.wrap=S,J.wbits=B,A(U))):f}function E(U,B){var S,J;return U?(J=new x,(U.state=J).window=null,(S=T(U,B))!==h&&(U.state=null),S):f}var I,N,R=!0;function P(U){if(R){var B;for(I=new s.Buf32(512),N=new s.Buf32(32),B=0;B<144;)U.lens[B++]=8;for(;B<256;)U.lens[B++]=9;for(;B<280;)U.lens[B++]=7;for(;B<288;)U.lens[B++]=8;for(l(u,U.lens,0,288,I,0,U.work,{bits:9}),B=0;B<32;)U.lens[B++]=5;l(d,U.lens,0,32,N,0,U.work,{bits:5}),R=!1}U.lencode=I,U.lenbits=9,U.distcode=N,U.distbits=5}function j(U,B,S,J){var q,O=U.state;return O.window===null&&(O.wsize=1<<O.wbits,O.wnext=0,O.whave=0,O.window=new s.Buf8(O.wsize)),J>=O.wsize?(s.arraySet(O.window,B,S-O.wsize,O.wsize,0),O.wnext=0,O.whave=O.wsize):(J<(q=O.wsize-O.wnext)&&(q=J),s.arraySet(O.window,B,S-J,q,O.wnext),(J-=q)?(s.arraySet(O.window,B,S-J,J,0),O.wnext=J,O.whave=O.wsize):(O.wnext+=q,O.wnext===O.wsize&&(O.wnext=0),O.whave<O.wsize&&(O.whave+=q))),0}r.inflateReset=A,r.inflateReset2=T,r.inflateResetKeep=D,r.inflateInit=function(U){return E(U,15)},r.inflateInit2=E,r.inflate=function(U,B){var S,J,q,O,K,H,Y,F,X,$,ne,oe,pe,le,ge,ye,De,we,Se,We,C,ae,Q,V,z=0,ee=new s.Buf8(4),ue=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!U||!U.state||!U.output||!U.input&&U.avail_in!==0)return f;(S=U.state).mode===12&&(S.mode=13),K=U.next_out,q=U.output,Y=U.avail_out,O=U.next_in,J=U.input,H=U.avail_in,F=S.hold,X=S.bits,$=H,ne=Y,ae=h;e:for(;;)switch(S.mode){case b:if(S.wrap===0){S.mode=13;break}for(;X<16;){if(H===0)break e;H--,F+=J[O++]<<X,X+=8}if(2&S.wrap&&F===35615){ee[S.check=0]=255&F,ee[1]=F>>>8&255,S.check=a(S.check,ee,2,0),X=F=0,S.mode=2;break}if(S.flags=0,S.head&&(S.head.done=!1),!(1&S.wrap)||(((255&F)<<8)+(F>>8))%31){U.msg="incorrect header check",S.mode=30;break}if((15&F)!=8){U.msg="unknown compression method",S.mode=30;break}if(X-=4,C=8+(15&(F>>>=4)),S.wbits===0)S.wbits=C;else if(C>S.wbits){U.msg="invalid window size",S.mode=30;break}S.dmax=1<<C,U.adler=S.check=1,S.mode=512&F?10:12,X=F=0;break;case 2:for(;X<16;){if(H===0)break e;H--,F+=J[O++]<<X,X+=8}if(S.flags=F,(255&S.flags)!=8){U.msg="unknown compression method",S.mode=30;break}if(57344&S.flags){U.msg="unknown header flags set",S.mode=30;break}S.head&&(S.head.text=F>>8&1),512&S.flags&&(ee[0]=255&F,ee[1]=F>>>8&255,S.check=a(S.check,ee,2,0)),X=F=0,S.mode=3;case 3:for(;X<32;){if(H===0)break e;H--,F+=J[O++]<<X,X+=8}S.head&&(S.head.time=F),512&S.flags&&(ee[0]=255&F,ee[1]=F>>>8&255,ee[2]=F>>>16&255,ee[3]=F>>>24&255,S.check=a(S.check,ee,4,0)),X=F=0,S.mode=4;case 4:for(;X<16;){if(H===0)break e;H--,F+=J[O++]<<X,X+=8}S.head&&(S.head.xflags=255&F,S.head.os=F>>8),512&S.flags&&(ee[0]=255&F,ee[1]=F>>>8&255,S.check=a(S.check,ee,2,0)),X=F=0,S.mode=5;case 5:if(1024&S.flags){for(;X<16;){if(H===0)break e;H--,F+=J[O++]<<X,X+=8}S.length=F,S.head&&(S.head.extra_len=F),512&S.flags&&(ee[0]=255&F,ee[1]=F>>>8&255,S.check=a(S.check,ee,2,0)),X=F=0}else S.head&&(S.head.extra=null);S.mode=6;case 6:if(1024&S.flags&&(H<(oe=S.length)&&(oe=H),oe&&(S.head&&(C=S.head.extra_len-S.length,S.head.extra||(S.head.extra=new Array(S.head.extra_len)),s.arraySet(S.head.extra,J,O,oe,C)),512&S.flags&&(S.check=a(S.check,J,oe,O)),H-=oe,O+=oe,S.length-=oe),S.length))break e;S.length=0,S.mode=7;case 7:if(2048&S.flags){if(H===0)break e;for(oe=0;C=J[O+oe++],S.head&&C&&S.length<65536&&(S.head.name+=String.fromCharCode(C)),C&&oe<H;);if(512&S.flags&&(S.check=a(S.check,J,oe,O)),H-=oe,O+=oe,C)break e}else S.head&&(S.head.name=null);S.length=0,S.mode=8;case 8:if(4096&S.flags){if(H===0)break e;for(oe=0;C=J[O+oe++],S.head&&C&&S.length<65536&&(S.head.comment+=String.fromCharCode(C)),C&&oe<H;);if(512&S.flags&&(S.check=a(S.check,J,oe,O)),H-=oe,O+=oe,C)break e}else S.head&&(S.head.comment=null);S.mode=9;case 9:if(512&S.flags){for(;X<16;){if(H===0)break e;H--,F+=J[O++]<<X,X+=8}if(F!==(65535&S.check)){U.msg="header crc mismatch",S.mode=30;break}X=F=0}S.head&&(S.head.hcrc=S.flags>>9&1,S.head.done=!0),U.adler=S.check=0,S.mode=12;break;case 10:for(;X<32;){if(H===0)break e;H--,F+=J[O++]<<X,X+=8}U.adler=S.check=v(F),X=F=0,S.mode=11;case 11:if(S.havedict===0)return U.next_out=K,U.avail_out=Y,U.next_in=O,U.avail_in=H,S.hold=F,S.bits=X,2;U.adler=S.check=1,S.mode=12;case 12:if(B===5||B===6)break e;case 13:if(S.last){F>>>=7&X,X-=7&X,S.mode=27;break}for(;X<3;){if(H===0)break e;H--,F+=J[O++]<<X,X+=8}switch(S.last=1&F,X-=1,3&(F>>>=1)){case 0:S.mode=14;break;case 1:if(P(S),S.mode=20,B!==6)break;F>>>=2,X-=2;break e;case 2:S.mode=17;break;case 3:U.msg="invalid block type",S.mode=30}F>>>=2,X-=2;break;case 14:for(F>>>=7&X,X-=7&X;X<32;){if(H===0)break e;H--,F+=J[O++]<<X,X+=8}if((65535&F)!=(F>>>16^65535)){U.msg="invalid stored block lengths",S.mode=30;break}if(S.length=65535&F,X=F=0,S.mode=15,B===6)break e;case 15:S.mode=16;case 16:if(oe=S.length){if(H<oe&&(oe=H),Y<oe&&(oe=Y),oe===0)break e;s.arraySet(q,J,O,oe,K),H-=oe,O+=oe,Y-=oe,K+=oe,S.length-=oe;break}S.mode=12;break;case 17:for(;X<14;){if(H===0)break e;H--,F+=J[O++]<<X,X+=8}if(S.nlen=257+(31&F),F>>>=5,X-=5,S.ndist=1+(31&F),F>>>=5,X-=5,S.ncode=4+(15&F),F>>>=4,X-=4,286<S.nlen||30<S.ndist){U.msg="too many length or distance symbols",S.mode=30;break}S.have=0,S.mode=18;case 18:for(;S.have<S.ncode;){for(;X<3;){if(H===0)break e;H--,F+=J[O++]<<X,X+=8}S.lens[ue[S.have++]]=7&F,F>>>=3,X-=3}for(;S.have<19;)S.lens[ue[S.have++]]=0;if(S.lencode=S.lendyn,S.lenbits=7,Q={bits:S.lenbits},ae=l(0,S.lens,0,19,S.lencode,0,S.work,Q),S.lenbits=Q.bits,ae){U.msg="invalid code lengths set",S.mode=30;break}S.have=0,S.mode=19;case 19:for(;S.have<S.nlen+S.ndist;){for(;ye=(z=S.lencode[F&(1<<S.lenbits)-1])>>>16&255,De=65535&z,!((ge=z>>>24)<=X);){if(H===0)break e;H--,F+=J[O++]<<X,X+=8}if(De<16)F>>>=ge,X-=ge,S.lens[S.have++]=De;else{if(De===16){for(V=ge+2;X<V;){if(H===0)break e;H--,F+=J[O++]<<X,X+=8}if(F>>>=ge,X-=ge,S.have===0){U.msg="invalid bit length repeat",S.mode=30;break}C=S.lens[S.have-1],oe=3+(3&F),F>>>=2,X-=2}else if(De===17){for(V=ge+3;X<V;){if(H===0)break e;H--,F+=J[O++]<<X,X+=8}X-=ge,C=0,oe=3+(7&(F>>>=ge)),F>>>=3,X-=3}else{for(V=ge+7;X<V;){if(H===0)break e;H--,F+=J[O++]<<X,X+=8}X-=ge,C=0,oe=11+(127&(F>>>=ge)),F>>>=7,X-=7}if(S.have+oe>S.nlen+S.ndist){U.msg="invalid bit length repeat",S.mode=30;break}for(;oe--;)S.lens[S.have++]=C}}if(S.mode===30)break;if(S.lens[256]===0){U.msg="invalid code -- missing end-of-block",S.mode=30;break}if(S.lenbits=9,Q={bits:S.lenbits},ae=l(u,S.lens,0,S.nlen,S.lencode,0,S.work,Q),S.lenbits=Q.bits,ae){U.msg="invalid literal/lengths set",S.mode=30;break}if(S.distbits=6,S.distcode=S.distdyn,Q={bits:S.distbits},ae=l(d,S.lens,S.nlen,S.ndist,S.distcode,0,S.work,Q),S.distbits=Q.bits,ae){U.msg="invalid distances set",S.mode=30;break}if(S.mode=20,B===6)break e;case 20:S.mode=21;case 21:if(6<=H&&258<=Y){U.next_out=K,U.avail_out=Y,U.next_in=O,U.avail_in=H,S.hold=F,S.bits=X,c(U,ne),K=U.next_out,q=U.output,Y=U.avail_out,O=U.next_in,J=U.input,H=U.avail_in,F=S.hold,X=S.bits,S.mode===12&&(S.back=-1);break}for(S.back=0;ye=(z=S.lencode[F&(1<<S.lenbits)-1])>>>16&255,De=65535&z,!((ge=z>>>24)<=X);){if(H===0)break e;H--,F+=J[O++]<<X,X+=8}if(ye&&(240&ye)==0){for(we=ge,Se=ye,We=De;ye=(z=S.lencode[We+((F&(1<<we+Se)-1)>>we)])>>>16&255,De=65535&z,!(we+(ge=z>>>24)<=X);){if(H===0)break e;H--,F+=J[O++]<<X,X+=8}F>>>=we,X-=we,S.back+=we}if(F>>>=ge,X-=ge,S.back+=ge,S.length=De,ye===0){S.mode=26;break}if(32&ye){S.back=-1,S.mode=12;break}if(64&ye){U.msg="invalid literal/length code",S.mode=30;break}S.extra=15&ye,S.mode=22;case 22:if(S.extra){for(V=S.extra;X<V;){if(H===0)break e;H--,F+=J[O++]<<X,X+=8}S.length+=F&(1<<S.extra)-1,F>>>=S.extra,X-=S.extra,S.back+=S.extra}S.was=S.length,S.mode=23;case 23:for(;ye=(z=S.distcode[F&(1<<S.distbits)-1])>>>16&255,De=65535&z,!((ge=z>>>24)<=X);){if(H===0)break e;H--,F+=J[O++]<<X,X+=8}if((240&ye)==0){for(we=ge,Se=ye,We=De;ye=(z=S.distcode[We+((F&(1<<we+Se)-1)>>we)])>>>16&255,De=65535&z,!(we+(ge=z>>>24)<=X);){if(H===0)break e;H--,F+=J[O++]<<X,X+=8}F>>>=we,X-=we,S.back+=we}if(F>>>=ge,X-=ge,S.back+=ge,64&ye){U.msg="invalid distance code",S.mode=30;break}S.offset=De,S.extra=15&ye,S.mode=24;case 24:if(S.extra){for(V=S.extra;X<V;){if(H===0)break e;H--,F+=J[O++]<<X,X+=8}S.offset+=F&(1<<S.extra)-1,F>>>=S.extra,X-=S.extra,S.back+=S.extra}if(S.offset>S.dmax){U.msg="invalid distance too far back",S.mode=30;break}S.mode=25;case 25:if(Y===0)break e;if(oe=ne-Y,S.offset>oe){if((oe=S.offset-oe)>S.whave&&S.sane){U.msg="invalid distance too far back",S.mode=30;break}pe=oe>S.wnext?(oe-=S.wnext,S.wsize-oe):S.wnext-oe,oe>S.length&&(oe=S.length),le=S.window}else le=q,pe=K-S.offset,oe=S.length;for(Y<oe&&(oe=Y),Y-=oe,S.length-=oe;q[K++]=le[pe++],--oe;);S.length===0&&(S.mode=21);break;case 26:if(Y===0)break e;q[K++]=S.length,Y--,S.mode=21;break;case 27:if(S.wrap){for(;X<32;){if(H===0)break e;H--,F|=J[O++]<<X,X+=8}if(ne-=Y,U.total_out+=ne,S.total+=ne,ne&&(U.adler=S.check=S.flags?a(S.check,q,ne,K-ne):o(S.check,q,ne,K-ne)),ne=Y,(S.flags?F:v(F))!==S.check){U.msg="incorrect data check",S.mode=30;break}X=F=0}S.mode=28;case 28:if(S.wrap&&S.flags){for(;X<32;){if(H===0)break e;H--,F+=J[O++]<<X,X+=8}if(F!==(4294967295&S.total)){U.msg="incorrect length check",S.mode=30;break}X=F=0}S.mode=29;case 29:ae=1;break e;case 30:ae=-3;break e;case 31:return-4;case 32:default:return f}return U.next_out=K,U.avail_out=Y,U.next_in=O,U.avail_in=H,S.hold=F,S.bits=X,(S.wsize||ne!==U.avail_out&&S.mode<30&&(S.mode<27||B!==4))&&j(U,U.output,U.next_out,ne-U.avail_out)?(S.mode=31,-4):($-=U.avail_in,ne-=U.avail_out,U.total_in+=$,U.total_out+=ne,S.total+=ne,S.wrap&&ne&&(U.adler=S.check=S.flags?a(S.check,q,ne,U.next_out-ne):o(S.check,q,ne,U.next_out-ne)),U.data_type=S.bits+(S.last?64:0)+(S.mode===12?128:0)+(S.mode===20||S.mode===15?256:0),($==0&&ne===0||B===4)&&ae===h&&(ae=-5),ae)},r.inflateEnd=function(U){if(!U||!U.state)return f;var B=U.state;return B.window&&(B.window=null),U.state=null,h},r.inflateGetHeader=function(U,B){var S;return U&&U.state?(2&(S=U.state).wrap)==0?f:((S.head=B).done=!1,h):f},r.inflateSetDictionary=function(U,B){var S,J=B.length;return U&&U.state?(S=U.state).wrap!==0&&S.mode!==11?f:S.mode===11&&o(1,B,J,0)!==S.check?-3:j(U,B,J,J)?(S.mode=31,-4):(S.havedict=1,h):f},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,n,r){var s=t("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(u,d,h,f,b,g,y,v){var x,D,A,T,E,I,N,R,P,j=v.bits,U=0,B=0,S=0,J=0,q=0,O=0,K=0,H=0,Y=0,F=0,X=null,$=0,ne=new s.Buf16(16),oe=new s.Buf16(16),pe=null,le=0;for(U=0;U<=15;U++)ne[U]=0;for(B=0;B<f;B++)ne[d[h+B]]++;for(q=j,J=15;1<=J&&ne[J]===0;J--);if(J<q&&(q=J),J===0)return b[g++]=20971520,b[g++]=20971520,v.bits=1,0;for(S=1;S<J&&ne[S]===0;S++);for(q<S&&(q=S),U=H=1;U<=15;U++)if(H<<=1,(H-=ne[U])<0)return-1;if(0<H&&(u===0||J!==1))return-1;for(oe[1]=0,U=1;U<15;U++)oe[U+1]=oe[U]+ne[U];for(B=0;B<f;B++)d[h+B]!==0&&(y[oe[d[h+B]]++]=B);if(I=u===0?(X=pe=y,19):u===1?(X=o,$-=257,pe=a,le-=257,256):(X=c,pe=l,-1),U=S,E=g,K=B=F=0,A=-1,T=(Y=1<<(O=q))-1,u===1&&852<Y||u===2&&592<Y)return 1;for(;;){for(N=U-K,P=y[B]<I?(R=0,y[B]):y[B]>I?(R=pe[le+y[B]],X[$+y[B]]):(R=96,0),x=1<<U-K,S=D=1<<O;b[E+(F>>K)+(D-=x)]=N<<24|R<<16|P|0,D!==0;);for(x=1<<U-1;F&x;)x>>=1;if(x!==0?(F&=x-1,F+=x):F=0,B++,--ne[U]==0){if(U===J)break;U=d[h+y[B]]}if(q<U&&(F&T)!==A){for(K===0&&(K=q),E+=S,H=1<<(O=U-K);O+K<J&&!((H-=ne[O+K])<=0);)O++,H<<=1;if(Y+=1<<O,u===1&&852<Y||u===2&&592<Y)return 1;b[A=F&T]=q<<24|O<<16|E-g|0}}return F!==0&&(b[E+F]=U-K<<24|64<<16|0),v.bits=q,0}},{"../utils/common":41}],51:[function(t,n,r){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,n,r){var s=t("../utils/common"),o=0,a=1;function c(z){for(var ee=z.length;0<=--ee;)z[ee]=0}var l=0,u=29,d=256,h=d+1+u,f=30,b=19,g=2*h+1,y=15,v=16,x=7,D=256,A=16,T=17,E=18,I=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],N=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],R=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],P=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],j=new Array(2*(h+2));c(j);var U=new Array(2*f);c(U);var B=new Array(512);c(B);var S=new Array(256);c(S);var J=new Array(u);c(J);var q,O,K,H=new Array(f);function Y(z,ee,ue,he,re){this.static_tree=z,this.extra_bits=ee,this.extra_base=ue,this.elems=he,this.max_length=re,this.has_stree=z&&z.length}function F(z,ee){this.dyn_tree=z,this.max_code=0,this.stat_desc=ee}function X(z){return z<256?B[z]:B[256+(z>>>7)]}function $(z,ee){z.pending_buf[z.pending++]=255&ee,z.pending_buf[z.pending++]=ee>>>8&255}function ne(z,ee,ue){z.bi_valid>v-ue?(z.bi_buf|=ee<<z.bi_valid&65535,$(z,z.bi_buf),z.bi_buf=ee>>v-z.bi_valid,z.bi_valid+=ue-v):(z.bi_buf|=ee<<z.bi_valid&65535,z.bi_valid+=ue)}function oe(z,ee,ue){ne(z,ue[2*ee],ue[2*ee+1])}function pe(z,ee){for(var ue=0;ue|=1&z,z>>>=1,ue<<=1,0<--ee;);return ue>>>1}function le(z,ee,ue){var he,re,Z=new Array(y+1),ie=0;for(he=1;he<=y;he++)Z[he]=ie=ie+ue[he-1]<<1;for(re=0;re<=ee;re++){var ce=z[2*re+1];ce!==0&&(z[2*re]=pe(Z[ce]++,ce))}}function ge(z){var ee;for(ee=0;ee<h;ee++)z.dyn_ltree[2*ee]=0;for(ee=0;ee<f;ee++)z.dyn_dtree[2*ee]=0;for(ee=0;ee<b;ee++)z.bl_tree[2*ee]=0;z.dyn_ltree[2*D]=1,z.opt_len=z.static_len=0,z.last_lit=z.matches=0}function ye(z){8<z.bi_valid?$(z,z.bi_buf):0<z.bi_valid&&(z.pending_buf[z.pending++]=z.bi_buf),z.bi_buf=0,z.bi_valid=0}function De(z,ee,ue,he){var re=2*ee,Z=2*ue;return z[re]<z[Z]||z[re]===z[Z]&&he[ee]<=he[ue]}function we(z,ee,ue){for(var he=z.heap[ue],re=ue<<1;re<=z.heap_len&&(re<z.heap_len&&De(ee,z.heap[re+1],z.heap[re],z.depth)&&re++,!De(ee,he,z.heap[re],z.depth));)z.heap[ue]=z.heap[re],ue=re,re<<=1;z.heap[ue]=he}function Se(z,ee,ue){var he,re,Z,ie,ce=0;if(z.last_lit!==0)for(;he=z.pending_buf[z.d_buf+2*ce]<<8|z.pending_buf[z.d_buf+2*ce+1],re=z.pending_buf[z.l_buf+ce],ce++,he===0?oe(z,re,ee):(oe(z,(Z=S[re])+d+1,ee),(ie=I[Z])!==0&&ne(z,re-=J[Z],ie),oe(z,Z=X(--he),ue),(ie=N[Z])!==0&&ne(z,he-=H[Z],ie)),ce<z.last_lit;);oe(z,D,ee)}function We(z,ee){var ue,he,re,Z=ee.dyn_tree,ie=ee.stat_desc.static_tree,ce=ee.stat_desc.has_stree,fe=ee.stat_desc.elems,xe=-1;for(z.heap_len=0,z.heap_max=g,ue=0;ue<fe;ue++)Z[2*ue]!==0?(z.heap[++z.heap_len]=xe=ue,z.depth[ue]=0):Z[2*ue+1]=0;for(;z.heap_len<2;)Z[2*(re=z.heap[++z.heap_len]=xe<2?++xe:0)]=1,z.depth[re]=0,z.opt_len--,ce&&(z.static_len-=ie[2*re+1]);for(ee.max_code=xe,ue=z.heap_len>>1;1<=ue;ue--)we(z,Z,ue);for(re=fe;ue=z.heap[1],z.heap[1]=z.heap[z.heap_len--],we(z,Z,1),he=z.heap[1],z.heap[--z.heap_max]=ue,z.heap[--z.heap_max]=he,Z[2*re]=Z[2*ue]+Z[2*he],z.depth[re]=(z.depth[ue]>=z.depth[he]?z.depth[ue]:z.depth[he])+1,Z[2*ue+1]=Z[2*he+1]=re,z.heap[1]=re++,we(z,Z,1),2<=z.heap_len;);z.heap[--z.heap_max]=z.heap[1],(function(se,me){var be,_e,Ie,Re,Je,fn,Ct=me.dyn_tree,Io=me.max_code,yr=me.stat_desc.static_tree,Wu=me.stat_desc.has_stree,tc=me.stat_desc.extra_bits,nc=me.stat_desc.extra_base,k=me.stat_desc.max_length,G=0;for(Re=0;Re<=y;Re++)se.bl_count[Re]=0;for(Ct[2*se.heap[se.heap_max]+1]=0,be=se.heap_max+1;be<g;be++)k<(Re=Ct[2*Ct[2*(_e=se.heap[be])+1]+1]+1)&&(Re=k,G++),Ct[2*_e+1]=Re,Io<_e||(se.bl_count[Re]++,Je=0,nc<=_e&&(Je=tc[_e-nc]),fn=Ct[2*_e],se.opt_len+=fn*(Re+Je),Wu&&(se.static_len+=fn*(yr[2*_e+1]+Je)));if(G!==0){do{for(Re=k-1;se.bl_count[Re]===0;)Re--;se.bl_count[Re]--,se.bl_count[Re+1]+=2,se.bl_count[k]--,G-=2}while(0<G);for(Re=k;Re!==0;Re--)for(_e=se.bl_count[Re];_e!==0;)Io<(Ie=se.heap[--be])||(Ct[2*Ie+1]!==Re&&(se.opt_len+=(Re-Ct[2*Ie+1])*Ct[2*Ie],Ct[2*Ie+1]=Re),_e--)}})(z,ee),le(Z,xe,z.bl_count)}function C(z,ee,ue){var he,re,Z=-1,ie=ee[1],ce=0,fe=7,xe=4;for(ie===0&&(fe=138,xe=3),ee[2*(ue+1)+1]=65535,he=0;he<=ue;he++)re=ie,ie=ee[2*(he+1)+1],++ce<fe&&re===ie||(ce<xe?z.bl_tree[2*re]+=ce:re!==0?(re!==Z&&z.bl_tree[2*re]++,z.bl_tree[2*A]++):ce<=10?z.bl_tree[2*T]++:z.bl_tree[2*E]++,Z=re,xe=(ce=0)===ie?(fe=138,3):re===ie?(fe=6,3):(fe=7,4))}function ae(z,ee,ue){var he,re,Z=-1,ie=ee[1],ce=0,fe=7,xe=4;for(ie===0&&(fe=138,xe=3),he=0;he<=ue;he++)if(re=ie,ie=ee[2*(he+1)+1],!(++ce<fe&&re===ie)){if(ce<xe)for(;oe(z,re,z.bl_tree),--ce!=0;);else re!==0?(re!==Z&&(oe(z,re,z.bl_tree),ce--),oe(z,A,z.bl_tree),ne(z,ce-3,2)):ce<=10?(oe(z,T,z.bl_tree),ne(z,ce-3,3)):(oe(z,E,z.bl_tree),ne(z,ce-11,7));Z=re,xe=(ce=0)===ie?(fe=138,3):re===ie?(fe=6,3):(fe=7,4)}}c(H);var Q=!1;function V(z,ee,ue,he){ne(z,(l<<1)+(he?1:0),3),(function(re,Z,ie,ce){ye(re),$(re,ie),$(re,~ie),s.arraySet(re.pending_buf,re.window,Z,ie,re.pending),re.pending+=ie})(z,ee,ue)}r._tr_init=function(z){Q||((function(){var ee,ue,he,re,Z,ie=new Array(y+1);for(re=he=0;re<u-1;re++)for(J[re]=he,ee=0;ee<1<<I[re];ee++)S[he++]=re;for(S[he-1]=re,re=Z=0;re<16;re++)for(H[re]=Z,ee=0;ee<1<<N[re];ee++)B[Z++]=re;for(Z>>=7;re<f;re++)for(H[re]=Z<<7,ee=0;ee<1<<N[re]-7;ee++)B[256+Z++]=re;for(ue=0;ue<=y;ue++)ie[ue]=0;for(ee=0;ee<=143;)j[2*ee+1]=8,ee++,ie[8]++;for(;ee<=255;)j[2*ee+1]=9,ee++,ie[9]++;for(;ee<=279;)j[2*ee+1]=7,ee++,ie[7]++;for(;ee<=287;)j[2*ee+1]=8,ee++,ie[8]++;for(le(j,h+1,ie),ee=0;ee<f;ee++)U[2*ee+1]=5,U[2*ee]=pe(ee,5);q=new Y(j,I,d+1,h,y),O=new Y(U,N,0,f,y),K=new Y(new Array(0),R,0,b,x)})(),Q=!0),z.l_desc=new F(z.dyn_ltree,q),z.d_desc=new F(z.dyn_dtree,O),z.bl_desc=new F(z.bl_tree,K),z.bi_buf=0,z.bi_valid=0,ge(z)},r._tr_stored_block=V,r._tr_flush_block=function(z,ee,ue,he){var re,Z,ie=0;0<z.level?(z.strm.data_type===2&&(z.strm.data_type=(function(ce){var fe,xe=4093624447;for(fe=0;fe<=31;fe++,xe>>>=1)if(1&xe&&ce.dyn_ltree[2*fe]!==0)return o;if(ce.dyn_ltree[18]!==0||ce.dyn_ltree[20]!==0||ce.dyn_ltree[26]!==0)return a;for(fe=32;fe<d;fe++)if(ce.dyn_ltree[2*fe]!==0)return a;return o})(z)),We(z,z.l_desc),We(z,z.d_desc),ie=(function(ce){var fe;for(C(ce,ce.dyn_ltree,ce.l_desc.max_code),C(ce,ce.dyn_dtree,ce.d_desc.max_code),We(ce,ce.bl_desc),fe=b-1;3<=fe&&ce.bl_tree[2*P[fe]+1]===0;fe--);return ce.opt_len+=3*(fe+1)+5+5+4,fe})(z),re=z.opt_len+3+7>>>3,(Z=z.static_len+3+7>>>3)<=re&&(re=Z)):re=Z=ue+5,ue+4<=re&&ee!==-1?V(z,ee,ue,he):z.strategy===4||Z===re?(ne(z,2+(he?1:0),3),Se(z,j,U)):(ne(z,4+(he?1:0),3),(function(ce,fe,xe,se){var me;for(ne(ce,fe-257,5),ne(ce,xe-1,5),ne(ce,se-4,4),me=0;me<se;me++)ne(ce,ce.bl_tree[2*P[me]+1],3);ae(ce,ce.dyn_ltree,fe-1),ae(ce,ce.dyn_dtree,xe-1)})(z,z.l_desc.max_code+1,z.d_desc.max_code+1,ie+1),Se(z,z.dyn_ltree,z.dyn_dtree)),ge(z),he&&ye(z)},r._tr_tally=function(z,ee,ue){return z.pending_buf[z.d_buf+2*z.last_lit]=ee>>>8&255,z.pending_buf[z.d_buf+2*z.last_lit+1]=255&ee,z.pending_buf[z.l_buf+z.last_lit]=255&ue,z.last_lit++,ee===0?z.dyn_ltree[2*ue]++:(z.matches++,ee--,z.dyn_ltree[2*(S[ue]+d+1)]++,z.dyn_dtree[2*X(ee)]++),z.last_lit===z.lit_bufsize-1},r._tr_align=function(z){ne(z,2,3),oe(z,D,j),(function(ee){ee.bi_valid===16?($(ee,ee.bi_buf),ee.bi_buf=0,ee.bi_valid=0):8<=ee.bi_valid&&(ee.pending_buf[ee.pending++]=255&ee.bi_buf,ee.bi_buf>>=8,ee.bi_valid-=8)})(z)}},{"../utils/common":41}],53:[function(t,n,r){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,n,r){(function(s){(function(o,a){if(!o.setImmediate){var c,l,u,d,h=1,f={},b=!1,g=o.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(o);y=y&&y.setTimeout?y:o,c={}.toString.call(o.process)==="[object process]"?function(A){process.nextTick(function(){x(A)})}:(function(){if(o.postMessage&&!o.importScripts){var A=!0,T=o.onmessage;return o.onmessage=function(){A=!1},o.postMessage("","*"),o.onmessage=T,A}})()?(d="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",D,!1):o.attachEvent("onmessage",D),function(A){o.postMessage(d+A,"*")}):o.MessageChannel?((u=new MessageChannel).port1.onmessage=function(A){x(A.data)},function(A){u.port2.postMessage(A)}):g&&"onreadystatechange"in g.createElement("script")?(l=g.documentElement,function(A){var T=g.createElement("script");T.onreadystatechange=function(){x(A),T.onreadystatechange=null,l.removeChild(T),T=null},l.appendChild(T)}):function(A){setTimeout(x,0,A)},y.setImmediate=function(A){typeof A!="function"&&(A=new Function(""+A));for(var T=new Array(arguments.length-1),E=0;E<T.length;E++)T[E]=arguments[E+1];var I={callback:A,args:T};return f[h]=I,c(h),h++},y.clearImmediate=v}function v(A){delete f[A]}function x(A){if(b)setTimeout(x,0,A);else{var T=f[A];if(T){b=!0;try{(function(E){var I=E.callback,N=E.args;switch(N.length){case 0:I();break;case 1:I(N[0]);break;case 2:I(N[0],N[1]);break;case 3:I(N[0],N[1],N[2]);break;default:I.apply(a,N)}})(T)}finally{v(A),b=!1}}}}function D(A){A.source===o&&typeof A.data=="string"&&A.data.indexOf(d)===0&&x(+A.data.slice(d.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof Ln<"u"?Ln:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Gp)),Gp.exports}var zb;function mT(){if(zb)return lc;zb=1;var i=oS(),e=aS();lc.openArrayBuffer=t,lc.splitPath=n,lc.joinPath=r;function t(s){return e.loadAsync(s).then(function(o){function a(d){return o.file(d)!==null}function c(d,h){return o.file(d).async("uint8array").then(function(f){if(h==="base64")return i.fromByteArray(f);if(h){var b=new TextDecoder(h);return b.decode(f)}else return f})}function l(d,h){o.file(d,h)}function u(){return o.generateAsync({type:"arraybuffer"})}return{exists:a,read:c,write:l,toArrayBuffer:u}})}function n(s){var o=s.lastIndexOf("/");return o===-1?{dirname:"",basename:s}:{dirname:s.substring(0,o),basename:s.substring(o+1)}}function r(){var s=Array.prototype.filter.call(arguments,function(a){return a}),o=[];return s.forEach(function(a){/^\//.test(a)?o=[a]:o.push(a)}),o.join("/")}return lc}var Ju={},cs={},dc={},$b;function yT(){if($b)return dc;$b=1;var i=gt;dc.Element=t,dc.element=function(s,o,a){return new t(s,o,a)},dc.text=function(s){return{type:"text",value:s}};var e={first:function(){return null},firstOrEmpty:function(){return e},attributes:{}};function t(s,o,a){this.type="element",this.name=s,this.attributes=o||{},this.children=a||[]}t.prototype.first=function(s){return i.find(this.children,function(o){return o.name===s})},t.prototype.firstOrEmpty=function(s){return this.first(s)||e},t.prototype.getElementsByTagName=function(s){var o=i.filter(this.children,function(a){return a.name===s});return r(o)},t.prototype.text=function(){if(this.children.length===0)return"";if(this.children.length!==1||this.children[0].type!=="text")throw new Error("Not implemented");return this.children[0].value};var n={getElementsByTagName:function(s){return r(i.flatten(this.map(function(o){return o.getElementsByTagName(s)},!0)))}};function r(s){return i.extend(s,n)}return dc}var zp={},Ku={},hc={},Ii={},ls={},Xb;function gf(){if(Xb)return ls;Xb=1;function i(s,o,a){if(a===void 0&&(a=Array.prototype),s&&typeof a.find=="function")return a.find.call(s,o);for(var c=0;c<s.length;c++)if(Object.prototype.hasOwnProperty.call(s,c)){var l=s[c];if(o.call(void 0,l,c,s))return l}}function e(s,o){return o===void 0&&(o=Object),o&&typeof o.freeze=="function"?o.freeze(s):s}function t(s,o){if(s===null||typeof s!="object")throw new TypeError("target is not an object");for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(s[a]=o[a]);return s}var n=e({HTML:"text/html",isHTML:function(s){return s===n.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),r=e({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(s){return s===r.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return ls.assign=t,ls.find=i,ls.freeze=e,ls.MIME_TYPE=n,ls.NAMESPACE=r,ls}var jb;function jy(){if(jb)return Ii;jb=1;var i=gf(),e=i.find,t=i.NAMESPACE;function n(k){return k!==""}function r(k){return k?k.split(/[\t\n\f\r ]+/).filter(n):[]}function s(k,G){return k.hasOwnProperty(G)||(k[G]=!0),k}function o(k){if(!k)return[];var G=r(k);return Object.keys(G.reduce(s,{}))}function a(k){return function(G){return k&&k.indexOf(G)!==-1}}function c(k,G){for(var te in k)Object.prototype.hasOwnProperty.call(k,te)&&(G[te]=k[te])}function l(k,G){var te=k.prototype;if(!(te instanceof G)){let de=function(){};de.prototype=G.prototype,de=new de,c(te,de),k.prototype=te=de}te.constructor!=k&&(typeof k!="function"&&console.error("unknown Class:"+k),te.constructor=k)}var u={},d=u.ELEMENT_NODE=1,h=u.ATTRIBUTE_NODE=2,f=u.TEXT_NODE=3,b=u.CDATA_SECTION_NODE=4,g=u.ENTITY_REFERENCE_NODE=5,y=u.ENTITY_NODE=6,v=u.PROCESSING_INSTRUCTION_NODE=7,x=u.COMMENT_NODE=8,D=u.DOCUMENT_NODE=9,A=u.DOCUMENT_TYPE_NODE=10,T=u.DOCUMENT_FRAGMENT_NODE=11,E=u.NOTATION_NODE=12,I={},N={};I.INDEX_SIZE_ERR=(N[1]="Index size error",1),I.DOMSTRING_SIZE_ERR=(N[2]="DOMString size error",2);var R=I.HIERARCHY_REQUEST_ERR=(N[3]="Hierarchy request error",3);I.WRONG_DOCUMENT_ERR=(N[4]="Wrong document",4),I.INVALID_CHARACTER_ERR=(N[5]="Invalid character",5),I.NO_DATA_ALLOWED_ERR=(N[6]="No data allowed",6),I.NO_MODIFICATION_ALLOWED_ERR=(N[7]="No modification allowed",7);var P=I.NOT_FOUND_ERR=(N[8]="Not found",8);I.NOT_SUPPORTED_ERR=(N[9]="Not supported",9);var j=I.INUSE_ATTRIBUTE_ERR=(N[10]="Attribute in use",10);I.INVALID_STATE_ERR=(N[11]="Invalid state",11),I.SYNTAX_ERR=(N[12]="Syntax error",12),I.INVALID_MODIFICATION_ERR=(N[13]="Invalid modification",13),I.NAMESPACE_ERR=(N[14]="Invalid namespace",14),I.INVALID_ACCESS_ERR=(N[15]="Invalid access",15);function U(k,G){if(G instanceof Error)var te=G;else te=this,Error.call(this,N[k]),this.message=N[k],Error.captureStackTrace&&Error.captureStackTrace(this,U);return te.code=k,G&&(this.message=this.message+": "+G),te}U.prototype=Error.prototype,c(I,U);function B(){}B.prototype={length:0,item:function(k){return k>=0&&k<this.length?this[k]:null},toString:function(k,G){for(var te=[],de=0;de<this.length;de++)yr(this[de],te,k,G);return te.join("")},filter:function(k){return Array.prototype.filter.call(this,k)},indexOf:function(k){return Array.prototype.indexOf.call(this,k)}};function S(k,G){this._node=k,this._refresh=G,J(this)}function J(k){var G=k._node._inc||k._node.ownerDocument._inc;if(k._inc!==G){var te=k._refresh(k._node);if(nc(k,"length",te.length),!k.$$length||te.length<k.$$length)for(var de=te.length;de in k;de++)Object.prototype.hasOwnProperty.call(k,de)&&delete k[de];c(te,k),k._inc=G}}S.prototype.item=function(k){return J(this),this[k]||null},l(S,B);function q(){}function O(k,G){for(var te=k.length;te--;)if(k[te]===G)return te}function K(k,G,te,de){if(de?G[O(G,de)]=te:G[G.length++]=te,k){te.ownerElement=k;var ve=k.ownerDocument;ve&&(de&&pe(ve,k,de),oe(ve,k,te))}}function H(k,G,te){var de=O(G,te);if(de>=0){for(var ve=G.length-1;de<ve;)G[de]=G[++de];if(G.length=ve,k){var ke=k.ownerDocument;ke&&(pe(ke,k,te),te.ownerElement=null)}}else throw new U(P,new Error(k.tagName+"@"+te))}q.prototype={length:0,item:B.prototype.item,getNamedItem:function(k){for(var G=this.length;G--;){var te=this[G];if(te.nodeName==k)return te}},setNamedItem:function(k){var G=k.ownerElement;if(G&&G!=this._ownerElement)throw new U(j);var te=this.getNamedItem(k.nodeName);return K(this._ownerElement,this,k,te),te},setNamedItemNS:function(k){var G=k.ownerElement,te;if(G&&G!=this._ownerElement)throw new U(j);return te=this.getNamedItemNS(k.namespaceURI,k.localName),K(this._ownerElement,this,k,te),te},removeNamedItem:function(k){var G=this.getNamedItem(k);return H(this._ownerElement,this,G),G},removeNamedItemNS:function(k,G){var te=this.getNamedItemNS(k,G);return H(this._ownerElement,this,te),te},getNamedItemNS:function(k,G){for(var te=this.length;te--;){var de=this[te];if(de.localName==G&&de.namespaceURI==k)return de}return null}};function Y(){}Y.prototype={hasFeature:function(k,G){return!0},createDocument:function(k,G,te){var de=new ne;if(de.implementation=this,de.childNodes=new B,de.doctype=te||null,te&&de.appendChild(te),G){var ve=de.createElementNS(k,G);de.appendChild(ve)}return de},createDocumentType:function(k,G,te){var de=new se;return de.name=k,de.nodeName=k,de.publicId=G||"",de.systemId=te||"",de}};function F(){}F.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(k,G){return ee(this,k,G)},replaceChild:function(k,G){ee(this,k,G,z),G&&this.removeChild(G)},removeChild:function(k){return ge(this,k)},appendChild:function(k){return this.insertBefore(k,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(k){return tc(this.ownerDocument||this,this,k)},normalize:function(){for(var k=this.firstChild;k;){var G=k.nextSibling;G&&G.nodeType==f&&k.nodeType==f?(this.removeChild(G),k.appendData(G.data)):(k.normalize(),k=G)}},isSupported:function(k,G){return this.ownerDocument.implementation.hasFeature(k,G)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(k){for(var G=this;G;){var te=G._nsMap;if(te){for(var de in te)if(Object.prototype.hasOwnProperty.call(te,de)&&te[de]===k)return de}G=G.nodeType==h?G.ownerDocument:G.parentNode}return null},lookupNamespaceURI:function(k){for(var G=this;G;){var te=G._nsMap;if(te&&Object.prototype.hasOwnProperty.call(te,k))return te[k];G=G.nodeType==h?G.ownerDocument:G.parentNode}return null},isDefaultNamespace:function(k){var G=this.lookupPrefix(k);return G==null}};function X(k){return k=="<"&&"&lt;"||k==">"&&"&gt;"||k=="&"&&"&amp;"||k=='"'&&"&quot;"||"&#"+k.charCodeAt()+";"}c(u,F),c(u,F.prototype);function $(k,G){if(G(k))return!0;if(k=k.firstChild)do if($(k,G))return!0;while(k=k.nextSibling)}function ne(){this.ownerDocument=this}function oe(k,G,te){k&&k._inc++;var de=te.namespaceURI;de===t.XMLNS&&(G._nsMap[te.prefix?te.localName:""]=te.value)}function pe(k,G,te,de){k&&k._inc++;var ve=te.namespaceURI;ve===t.XMLNS&&delete G._nsMap[te.prefix?te.localName:""]}function le(k,G,te){if(k&&k._inc){k._inc++;var de=G.childNodes;if(te)de[de.length++]=te;else{for(var ve=G.firstChild,ke=0;ve;)de[ke++]=ve,ve=ve.nextSibling;de.length=ke,delete de[de.length]}}}function ge(k,G){var te=G.previousSibling,de=G.nextSibling;return te?te.nextSibling=de:k.firstChild=de,de?de.previousSibling=te:k.lastChild=te,G.parentNode=null,G.previousSibling=null,G.nextSibling=null,le(k.ownerDocument,k),G}function ye(k){return k&&(k.nodeType===F.DOCUMENT_NODE||k.nodeType===F.DOCUMENT_FRAGMENT_NODE||k.nodeType===F.ELEMENT_NODE)}function De(k){return k&&(Se(k)||We(k)||we(k)||k.nodeType===F.DOCUMENT_FRAGMENT_NODE||k.nodeType===F.COMMENT_NODE||k.nodeType===F.PROCESSING_INSTRUCTION_NODE)}function we(k){return k&&k.nodeType===F.DOCUMENT_TYPE_NODE}function Se(k){return k&&k.nodeType===F.ELEMENT_NODE}function We(k){return k&&k.nodeType===F.TEXT_NODE}function C(k,G){var te=k.childNodes||[];if(e(te,Se)||we(G))return!1;var de=e(te,we);return!(G&&de&&te.indexOf(de)>te.indexOf(G))}function ae(k,G){var te=k.childNodes||[];function de(ke){return Se(ke)&&ke!==G}if(e(te,de))return!1;var ve=e(te,we);return!(G&&ve&&te.indexOf(ve)>te.indexOf(G))}function Q(k,G,te){if(!ye(k))throw new U(R,"Unexpected parent node type "+k.nodeType);if(te&&te.parentNode!==k)throw new U(P,"child not in parent");if(!De(G)||we(G)&&k.nodeType!==F.DOCUMENT_NODE)throw new U(R,"Unexpected node type "+G.nodeType+" for parent node type "+k.nodeType)}function V(k,G,te){var de=k.childNodes||[],ve=G.childNodes||[];if(G.nodeType===F.DOCUMENT_FRAGMENT_NODE){var ke=ve.filter(Se);if(ke.length>1||e(ve,We))throw new U(R,"More than one element or text in fragment");if(ke.length===1&&!C(k,te))throw new U(R,"Element in fragment can not be inserted before doctype")}if(Se(G)&&!C(k,te))throw new U(R,"Only one element can be added and only after doctype");if(we(G)){if(e(de,we))throw new U(R,"Only one doctype is allowed");var ct=e(de,Se);if(te&&de.indexOf(ct)<de.indexOf(te))throw new U(R,"Doctype can only be inserted before an element");if(!te&&ct)throw new U(R,"Doctype can not be appended since element is present")}}function z(k,G,te){var de=k.childNodes||[],ve=G.childNodes||[];if(G.nodeType===F.DOCUMENT_FRAGMENT_NODE){var ke=ve.filter(Se);if(ke.length>1||e(ve,We))throw new U(R,"More than one element or text in fragment");if(ke.length===1&&!ae(k,te))throw new U(R,"Element in fragment can not be inserted before doctype")}if(Se(G)&&!ae(k,te))throw new U(R,"Only one element can be added and only after doctype");if(we(G)){if(e(de,function(Wn){return we(Wn)&&Wn!==te}))throw new U(R,"Only one doctype is allowed");var ct=e(de,Se);if(te&&de.indexOf(ct)<de.indexOf(te))throw new U(R,"Doctype can only be inserted before an element")}}function ee(k,G,te,de){Q(k,G,te),k.nodeType===F.DOCUMENT_NODE&&(de||V)(k,G,te);var ve=G.parentNode;if(ve&&ve.removeChild(G),G.nodeType===T){var ke=G.firstChild;if(ke==null)return G;var ct=G.lastChild}else ke=ct=G;var tn=te?te.previousSibling:k.lastChild;ke.previousSibling=tn,ct.nextSibling=te,tn?tn.nextSibling=ke:k.firstChild=ke,te==null?k.lastChild=ct:te.previousSibling=ct;do{ke.parentNode=k;var Wn=k.ownerDocument||k;ue(ke,Wn)}while(ke!==ct&&(ke=ke.nextSibling));return le(k.ownerDocument||k,k),G.nodeType==T&&(G.firstChild=G.lastChild=null),G}function ue(k,G){if(k.ownerDocument!==G){if(k.ownerDocument=G,k.nodeType===d&&k.attributes)for(var te=0;te<k.attributes.length;te++){var de=k.attributes.item(te);de&&(de.ownerDocument=G)}for(var ve=k.firstChild;ve;)ue(ve,G),ve=ve.nextSibling}}function he(k,G){G.parentNode&&G.parentNode.removeChild(G),G.parentNode=k,G.previousSibling=k.lastChild,G.nextSibling=null,G.previousSibling?G.previousSibling.nextSibling=G:k.firstChild=G,k.lastChild=G,le(k.ownerDocument,k,G);var te=k.ownerDocument||k;return ue(G,te),G}ne.prototype={nodeName:"#document",nodeType:D,doctype:null,documentElement:null,_inc:1,insertBefore:function(k,G){if(k.nodeType==T){for(var te=k.firstChild;te;){var de=te.nextSibling;this.insertBefore(te,G),te=de}return k}return ee(this,k,G),ue(k,this),this.documentElement===null&&k.nodeType===d&&(this.documentElement=k),k},removeChild:function(k){return this.documentElement==k&&(this.documentElement=null),ge(this,k)},replaceChild:function(k,G){ee(this,k,G,z),ue(k,this),G&&this.removeChild(G),Se(k)&&(this.documentElement=k)},importNode:function(k,G){return Wu(this,k,G)},getElementById:function(k){var G=null;return $(this.documentElement,function(te){if(te.nodeType==d&&te.getAttribute("id")==k)return G=te,!0}),G},getElementsByClassName:function(k){var G=o(k);return new S(this,function(te){var de=[];return G.length>0&&$(te.documentElement,function(ve){if(ve!==te&&ve.nodeType===d){var ke=ve.getAttribute("class");if(ke){var ct=k===ke;if(!ct){var tn=o(ke);ct=G.every(a(tn))}ct&&de.push(ve)}}}),de})},createElement:function(k){var G=new re;G.ownerDocument=this,G.nodeName=k,G.tagName=k,G.localName=k,G.childNodes=new B;var te=G.attributes=new q;return te._ownerElement=G,G},createDocumentFragment:function(){var k=new Ie;return k.ownerDocument=this,k.childNodes=new B,k},createTextNode:function(k){var G=new ce;return G.ownerDocument=this,G.appendData(k),G},createComment:function(k){var G=new fe;return G.ownerDocument=this,G.appendData(k),G},createCDATASection:function(k){var G=new xe;return G.ownerDocument=this,G.appendData(k),G},createProcessingInstruction:function(k,G){var te=new Re;return te.ownerDocument=this,te.tagName=te.nodeName=te.target=k,te.nodeValue=te.data=G,te},createAttribute:function(k){var G=new Z;return G.ownerDocument=this,G.name=k,G.nodeName=k,G.localName=k,G.specified=!0,G},createEntityReference:function(k){var G=new _e;return G.ownerDocument=this,G.nodeName=k,G},createElementNS:function(k,G){var te=new re,de=G.split(":"),ve=te.attributes=new q;return te.childNodes=new B,te.ownerDocument=this,te.nodeName=G,te.tagName=G,te.namespaceURI=k,de.length==2?(te.prefix=de[0],te.localName=de[1]):te.localName=G,ve._ownerElement=te,te},createAttributeNS:function(k,G){var te=new Z,de=G.split(":");return te.ownerDocument=this,te.nodeName=G,te.name=G,te.namespaceURI=k,te.specified=!0,de.length==2?(te.prefix=de[0],te.localName=de[1]):te.localName=G,te}},l(ne,F);function re(){this._nsMap={}}re.prototype={nodeType:d,hasAttribute:function(k){return this.getAttributeNode(k)!=null},getAttribute:function(k){var G=this.getAttributeNode(k);return G&&G.value||""},getAttributeNode:function(k){return this.attributes.getNamedItem(k)},setAttribute:function(k,G){var te=this.ownerDocument.createAttribute(k);te.value=te.nodeValue=""+G,this.setAttributeNode(te)},removeAttribute:function(k){var G=this.getAttributeNode(k);G&&this.removeAttributeNode(G)},appendChild:function(k){return k.nodeType===T?this.insertBefore(k,null):he(this,k)},setAttributeNode:function(k){return this.attributes.setNamedItem(k)},setAttributeNodeNS:function(k){return this.attributes.setNamedItemNS(k)},removeAttributeNode:function(k){return this.attributes.removeNamedItem(k.nodeName)},removeAttributeNS:function(k,G){var te=this.getAttributeNodeNS(k,G);te&&this.removeAttributeNode(te)},hasAttributeNS:function(k,G){return this.getAttributeNodeNS(k,G)!=null},getAttributeNS:function(k,G){var te=this.getAttributeNodeNS(k,G);return te&&te.value||""},setAttributeNS:function(k,G,te){var de=this.ownerDocument.createAttributeNS(k,G);de.value=de.nodeValue=""+te,this.setAttributeNode(de)},getAttributeNodeNS:function(k,G){return this.attributes.getNamedItemNS(k,G)},getElementsByTagName:function(k){return new S(this,function(G){var te=[];return $(G,function(de){de!==G&&de.nodeType==d&&(k==="*"||de.tagName==k)&&te.push(de)}),te})},getElementsByTagNameNS:function(k,G){return new S(this,function(te){var de=[];return $(te,function(ve){ve!==te&&ve.nodeType===d&&(k==="*"||ve.namespaceURI===k)&&(G==="*"||ve.localName==G)&&de.push(ve)}),de})}},ne.prototype.getElementsByTagName=re.prototype.getElementsByTagName,ne.prototype.getElementsByTagNameNS=re.prototype.getElementsByTagNameNS,l(re,F);function Z(){}Z.prototype.nodeType=h,l(Z,F);function ie(){}ie.prototype={data:"",substringData:function(k,G){return this.data.substring(k,k+G)},appendData:function(k){k=this.data+k,this.nodeValue=this.data=k,this.length=k.length},insertData:function(k,G){this.replaceData(k,0,G)},appendChild:function(k){throw new Error(N[R])},deleteData:function(k,G){this.replaceData(k,G,"")},replaceData:function(k,G,te){var de=this.data.substring(0,k),ve=this.data.substring(k+G);te=de+te+ve,this.nodeValue=this.data=te,this.length=te.length}},l(ie,F);function ce(){}ce.prototype={nodeName:"#text",nodeType:f,splitText:function(k){var G=this.data,te=G.substring(k);G=G.substring(0,k),this.data=this.nodeValue=G,this.length=G.length;var de=this.ownerDocument.createTextNode(te);return this.parentNode&&this.parentNode.insertBefore(de,this.nextSibling),de}},l(ce,ie);function fe(){}fe.prototype={nodeName:"#comment",nodeType:x},l(fe,ie);function xe(){}xe.prototype={nodeName:"#cdata-section",nodeType:b},l(xe,ie);function se(){}se.prototype.nodeType=A,l(se,F);function me(){}me.prototype.nodeType=E,l(me,F);function be(){}be.prototype.nodeType=y,l(be,F);function _e(){}_e.prototype.nodeType=g,l(_e,F);function Ie(){}Ie.prototype.nodeName="#document-fragment",Ie.prototype.nodeType=T,l(Ie,F);function Re(){}Re.prototype.nodeType=v,l(Re,F);function Je(){}Je.prototype.serializeToString=function(k,G,te){return fn.call(k,G,te)},F.prototype.toString=fn;function fn(k,G){var te=[],de=this.nodeType==9&&this.documentElement||this,ve=de.prefix,ke=de.namespaceURI;if(ke&&ve==null){var ve=de.lookupPrefix(ke);if(ve==null)var ct=[{namespace:ke,prefix:null}]}return yr(this,te,k,G,ct),te.join("")}function Ct(k,G,te){var de=k.prefix||"",ve=k.namespaceURI;if(!ve||de==="xml"&&ve===t.XML||ve===t.XMLNS)return!1;for(var ke=te.length;ke--;){var ct=te[ke];if(ct.prefix===de)return ct.namespace!==ve}return!0}function Io(k,G,te){k.push(" ",G,'="',te.replace(/[<>&"\t\n\r]/g,X),'"')}function yr(k,G,te,de,ve){if(ve||(ve=[]),de)if(k=de(k),k){if(typeof k=="string"){G.push(k);return}}else return;switch(k.nodeType){case d:var ke=k.attributes,ct=ke.length,Bt=k.firstChild,tn=k.tagName;te=t.isHTML(k.namespaceURI)||te;var Wn=tn;if(!te&&!k.prefix&&k.namespaceURI){for(var br,Ci=0;Ci<ke.length;Ci++)if(ke.item(Ci).name==="xmlns"){br=ke.item(Ci).value;break}if(!br)for(var rs=ve.length-1;rs>=0;rs--){var ss=ve[rs];if(ss.prefix===""&&ss.namespace===k.namespaceURI){br=ss.namespace;break}}if(br!==k.namespaceURI)for(var rs=ve.length-1;rs>=0;rs--){var ss=ve[rs];if(ss.namespace===k.namespaceURI){ss.prefix&&(Wn=ss.prefix+":"+tn);break}}}G.push("<",Wn);for(var os=0;os<ct;os++){var si=ke.item(os);si.prefix=="xmlns"?ve.push({prefix:si.localName,namespace:si.value}):si.nodeName=="xmlns"&&ve.push({prefix:"",namespace:si.value})}for(var os=0;os<ct;os++){var si=ke.item(os);if(Ct(si,te,ve)){var as=si.prefix||"",ic=si.namespaceURI;Io(G,as?"xmlns:"+as:"xmlns",ic),ve.push({prefix:as,namespace:ic})}yr(si,G,te,de,ve)}if(tn===Wn&&Ct(k,te,ve)){var as=k.prefix||"",ic=k.namespaceURI;Io(G,as?"xmlns:"+as:"xmlns",ic),ve.push({prefix:as,namespace:ic})}if(Bt||te&&!/^(?:meta|link|img|br|hr|input)$/i.test(tn)){if(G.push(">"),te&&/^script$/i.test(tn))for(;Bt;)Bt.data?G.push(Bt.data):yr(Bt,G,te,de,ve.slice()),Bt=Bt.nextSibling;else for(;Bt;)yr(Bt,G,te,de,ve.slice()),Bt=Bt.nextSibling;G.push("</",Wn,">")}else G.push("/>");return;case D:case T:for(var Bt=k.firstChild;Bt;)yr(Bt,G,te,de,ve.slice()),Bt=Bt.nextSibling;return;case h:return Io(G,k.name,k.value);case f:return G.push(k.data.replace(/[<&>]/g,X));case b:return G.push("<![CDATA[",k.data,"]]>");case x:return G.push("<!--",k.data,"-->");case A:var a0=k.publicId,Ro=k.systemId;if(G.push("<!DOCTYPE ",k.name),a0)G.push(" PUBLIC ",a0),Ro&&Ro!="."&&G.push(" ",Ro),G.push(">");else if(Ro&&Ro!=".")G.push(" SYSTEM ",Ro,">");else{var c0=k.internalSubset;c0&&G.push(" [",c0,"]"),G.push(">")}return;case v:return G.push("<?",k.target," ",k.data,"?>");case g:return G.push("&",k.nodeName,";");default:G.push("??",k.nodeName)}}function Wu(k,G,te){var de;switch(G.nodeType){case d:de=G.cloneNode(!1),de.ownerDocument=k;case T:break;case h:te=!0;break}if(de||(de=G.cloneNode(!1)),de.ownerDocument=k,de.parentNode=null,te)for(var ve=G.firstChild;ve;)de.appendChild(Wu(k,ve,te)),ve=ve.nextSibling;return de}function tc(k,G,te){var de=new G.constructor;for(var ve in G)if(Object.prototype.hasOwnProperty.call(G,ve)){var ke=G[ve];typeof ke!="object"&&ke!=de[ve]&&(de[ve]=ke)}switch(G.childNodes&&(de.childNodes=new B),de.ownerDocument=k,de.nodeType){case d:var ct=G.attributes,tn=de.attributes=new q,Wn=ct.length;tn._ownerElement=de;for(var br=0;br<Wn;br++)de.setAttributeNode(tc(k,ct.item(br),!0));break;case h:te=!0}if(te)for(var Ci=G.firstChild;Ci;)de.appendChild(tc(k,Ci,te)),Ci=Ci.nextSibling;return de}function nc(k,G,te){k[G]=te}try{if(Object.defineProperty){let k=function(G){switch(G.nodeType){case d:case T:var te=[];for(G=G.firstChild;G;)G.nodeType!==7&&G.nodeType!==8&&te.push(k(G)),G=G.nextSibling;return te.join("");default:return G.nodeValue}};Object.defineProperty(S.prototype,"length",{get:function(){return J(this),this.$$length}}),Object.defineProperty(F.prototype,"textContent",{get:function(){return k(this)},set:function(G){switch(this.nodeType){case d:case T:for(;this.firstChild;)this.removeChild(this.firstChild);(G||String(G))&&this.appendChild(this.ownerDocument.createTextNode(G));break;default:this.data=G,this.value=G,this.nodeValue=G}}}),nc=function(G,te,de){G["$$"+te]=de}}}catch{}return Ii.DocumentType=se,Ii.DOMException=U,Ii.DOMImplementation=Y,Ii.Element=re,Ii.Node=F,Ii.NodeList=B,Ii.XMLSerializer=Je,Ii}var fc={},$p={},Yb;function cS(){return Yb||(Yb=1,(function(i){var e=gf().freeze;i.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),i.HTML_ENTITIES=e({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:`
`,nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),i.entityMap=i.HTML_ENTITIES})($p)),$p}var Zu={},Jb;function lS(){if(Jb)return Zu;Jb=1;var i=gf().NAMESPACE,e=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,t=new RegExp("[\\-\\.0-9"+e.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),n=new RegExp("^"+e.source+t.source+"*(?::"+e.source+t.source+"*)?$"),r=0,s=1,o=2,a=3,c=4,l=5,u=6,d=7;function h(R,P){this.message=R,this.locator=P,Error.captureStackTrace&&Error.captureStackTrace(this,h)}h.prototype=new Error,h.prototype.name=h.name;function f(){}f.prototype={parse:function(R,P,j){var U=this.domBuilder;U.startDocument(),A(P,P={}),b(R,P,j,U,this.errorHandler),U.endDocument()}};function b(R,P,j,U,B){function S(he){if(he>65535){he-=65536;var re=55296+(he>>10),Z=56320+(he&1023);return String.fromCharCode(re,Z)}else return String.fromCharCode(he)}function J(he){var re=he.slice(1,-1);return Object.hasOwnProperty.call(j,re)?j[re]:re.charAt(0)==="#"?S(parseInt(re.substr(1).replace("x","0x"))):(B.error("entity not found:"+he),he)}function q(he){if(he>ne){var re=R.substring(ne,he).replace(/&#?\w+;/g,J);F&&O(ne),U.characters(re,0,he-ne),ne=he}}function O(he,re){for(;he>=H&&(re=Y.exec(R));)K=re.index,H=K+re[0].length,F.lineNumber++;F.columnNumber=he-K+1}for(var K=0,H=0,Y=/.*(?:\r\n?|\n)|.*$/g,F=U.locator,X=[{currentNSMap:P}],$={},ne=0;;){try{var oe=R.indexOf("<",ne);if(oe<0){if(!R.substr(ne).match(/^\s*$/)){var pe=U.doc,le=pe.createTextNode(R.substr(ne));pe.appendChild(le),U.currentElement=le}return}switch(oe>ne&&q(oe),R.charAt(oe+1)){case"/":var Q=R.indexOf(">",oe+3),ge=R.substring(oe+2,Q).replace(/[ \t\n\r]+$/g,""),ye=X.pop();Q<0?(ge=R.substring(oe+2).replace(/[\s<].*/,""),B.error("end tag name: "+ge+" is not complete:"+ye.tagName),Q=oe+1+ge.length):ge.match(/\s</)&&(ge=ge.replace(/[\s<].*/,""),B.error("end tag name: "+ge+" maybe not complete"),Q=oe+1+ge.length);var De=ye.localNSMap,we=ye.tagName==ge,Se=we||ye.tagName&&ye.tagName.toLowerCase()==ge.toLowerCase();if(Se){if(U.endElement(ye.uri,ye.localName,ge),De)for(var We in De)Object.prototype.hasOwnProperty.call(De,We)&&U.endPrefixMapping(We);we||B.fatalError("end tag name: "+ge+" is not match the current start tagName:"+ye.tagName)}else X.push(ye);Q++;break;case"?":F&&O(oe),Q=E(R,oe,U);break;case"!":F&&O(oe),Q=T(R,oe,U,B);break;default:F&&O(oe);var C=new I,ae=X[X.length-1].currentNSMap,Q=y(R,oe,C,ae,J,B),V=C.length;if(!C.closed&&D(R,Q,C.tagName,$)&&(C.closed=!0,j.nbsp||B.warning("unclosed xml attribute")),F&&V){for(var z=g(F,{}),ee=0;ee<V;ee++){var ue=C[ee];O(ue.offset),ue.locator=g(F,{})}U.locator=z,v(C,U,ae)&&X.push(C),U.locator=F}else v(C,U,ae)&&X.push(C);i.isHTML(C.uri)&&!C.closed?Q=x(R,Q,C.tagName,J,U):Q++}}catch(he){if(he instanceof h)throw he;B.error("element parse error: "+he),Q=-1}Q>ne?ne=Q:q(Math.max(oe,ne)+1)}}function g(R,P){return P.lineNumber=R.lineNumber,P.columnNumber=R.columnNumber,P}function y(R,P,j,U,B,S){function J(F,X,$){j.attributeNames.hasOwnProperty(F)&&S.fatalError("Attribute "+F+" redefined"),j.addValue(F,X.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,B),$)}for(var q,O,K=++P,H=r;;){var Y=R.charAt(K);switch(Y){case"=":if(H===s)q=R.slice(P,K),H=a;else if(H===o)H=a;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(H===a||H===s)if(H===s&&(S.warning('attribute value must after "="'),q=R.slice(P,K)),P=K+1,K=R.indexOf(Y,P),K>0)O=R.slice(P,K),J(q,O,P-1),H=l;else throw new Error("attribute value no end '"+Y+"' match");else if(H==c)O=R.slice(P,K),J(q,O,P),S.warning('attribute "'+q+'" missed start quot('+Y+")!!"),P=K+1,H=l;else throw new Error('attribute value must after "="');break;case"/":switch(H){case r:j.setTagName(R.slice(P,K));case l:case u:case d:H=d,j.closed=!0;case c:case s:break;case o:j.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return S.error("unexpected end of input"),H==r&&j.setTagName(R.slice(P,K)),K;case">":switch(H){case r:j.setTagName(R.slice(P,K));case l:case u:case d:break;case c:case s:O=R.slice(P,K),O.slice(-1)==="/"&&(j.closed=!0,O=O.slice(0,-1));case o:H===o&&(O=q),H==c?(S.warning('attribute "'+O+'" missed quot(")!'),J(q,O,P)):((!i.isHTML(U[""])||!O.match(/^(?:disabled|checked|selected)$/i))&&S.warning('attribute "'+O+'" missed value!! "'+O+'" instead!!'),J(O,O,P));break;case a:throw new Error("attribute value missed!!")}return K;case"":Y=" ";default:if(Y<=" ")switch(H){case r:j.setTagName(R.slice(P,K)),H=u;break;case s:q=R.slice(P,K),H=o;break;case c:var O=R.slice(P,K);S.warning('attribute "'+O+'" missed quot(")!!'),J(q,O,P);case l:H=u;break}else switch(H){case o:j.tagName,(!i.isHTML(U[""])||!q.match(/^(?:disabled|checked|selected)$/i))&&S.warning('attribute "'+q+'" missed value!! "'+q+'" instead2!!'),J(q,q,P),P=K,H=s;break;case l:S.warning('attribute space is required"'+q+'"!!');case u:H=s,P=K;break;case a:H=c,P=K;break;case d:throw new Error("elements closed character '/' and '>' must be connected to")}}K++}}function v(R,P,j){for(var U=R.tagName,B=null,Y=R.length;Y--;){var S=R[Y],J=S.qName,q=S.value,F=J.indexOf(":");if(F>0)var O=S.prefix=J.slice(0,F),K=J.slice(F+1),H=O==="xmlns"&&K;else K=J,O=null,H=J==="xmlns"&&"";S.localName=K,H!==!1&&(B==null&&(B={},A(j,j={})),j[H]=B[H]=q,S.uri=i.XMLNS,P.startPrefixMapping(H,q))}for(var Y=R.length;Y--;){S=R[Y];var O=S.prefix;O&&(O==="xml"&&(S.uri=i.XML),O!=="xmlns"&&(S.uri=j[O||""]))}var F=U.indexOf(":");F>0?(O=R.prefix=U.slice(0,F),K=R.localName=U.slice(F+1)):(O=null,K=R.localName=U);var X=R.uri=j[O||""];if(P.startElement(X,K,U,R),R.closed){if(P.endElement(X,K,U),B)for(O in B)Object.prototype.hasOwnProperty.call(B,O)&&P.endPrefixMapping(O)}else return R.currentNSMap=j,R.localNSMap=B,!0}function x(R,P,j,U,B){if(/^(?:script|textarea)$/i.test(j)){var S=R.indexOf("</"+j+">",P),J=R.substring(P+1,S);if(/[&<]/.test(J))return/^script$/i.test(j)?(B.characters(J,0,J.length),S):(J=J.replace(/&#?\w+;/g,U),B.characters(J,0,J.length),S)}return P+1}function D(R,P,j,U){var B=U[j];return B==null&&(B=R.lastIndexOf("</"+j+">"),B<P&&(B=R.lastIndexOf("</"+j)),U[j]=B),B<P}function A(R,P){for(var j in R)Object.prototype.hasOwnProperty.call(R,j)&&(P[j]=R[j])}function T(R,P,j,U){var B=R.charAt(P+2);switch(B){case"-":if(R.charAt(P+3)==="-"){var S=R.indexOf("-->",P+4);return S>P?(j.comment(R,P+4,S-P-4),S+3):(U.error("Unclosed comment"),-1)}else return-1;default:if(R.substr(P+3,6)=="CDATA["){var S=R.indexOf("]]>",P+9);return j.startCDATA(),j.characters(R,P+9,S-P-9),j.endCDATA(),S+3}var J=N(R,P),q=J.length;if(q>1&&/!doctype/i.test(J[0][0])){var O=J[1][0],K=!1,H=!1;q>3&&(/^public$/i.test(J[2][0])?(K=J[3][0],H=q>4&&J[4][0]):/^system$/i.test(J[2][0])&&(H=J[3][0]));var Y=J[q-1];return j.startDTD(O,K,H),j.endDTD(),Y.index+Y[0].length}}return-1}function E(R,P,j){var U=R.indexOf("?>",P);if(U){var B=R.substring(P,U).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return B?(B[0].length,j.processingInstruction(B[1],B[2]),U+2):-1}return-1}function I(){this.attributeNames={}}I.prototype={setTagName:function(R){if(!n.test(R))throw new Error("invalid tagName:"+R);this.tagName=R},addValue:function(R,P,j){if(!n.test(R))throw new Error("invalid attribute:"+R);this.attributeNames[R]=this.length,this[this.length++]={qName:R,value:P,offset:j}},length:0,getLocalName:function(R){return this[R].localName},getLocator:function(R){return this[R].locator},getQName:function(R){return this[R].qName},getURI:function(R){return this[R].uri},getValue:function(R){return this[R].value}};function N(R,P){var j,U=[],B=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(B.lastIndex=P,B.exec(R);j=B.exec(R);)if(U.push(j),j[1])return U}return Zu.XMLReader=f,Zu.ParseError=h,Zu}var Kb;function uS(){if(Kb)return fc;Kb=1;var i=gf(),e=jy(),t=cS(),n=lS(),r=e.DOMImplementation,s=i.NAMESPACE,o=n.ParseError,a=n.XMLReader;function c(y){return y.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function l(y){this.options=y||{locator:{}}}l.prototype.parseFromString=function(y,v){var x=this.options,D=new a,A=x.domBuilder||new d,T=x.errorHandler,E=x.locator,I=x.xmlns||{},N=/\/x?html?$/.test(v),R=N?t.HTML_ENTITIES:t.XML_ENTITIES;E&&A.setDocumentLocator(E),D.errorHandler=u(T,A,E),D.domBuilder=x.domBuilder||A,N&&(I[""]=s.HTML),I.xml=I.xml||s.XML;var P=x.normalizeLineEndings||c;return y&&typeof y=="string"?D.parse(P(y),I,R):D.errorHandler.error("invalid doc source"),A.doc};function u(y,v,x){if(!y){if(v instanceof d)return v;y=v}var D={},A=y instanceof Function;x=x||{};function T(E){var I=y[E];!I&&A&&(I=y.length==2?function(N){y(E,N)}:y),D[E]=I&&function(N){I("[xmldom "+E+"]	"+N+f(x))}||function(){}}return T("warning"),T("error"),T("fatalError"),D}function d(){this.cdata=!1}function h(y,v){v.lineNumber=y.lineNumber,v.columnNumber=y.columnNumber}d.prototype={startDocument:function(){this.doc=new r().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(y,v,x,D){var A=this.doc,T=A.createElementNS(y,x||v),E=D.length;g(this,T),this.currentElement=T,this.locator&&h(this.locator,T);for(var I=0;I<E;I++){var y=D.getURI(I),N=D.getValue(I),x=D.getQName(I),R=A.createAttributeNS(y,x);this.locator&&h(D.getLocator(I),R),R.value=R.nodeValue=N,T.setAttributeNode(R)}},endElement:function(y,v,x){var D=this.currentElement;D.tagName,this.currentElement=D.parentNode},startPrefixMapping:function(y,v){},endPrefixMapping:function(y){},processingInstruction:function(y,v){var x=this.doc.createProcessingInstruction(y,v);this.locator&&h(this.locator,x),g(this,x)},ignorableWhitespace:function(y,v,x){},characters:function(y,v,x){if(y=b.apply(this,arguments),y){if(this.cdata)var D=this.doc.createCDATASection(y);else var D=this.doc.createTextNode(y);this.currentElement?this.currentElement.appendChild(D):/^\s*$/.test(y)&&this.doc.appendChild(D),this.locator&&h(this.locator,D)}},skippedEntity:function(y){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(y){(this.locator=y)&&(y.lineNumber=0)},comment:function(y,v,x){y=b.apply(this,arguments);var D=this.doc.createComment(y);this.locator&&h(this.locator,D),g(this,D)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(y,v,x){var D=this.doc.implementation;if(D&&D.createDocumentType){var A=D.createDocumentType(y,v,x);this.locator&&h(this.locator,A),g(this,A),this.doc.doctype=A}},warning:function(y){console.warn("[xmldom warning]	"+y,f(this.locator))},error:function(y){console.error("[xmldom error]	"+y,f(this.locator))},fatalError:function(y){throw new o(y,this.locator)}};function f(y){if(y)return`
@`+(y.systemId||"")+"#[line:"+y.lineNumber+",col:"+y.columnNumber+"]"}function b(y,v,x){return typeof y=="string"?y.substr(v,x):y.length>=v+x||v?new java.lang.String(y,v,x)+"":y}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(y){d.prototype[y]=function(){return null}});function g(y,v){y.currentElement?y.currentElement.appendChild(v):y.doc.appendChild(v)}return fc.__DOMHandler=d,fc.normalizeLineEndings=c,fc.DOMParser=l,fc}var Zb;function dS(){if(Zb)return hc;Zb=1;var i=jy();return hc.DOMImplementation=i.DOMImplementation,hc.XMLSerializer=i.XMLSerializer,hc.DOMParser=uS().DOMParser,hc}var Qb;function hS(){if(Qb)return Ku;Qb=1;var i=dS(),e=jy();function t(n){var r=null,s=new i.DOMParser({errorHandler:function(a,c){r={level:a,message:c}}}),o=s.parseFromString(n);if(r===null)return o;throw new Error(r.level+": "+r.message)}return Ku.parseFromString=t,Ku.Node=e.Node,Ku}var ev;function fS(){if(ev)return zp;ev=1;var i=ts(),e=gt,t=hS(),n=yT(),r=n.Element;zp.readString=o;var s=t.Node;function o(a,c){c=c||{};try{var l=t.parseFromString(a,"text/xml")}catch(f){return i.reject(f)}if(l.documentElement.tagName==="parsererror")return i.resolve(new Error(l.documentElement.textContent));function u(f){switch(f.nodeType){case s.ELEMENT_NODE:return d(f);case s.TEXT_NODE:return n.text(f.nodeValue)}}function d(f){var b=h(f),g=[];e.forEach(f.childNodes,function(v){var x=u(v);x&&g.push(x)});var y={};return e.forEach(f.attributes,function(v){y[h(v)]=v.value}),new r(b,y,g)}function h(f){if(f.namespaceURI){var b=c[f.namespaceURI],g;return b?g=b+":":g="{"+f.namespaceURI+"}",g+f.localName}else return f.localName}return i.resolve(u(l.documentElement))}return zp}var Xp={},us={},ai={},tv;function ns(){return tv||(tv=1,(function(){var i,e,t,n,r,s,o,a=[].slice,c={}.hasOwnProperty;i=function(){var l,u,d,h,f,b;if(b=arguments[0],f=2<=arguments.length?a.call(arguments,1):[],r(Object.assign))Object.assign.apply(null,arguments);else for(l=0,d=f.length;l<d;l++)if(h=f[l],h!=null)for(u in h)c.call(h,u)&&(b[u]=h[u]);return b},r=function(l){return!!l&&Object.prototype.toString.call(l)==="[object Function]"},s=function(l){var u;return!!l&&((u=typeof l)=="function"||u==="object")},t=function(l){return r(Array.isArray)?Array.isArray(l):Object.prototype.toString.call(l)==="[object Array]"},n=function(l){var u;if(t(l))return!l.length;for(u in l)if(c.call(l,u))return!1;return!0},o=function(l){var u,d;return s(l)&&(d=Object.getPrototypeOf(l))&&(u=d.constructor)&&typeof u=="function"&&u instanceof u&&Function.prototype.toString.call(u)===Function.prototype.toString.call(Object)},e=function(l){return r(l.valueOf)?l.valueOf():l},ai.assign=i,ai.isFunction=r,ai.isObject=s,ai.isArray=t,ai.isEmpty=n,ai.isPlainObject=o,ai.getValue=e}).call(ai)),ai}var Id={exports:{}},Rd={exports:{}},Fd={exports:{}},Nd={exports:{}},pS=Nd.exports,nv;function bT(){return nv||(nv=1,(function(){Nd.exports=(function(){function i(e,t,n){if(this.options=e.options,this.stringify=e.stringify,this.parent=e,t==null)throw new Error("Missing attribute name. "+this.debugInfo(t));if(n==null)throw new Error("Missing attribute value. "+this.debugInfo(t));this.name=this.stringify.attName(t),this.value=this.stringify.attValue(n)}return i.prototype.clone=function(){return Object.create(this)},i.prototype.toString=function(e){return this.options.writer.set(e).attribute(this)},i.prototype.debugInfo=function(e){return e=e||this.name,e==null?"parent: <"+this.parent.name+">":"attribute: {"+e+"}, parent: <"+this.parent.name+">"},i})()}).call(pS)),Nd.exports}var gS=Fd.exports,iv;function mf(){return iv||(iv=1,(function(){var i,e,t,n,r,s,o=function(c,l){for(var u in l)a.call(l,u)&&(c[u]=l[u]);function d(){this.constructor=c}return d.prototype=l.prototype,c.prototype=new d,c.__super__=l.prototype,c},a={}.hasOwnProperty;s=ns(),r=s.isObject,n=s.isFunction,t=s.getValue,e=hn(),i=bT(),Fd.exports=(function(c){o(l,c);function l(u,d,h){if(l.__super__.constructor.call(this,u),d==null)throw new Error("Missing element name. "+this.debugInfo());this.name=this.stringify.eleName(d),this.attributes={},h!=null&&this.attribute(h),u.isDocument&&(this.isRoot=!0,this.documentObject=u,u.rootObject=this)}return l.prototype.clone=function(){var u,d,h,f;h=Object.create(this),h.isRoot&&(h.documentObject=null),h.attributes={},f=this.attributes;for(d in f)a.call(f,d)&&(u=f[d],h.attributes[d]=u.clone());return h.children=[],this.children.forEach(function(b){var g;return g=b.clone(),g.parent=h,h.children.push(g)}),h},l.prototype.attribute=function(u,d){var h,f;if(u!=null&&(u=t(u)),r(u))for(h in u)a.call(u,h)&&(f=u[h],this.attribute(h,f));else n(d)&&(d=d.apply()),(!this.options.skipNullAttributes||d!=null)&&(this.attributes[u]=new i(this,u,d));return this},l.prototype.removeAttribute=function(u){var d,h,f;if(u==null)throw new Error("Missing attribute name. "+this.debugInfo());if(u=t(u),Array.isArray(u))for(h=0,f=u.length;h<f;h++)d=u[h],delete this.attributes[d];else delete this.attributes[u];return this},l.prototype.toString=function(u){return this.options.writer.set(u).element(this)},l.prototype.att=function(u,d){return this.attribute(u,d)},l.prototype.a=function(u,d){return this.attribute(u,d)},l})(e)}).call(gS)),Fd.exports}var kd={exports:{}},mS=kd.exports,rv;function yf(){return rv||(rv=1,(function(){var i,e=function(n,r){for(var s in r)t.call(r,s)&&(n[s]=r[s]);function o(){this.constructor=n}return o.prototype=r.prototype,n.prototype=new o,n.__super__=r.prototype,n},t={}.hasOwnProperty;i=hn(),kd.exports=(function(n){e(r,n);function r(s,o){if(r.__super__.constructor.call(this,s),o==null)throw new Error("Missing CDATA text. "+this.debugInfo());this.text=this.stringify.cdata(o)}return r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(s){return this.options.writer.set(s).cdata(this)},r})(i)}).call(mS)),kd.exports}var Md={exports:{}},yS=Md.exports,sv;function bf(){return sv||(sv=1,(function(){var i,e=function(n,r){for(var s in r)t.call(r,s)&&(n[s]=r[s]);function o(){this.constructor=n}return o.prototype=r.prototype,n.prototype=new o,n.__super__=r.prototype,n},t={}.hasOwnProperty;i=hn(),Md.exports=(function(n){e(r,n);function r(s,o){if(r.__super__.constructor.call(this,s),o==null)throw new Error("Missing comment text. "+this.debugInfo());this.text=this.stringify.comment(o)}return r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(s){return this.options.writer.set(s).comment(this)},r})(i)}).call(yS)),Md.exports}var Pd={exports:{}},bS=Pd.exports,ov;function vf(){return ov||(ov=1,(function(){var i,e,t=function(r,s){for(var o in s)n.call(s,o)&&(r[o]=s[o]);function a(){this.constructor=r}return a.prototype=s.prototype,r.prototype=new a,r.__super__=s.prototype,r},n={}.hasOwnProperty;e=ns().isObject,i=hn(),Pd.exports=(function(r){t(s,r);function s(o,a,c,l){var u;s.__super__.constructor.call(this,o),e(a)&&(u=a,a=u.version,c=u.encoding,l=u.standalone),a||(a="1.0"),this.version=this.stringify.xmlVersion(a),c!=null&&(this.encoding=this.stringify.xmlEncoding(c)),l!=null&&(this.standalone=this.stringify.xmlStandalone(l))}return s.prototype.toString=function(o){return this.options.writer.set(o).declaration(this)},s})(i)}).call(bS)),Pd.exports}var Ld={exports:{}},Bd={exports:{}},vS=Bd.exports,av;function xf(){return av||(av=1,(function(){var i,e=function(n,r){for(var s in r)t.call(r,s)&&(n[s]=r[s]);function o(){this.constructor=n}return o.prototype=r.prototype,n.prototype=new o,n.__super__=r.prototype,n},t={}.hasOwnProperty;i=hn(),Bd.exports=(function(n){e(r,n);function r(s,o,a,c,l,u){if(r.__super__.constructor.call(this,s),o==null)throw new Error("Missing DTD element name. "+this.debugInfo());if(a==null)throw new Error("Missing DTD attribute name. "+this.debugInfo(o));if(!c)throw new Error("Missing DTD attribute type. "+this.debugInfo(o));if(!l)throw new Error("Missing DTD attribute default. "+this.debugInfo(o));if(l.indexOf("#")!==0&&(l="#"+l),!l.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(o));if(u&&!l.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(o));this.elementName=this.stringify.eleName(o),this.attributeName=this.stringify.attName(a),this.attributeType=this.stringify.dtdAttType(c),this.defaultValue=this.stringify.dtdAttDefault(u),this.defaultValueType=l}return r.prototype.toString=function(s){return this.options.writer.set(s).dtdAttList(this)},r})(i)}).call(vS)),Bd.exports}var Od={exports:{}},xS=Od.exports,cv;function _f(){return cv||(cv=1,(function(){var i,e,t=function(r,s){for(var o in s)n.call(s,o)&&(r[o]=s[o]);function a(){this.constructor=r}return a.prototype=s.prototype,r.prototype=new a,r.__super__=s.prototype,r},n={}.hasOwnProperty;e=ns().isObject,i=hn(),Od.exports=(function(r){t(s,r);function s(o,a,c,l){if(s.__super__.constructor.call(this,o),c==null)throw new Error("Missing DTD entity name. "+this.debugInfo(c));if(l==null)throw new Error("Missing DTD entity value. "+this.debugInfo(c));if(this.pe=!!a,this.name=this.stringify.eleName(c),!e(l))this.value=this.stringify.dtdEntityValue(l);else{if(!l.pubID&&!l.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(c));if(l.pubID&&!l.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(c));if(l.pubID!=null&&(this.pubID=this.stringify.dtdPubID(l.pubID)),l.sysID!=null&&(this.sysID=this.stringify.dtdSysID(l.sysID)),l.nData!=null&&(this.nData=this.stringify.dtdNData(l.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(c))}}return s.prototype.toString=function(o){return this.options.writer.set(o).dtdEntity(this)},s})(i)}).call(xS)),Od.exports}var Wd={exports:{}},_S=Wd.exports,lv;function Df(){return lv||(lv=1,(function(){var i,e=function(n,r){for(var s in r)t.call(r,s)&&(n[s]=r[s]);function o(){this.constructor=n}return o.prototype=r.prototype,n.prototype=new o,n.__super__=r.prototype,n},t={}.hasOwnProperty;i=hn(),Wd.exports=(function(n){e(r,n);function r(s,o,a){if(r.__super__.constructor.call(this,s),o==null)throw new Error("Missing DTD element name. "+this.debugInfo());a||(a="(#PCDATA)"),Array.isArray(a)&&(a="("+a.join(",")+")"),this.name=this.stringify.eleName(o),this.value=this.stringify.dtdElementValue(a)}return r.prototype.toString=function(s){return this.options.writer.set(s).dtdElement(this)},r})(i)}).call(_S)),Wd.exports}var qd={exports:{}},DS=qd.exports,uv;function Tf(){return uv||(uv=1,(function(){var i,e=function(n,r){for(var s in r)t.call(r,s)&&(n[s]=r[s]);function o(){this.constructor=n}return o.prototype=r.prototype,n.prototype=new o,n.__super__=r.prototype,n},t={}.hasOwnProperty;i=hn(),qd.exports=(function(n){e(r,n);function r(s,o,a){if(r.__super__.constructor.call(this,s),o==null)throw new Error("Missing DTD notation name. "+this.debugInfo(o));if(!a.pubID&&!a.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(o));this.name=this.stringify.eleName(o),a.pubID!=null&&(this.pubID=this.stringify.dtdPubID(a.pubID)),a.sysID!=null&&(this.sysID=this.stringify.dtdSysID(a.sysID))}return r.prototype.toString=function(s){return this.options.writer.set(s).dtdNotation(this)},r})(i)}).call(DS)),qd.exports}var TS=Ld.exports,dv;function Af(){return dv||(dv=1,(function(){var i,e,t,n,r,s,o=function(c,l){for(var u in l)a.call(l,u)&&(c[u]=l[u]);function d(){this.constructor=c}return d.prototype=l.prototype,c.prototype=new d,c.__super__=l.prototype,c},a={}.hasOwnProperty;s=ns().isObject,r=hn(),i=xf(),t=_f(),e=Df(),n=Tf(),Ld.exports=(function(c){o(l,c);function l(u,d,h){var f,b;l.__super__.constructor.call(this,u),this.name="!DOCTYPE",this.documentObject=u,s(d)&&(f=d,d=f.pubID,h=f.sysID),h==null&&(b=[d,h],h=b[0],d=b[1]),d!=null&&(this.pubID=this.stringify.dtdPubID(d)),h!=null&&(this.sysID=this.stringify.dtdSysID(h))}return l.prototype.element=function(u,d){var h;return h=new e(this,u,d),this.children.push(h),this},l.prototype.attList=function(u,d,h,f,b){var g;return g=new i(this,u,d,h,f,b),this.children.push(g),this},l.prototype.entity=function(u,d){var h;return h=new t(this,!1,u,d),this.children.push(h),this},l.prototype.pEntity=function(u,d){var h;return h=new t(this,!0,u,d),this.children.push(h),this},l.prototype.notation=function(u,d){var h;return h=new n(this,u,d),this.children.push(h),this},l.prototype.toString=function(u){return this.options.writer.set(u).docType(this)},l.prototype.ele=function(u,d){return this.element(u,d)},l.prototype.att=function(u,d,h,f,b){return this.attList(u,d,h,f,b)},l.prototype.ent=function(u,d){return this.entity(u,d)},l.prototype.pent=function(u,d){return this.pEntity(u,d)},l.prototype.not=function(u,d){return this.notation(u,d)},l.prototype.up=function(){return this.root()||this.documentObject},l})(r)}).call(TS)),Ld.exports}var Hd={exports:{}},AS=Hd.exports,hv;function Ef(){return hv||(hv=1,(function(){var i,e=function(n,r){for(var s in r)t.call(r,s)&&(n[s]=r[s]);function o(){this.constructor=n}return o.prototype=r.prototype,n.prototype=new o,n.__super__=r.prototype,n},t={}.hasOwnProperty;i=hn(),Hd.exports=(function(n){e(r,n);function r(s,o){if(r.__super__.constructor.call(this,s),o==null)throw new Error("Missing raw text. "+this.debugInfo());this.value=this.stringify.raw(o)}return r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(s){return this.options.writer.set(s).raw(this)},r})(i)}).call(AS)),Hd.exports}var Vd={exports:{}},ES=Vd.exports,fv;function wf(){return fv||(fv=1,(function(){var i,e=function(n,r){for(var s in r)t.call(r,s)&&(n[s]=r[s]);function o(){this.constructor=n}return o.prototype=r.prototype,n.prototype=new o,n.__super__=r.prototype,n},t={}.hasOwnProperty;i=hn(),Vd.exports=(function(n){e(r,n);function r(s,o){if(r.__super__.constructor.call(this,s),o==null)throw new Error("Missing element text. "+this.debugInfo());this.value=this.stringify.eleText(o)}return r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(s){return this.options.writer.set(s).text(this)},r})(i)}).call(ES)),Vd.exports}var Gd={exports:{}},wS=Gd.exports,pv;function Cf(){return pv||(pv=1,(function(){var i,e=function(n,r){for(var s in r)t.call(r,s)&&(n[s]=r[s]);function o(){this.constructor=n}return o.prototype=r.prototype,n.prototype=new o,n.__super__=r.prototype,n},t={}.hasOwnProperty;i=hn(),Gd.exports=(function(n){e(r,n);function r(s,o,a){if(r.__super__.constructor.call(this,s),o==null)throw new Error("Missing instruction target. "+this.debugInfo());this.target=this.stringify.insTarget(o),a&&(this.value=this.stringify.insValue(a))}return r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(s){return this.options.writer.set(s).processingInstruction(this)},r})(i)}).call(wS)),Gd.exports}var zd={exports:{}},CS=zd.exports,gv;function Yy(){return gv||(gv=1,(function(){var i,e=function(n,r){for(var s in r)t.call(r,s)&&(n[s]=r[s]);function o(){this.constructor=n}return o.prototype=r.prototype,n.prototype=new o,n.__super__=r.prototype,n},t={}.hasOwnProperty;i=hn(),zd.exports=(function(n){e(r,n);function r(s){r.__super__.constructor.call(this,s),this.isDummy=!0}return r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(s){return""},r})(i)}).call(CS)),zd.exports}var SS=Rd.exports,mv;function hn(){return mv||(mv=1,(function(){var i,e,t,n,r,s,o,a,c,l,u,d,h,f,b={}.hasOwnProperty;f=ns(),h=f.isObject,d=f.isFunction,u=f.isEmpty,l=f.getValue,s=null,i=null,e=null,t=null,n=null,a=null,c=null,o=null,r=null,Rd.exports=(function(){function g(y){this.parent=y,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.children=[],s||(s=mf(),i=yf(),e=bf(),t=vf(),n=Af(),a=Ef(),c=wf(),o=Cf(),r=Yy())}return g.prototype.element=function(y,v,x){var D,A,T,E,I,N,R,P,j,U,B;if(N=null,v===null&&x==null&&(j=[{},null],v=j[0],x=j[1]),v==null&&(v={}),v=l(v),h(v)||(U=[v,x],x=U[0],v=U[1]),y!=null&&(y=l(y)),Array.isArray(y))for(T=0,R=y.length;T<R;T++)A=y[T],N=this.element(A);else if(d(y))N=this.element(y.apply());else if(h(y)){for(I in y)if(b.call(y,I))if(B=y[I],d(B)&&(B=B.apply()),h(B)&&u(B)&&(B=null),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&I.indexOf(this.stringify.convertAttKey)===0)N=this.attribute(I.substr(this.stringify.convertAttKey.length),B);else if(!this.options.separateArrayItems&&Array.isArray(B))for(E=0,P=B.length;E<P;E++)A=B[E],D={},D[I]=A,N=this.element(D);else h(B)?(N=this.element(I),N.element(B)):N=this.element(I,B)}else this.options.skipNullNodes&&x===null?N=this.dummy():!this.options.ignoreDecorators&&this.stringify.convertTextKey&&y.indexOf(this.stringify.convertTextKey)===0?N=this.text(x):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&y.indexOf(this.stringify.convertCDataKey)===0?N=this.cdata(x):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&y.indexOf(this.stringify.convertCommentKey)===0?N=this.comment(x):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&y.indexOf(this.stringify.convertRawKey)===0?N=this.raw(x):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&y.indexOf(this.stringify.convertPIKey)===0?N=this.instruction(y.substr(this.stringify.convertPIKey.length),x):N=this.node(y,v,x);if(N==null)throw new Error("Could not create any elements with: "+y+". "+this.debugInfo());return N},g.prototype.insertBefore=function(y,v,x){var D,A,T;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(y));return A=this.parent.children.indexOf(this),T=this.parent.children.splice(A),D=this.parent.element(y,v,x),Array.prototype.push.apply(this.parent.children,T),D},g.prototype.insertAfter=function(y,v,x){var D,A,T;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(y));return A=this.parent.children.indexOf(this),T=this.parent.children.splice(A+1),D=this.parent.element(y,v,x),Array.prototype.push.apply(this.parent.children,T),D},g.prototype.remove=function(){var y;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return y=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[y,y-y+1].concat([])),this.parent},g.prototype.node=function(y,v,x){var D,A;return y!=null&&(y=l(y)),v||(v={}),v=l(v),h(v)||(A=[v,x],x=A[0],v=A[1]),D=new s(this,y,v),x!=null&&D.text(x),this.children.push(D),D},g.prototype.text=function(y){var v;return v=new c(this,y),this.children.push(v),this},g.prototype.cdata=function(y){var v;return v=new i(this,y),this.children.push(v),this},g.prototype.comment=function(y){var v;return v=new e(this,y),this.children.push(v),this},g.prototype.commentBefore=function(y){var v,x;return v=this.parent.children.indexOf(this),x=this.parent.children.splice(v),this.parent.comment(y),Array.prototype.push.apply(this.parent.children,x),this},g.prototype.commentAfter=function(y){var v,x;return v=this.parent.children.indexOf(this),x=this.parent.children.splice(v+1),this.parent.comment(y),Array.prototype.push.apply(this.parent.children,x),this},g.prototype.raw=function(y){var v;return v=new a(this,y),this.children.push(v),this},g.prototype.dummy=function(){var y;return y=new r(this),this.children.push(y),y},g.prototype.instruction=function(y,v){var x,D,A,T,E;if(y!=null&&(y=l(y)),v!=null&&(v=l(v)),Array.isArray(y))for(T=0,E=y.length;T<E;T++)x=y[T],this.instruction(x);else if(h(y))for(x in y)b.call(y,x)&&(D=y[x],this.instruction(x,D));else d(v)&&(v=v.apply()),A=new o(this,y,v),this.children.push(A);return this},g.prototype.instructionBefore=function(y,v){var x,D;return x=this.parent.children.indexOf(this),D=this.parent.children.splice(x),this.parent.instruction(y,v),Array.prototype.push.apply(this.parent.children,D),this},g.prototype.instructionAfter=function(y,v){var x,D;return x=this.parent.children.indexOf(this),D=this.parent.children.splice(x+1),this.parent.instruction(y,v),Array.prototype.push.apply(this.parent.children,D),this},g.prototype.declaration=function(y,v,x){var D,A;return D=this.document(),A=new t(D,y,v,x),D.children[0]instanceof t?D.children[0]=A:D.children.unshift(A),D.root()||D},g.prototype.doctype=function(y,v){var x,D,A,T,E,I,N,R,P,j;for(D=this.document(),A=new n(D,y,v),P=D.children,T=E=0,N=P.length;E<N;T=++E)if(x=P[T],x instanceof n)return D.children[T]=A,A;for(j=D.children,T=I=0,R=j.length;I<R;T=++I)if(x=j[T],x.isRoot)return D.children.splice(T,0,A),A;return D.children.push(A),A},g.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},g.prototype.root=function(){var y;for(y=this;y;){if(y.isDocument)return y.rootObject;if(y.isRoot)return y;y=y.parent}},g.prototype.document=function(){var y;for(y=this;y;){if(y.isDocument)return y;y=y.parent}},g.prototype.end=function(y){return this.document().end(y)},g.prototype.prev=function(){var y;for(y=this.parent.children.indexOf(this);y>0&&this.parent.children[y-1].isDummy;)y=y-1;if(y<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[y-1]},g.prototype.next=function(){var y;for(y=this.parent.children.indexOf(this);y<this.parent.children.length-1&&this.parent.children[y+1].isDummy;)y=y+1;if(y===-1||y===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[y+1]},g.prototype.importDocument=function(y){var v;return v=y.root().clone(),v.parent=this,v.isRoot=!1,this.children.push(v),this},g.prototype.debugInfo=function(y){var v,x;return y=y||this.name,y==null&&!((v=this.parent)!=null&&v.name)?"":y==null?"parent: <"+this.parent.name+">":(x=this.parent)!=null&&x.name?"node: <"+y+">, parent: <"+this.parent.name+">":"node: <"+y+">"},g.prototype.ele=function(y,v,x){return this.element(y,v,x)},g.prototype.nod=function(y,v,x){return this.node(y,v,x)},g.prototype.txt=function(y){return this.text(y)},g.prototype.dat=function(y){return this.cdata(y)},g.prototype.com=function(y){return this.comment(y)},g.prototype.ins=function(y,v){return this.instruction(y,v)},g.prototype.doc=function(){return this.document()},g.prototype.dec=function(y,v,x){return this.declaration(y,v,x)},g.prototype.dtd=function(y,v){return this.doctype(y,v)},g.prototype.e=function(y,v,x){return this.element(y,v,x)},g.prototype.n=function(y,v,x){return this.node(y,v,x)},g.prototype.t=function(y){return this.text(y)},g.prototype.d=function(y){return this.cdata(y)},g.prototype.c=function(y){return this.comment(y)},g.prototype.r=function(y){return this.raw(y)},g.prototype.i=function(y,v){return this.instruction(y,v)},g.prototype.u=function(){return this.up()},g.prototype.importXMLBuilder=function(y){return this.importDocument(y)},g})()}).call(SS)),Rd.exports}var $d={exports:{}},US=$d.exports,yv;function vT(){return yv||(yv=1,(function(){var i=function(t,n){return function(){return t.apply(n,arguments)}},e={}.hasOwnProperty;$d.exports=(function(){function t(n){this.assertLegalChar=i(this.assertLegalChar,this);var r,s,o;n||(n={}),this.noDoubleEncoding=n.noDoubleEncoding,s=n.stringify||{};for(r in s)e.call(s,r)&&(o=s[r],this[r]=o)}return t.prototype.eleName=function(n){return n=""+n||"",this.assertLegalChar(n)},t.prototype.eleText=function(n){return n=""+n||"",this.assertLegalChar(this.elEscape(n))},t.prototype.cdata=function(n){return n=""+n||"",n=n.replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(n)},t.prototype.comment=function(n){if(n=""+n||"",n.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+n);return this.assertLegalChar(n)},t.prototype.raw=function(n){return""+n||""},t.prototype.attName=function(n){return n=""+n||""},t.prototype.attValue=function(n){return n=""+n||"",this.attEscape(n)},t.prototype.insTarget=function(n){return""+n||""},t.prototype.insValue=function(n){if(n=""+n||"",n.match(/\?>/))throw new Error("Invalid processing instruction value: "+n);return n},t.prototype.xmlVersion=function(n){if(n=""+n||"",!n.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+n);return n},t.prototype.xmlEncoding=function(n){if(n=""+n||"",!n.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+n);return n},t.prototype.xmlStandalone=function(n){return n?"yes":"no"},t.prototype.dtdPubID=function(n){return""+n||""},t.prototype.dtdSysID=function(n){return""+n||""},t.prototype.dtdElementValue=function(n){return""+n||""},t.prototype.dtdAttType=function(n){return""+n||""},t.prototype.dtdAttDefault=function(n){return n!=null?""+n||"":n},t.prototype.dtdEntityValue=function(n){return""+n||""},t.prototype.dtdNData=function(n){return""+n||""},t.prototype.convertAttKey="@",t.prototype.convertPIKey="?",t.prototype.convertTextKey="#text",t.prototype.convertCDataKey="#cdata",t.prototype.convertCommentKey="#comment",t.prototype.convertRawKey="#raw",t.prototype.assertLegalChar=function(n){var r;if(r=n.match(/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/),r)throw new Error("Invalid character in string: "+n+" at index "+r.index);return n},t.prototype.elEscape=function(n){var r;return r=this.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,n.replace(r,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;")},t.prototype.attEscape=function(n){var r;return r=this.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,n.replace(r,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")},t})()}).call(US)),$d.exports}var Xd={exports:{}},jd={exports:{}},IS=jd.exports,bv;function xT(){return bv||(bv=1,(function(){var i={}.hasOwnProperty;jd.exports=(function(){function e(t){var n,r,s,o,a,c,l,u,d;t||(t={}),this.pretty=t.pretty||!1,this.allowEmpty=(r=t.allowEmpty)!=null?r:!1,this.pretty?(this.indent=(s=t.indent)!=null?s:"  ",this.newline=(o=t.newline)!=null?o:`
`,this.offset=(a=t.offset)!=null?a:0,this.dontprettytextnodes=(c=t.dontprettytextnodes)!=null?c:0):(this.indent="",this.newline="",this.offset=0,this.dontprettytextnodes=0),this.spacebeforeslash=(l=t.spacebeforeslash)!=null?l:"",this.spacebeforeslash===!0&&(this.spacebeforeslash=" "),this.newlinedefault=this.newline,this.prettydefault=this.pretty,u=t.writer||{};for(n in u)i.call(u,n)&&(d=u[n],this[n]=d)}return e.prototype.set=function(t){var n,r,s;t||(t={}),"pretty"in t&&(this.pretty=t.pretty),"allowEmpty"in t&&(this.allowEmpty=t.allowEmpty),this.pretty?(this.indent="indent"in t?t.indent:"  ",this.newline="newline"in t?t.newline:`
`,this.offset="offset"in t?t.offset:0,this.dontprettytextnodes="dontprettytextnodes"in t?t.dontprettytextnodes:0):(this.indent="",this.newline="",this.offset=0,this.dontprettytextnodes=0),this.spacebeforeslash="spacebeforeslash"in t?t.spacebeforeslash:"",this.spacebeforeslash===!0&&(this.spacebeforeslash=" "),this.newlinedefault=this.newline,this.prettydefault=this.pretty,r=t.writer||{};for(n in r)i.call(r,n)&&(s=r[n],this[n]=s);return this},e.prototype.space=function(t){var n;return this.pretty?(n=(t||0)+this.offset+1,n>0?new Array(n).join(this.indent):""):""},e})()}).call(IS)),jd.exports}var RS=Xd.exports,vv;function Jy(){return vv||(vv=1,(function(){var i,e,t,n,r,s,o,a,c,l,u,d,h,f,b=function(y,v){for(var x in v)g.call(v,x)&&(y[x]=v[x]);function D(){this.constructor=y}return D.prototype=v.prototype,y.prototype=new D,y.__super__=v.prototype,y},g={}.hasOwnProperty;o=vf(),a=Af(),i=yf(),e=bf(),l=mf(),d=Ef(),h=wf(),u=Cf(),c=Yy(),t=xf(),n=Df(),r=_f(),s=Tf(),f=xT(),Xd.exports=(function(y){b(v,y);function v(x){v.__super__.constructor.call(this,x)}return v.prototype.document=function(x){var D,A,T,E,I;for(this.textispresent=!1,E="",I=x.children,A=0,T=I.length;A<T;A++)D=I[A],!(D instanceof c)&&(E+=(function(){switch(!1){case!(D instanceof o):return this.declaration(D);case!(D instanceof a):return this.docType(D);case!(D instanceof e):return this.comment(D);case!(D instanceof u):return this.processingInstruction(D);default:return this.element(D,0)}}).call(this));return this.pretty&&E.slice(-this.newline.length)===this.newline&&(E=E.slice(0,-this.newline.length)),E},v.prototype.attribute=function(x){return" "+x.name+'="'+x.value+'"'},v.prototype.cdata=function(x,D){return this.space(D)+"<![CDATA["+x.text+"]]>"+this.newline},v.prototype.comment=function(x,D){return this.space(D)+"<!-- "+x.text+" -->"+this.newline},v.prototype.declaration=function(x,D){var A;return A=this.space(D),A+='<?xml version="'+x.version+'"',x.encoding!=null&&(A+=' encoding="'+x.encoding+'"'),x.standalone!=null&&(A+=' standalone="'+x.standalone+'"'),A+=this.spacebeforeslash+"?>",A+=this.newline,A},v.prototype.docType=function(x,D){var A,T,E,I,N;if(D||(D=0),I=this.space(D),I+="<!DOCTYPE "+x.root().name,x.pubID&&x.sysID?I+=' PUBLIC "'+x.pubID+'" "'+x.sysID+'"':x.sysID&&(I+=' SYSTEM "'+x.sysID+'"'),x.children.length>0){for(I+=" [",I+=this.newline,N=x.children,T=0,E=N.length;T<E;T++)A=N[T],I+=(function(){switch(!1){case!(A instanceof t):return this.dtdAttList(A,D+1);case!(A instanceof n):return this.dtdElement(A,D+1);case!(A instanceof r):return this.dtdEntity(A,D+1);case!(A instanceof s):return this.dtdNotation(A,D+1);case!(A instanceof i):return this.cdata(A,D+1);case!(A instanceof e):return this.comment(A,D+1);case!(A instanceof u):return this.processingInstruction(A,D+1);default:throw new Error("Unknown DTD node type: "+A.constructor.name)}}).call(this);I+="]"}return I+=this.spacebeforeslash+">",I+=this.newline,I},v.prototype.element=function(x,D){var A,T,E,I,N,R,P,j,U,B,S,J,q;D||(D=0),q=!1,this.textispresent?(this.newline="",this.pretty=!1):(this.newline=this.newlinedefault,this.pretty=this.prettydefault),J=this.space(D),j="",j+=J+"<"+x.name,U=x.attributes;for(P in U)g.call(U,P)&&(A=U[P],j+=this.attribute(A));if(x.children.length===0||x.children.every(function(O){return O.value===""}))this.allowEmpty?j+="></"+x.name+">"+this.newline:j+=this.spacebeforeslash+"/>"+this.newline;else if(this.pretty&&x.children.length===1&&x.children[0].value!=null)j+=">",j+=x.children[0].value,j+="</"+x.name+">"+this.newline;else{if(this.dontprettytextnodes){for(B=x.children,E=0,N=B.length;E<N;E++)if(T=B[E],T.value!=null){this.textispresent++,q=!0;break}}for(this.textispresent&&(this.newline="",this.pretty=!1,J=this.space(D)),j+=">"+this.newline,S=x.children,I=0,R=S.length;I<R;I++)T=S[I],j+=(function(){switch(!1){case!(T instanceof i):return this.cdata(T,D+1);case!(T instanceof e):return this.comment(T,D+1);case!(T instanceof l):return this.element(T,D+1);case!(T instanceof d):return this.raw(T,D+1);case!(T instanceof h):return this.text(T,D+1);case!(T instanceof u):return this.processingInstruction(T,D+1);case!(T instanceof c):return"";default:throw new Error("Unknown XML node type: "+T.constructor.name)}}).call(this);q&&this.textispresent--,this.textispresent||(this.newline=this.newlinedefault,this.pretty=this.prettydefault),j+=J+"</"+x.name+">"+this.newline}return j},v.prototype.processingInstruction=function(x,D){var A;return A=this.space(D)+"<?"+x.target,x.value&&(A+=" "+x.value),A+=this.spacebeforeslash+"?>"+this.newline,A},v.prototype.raw=function(x,D){return this.space(D)+x.value+this.newline},v.prototype.text=function(x,D){return this.space(D)+x.value+this.newline},v.prototype.dtdAttList=function(x,D){var A;return A=this.space(D)+"<!ATTLIST "+x.elementName+" "+x.attributeName+" "+x.attributeType,x.defaultValueType!=="#DEFAULT"&&(A+=" "+x.defaultValueType),x.defaultValue&&(A+=' "'+x.defaultValue+'"'),A+=this.spacebeforeslash+">"+this.newline,A},v.prototype.dtdElement=function(x,D){return this.space(D)+"<!ELEMENT "+x.name+" "+x.value+this.spacebeforeslash+">"+this.newline},v.prototype.dtdEntity=function(x,D){var A;return A=this.space(D)+"<!ENTITY",x.pe&&(A+=" %"),A+=" "+x.name,x.value?A+=' "'+x.value+'"':(x.pubID&&x.sysID?A+=' PUBLIC "'+x.pubID+'" "'+x.sysID+'"':x.sysID&&(A+=' SYSTEM "'+x.sysID+'"'),x.nData&&(A+=" NDATA "+x.nData)),A+=this.spacebeforeslash+">"+this.newline,A},v.prototype.dtdNotation=function(x,D){var A;return A=this.space(D)+"<!NOTATION "+x.name,x.pubID&&x.sysID?A+=' PUBLIC "'+x.pubID+'" "'+x.sysID+'"':x.pubID?A+=' PUBLIC "'+x.pubID+'"':x.sysID&&(A+=' SYSTEM "'+x.sysID+'"'),A+=this.spacebeforeslash+">"+this.newline,A},v.prototype.openNode=function(x,D){var A,T,E,I;if(D||(D=0),x instanceof l){E=this.space(D)+"<"+x.name,I=x.attributes;for(T in I)g.call(I,T)&&(A=I[T],E+=this.attribute(A));return E+=(x.children?">":"/>")+this.newline,E}else return E=this.space(D)+"<!DOCTYPE "+x.rootNodeName,x.pubID&&x.sysID?E+=' PUBLIC "'+x.pubID+'" "'+x.sysID+'"':x.sysID&&(E+=' SYSTEM "'+x.sysID+'"'),E+=(x.children?" [":">")+this.newline,E},v.prototype.closeNode=function(x,D){switch(D||(D=0),!1){case!(x instanceof l):return this.space(D)+"</"+x.name+">"+this.newline;case!(x instanceof a):return this.space(D)+"]>"+this.newline}},v})(f)}).call(RS)),Xd.exports}var FS=Id.exports,xv;function NS(){return xv||(xv=1,(function(){var i,e,t,n,r=function(o,a){for(var c in a)s.call(a,c)&&(o[c]=a[c]);function l(){this.constructor=o}return l.prototype=a.prototype,o.prototype=new l,o.__super__=a.prototype,o},s={}.hasOwnProperty;n=ns().isPlainObject,i=hn(),t=vT(),e=Jy(),Id.exports=(function(o){r(a,o);function a(c){a.__super__.constructor.call(this,null),this.name="?xml",c||(c={}),c.writer||(c.writer=new e),this.options=c,this.stringify=new t(c),this.isDocument=!0}return a.prototype.end=function(c){var l;return c?n(c)&&(l=c,c=this.options.writer.set(l)):c=this.options.writer,c.document(this)},a.prototype.toString=function(c){return this.options.writer.set(c).document(this)},a})(i)}).call(FS)),Id.exports}var Yd={exports:{}},kS=Yd.exports,_v;function MS(){return _v||(_v=1,(function(){var i,e,t,n,r,s,o,a,c,l,u,d,h,f,b,g,y,v,x,D,A={}.hasOwnProperty;D=ns(),v=D.isObject,y=D.isFunction,x=D.isPlainObject,g=D.getValue,l=mf(),e=yf(),t=bf(),d=Ef(),b=wf(),u=Cf(),a=vf(),c=Af(),n=xf(),s=_f(),r=Df(),o=Tf(),i=bT(),f=vT(),h=Jy(),Yd.exports=(function(){function T(E,I,N){var R;this.name="?xml",E||(E={}),E.writer?x(E.writer)&&(R=E.writer,E.writer=new h(R)):E.writer=new h(E),this.options=E,this.writer=E.writer,this.stringify=new f(E),this.onDataCallback=I||function(){},this.onEndCallback=N||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return T.prototype.node=function(E,I,N){var R,P;if(E==null)throw new Error("Missing node name.");if(this.root&&this.currentLevel===-1)throw new Error("Document can only have one root node. "+this.debugInfo(E));return this.openCurrent(),E=g(E),I===null&&N==null&&(R=[{},null],I=R[0],N=R[1]),I==null&&(I={}),I=g(I),v(I)||(P=[I,N],N=P[0],I=P[1]),this.currentNode=new l(this,E,I),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,N!=null&&this.text(N),this},T.prototype.element=function(E,I,N){return this.currentNode&&this.currentNode instanceof c?this.dtdElement.apply(this,arguments):this.node(E,I,N)},T.prototype.attribute=function(E,I){var N,R;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(E));if(E!=null&&(E=g(E)),v(E))for(N in E)A.call(E,N)&&(R=E[N],this.attribute(N,R));else y(I)&&(I=I.apply()),(!this.options.skipNullAttributes||I!=null)&&(this.currentNode.attributes[E]=new i(this,E,I));return this},T.prototype.text=function(E){var I;return this.openCurrent(),I=new b(this,E),this.onData(this.writer.text(I,this.currentLevel+1),this.currentLevel+1),this},T.prototype.cdata=function(E){var I;return this.openCurrent(),I=new e(this,E),this.onData(this.writer.cdata(I,this.currentLevel+1),this.currentLevel+1),this},T.prototype.comment=function(E){var I;return this.openCurrent(),I=new t(this,E),this.onData(this.writer.comment(I,this.currentLevel+1),this.currentLevel+1),this},T.prototype.raw=function(E){var I;return this.openCurrent(),I=new d(this,E),this.onData(this.writer.raw(I,this.currentLevel+1),this.currentLevel+1),this},T.prototype.instruction=function(E,I){var N,R,P,j,U;if(this.openCurrent(),E!=null&&(E=g(E)),I!=null&&(I=g(I)),Array.isArray(E))for(N=0,j=E.length;N<j;N++)R=E[N],this.instruction(R);else if(v(E))for(R in E)A.call(E,R)&&(P=E[R],this.instruction(R,P));else y(I)&&(I=I.apply()),U=new u(this,E,I),this.onData(this.writer.processingInstruction(U,this.currentLevel+1),this.currentLevel+1);return this},T.prototype.declaration=function(E,I,N){var R;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return R=new a(this,E,I,N),this.onData(this.writer.declaration(R,this.currentLevel+1),this.currentLevel+1),this},T.prototype.doctype=function(E,I,N){if(this.openCurrent(),E==null)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new c(this,I,N),this.currentNode.rootNodeName=E,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},T.prototype.dtdElement=function(E,I){var N;return this.openCurrent(),N=new r(this,E,I),this.onData(this.writer.dtdElement(N,this.currentLevel+1),this.currentLevel+1),this},T.prototype.attList=function(E,I,N,R,P){var j;return this.openCurrent(),j=new n(this,E,I,N,R,P),this.onData(this.writer.dtdAttList(j,this.currentLevel+1),this.currentLevel+1),this},T.prototype.entity=function(E,I){var N;return this.openCurrent(),N=new s(this,!1,E,I),this.onData(this.writer.dtdEntity(N,this.currentLevel+1),this.currentLevel+1),this},T.prototype.pEntity=function(E,I){var N;return this.openCurrent(),N=new s(this,!0,E,I),this.onData(this.writer.dtdEntity(N,this.currentLevel+1),this.currentLevel+1),this},T.prototype.notation=function(E,I){var N;return this.openCurrent(),N=new o(this,E,I),this.onData(this.writer.dtdNotation(N,this.currentLevel+1),this.currentLevel+1),this},T.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},T.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},T.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},T.prototype.openNode=function(E){if(!E.isOpen)return!this.root&&this.currentLevel===0&&E instanceof l&&(this.root=E),this.onData(this.writer.openNode(E,this.currentLevel),this.currentLevel),E.isOpen=!0},T.prototype.closeNode=function(E){if(!E.isClosed)return this.onData(this.writer.closeNode(E,this.currentLevel),this.currentLevel),E.isClosed=!0},T.prototype.onData=function(E,I){return this.documentStarted=!0,this.onDataCallback(E,I+1)},T.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},T.prototype.debugInfo=function(E){return E==null?"":"node: <"+E+">"},T.prototype.ele=function(){return this.element.apply(this,arguments)},T.prototype.nod=function(E,I,N){return this.node(E,I,N)},T.prototype.txt=function(E){return this.text(E)},T.prototype.dat=function(E){return this.cdata(E)},T.prototype.com=function(E){return this.comment(E)},T.prototype.ins=function(E,I){return this.instruction(E,I)},T.prototype.dec=function(E,I,N){return this.declaration(E,I,N)},T.prototype.dtd=function(E,I,N){return this.doctype(E,I,N)},T.prototype.e=function(E,I,N){return this.element(E,I,N)},T.prototype.n=function(E,I,N){return this.node(E,I,N)},T.prototype.t=function(E){return this.text(E)},T.prototype.d=function(E){return this.cdata(E)},T.prototype.c=function(E){return this.comment(E)},T.prototype.r=function(E){return this.raw(E)},T.prototype.i=function(E,I){return this.instruction(E,I)},T.prototype.att=function(){return this.currentNode&&this.currentNode instanceof c?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},T.prototype.a=function(){return this.currentNode&&this.currentNode instanceof c?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},T.prototype.ent=function(E,I){return this.entity(E,I)},T.prototype.pent=function(E,I){return this.pEntity(E,I)},T.prototype.not=function(E,I){return this.notation(E,I)},T})()}).call(kS)),Yd.exports}var Jd={exports:{}},PS=Jd.exports,Dv;function LS(){return Dv||(Dv=1,(function(){var i,e,t,n,r,s,o,a,c,l,u,d,h,f,b=function(y,v){for(var x in v)g.call(v,x)&&(y[x]=v[x]);function D(){this.constructor=y}return D.prototype=v.prototype,y.prototype=new D,y.__super__=v.prototype,y},g={}.hasOwnProperty;o=vf(),a=Af(),i=yf(),e=bf(),l=mf(),d=Ef(),h=wf(),u=Cf(),c=Yy(),t=xf(),n=Df(),r=_f(),s=Tf(),f=xT(),Jd.exports=(function(y){b(v,y);function v(x,D){v.__super__.constructor.call(this,D),this.stream=x}return v.prototype.document=function(x){var D,A,T,E,I,N,R,P;for(N=x.children,A=0,E=N.length;A<E;A++)D=N[A],D.isLastRootNode=!1;for(x.children[x.children.length-1].isLastRootNode=!0,R=x.children,P=[],T=0,I=R.length;T<I;T++)if(D=R[T],!(D instanceof c))switch(!1){case!(D instanceof o):P.push(this.declaration(D));break;case!(D instanceof a):P.push(this.docType(D));break;case!(D instanceof e):P.push(this.comment(D));break;case!(D instanceof u):P.push(this.processingInstruction(D));break;default:P.push(this.element(D))}return P},v.prototype.attribute=function(x){return this.stream.write(" "+x.name+'="'+x.value+'"')},v.prototype.cdata=function(x,D){return this.stream.write(this.space(D)+"<![CDATA["+x.text+"]]>"+this.endline(x))},v.prototype.comment=function(x,D){return this.stream.write(this.space(D)+"<!-- "+x.text+" -->"+this.endline(x))},v.prototype.declaration=function(x,D){return this.stream.write(this.space(D)),this.stream.write('<?xml version="'+x.version+'"'),x.encoding!=null&&this.stream.write(' encoding="'+x.encoding+'"'),x.standalone!=null&&this.stream.write(' standalone="'+x.standalone+'"'),this.stream.write(this.spacebeforeslash+"?>"),this.stream.write(this.endline(x))},v.prototype.docType=function(x,D){var A,T,E,I;if(D||(D=0),this.stream.write(this.space(D)),this.stream.write("<!DOCTYPE "+x.root().name),x.pubID&&x.sysID?this.stream.write(' PUBLIC "'+x.pubID+'" "'+x.sysID+'"'):x.sysID&&this.stream.write(' SYSTEM "'+x.sysID+'"'),x.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(x)),I=x.children,T=0,E=I.length;T<E;T++)switch(A=I[T],!1){case!(A instanceof t):this.dtdAttList(A,D+1);break;case!(A instanceof n):this.dtdElement(A,D+1);break;case!(A instanceof r):this.dtdEntity(A,D+1);break;case!(A instanceof s):this.dtdNotation(A,D+1);break;case!(A instanceof i):this.cdata(A,D+1);break;case!(A instanceof e):this.comment(A,D+1);break;case!(A instanceof u):this.processingInstruction(A,D+1);break;default:throw new Error("Unknown DTD node type: "+A.constructor.name)}this.stream.write("]")}return this.stream.write(this.spacebeforeslash+">"),this.stream.write(this.endline(x))},v.prototype.element=function(x,D){var A,T,E,I,N,R,P,j;D||(D=0),j=this.space(D),this.stream.write(j+"<"+x.name),R=x.attributes;for(N in R)g.call(R,N)&&(A=R[N],this.attribute(A));if(x.children.length===0||x.children.every(function(U){return U.value===""}))this.allowEmpty?this.stream.write("></"+x.name+">"):this.stream.write(this.spacebeforeslash+"/>");else if(this.pretty&&x.children.length===1&&x.children[0].value!=null)this.stream.write(">"),this.stream.write(x.children[0].value),this.stream.write("</"+x.name+">");else{for(this.stream.write(">"+this.newline),P=x.children,E=0,I=P.length;E<I;E++)switch(T=P[E],!1){case!(T instanceof i):this.cdata(T,D+1);break;case!(T instanceof e):this.comment(T,D+1);break;case!(T instanceof l):this.element(T,D+1);break;case!(T instanceof d):this.raw(T,D+1);break;case!(T instanceof h):this.text(T,D+1);break;case!(T instanceof u):this.processingInstruction(T,D+1);break;case!(T instanceof c):break;default:throw new Error("Unknown XML node type: "+T.constructor.name)}this.stream.write(j+"</"+x.name+">")}return this.stream.write(this.endline(x))},v.prototype.processingInstruction=function(x,D){return this.stream.write(this.space(D)+"<?"+x.target),x.value&&this.stream.write(" "+x.value),this.stream.write(this.spacebeforeslash+"?>"+this.endline(x))},v.prototype.raw=function(x,D){return this.stream.write(this.space(D)+x.value+this.endline(x))},v.prototype.text=function(x,D){return this.stream.write(this.space(D)+x.value+this.endline(x))},v.prototype.dtdAttList=function(x,D){return this.stream.write(this.space(D)+"<!ATTLIST "+x.elementName+" "+x.attributeName+" "+x.attributeType),x.defaultValueType!=="#DEFAULT"&&this.stream.write(" "+x.defaultValueType),x.defaultValue&&this.stream.write(' "'+x.defaultValue+'"'),this.stream.write(this.spacebeforeslash+">"+this.endline(x))},v.prototype.dtdElement=function(x,D){return this.stream.write(this.space(D)+"<!ELEMENT "+x.name+" "+x.value),this.stream.write(this.spacebeforeslash+">"+this.endline(x))},v.prototype.dtdEntity=function(x,D){return this.stream.write(this.space(D)+"<!ENTITY"),x.pe&&this.stream.write(" %"),this.stream.write(" "+x.name),x.value?this.stream.write(' "'+x.value+'"'):(x.pubID&&x.sysID?this.stream.write(' PUBLIC "'+x.pubID+'" "'+x.sysID+'"'):x.sysID&&this.stream.write(' SYSTEM "'+x.sysID+'"'),x.nData&&this.stream.write(" NDATA "+x.nData)),this.stream.write(this.spacebeforeslash+">"+this.endline(x))},v.prototype.dtdNotation=function(x,D){return this.stream.write(this.space(D)+"<!NOTATION "+x.name),x.pubID&&x.sysID?this.stream.write(' PUBLIC "'+x.pubID+'" "'+x.sysID+'"'):x.pubID?this.stream.write(' PUBLIC "'+x.pubID+'"'):x.sysID&&this.stream.write(' SYSTEM "'+x.sysID+'"'),this.stream.write(this.spacebeforeslash+">"+this.endline(x))},v.prototype.endline=function(x){return x.isLastRootNode?"":this.newline},v})(f)}).call(PS)),Jd.exports}var Tv;function BS(){return Tv||(Tv=1,(function(){var i,e,t,n,r,s,o;o=ns(),r=o.assign,s=o.isFunction,i=NS(),e=MS(),n=Jy(),t=LS(),us.create=function(a,c,l,u){var d,h;if(a==null)throw new Error("Root element needs a name.");return u=r({},c,l,u),d=new i(u),h=d.element(a),u.headless||(d.declaration(u),(u.pubID!=null||u.sysID!=null)&&d.doctype(u)),h},us.begin=function(a,c,l){var u;return s(a)&&(u=[a,c],c=u[0],l=u[1],a={}),c?new e(a,c,l):new i(a)},us.stringWriter=function(a){return new n(a)},us.streamWriter=function(a,c){return new t(a,c)}}).call(us)),us}var Av;function OS(){if(Av)return Xp;Av=1;var i=gt,e=BS();Xp.writeString=t;function t(r,s){var o=i.invert(s),a={element:l,text:n};function c(h,f){return a[f.type](h,f)}function l(h,f){var b=h.element(u(f.name),f.attributes);f.children.forEach(function(g){c(b,g)})}function u(h){var f=/^\{(.*)\}(.*)$/.exec(h);if(f){var b=o[f[1]];return b+(b===""?"":":")+f[2]}else return h}function d(h){var f=e.create(u(h.name),{version:"1.0",encoding:"UTF-8",standalone:!0});return i.forEach(s,function(b,g){var y="xmlns"+(g===""?"":":"+g);f.attribute(y,b)}),h.children.forEach(function(b){c(f,b)}),f.end()}return d(r)}function n(r,s){r.text(s.value)}return Xp}var Ev;function _T(){if(Ev)return cs;Ev=1;var i=yT();return cs.Element=i.Element,cs.element=i.element,cs.text=i.text,cs.readString=fS().readString,cs.writeString=OS().writeString,cs}var wv;function WS(){if(wv)return Ju;wv=1;var i=gt,e=ts(),t=_T();Ju.read=r,Ju.readXmlFromZipFile=s;var n={"http://schemas.openxmlformats.org/wordprocessingml/2006/main":"w","http://schemas.openxmlformats.org/officeDocument/2006/relationships":"r","http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing":"wp","http://schemas.openxmlformats.org/drawingml/2006/main":"a","http://schemas.openxmlformats.org/drawingml/2006/picture":"pic","http://purl.oclc.org/ooxml/wordprocessingml/main":"w","http://purl.oclc.org/ooxml/officeDocument/relationships":"r","http://purl.oclc.org/ooxml/drawingml/wordprocessingDrawing":"wp","http://purl.oclc.org/ooxml/drawingml/main":"a","http://purl.oclc.org/ooxml/drawingml/picture":"pic","http://schemas.openxmlformats.org/package/2006/content-types":"content-types","http://schemas.openxmlformats.org/package/2006/relationships":"relationships","http://schemas.openxmlformats.org/markup-compatibility/2006":"mc","urn:schemas-microsoft-com:vml":"v","urn:schemas-microsoft-com:office:word":"office-word"};function r(c){return t.readString(c,n).then(function(l){return a(l)[0]})}function s(c,l){return c.exists(l)?c.read(l,"utf-8").then(o).then(r):e.resolve(null)}function o(c){return c.replace(/^\uFEFF/g,"")}function a(c){return c.type==="element"?c.name==="mc:AlternateContent"?c.first("mc:Fallback").children:(c.children=i.flatten(c.children.map(a,!0)),[c]):[c]}return Ju}var Qu={},qn={},ed={},Cv;function qS(){if(Cv)return ed;Cv=1,Object.defineProperty(ed,"__esModule",{value:!0});var i=[{"Typeface name":"Symbol","Dingbat dec":"32","Dingbat hex":"20","Unicode dec":"32","Unicode hex":"20"},{"Typeface name":"Symbol","Dingbat dec":"33","Dingbat hex":"21","Unicode dec":"33","Unicode hex":"21"},{"Typeface name":"Symbol","Dingbat dec":"34","Dingbat hex":"22","Unicode dec":"8704","Unicode hex":"2200"},{"Typeface name":"Symbol","Dingbat dec":"35","Dingbat hex":"23","Unicode dec":"35","Unicode hex":"23"},{"Typeface name":"Symbol","Dingbat dec":"36","Dingbat hex":"24","Unicode dec":"8707","Unicode hex":"2203"},{"Typeface name":"Symbol","Dingbat dec":"37","Dingbat hex":"25","Unicode dec":"37","Unicode hex":"25"},{"Typeface name":"Symbol","Dingbat dec":"38","Dingbat hex":"26","Unicode dec":"38","Unicode hex":"26"},{"Typeface name":"Symbol","Dingbat dec":"39","Dingbat hex":"27","Unicode dec":"8717","Unicode hex":"220D"},{"Typeface name":"Symbol","Dingbat dec":"40","Dingbat hex":"28","Unicode dec":"40","Unicode hex":"28"},{"Typeface name":"Symbol","Dingbat dec":"41","Dingbat hex":"29","Unicode dec":"41","Unicode hex":"29"},{"Typeface name":"Symbol","Dingbat dec":"42","Dingbat hex":"2A","Unicode dec":"42","Unicode hex":"2A"},{"Typeface name":"Symbol","Dingbat dec":"43","Dingbat hex":"2B","Unicode dec":"43","Unicode hex":"2B"},{"Typeface name":"Symbol","Dingbat dec":"44","Dingbat hex":"2C","Unicode dec":"44","Unicode hex":"2C"},{"Typeface name":"Symbol","Dingbat dec":"45","Dingbat hex":"2D","Unicode dec":"8722","Unicode hex":"2212"},{"Typeface name":"Symbol","Dingbat dec":"46","Dingbat hex":"2E","Unicode dec":"46","Unicode hex":"2E"},{"Typeface name":"Symbol","Dingbat dec":"47","Dingbat hex":"2F","Unicode dec":"47","Unicode hex":"2F"},{"Typeface name":"Symbol","Dingbat dec":"48","Dingbat hex":"30","Unicode dec":"48","Unicode hex":"30"},{"Typeface name":"Symbol","Dingbat dec":"49","Dingbat hex":"31","Unicode dec":"49","Unicode hex":"31"},{"Typeface name":"Symbol","Dingbat dec":"50","Dingbat hex":"32","Unicode dec":"50","Unicode hex":"32"},{"Typeface name":"Symbol","Dingbat dec":"51","Dingbat hex":"33","Unicode dec":"51","Unicode hex":"33"},{"Typeface name":"Symbol","Dingbat dec":"52","Dingbat hex":"34","Unicode dec":"52","Unicode hex":"34"},{"Typeface name":"Symbol","Dingbat dec":"53","Dingbat hex":"35","Unicode dec":"53","Unicode hex":"35"},{"Typeface name":"Symbol","Dingbat dec":"54","Dingbat hex":"36","Unicode dec":"54","Unicode hex":"36"},{"Typeface name":"Symbol","Dingbat dec":"55","Dingbat hex":"37","Unicode dec":"55","Unicode hex":"37"},{"Typeface name":"Symbol","Dingbat dec":"56","Dingbat hex":"38","Unicode dec":"56","Unicode hex":"38"},{"Typeface name":"Symbol","Dingbat dec":"57","Dingbat hex":"39","Unicode dec":"57","Unicode hex":"39"},{"Typeface name":"Symbol","Dingbat dec":"58","Dingbat hex":"3A","Unicode dec":"58","Unicode hex":"3A"},{"Typeface name":"Symbol","Dingbat dec":"59","Dingbat hex":"3B","Unicode dec":"59","Unicode hex":"3B"},{"Typeface name":"Symbol","Dingbat dec":"60","Dingbat hex":"3C","Unicode dec":"60","Unicode hex":"3C"},{"Typeface name":"Symbol","Dingbat dec":"61","Dingbat hex":"3D","Unicode dec":"61","Unicode hex":"3D"},{"Typeface name":"Symbol","Dingbat dec":"62","Dingbat hex":"3E","Unicode dec":"62","Unicode hex":"3E"},{"Typeface name":"Symbol","Dingbat dec":"63","Dingbat hex":"3F","Unicode dec":"63","Unicode hex":"3F"},{"Typeface name":"Symbol","Dingbat dec":"64","Dingbat hex":"40","Unicode dec":"8773","Unicode hex":"2245"},{"Typeface name":"Symbol","Dingbat dec":"65","Dingbat hex":"41","Unicode dec":"913","Unicode hex":"391"},{"Typeface name":"Symbol","Dingbat dec":"66","Dingbat hex":"42","Unicode dec":"914","Unicode hex":"392"},{"Typeface name":"Symbol","Dingbat dec":"67","Dingbat hex":"43","Unicode dec":"935","Unicode hex":"3A7"},{"Typeface name":"Symbol","Dingbat dec":"68","Dingbat hex":"44","Unicode dec":"916","Unicode hex":"394"},{"Typeface name":"Symbol","Dingbat dec":"69","Dingbat hex":"45","Unicode dec":"917","Unicode hex":"395"},{"Typeface name":"Symbol","Dingbat dec":"70","Dingbat hex":"46","Unicode dec":"934","Unicode hex":"3A6"},{"Typeface name":"Symbol","Dingbat dec":"71","Dingbat hex":"47","Unicode dec":"915","Unicode hex":"393"},{"Typeface name":"Symbol","Dingbat dec":"72","Dingbat hex":"48","Unicode dec":"919","Unicode hex":"397"},{"Typeface name":"Symbol","Dingbat dec":"73","Dingbat hex":"49","Unicode dec":"921","Unicode hex":"399"},{"Typeface name":"Symbol","Dingbat dec":"74","Dingbat hex":"4A","Unicode dec":"977","Unicode hex":"3D1"},{"Typeface name":"Symbol","Dingbat dec":"75","Dingbat hex":"4B","Unicode dec":"922","Unicode hex":"39A"},{"Typeface name":"Symbol","Dingbat dec":"76","Dingbat hex":"4C","Unicode dec":"923","Unicode hex":"39B"},{"Typeface name":"Symbol","Dingbat dec":"77","Dingbat hex":"4D","Unicode dec":"924","Unicode hex":"39C"},{"Typeface name":"Symbol","Dingbat dec":"78","Dingbat hex":"4E","Unicode dec":"925","Unicode hex":"39D"},{"Typeface name":"Symbol","Dingbat dec":"79","Dingbat hex":"4F","Unicode dec":"927","Unicode hex":"39F"},{"Typeface name":"Symbol","Dingbat dec":"80","Dingbat hex":"50","Unicode dec":"928","Unicode hex":"3A0"},{"Typeface name":"Symbol","Dingbat dec":"81","Dingbat hex":"51","Unicode dec":"920","Unicode hex":"398"},{"Typeface name":"Symbol","Dingbat dec":"82","Dingbat hex":"52","Unicode dec":"929","Unicode hex":"3A1"},{"Typeface name":"Symbol","Dingbat dec":"83","Dingbat hex":"53","Unicode dec":"931","Unicode hex":"3A3"},{"Typeface name":"Symbol","Dingbat dec":"84","Dingbat hex":"54","Unicode dec":"932","Unicode hex":"3A4"},{"Typeface name":"Symbol","Dingbat dec":"85","Dingbat hex":"55","Unicode dec":"933","Unicode hex":"3A5"},{"Typeface name":"Symbol","Dingbat dec":"86","Dingbat hex":"56","Unicode dec":"962","Unicode hex":"3C2"},{"Typeface name":"Symbol","Dingbat dec":"87","Dingbat hex":"57","Unicode dec":"937","Unicode hex":"3A9"},{"Typeface name":"Symbol","Dingbat dec":"88","Dingbat hex":"58","Unicode dec":"926","Unicode hex":"39E"},{"Typeface name":"Symbol","Dingbat dec":"89","Dingbat hex":"59","Unicode dec":"936","Unicode hex":"3A8"},{"Typeface name":"Symbol","Dingbat dec":"90","Dingbat hex":"5A","Unicode dec":"918","Unicode hex":"396"},{"Typeface name":"Symbol","Dingbat dec":"91","Dingbat hex":"5B","Unicode dec":"91","Unicode hex":"5B"},{"Typeface name":"Symbol","Dingbat dec":"92","Dingbat hex":"5C","Unicode dec":"8756","Unicode hex":"2234"},{"Typeface name":"Symbol","Dingbat dec":"93","Dingbat hex":"5D","Unicode dec":"93","Unicode hex":"5D"},{"Typeface name":"Symbol","Dingbat dec":"94","Dingbat hex":"5E","Unicode dec":"8869","Unicode hex":"22A5"},{"Typeface name":"Symbol","Dingbat dec":"95","Dingbat hex":"5F","Unicode dec":"95","Unicode hex":"5F"},{"Typeface name":"Symbol","Dingbat dec":"96","Dingbat hex":"60","Unicode dec":"8254","Unicode hex":"203E"},{"Typeface name":"Symbol","Dingbat dec":"97","Dingbat hex":"61","Unicode dec":"945","Unicode hex":"3B1"},{"Typeface name":"Symbol","Dingbat dec":"98","Dingbat hex":"62","Unicode dec":"946","Unicode hex":"3B2"},{"Typeface name":"Symbol","Dingbat dec":"99","Dingbat hex":"63","Unicode dec":"967","Unicode hex":"3C7"},{"Typeface name":"Symbol","Dingbat dec":"100","Dingbat hex":"64","Unicode dec":"948","Unicode hex":"3B4"},{"Typeface name":"Symbol","Dingbat dec":"101","Dingbat hex":"65","Unicode dec":"949","Unicode hex":"3B5"},{"Typeface name":"Symbol","Dingbat dec":"102","Dingbat hex":"66","Unicode dec":"966","Unicode hex":"3C6"},{"Typeface name":"Symbol","Dingbat dec":"103","Dingbat hex":"67","Unicode dec":"947","Unicode hex":"3B3"},{"Typeface name":"Symbol","Dingbat dec":"104","Dingbat hex":"68","Unicode dec":"951","Unicode hex":"3B7"},{"Typeface name":"Symbol","Dingbat dec":"105","Dingbat hex":"69","Unicode dec":"953","Unicode hex":"3B9"},{"Typeface name":"Symbol","Dingbat dec":"106","Dingbat hex":"6A","Unicode dec":"981","Unicode hex":"3D5"},{"Typeface name":"Symbol","Dingbat dec":"107","Dingbat hex":"6B","Unicode dec":"954","Unicode hex":"3BA"},{"Typeface name":"Symbol","Dingbat dec":"108","Dingbat hex":"6C","Unicode dec":"955","Unicode hex":"3BB"},{"Typeface name":"Symbol","Dingbat dec":"109","Dingbat hex":"6D","Unicode dec":"956","Unicode hex":"3BC"},{"Typeface name":"Symbol","Dingbat dec":"110","Dingbat hex":"6E","Unicode dec":"957","Unicode hex":"3BD"},{"Typeface name":"Symbol","Dingbat dec":"111","Dingbat hex":"6F","Unicode dec":"959","Unicode hex":"3BF"},{"Typeface name":"Symbol","Dingbat dec":"112","Dingbat hex":"70","Unicode dec":"960","Unicode hex":"3C0"},{"Typeface name":"Symbol","Dingbat dec":"113","Dingbat hex":"71","Unicode dec":"952","Unicode hex":"3B8"},{"Typeface name":"Symbol","Dingbat dec":"114","Dingbat hex":"72","Unicode dec":"961","Unicode hex":"3C1"},{"Typeface name":"Symbol","Dingbat dec":"115","Dingbat hex":"73","Unicode dec":"963","Unicode hex":"3C3"},{"Typeface name":"Symbol","Dingbat dec":"116","Dingbat hex":"74","Unicode dec":"964","Unicode hex":"3C4"},{"Typeface name":"Symbol","Dingbat dec":"117","Dingbat hex":"75","Unicode dec":"965","Unicode hex":"3C5"},{"Typeface name":"Symbol","Dingbat dec":"118","Dingbat hex":"76","Unicode dec":"982","Unicode hex":"3D6"},{"Typeface name":"Symbol","Dingbat dec":"119","Dingbat hex":"77","Unicode dec":"969","Unicode hex":"3C9"},{"Typeface name":"Symbol","Dingbat dec":"120","Dingbat hex":"78","Unicode dec":"958","Unicode hex":"3BE"},{"Typeface name":"Symbol","Dingbat dec":"121","Dingbat hex":"79","Unicode dec":"968","Unicode hex":"3C8"},{"Typeface name":"Symbol","Dingbat dec":"122","Dingbat hex":"7A","Unicode dec":"950","Unicode hex":"3B6"},{"Typeface name":"Symbol","Dingbat dec":"123","Dingbat hex":"7B","Unicode dec":"123","Unicode hex":"7B"},{"Typeface name":"Symbol","Dingbat dec":"124","Dingbat hex":"7C","Unicode dec":"124","Unicode hex":"7C"},{"Typeface name":"Symbol","Dingbat dec":"125","Dingbat hex":"7D","Unicode dec":"125","Unicode hex":"7D"},{"Typeface name":"Symbol","Dingbat dec":"126","Dingbat hex":"7E","Unicode dec":"126","Unicode hex":"7E"},{"Typeface name":"Symbol","Dingbat dec":"160","Dingbat hex":"A0","Unicode dec":"8364","Unicode hex":"20AC"},{"Typeface name":"Symbol","Dingbat dec":"161","Dingbat hex":"A1","Unicode dec":"978","Unicode hex":"3D2"},{"Typeface name":"Symbol","Dingbat dec":"162","Dingbat hex":"A2","Unicode dec":"8242","Unicode hex":"2032"},{"Typeface name":"Symbol","Dingbat dec":"163","Dingbat hex":"A3","Unicode dec":"8804","Unicode hex":"2264"},{"Typeface name":"Symbol","Dingbat dec":"164","Dingbat hex":"A4","Unicode dec":"8260","Unicode hex":"2044"},{"Typeface name":"Symbol","Dingbat dec":"165","Dingbat hex":"A5","Unicode dec":"8734","Unicode hex":"221E"},{"Typeface name":"Symbol","Dingbat dec":"166","Dingbat hex":"A6","Unicode dec":"402","Unicode hex":"192"},{"Typeface name":"Symbol","Dingbat dec":"167","Dingbat hex":"A7","Unicode dec":"9827","Unicode hex":"2663"},{"Typeface name":"Symbol","Dingbat dec":"168","Dingbat hex":"A8","Unicode dec":"9830","Unicode hex":"2666"},{"Typeface name":"Symbol","Dingbat dec":"169","Dingbat hex":"A9","Unicode dec":"9829","Unicode hex":"2665"},{"Typeface name":"Symbol","Dingbat dec":"170","Dingbat hex":"AA","Unicode dec":"9824","Unicode hex":"2660"},{"Typeface name":"Symbol","Dingbat dec":"171","Dingbat hex":"AB","Unicode dec":"8596","Unicode hex":"2194"},{"Typeface name":"Symbol","Dingbat dec":"172","Dingbat hex":"AC","Unicode dec":"8592","Unicode hex":"2190"},{"Typeface name":"Symbol","Dingbat dec":"173","Dingbat hex":"AD","Unicode dec":"8593","Unicode hex":"2191"},{"Typeface name":"Symbol","Dingbat dec":"174","Dingbat hex":"AE","Unicode dec":"8594","Unicode hex":"2192"},{"Typeface name":"Symbol","Dingbat dec":"175","Dingbat hex":"AF","Unicode dec":"8595","Unicode hex":"2193"},{"Typeface name":"Symbol","Dingbat dec":"176","Dingbat hex":"B0","Unicode dec":"176","Unicode hex":"B0"},{"Typeface name":"Symbol","Dingbat dec":"177","Dingbat hex":"B1","Unicode dec":"177","Unicode hex":"B1"},{"Typeface name":"Symbol","Dingbat dec":"178","Dingbat hex":"B2","Unicode dec":"8243","Unicode hex":"2033"},{"Typeface name":"Symbol","Dingbat dec":"179","Dingbat hex":"B3","Unicode dec":"8805","Unicode hex":"2265"},{"Typeface name":"Symbol","Dingbat dec":"180","Dingbat hex":"B4","Unicode dec":"215","Unicode hex":"D7"},{"Typeface name":"Symbol","Dingbat dec":"181","Dingbat hex":"B5","Unicode dec":"8733","Unicode hex":"221D"},{"Typeface name":"Symbol","Dingbat dec":"182","Dingbat hex":"B6","Unicode dec":"8706","Unicode hex":"2202"},{"Typeface name":"Symbol","Dingbat dec":"183","Dingbat hex":"B7","Unicode dec":"8226","Unicode hex":"2022"},{"Typeface name":"Symbol","Dingbat dec":"184","Dingbat hex":"B8","Unicode dec":"247","Unicode hex":"F7"},{"Typeface name":"Symbol","Dingbat dec":"185","Dingbat hex":"B9","Unicode dec":"8800","Unicode hex":"2260"},{"Typeface name":"Symbol","Dingbat dec":"186","Dingbat hex":"BA","Unicode dec":"8801","Unicode hex":"2261"},{"Typeface name":"Symbol","Dingbat dec":"187","Dingbat hex":"BB","Unicode dec":"8776","Unicode hex":"2248"},{"Typeface name":"Symbol","Dingbat dec":"188","Dingbat hex":"BC","Unicode dec":"8230","Unicode hex":"2026"},{"Typeface name":"Symbol","Dingbat dec":"189","Dingbat hex":"BD","Unicode dec":"9168","Unicode hex":"23D0"},{"Typeface name":"Symbol","Dingbat dec":"190","Dingbat hex":"BE","Unicode dec":"9135","Unicode hex":"23AF"},{"Typeface name":"Symbol","Dingbat dec":"191","Dingbat hex":"BF","Unicode dec":"8629","Unicode hex":"21B5"},{"Typeface name":"Symbol","Dingbat dec":"192","Dingbat hex":"C0","Unicode dec":"8501","Unicode hex":"2135"},{"Typeface name":"Symbol","Dingbat dec":"193","Dingbat hex":"C1","Unicode dec":"8465","Unicode hex":"2111"},{"Typeface name":"Symbol","Dingbat dec":"194","Dingbat hex":"C2","Unicode dec":"8476","Unicode hex":"211C"},{"Typeface name":"Symbol","Dingbat dec":"195","Dingbat hex":"C3","Unicode dec":"8472","Unicode hex":"2118"},{"Typeface name":"Symbol","Dingbat dec":"196","Dingbat hex":"C4","Unicode dec":"8855","Unicode hex":"2297"},{"Typeface name":"Symbol","Dingbat dec":"197","Dingbat hex":"C5","Unicode dec":"8853","Unicode hex":"2295"},{"Typeface name":"Symbol","Dingbat dec":"198","Dingbat hex":"C6","Unicode dec":"8709","Unicode hex":"2205"},{"Typeface name":"Symbol","Dingbat dec":"199","Dingbat hex":"C7","Unicode dec":"8745","Unicode hex":"2229"},{"Typeface name":"Symbol","Dingbat dec":"200","Dingbat hex":"C8","Unicode dec":"8746","Unicode hex":"222A"},{"Typeface name":"Symbol","Dingbat dec":"201","Dingbat hex":"C9","Unicode dec":"8835","Unicode hex":"2283"},{"Typeface name":"Symbol","Dingbat dec":"202","Dingbat hex":"CA","Unicode dec":"8839","Unicode hex":"2287"},{"Typeface name":"Symbol","Dingbat dec":"203","Dingbat hex":"CB","Unicode dec":"8836","Unicode hex":"2284"},{"Typeface name":"Symbol","Dingbat dec":"204","Dingbat hex":"CC","Unicode dec":"8834","Unicode hex":"2282"},{"Typeface name":"Symbol","Dingbat dec":"205","Dingbat hex":"CD","Unicode dec":"8838","Unicode hex":"2286"},{"Typeface name":"Symbol","Dingbat dec":"206","Dingbat hex":"CE","Unicode dec":"8712","Unicode hex":"2208"},{"Typeface name":"Symbol","Dingbat dec":"207","Dingbat hex":"CF","Unicode dec":"8713","Unicode hex":"2209"},{"Typeface name":"Symbol","Dingbat dec":"208","Dingbat hex":"D0","Unicode dec":"8736","Unicode hex":"2220"},{"Typeface name":"Symbol","Dingbat dec":"209","Dingbat hex":"D1","Unicode dec":"8711","Unicode hex":"2207"},{"Typeface name":"Symbol","Dingbat dec":"210","Dingbat hex":"D2","Unicode dec":"174","Unicode hex":"AE"},{"Typeface name":"Symbol","Dingbat dec":"211","Dingbat hex":"D3","Unicode dec":"169","Unicode hex":"A9"},{"Typeface name":"Symbol","Dingbat dec":"212","Dingbat hex":"D4","Unicode dec":"8482","Unicode hex":"2122"},{"Typeface name":"Symbol","Dingbat dec":"213","Dingbat hex":"D5","Unicode dec":"8719","Unicode hex":"220F"},{"Typeface name":"Symbol","Dingbat dec":"214","Dingbat hex":"D6","Unicode dec":"8730","Unicode hex":"221A"},{"Typeface name":"Symbol","Dingbat dec":"215","Dingbat hex":"D7","Unicode dec":"8901","Unicode hex":"22C5"},{"Typeface name":"Symbol","Dingbat dec":"216","Dingbat hex":"D8","Unicode dec":"172","Unicode hex":"AC"},{"Typeface name":"Symbol","Dingbat dec":"217","Dingbat hex":"D9","Unicode dec":"8743","Unicode hex":"2227"},{"Typeface name":"Symbol","Dingbat dec":"218","Dingbat hex":"DA","Unicode dec":"8744","Unicode hex":"2228"},{"Typeface name":"Symbol","Dingbat dec":"219","Dingbat hex":"DB","Unicode dec":"8660","Unicode hex":"21D4"},{"Typeface name":"Symbol","Dingbat dec":"220","Dingbat hex":"DC","Unicode dec":"8656","Unicode hex":"21D0"},{"Typeface name":"Symbol","Dingbat dec":"221","Dingbat hex":"DD","Unicode dec":"8657","Unicode hex":"21D1"},{"Typeface name":"Symbol","Dingbat dec":"222","Dingbat hex":"DE","Unicode dec":"8658","Unicode hex":"21D2"},{"Typeface name":"Symbol","Dingbat dec":"223","Dingbat hex":"DF","Unicode dec":"8659","Unicode hex":"21D3"},{"Typeface name":"Symbol","Dingbat dec":"224","Dingbat hex":"E0","Unicode dec":"9674","Unicode hex":"25CA"},{"Typeface name":"Symbol","Dingbat dec":"225","Dingbat hex":"E1","Unicode dec":"12296","Unicode hex":"3008"},{"Typeface name":"Symbol","Dingbat dec":"226","Dingbat hex":"E2","Unicode dec":"174","Unicode hex":"AE"},{"Typeface name":"Symbol","Dingbat dec":"227","Dingbat hex":"E3","Unicode dec":"169","Unicode hex":"A9"},{"Typeface name":"Symbol","Dingbat dec":"228","Dingbat hex":"E4","Unicode dec":"8482","Unicode hex":"2122"},{"Typeface name":"Symbol","Dingbat dec":"229","Dingbat hex":"E5","Unicode dec":"8721","Unicode hex":"2211"},{"Typeface name":"Symbol","Dingbat dec":"230","Dingbat hex":"E6","Unicode dec":"9115","Unicode hex":"239B"},{"Typeface name":"Symbol","Dingbat dec":"231","Dingbat hex":"E7","Unicode dec":"9116","Unicode hex":"239C"},{"Typeface name":"Symbol","Dingbat dec":"232","Dingbat hex":"E8","Unicode dec":"9117","Unicode hex":"239D"},{"Typeface name":"Symbol","Dingbat dec":"233","Dingbat hex":"E9","Unicode dec":"9121","Unicode hex":"23A1"},{"Typeface name":"Symbol","Dingbat dec":"234","Dingbat hex":"EA","Unicode dec":"9122","Unicode hex":"23A2"},{"Typeface name":"Symbol","Dingbat dec":"235","Dingbat hex":"EB","Unicode dec":"9123","Unicode hex":"23A3"},{"Typeface name":"Symbol","Dingbat dec":"236","Dingbat hex":"EC","Unicode dec":"9127","Unicode hex":"23A7"},{"Typeface name":"Symbol","Dingbat dec":"237","Dingbat hex":"ED","Unicode dec":"9128","Unicode hex":"23A8"},{"Typeface name":"Symbol","Dingbat dec":"238","Dingbat hex":"EE","Unicode dec":"9129","Unicode hex":"23A9"},{"Typeface name":"Symbol","Dingbat dec":"239","Dingbat hex":"EF","Unicode dec":"9130","Unicode hex":"23AA"},{"Typeface name":"Symbol","Dingbat dec":"240","Dingbat hex":"F0","Unicode dec":"63743","Unicode hex":"F8FF"},{"Typeface name":"Symbol","Dingbat dec":"241","Dingbat hex":"F1","Unicode dec":"12297","Unicode hex":"3009"},{"Typeface name":"Symbol","Dingbat dec":"242","Dingbat hex":"F2","Unicode dec":"8747","Unicode hex":"222B"},{"Typeface name":"Symbol","Dingbat dec":"243","Dingbat hex":"F3","Unicode dec":"8992","Unicode hex":"2320"},{"Typeface name":"Symbol","Dingbat dec":"244","Dingbat hex":"F4","Unicode dec":"9134","Unicode hex":"23AE"},{"Typeface name":"Symbol","Dingbat dec":"245","Dingbat hex":"F5","Unicode dec":"8993","Unicode hex":"2321"},{"Typeface name":"Symbol","Dingbat dec":"246","Dingbat hex":"F6","Unicode dec":"9118","Unicode hex":"239E"},{"Typeface name":"Symbol","Dingbat dec":"247","Dingbat hex":"F7","Unicode dec":"9119","Unicode hex":"239F"},{"Typeface name":"Symbol","Dingbat dec":"248","Dingbat hex":"F8","Unicode dec":"9120","Unicode hex":"23A0"},{"Typeface name":"Symbol","Dingbat dec":"249","Dingbat hex":"F9","Unicode dec":"9124","Unicode hex":"23A4"},{"Typeface name":"Symbol","Dingbat dec":"250","Dingbat hex":"FA","Unicode dec":"9125","Unicode hex":"23A5"},{"Typeface name":"Symbol","Dingbat dec":"251","Dingbat hex":"FB","Unicode dec":"9126","Unicode hex":"23A6"},{"Typeface name":"Symbol","Dingbat dec":"252","Dingbat hex":"FC","Unicode dec":"9131","Unicode hex":"23AB"},{"Typeface name":"Symbol","Dingbat dec":"253","Dingbat hex":"FD","Unicode dec":"9132","Unicode hex":"23AC"},{"Typeface name":"Symbol","Dingbat dec":"254","Dingbat hex":"FE","Unicode dec":"9133","Unicode hex":"23AD"},{"Typeface name":"Webdings","Dingbat dec":"32","Dingbat hex":"20","Unicode dec":"32","Unicode hex":"20"},{"Typeface name":"Webdings","Dingbat dec":"33","Dingbat hex":"21","Unicode dec":"128375","Unicode hex":"1F577"},{"Typeface name":"Webdings","Dingbat dec":"34","Dingbat hex":"22","Unicode dec":"128376","Unicode hex":"1F578"},{"Typeface name":"Webdings","Dingbat dec":"35","Dingbat hex":"23","Unicode dec":"128370","Unicode hex":"1F572"},{"Typeface name":"Webdings","Dingbat dec":"36","Dingbat hex":"24","Unicode dec":"128374","Unicode hex":"1F576"},{"Typeface name":"Webdings","Dingbat dec":"37","Dingbat hex":"25","Unicode dec":"127942","Unicode hex":"1F3C6"},{"Typeface name":"Webdings","Dingbat dec":"38","Dingbat hex":"26","Unicode dec":"127894","Unicode hex":"1F396"},{"Typeface name":"Webdings","Dingbat dec":"39","Dingbat hex":"27","Unicode dec":"128391","Unicode hex":"1F587"},{"Typeface name":"Webdings","Dingbat dec":"40","Dingbat hex":"28","Unicode dec":"128488","Unicode hex":"1F5E8"},{"Typeface name":"Webdings","Dingbat dec":"41","Dingbat hex":"29","Unicode dec":"128489","Unicode hex":"1F5E9"},{"Typeface name":"Webdings","Dingbat dec":"42","Dingbat hex":"2A","Unicode dec":"128496","Unicode hex":"1F5F0"},{"Typeface name":"Webdings","Dingbat dec":"43","Dingbat hex":"2B","Unicode dec":"128497","Unicode hex":"1F5F1"},{"Typeface name":"Webdings","Dingbat dec":"44","Dingbat hex":"2C","Unicode dec":"127798","Unicode hex":"1F336"},{"Typeface name":"Webdings","Dingbat dec":"45","Dingbat hex":"2D","Unicode dec":"127895","Unicode hex":"1F397"},{"Typeface name":"Webdings","Dingbat dec":"46","Dingbat hex":"2E","Unicode dec":"128638","Unicode hex":"1F67E"},{"Typeface name":"Webdings","Dingbat dec":"47","Dingbat hex":"2F","Unicode dec":"128636","Unicode hex":"1F67C"},{"Typeface name":"Webdings","Dingbat dec":"48","Dingbat hex":"30","Unicode dec":"128469","Unicode hex":"1F5D5"},{"Typeface name":"Webdings","Dingbat dec":"49","Dingbat hex":"31","Unicode dec":"128470","Unicode hex":"1F5D6"},{"Typeface name":"Webdings","Dingbat dec":"50","Dingbat hex":"32","Unicode dec":"128471","Unicode hex":"1F5D7"},{"Typeface name":"Webdings","Dingbat dec":"51","Dingbat hex":"33","Unicode dec":"9204","Unicode hex":"23F4"},{"Typeface name":"Webdings","Dingbat dec":"52","Dingbat hex":"34","Unicode dec":"9205","Unicode hex":"23F5"},{"Typeface name":"Webdings","Dingbat dec":"53","Dingbat hex":"35","Unicode dec":"9206","Unicode hex":"23F6"},{"Typeface name":"Webdings","Dingbat dec":"54","Dingbat hex":"36","Unicode dec":"9207","Unicode hex":"23F7"},{"Typeface name":"Webdings","Dingbat dec":"55","Dingbat hex":"37","Unicode dec":"9194","Unicode hex":"23EA"},{"Typeface name":"Webdings","Dingbat dec":"56","Dingbat hex":"38","Unicode dec":"9193","Unicode hex":"23E9"},{"Typeface name":"Webdings","Dingbat dec":"57","Dingbat hex":"39","Unicode dec":"9198","Unicode hex":"23EE"},{"Typeface name":"Webdings","Dingbat dec":"58","Dingbat hex":"3A","Unicode dec":"9197","Unicode hex":"23ED"},{"Typeface name":"Webdings","Dingbat dec":"59","Dingbat hex":"3B","Unicode dec":"9208","Unicode hex":"23F8"},{"Typeface name":"Webdings","Dingbat dec":"60","Dingbat hex":"3C","Unicode dec":"9209","Unicode hex":"23F9"},{"Typeface name":"Webdings","Dingbat dec":"61","Dingbat hex":"3D","Unicode dec":"9210","Unicode hex":"23FA"},{"Typeface name":"Webdings","Dingbat dec":"62","Dingbat hex":"3E","Unicode dec":"128474","Unicode hex":"1F5DA"},{"Typeface name":"Webdings","Dingbat dec":"63","Dingbat hex":"3F","Unicode dec":"128499","Unicode hex":"1F5F3"},{"Typeface name":"Webdings","Dingbat dec":"64","Dingbat hex":"40","Unicode dec":"128736","Unicode hex":"1F6E0"},{"Typeface name":"Webdings","Dingbat dec":"65","Dingbat hex":"41","Unicode dec":"127959","Unicode hex":"1F3D7"},{"Typeface name":"Webdings","Dingbat dec":"66","Dingbat hex":"42","Unicode dec":"127960","Unicode hex":"1F3D8"},{"Typeface name":"Webdings","Dingbat dec":"67","Dingbat hex":"43","Unicode dec":"127961","Unicode hex":"1F3D9"},{"Typeface name":"Webdings","Dingbat dec":"68","Dingbat hex":"44","Unicode dec":"127962","Unicode hex":"1F3DA"},{"Typeface name":"Webdings","Dingbat dec":"69","Dingbat hex":"45","Unicode dec":"127964","Unicode hex":"1F3DC"},{"Typeface name":"Webdings","Dingbat dec":"70","Dingbat hex":"46","Unicode dec":"127981","Unicode hex":"1F3ED"},{"Typeface name":"Webdings","Dingbat dec":"71","Dingbat hex":"47","Unicode dec":"127963","Unicode hex":"1F3DB"},{"Typeface name":"Webdings","Dingbat dec":"72","Dingbat hex":"48","Unicode dec":"127968","Unicode hex":"1F3E0"},{"Typeface name":"Webdings","Dingbat dec":"73","Dingbat hex":"49","Unicode dec":"127958","Unicode hex":"1F3D6"},{"Typeface name":"Webdings","Dingbat dec":"74","Dingbat hex":"4A","Unicode dec":"127965","Unicode hex":"1F3DD"},{"Typeface name":"Webdings","Dingbat dec":"75","Dingbat hex":"4B","Unicode dec":"128739","Unicode hex":"1F6E3"},{"Typeface name":"Webdings","Dingbat dec":"76","Dingbat hex":"4C","Unicode dec":"128269","Unicode hex":"1F50D"},{"Typeface name":"Webdings","Dingbat dec":"77","Dingbat hex":"4D","Unicode dec":"127956","Unicode hex":"1F3D4"},{"Typeface name":"Webdings","Dingbat dec":"78","Dingbat hex":"4E","Unicode dec":"128065","Unicode hex":"1F441"},{"Typeface name":"Webdings","Dingbat dec":"79","Dingbat hex":"4F","Unicode dec":"128066","Unicode hex":"1F442"},{"Typeface name":"Webdings","Dingbat dec":"80","Dingbat hex":"50","Unicode dec":"127966","Unicode hex":"1F3DE"},{"Typeface name":"Webdings","Dingbat dec":"81","Dingbat hex":"51","Unicode dec":"127957","Unicode hex":"1F3D5"},{"Typeface name":"Webdings","Dingbat dec":"82","Dingbat hex":"52","Unicode dec":"128740","Unicode hex":"1F6E4"},{"Typeface name":"Webdings","Dingbat dec":"83","Dingbat hex":"53","Unicode dec":"127967","Unicode hex":"1F3DF"},{"Typeface name":"Webdings","Dingbat dec":"84","Dingbat hex":"54","Unicode dec":"128755","Unicode hex":"1F6F3"},{"Typeface name":"Webdings","Dingbat dec":"85","Dingbat hex":"55","Unicode dec":"128364","Unicode hex":"1F56C"},{"Typeface name":"Webdings","Dingbat dec":"86","Dingbat hex":"56","Unicode dec":"128363","Unicode hex":"1F56B"},{"Typeface name":"Webdings","Dingbat dec":"87","Dingbat hex":"57","Unicode dec":"128360","Unicode hex":"1F568"},{"Typeface name":"Webdings","Dingbat dec":"88","Dingbat hex":"58","Unicode dec":"128264","Unicode hex":"1F508"},{"Typeface name":"Webdings","Dingbat dec":"89","Dingbat hex":"59","Unicode dec":"127892","Unicode hex":"1F394"},{"Typeface name":"Webdings","Dingbat dec":"90","Dingbat hex":"5A","Unicode dec":"127893","Unicode hex":"1F395"},{"Typeface name":"Webdings","Dingbat dec":"91","Dingbat hex":"5B","Unicode dec":"128492","Unicode hex":"1F5EC"},{"Typeface name":"Webdings","Dingbat dec":"92","Dingbat hex":"5C","Unicode dec":"128637","Unicode hex":"1F67D"},{"Typeface name":"Webdings","Dingbat dec":"93","Dingbat hex":"5D","Unicode dec":"128493","Unicode hex":"1F5ED"},{"Typeface name":"Webdings","Dingbat dec":"94","Dingbat hex":"5E","Unicode dec":"128490","Unicode hex":"1F5EA"},{"Typeface name":"Webdings","Dingbat dec":"95","Dingbat hex":"5F","Unicode dec":"128491","Unicode hex":"1F5EB"},{"Typeface name":"Webdings","Dingbat dec":"96","Dingbat hex":"60","Unicode dec":"11156","Unicode hex":"2B94"},{"Typeface name":"Webdings","Dingbat dec":"97","Dingbat hex":"61","Unicode dec":"10004","Unicode hex":"2714"},{"Typeface name":"Webdings","Dingbat dec":"98","Dingbat hex":"62","Unicode dec":"128690","Unicode hex":"1F6B2"},{"Typeface name":"Webdings","Dingbat dec":"99","Dingbat hex":"63","Unicode dec":"11036","Unicode hex":"2B1C"},{"Typeface name":"Webdings","Dingbat dec":"100","Dingbat hex":"64","Unicode dec":"128737","Unicode hex":"1F6E1"},{"Typeface name":"Webdings","Dingbat dec":"101","Dingbat hex":"65","Unicode dec":"128230","Unicode hex":"1F4E6"},{"Typeface name":"Webdings","Dingbat dec":"102","Dingbat hex":"66","Unicode dec":"128753","Unicode hex":"1F6F1"},{"Typeface name":"Webdings","Dingbat dec":"103","Dingbat hex":"67","Unicode dec":"11035","Unicode hex":"2B1B"},{"Typeface name":"Webdings","Dingbat dec":"104","Dingbat hex":"68","Unicode dec":"128657","Unicode hex":"1F691"},{"Typeface name":"Webdings","Dingbat dec":"105","Dingbat hex":"69","Unicode dec":"128712","Unicode hex":"1F6C8"},{"Typeface name":"Webdings","Dingbat dec":"106","Dingbat hex":"6A","Unicode dec":"128745","Unicode hex":"1F6E9"},{"Typeface name":"Webdings","Dingbat dec":"107","Dingbat hex":"6B","Unicode dec":"128752","Unicode hex":"1F6F0"},{"Typeface name":"Webdings","Dingbat dec":"108","Dingbat hex":"6C","Unicode dec":"128968","Unicode hex":"1F7C8"},{"Typeface name":"Webdings","Dingbat dec":"109","Dingbat hex":"6D","Unicode dec":"128372","Unicode hex":"1F574"},{"Typeface name":"Webdings","Dingbat dec":"110","Dingbat hex":"6E","Unicode dec":"11044","Unicode hex":"2B24"},{"Typeface name":"Webdings","Dingbat dec":"111","Dingbat hex":"6F","Unicode dec":"128741","Unicode hex":"1F6E5"},{"Typeface name":"Webdings","Dingbat dec":"112","Dingbat hex":"70","Unicode dec":"128660","Unicode hex":"1F694"},{"Typeface name":"Webdings","Dingbat dec":"113","Dingbat hex":"71","Unicode dec":"128472","Unicode hex":"1F5D8"},{"Typeface name":"Webdings","Dingbat dec":"114","Dingbat hex":"72","Unicode dec":"128473","Unicode hex":"1F5D9"},{"Typeface name":"Webdings","Dingbat dec":"115","Dingbat hex":"73","Unicode dec":"10067","Unicode hex":"2753"},{"Typeface name":"Webdings","Dingbat dec":"116","Dingbat hex":"74","Unicode dec":"128754","Unicode hex":"1F6F2"},{"Typeface name":"Webdings","Dingbat dec":"117","Dingbat hex":"75","Unicode dec":"128647","Unicode hex":"1F687"},{"Typeface name":"Webdings","Dingbat dec":"118","Dingbat hex":"76","Unicode dec":"128653","Unicode hex":"1F68D"},{"Typeface name":"Webdings","Dingbat dec":"119","Dingbat hex":"77","Unicode dec":"9971","Unicode hex":"26F3"},{"Typeface name":"Webdings","Dingbat dec":"120","Dingbat hex":"78","Unicode dec":"10680","Unicode hex":"29B8"},{"Typeface name":"Webdings","Dingbat dec":"121","Dingbat hex":"79","Unicode dec":"8854","Unicode hex":"2296"},{"Typeface name":"Webdings","Dingbat dec":"122","Dingbat hex":"7A","Unicode dec":"128685","Unicode hex":"1F6AD"},{"Typeface name":"Webdings","Dingbat dec":"123","Dingbat hex":"7B","Unicode dec":"128494","Unicode hex":"1F5EE"},{"Typeface name":"Webdings","Dingbat dec":"124","Dingbat hex":"7C","Unicode dec":"9168","Unicode hex":"23D0"},{"Typeface name":"Webdings","Dingbat dec":"125","Dingbat hex":"7D","Unicode dec":"128495","Unicode hex":"1F5EF"},{"Typeface name":"Webdings","Dingbat dec":"126","Dingbat hex":"7E","Unicode dec":"128498","Unicode hex":"1F5F2"},{"Typeface name":"Webdings","Dingbat dec":"128","Dingbat hex":"80","Unicode dec":"128697","Unicode hex":"1F6B9"},{"Typeface name":"Webdings","Dingbat dec":"129","Dingbat hex":"81","Unicode dec":"128698","Unicode hex":"1F6BA"},{"Typeface name":"Webdings","Dingbat dec":"130","Dingbat hex":"82","Unicode dec":"128713","Unicode hex":"1F6C9"},{"Typeface name":"Webdings","Dingbat dec":"131","Dingbat hex":"83","Unicode dec":"128714","Unicode hex":"1F6CA"},{"Typeface name":"Webdings","Dingbat dec":"132","Dingbat hex":"84","Unicode dec":"128700","Unicode hex":"1F6BC"},{"Typeface name":"Webdings","Dingbat dec":"133","Dingbat hex":"85","Unicode dec":"128125","Unicode hex":"1F47D"},{"Typeface name":"Webdings","Dingbat dec":"134","Dingbat hex":"86","Unicode dec":"127947","Unicode hex":"1F3CB"},{"Typeface name":"Webdings","Dingbat dec":"135","Dingbat hex":"87","Unicode dec":"9975","Unicode hex":"26F7"},{"Typeface name":"Webdings","Dingbat dec":"136","Dingbat hex":"88","Unicode dec":"127938","Unicode hex":"1F3C2"},{"Typeface name":"Webdings","Dingbat dec":"137","Dingbat hex":"89","Unicode dec":"127948","Unicode hex":"1F3CC"},{"Typeface name":"Webdings","Dingbat dec":"138","Dingbat hex":"8A","Unicode dec":"127946","Unicode hex":"1F3CA"},{"Typeface name":"Webdings","Dingbat dec":"139","Dingbat hex":"8B","Unicode dec":"127940","Unicode hex":"1F3C4"},{"Typeface name":"Webdings","Dingbat dec":"140","Dingbat hex":"8C","Unicode dec":"127949","Unicode hex":"1F3CD"},{"Typeface name":"Webdings","Dingbat dec":"141","Dingbat hex":"8D","Unicode dec":"127950","Unicode hex":"1F3CE"},{"Typeface name":"Webdings","Dingbat dec":"142","Dingbat hex":"8E","Unicode dec":"128664","Unicode hex":"1F698"},{"Typeface name":"Webdings","Dingbat dec":"143","Dingbat hex":"8F","Unicode dec":"128480","Unicode hex":"1F5E0"},{"Typeface name":"Webdings","Dingbat dec":"144","Dingbat hex":"90","Unicode dec":"128738","Unicode hex":"1F6E2"},{"Typeface name":"Webdings","Dingbat dec":"145","Dingbat hex":"91","Unicode dec":"128176","Unicode hex":"1F4B0"},{"Typeface name":"Webdings","Dingbat dec":"146","Dingbat hex":"92","Unicode dec":"127991","Unicode hex":"1F3F7"},{"Typeface name":"Webdings","Dingbat dec":"147","Dingbat hex":"93","Unicode dec":"128179","Unicode hex":"1F4B3"},{"Typeface name":"Webdings","Dingbat dec":"148","Dingbat hex":"94","Unicode dec":"128106","Unicode hex":"1F46A"},{"Typeface name":"Webdings","Dingbat dec":"149","Dingbat hex":"95","Unicode dec":"128481","Unicode hex":"1F5E1"},{"Typeface name":"Webdings","Dingbat dec":"150","Dingbat hex":"96","Unicode dec":"128482","Unicode hex":"1F5E2"},{"Typeface name":"Webdings","Dingbat dec":"151","Dingbat hex":"97","Unicode dec":"128483","Unicode hex":"1F5E3"},{"Typeface name":"Webdings","Dingbat dec":"152","Dingbat hex":"98","Unicode dec":"10031","Unicode hex":"272F"},{"Typeface name":"Webdings","Dingbat dec":"153","Dingbat hex":"99","Unicode dec":"128388","Unicode hex":"1F584"},{"Typeface name":"Webdings","Dingbat dec":"154","Dingbat hex":"9A","Unicode dec":"128389","Unicode hex":"1F585"},{"Typeface name":"Webdings","Dingbat dec":"155","Dingbat hex":"9B","Unicode dec":"128387","Unicode hex":"1F583"},{"Typeface name":"Webdings","Dingbat dec":"156","Dingbat hex":"9C","Unicode dec":"128390","Unicode hex":"1F586"},{"Typeface name":"Webdings","Dingbat dec":"157","Dingbat hex":"9D","Unicode dec":"128441","Unicode hex":"1F5B9"},{"Typeface name":"Webdings","Dingbat dec":"158","Dingbat hex":"9E","Unicode dec":"128442","Unicode hex":"1F5BA"},{"Typeface name":"Webdings","Dingbat dec":"159","Dingbat hex":"9F","Unicode dec":"128443","Unicode hex":"1F5BB"},{"Typeface name":"Webdings","Dingbat dec":"160","Dingbat hex":"A0","Unicode dec":"128373","Unicode hex":"1F575"},{"Typeface name":"Webdings","Dingbat dec":"161","Dingbat hex":"A1","Unicode dec":"128368","Unicode hex":"1F570"},{"Typeface name":"Webdings","Dingbat dec":"162","Dingbat hex":"A2","Unicode dec":"128445","Unicode hex":"1F5BD"},{"Typeface name":"Webdings","Dingbat dec":"163","Dingbat hex":"A3","Unicode dec":"128446","Unicode hex":"1F5BE"},{"Typeface name":"Webdings","Dingbat dec":"164","Dingbat hex":"A4","Unicode dec":"128203","Unicode hex":"1F4CB"},{"Typeface name":"Webdings","Dingbat dec":"165","Dingbat hex":"A5","Unicode dec":"128466","Unicode hex":"1F5D2"},{"Typeface name":"Webdings","Dingbat dec":"166","Dingbat hex":"A6","Unicode dec":"128467","Unicode hex":"1F5D3"},{"Typeface name":"Webdings","Dingbat dec":"167","Dingbat hex":"A7","Unicode dec":"128366","Unicode hex":"1F56E"},{"Typeface name":"Webdings","Dingbat dec":"168","Dingbat hex":"A8","Unicode dec":"128218","Unicode hex":"1F4DA"},{"Typeface name":"Webdings","Dingbat dec":"169","Dingbat hex":"A9","Unicode dec":"128478","Unicode hex":"1F5DE"},{"Typeface name":"Webdings","Dingbat dec":"170","Dingbat hex":"AA","Unicode dec":"128479","Unicode hex":"1F5DF"},{"Typeface name":"Webdings","Dingbat dec":"171","Dingbat hex":"AB","Unicode dec":"128451","Unicode hex":"1F5C3"},{"Typeface name":"Webdings","Dingbat dec":"172","Dingbat hex":"AC","Unicode dec":"128450","Unicode hex":"1F5C2"},{"Typeface name":"Webdings","Dingbat dec":"173","Dingbat hex":"AD","Unicode dec":"128444","Unicode hex":"1F5BC"},{"Typeface name":"Webdings","Dingbat dec":"174","Dingbat hex":"AE","Unicode dec":"127917","Unicode hex":"1F3AD"},{"Typeface name":"Webdings","Dingbat dec":"175","Dingbat hex":"AF","Unicode dec":"127900","Unicode hex":"1F39C"},{"Typeface name":"Webdings","Dingbat dec":"176","Dingbat hex":"B0","Unicode dec":"127896","Unicode hex":"1F398"},{"Typeface name":"Webdings","Dingbat dec":"177","Dingbat hex":"B1","Unicode dec":"127897","Unicode hex":"1F399"},{"Typeface name":"Webdings","Dingbat dec":"178","Dingbat hex":"B2","Unicode dec":"127911","Unicode hex":"1F3A7"},{"Typeface name":"Webdings","Dingbat dec":"179","Dingbat hex":"B3","Unicode dec":"128191","Unicode hex":"1F4BF"},{"Typeface name":"Webdings","Dingbat dec":"180","Dingbat hex":"B4","Unicode dec":"127902","Unicode hex":"1F39E"},{"Typeface name":"Webdings","Dingbat dec":"181","Dingbat hex":"B5","Unicode dec":"128247","Unicode hex":"1F4F7"},{"Typeface name":"Webdings","Dingbat dec":"182","Dingbat hex":"B6","Unicode dec":"127903","Unicode hex":"1F39F"},{"Typeface name":"Webdings","Dingbat dec":"183","Dingbat hex":"B7","Unicode dec":"127916","Unicode hex":"1F3AC"},{"Typeface name":"Webdings","Dingbat dec":"184","Dingbat hex":"B8","Unicode dec":"128253","Unicode hex":"1F4FD"},{"Typeface name":"Webdings","Dingbat dec":"185","Dingbat hex":"B9","Unicode dec":"128249","Unicode hex":"1F4F9"},{"Typeface name":"Webdings","Dingbat dec":"186","Dingbat hex":"BA","Unicode dec":"128254","Unicode hex":"1F4FE"},{"Typeface name":"Webdings","Dingbat dec":"187","Dingbat hex":"BB","Unicode dec":"128251","Unicode hex":"1F4FB"},{"Typeface name":"Webdings","Dingbat dec":"188","Dingbat hex":"BC","Unicode dec":"127898","Unicode hex":"1F39A"},{"Typeface name":"Webdings","Dingbat dec":"189","Dingbat hex":"BD","Unicode dec":"127899","Unicode hex":"1F39B"},{"Typeface name":"Webdings","Dingbat dec":"190","Dingbat hex":"BE","Unicode dec":"128250","Unicode hex":"1F4FA"},{"Typeface name":"Webdings","Dingbat dec":"191","Dingbat hex":"BF","Unicode dec":"128187","Unicode hex":"1F4BB"},{"Typeface name":"Webdings","Dingbat dec":"192","Dingbat hex":"C0","Unicode dec":"128421","Unicode hex":"1F5A5"},{"Typeface name":"Webdings","Dingbat dec":"193","Dingbat hex":"C1","Unicode dec":"128422","Unicode hex":"1F5A6"},{"Typeface name":"Webdings","Dingbat dec":"194","Dingbat hex":"C2","Unicode dec":"128423","Unicode hex":"1F5A7"},{"Typeface name":"Webdings","Dingbat dec":"195","Dingbat hex":"C3","Unicode dec":"128377","Unicode hex":"1F579"},{"Typeface name":"Webdings","Dingbat dec":"196","Dingbat hex":"C4","Unicode dec":"127918","Unicode hex":"1F3AE"},{"Typeface name":"Webdings","Dingbat dec":"197","Dingbat hex":"C5","Unicode dec":"128379","Unicode hex":"1F57B"},{"Typeface name":"Webdings","Dingbat dec":"198","Dingbat hex":"C6","Unicode dec":"128380","Unicode hex":"1F57C"},{"Typeface name":"Webdings","Dingbat dec":"199","Dingbat hex":"C7","Unicode dec":"128223","Unicode hex":"1F4DF"},{"Typeface name":"Webdings","Dingbat dec":"200","Dingbat hex":"C8","Unicode dec":"128385","Unicode hex":"1F581"},{"Typeface name":"Webdings","Dingbat dec":"201","Dingbat hex":"C9","Unicode dec":"128384","Unicode hex":"1F580"},{"Typeface name":"Webdings","Dingbat dec":"202","Dingbat hex":"CA","Unicode dec":"128424","Unicode hex":"1F5A8"},{"Typeface name":"Webdings","Dingbat dec":"203","Dingbat hex":"CB","Unicode dec":"128425","Unicode hex":"1F5A9"},{"Typeface name":"Webdings","Dingbat dec":"204","Dingbat hex":"CC","Unicode dec":"128447","Unicode hex":"1F5BF"},{"Typeface name":"Webdings","Dingbat dec":"205","Dingbat hex":"CD","Unicode dec":"128426","Unicode hex":"1F5AA"},{"Typeface name":"Webdings","Dingbat dec":"206","Dingbat hex":"CE","Unicode dec":"128476","Unicode hex":"1F5DC"},{"Typeface name":"Webdings","Dingbat dec":"207","Dingbat hex":"CF","Unicode dec":"128274","Unicode hex":"1F512"},{"Typeface name":"Webdings","Dingbat dec":"208","Dingbat hex":"D0","Unicode dec":"128275","Unicode hex":"1F513"},{"Typeface name":"Webdings","Dingbat dec":"209","Dingbat hex":"D1","Unicode dec":"128477","Unicode hex":"1F5DD"},{"Typeface name":"Webdings","Dingbat dec":"210","Dingbat hex":"D2","Unicode dec":"128229","Unicode hex":"1F4E5"},{"Typeface name":"Webdings","Dingbat dec":"211","Dingbat hex":"D3","Unicode dec":"128228","Unicode hex":"1F4E4"},{"Typeface name":"Webdings","Dingbat dec":"212","Dingbat hex":"D4","Unicode dec":"128371","Unicode hex":"1F573"},{"Typeface name":"Webdings","Dingbat dec":"213","Dingbat hex":"D5","Unicode dec":"127779","Unicode hex":"1F323"},{"Typeface name":"Webdings","Dingbat dec":"214","Dingbat hex":"D6","Unicode dec":"127780","Unicode hex":"1F324"},{"Typeface name":"Webdings","Dingbat dec":"215","Dingbat hex":"D7","Unicode dec":"127781","Unicode hex":"1F325"},{"Typeface name":"Webdings","Dingbat dec":"216","Dingbat hex":"D8","Unicode dec":"127782","Unicode hex":"1F326"},{"Typeface name":"Webdings","Dingbat dec":"217","Dingbat hex":"D9","Unicode dec":"9729","Unicode hex":"2601"},{"Typeface name":"Webdings","Dingbat dec":"218","Dingbat hex":"DA","Unicode dec":"127784","Unicode hex":"1F328"},{"Typeface name":"Webdings","Dingbat dec":"219","Dingbat hex":"DB","Unicode dec":"127783","Unicode hex":"1F327"},{"Typeface name":"Webdings","Dingbat dec":"220","Dingbat hex":"DC","Unicode dec":"127785","Unicode hex":"1F329"},{"Typeface name":"Webdings","Dingbat dec":"221","Dingbat hex":"DD","Unicode dec":"127786","Unicode hex":"1F32A"},{"Typeface name":"Webdings","Dingbat dec":"222","Dingbat hex":"DE","Unicode dec":"127788","Unicode hex":"1F32C"},{"Typeface name":"Webdings","Dingbat dec":"223","Dingbat hex":"DF","Unicode dec":"127787","Unicode hex":"1F32B"},{"Typeface name":"Webdings","Dingbat dec":"224","Dingbat hex":"E0","Unicode dec":"127772","Unicode hex":"1F31C"},{"Typeface name":"Webdings","Dingbat dec":"225","Dingbat hex":"E1","Unicode dec":"127777","Unicode hex":"1F321"},{"Typeface name":"Webdings","Dingbat dec":"226","Dingbat hex":"E2","Unicode dec":"128715","Unicode hex":"1F6CB"},{"Typeface name":"Webdings","Dingbat dec":"227","Dingbat hex":"E3","Unicode dec":"128719","Unicode hex":"1F6CF"},{"Typeface name":"Webdings","Dingbat dec":"228","Dingbat hex":"E4","Unicode dec":"127869","Unicode hex":"1F37D"},{"Typeface name":"Webdings","Dingbat dec":"229","Dingbat hex":"E5","Unicode dec":"127864","Unicode hex":"1F378"},{"Typeface name":"Webdings","Dingbat dec":"230","Dingbat hex":"E6","Unicode dec":"128718","Unicode hex":"1F6CE"},{"Typeface name":"Webdings","Dingbat dec":"231","Dingbat hex":"E7","Unicode dec":"128717","Unicode hex":"1F6CD"},{"Typeface name":"Webdings","Dingbat dec":"232","Dingbat hex":"E8","Unicode dec":"9413","Unicode hex":"24C5"},{"Typeface name":"Webdings","Dingbat dec":"233","Dingbat hex":"E9","Unicode dec":"9855","Unicode hex":"267F"},{"Typeface name":"Webdings","Dingbat dec":"234","Dingbat hex":"EA","Unicode dec":"128710","Unicode hex":"1F6C6"},{"Typeface name":"Webdings","Dingbat dec":"235","Dingbat hex":"EB","Unicode dec":"128392","Unicode hex":"1F588"},{"Typeface name":"Webdings","Dingbat dec":"236","Dingbat hex":"EC","Unicode dec":"127891","Unicode hex":"1F393"},{"Typeface name":"Webdings","Dingbat dec":"237","Dingbat hex":"ED","Unicode dec":"128484","Unicode hex":"1F5E4"},{"Typeface name":"Webdings","Dingbat dec":"238","Dingbat hex":"EE","Unicode dec":"128485","Unicode hex":"1F5E5"},{"Typeface name":"Webdings","Dingbat dec":"239","Dingbat hex":"EF","Unicode dec":"128486","Unicode hex":"1F5E6"},{"Typeface name":"Webdings","Dingbat dec":"240","Dingbat hex":"F0","Unicode dec":"128487","Unicode hex":"1F5E7"},{"Typeface name":"Webdings","Dingbat dec":"241","Dingbat hex":"F1","Unicode dec":"128746","Unicode hex":"1F6EA"},{"Typeface name":"Webdings","Dingbat dec":"242","Dingbat hex":"F2","Unicode dec":"128063","Unicode hex":"1F43F"},{"Typeface name":"Webdings","Dingbat dec":"243","Dingbat hex":"F3","Unicode dec":"128038","Unicode hex":"1F426"},{"Typeface name":"Webdings","Dingbat dec":"244","Dingbat hex":"F4","Unicode dec":"128031","Unicode hex":"1F41F"},{"Typeface name":"Webdings","Dingbat dec":"245","Dingbat hex":"F5","Unicode dec":"128021","Unicode hex":"1F415"},{"Typeface name":"Webdings","Dingbat dec":"246","Dingbat hex":"F6","Unicode dec":"128008","Unicode hex":"1F408"},{"Typeface name":"Webdings","Dingbat dec":"247","Dingbat hex":"F7","Unicode dec":"128620","Unicode hex":"1F66C"},{"Typeface name":"Webdings","Dingbat dec":"248","Dingbat hex":"F8","Unicode dec":"128622","Unicode hex":"1F66E"},{"Typeface name":"Webdings","Dingbat dec":"249","Dingbat hex":"F9","Unicode dec":"128621","Unicode hex":"1F66D"},{"Typeface name":"Webdings","Dingbat dec":"250","Dingbat hex":"FA","Unicode dec":"128623","Unicode hex":"1F66F"},{"Typeface name":"Webdings","Dingbat dec":"251","Dingbat hex":"FB","Unicode dec":"128506","Unicode hex":"1F5FA"},{"Typeface name":"Webdings","Dingbat dec":"252","Dingbat hex":"FC","Unicode dec":"127757","Unicode hex":"1F30D"},{"Typeface name":"Webdings","Dingbat dec":"253","Dingbat hex":"FD","Unicode dec":"127759","Unicode hex":"1F30F"},{"Typeface name":"Webdings","Dingbat dec":"254","Dingbat hex":"FE","Unicode dec":"127758","Unicode hex":"1F30E"},{"Typeface name":"Webdings","Dingbat dec":"255","Dingbat hex":"FF","Unicode dec":"128330","Unicode hex":"1F54A"},{"Typeface name":"Wingdings","Dingbat dec":"32","Dingbat hex":"20","Unicode dec":"32","Unicode hex":"20"},{"Typeface name":"Wingdings","Dingbat dec":"33","Dingbat hex":"21","Unicode dec":"128393","Unicode hex":"1F589"},{"Typeface name":"Wingdings","Dingbat dec":"34","Dingbat hex":"22","Unicode dec":"9986","Unicode hex":"2702"},{"Typeface name":"Wingdings","Dingbat dec":"35","Dingbat hex":"23","Unicode dec":"9985","Unicode hex":"2701"},{"Typeface name":"Wingdings","Dingbat dec":"36","Dingbat hex":"24","Unicode dec":"128083","Unicode hex":"1F453"},{"Typeface name":"Wingdings","Dingbat dec":"37","Dingbat hex":"25","Unicode dec":"128365","Unicode hex":"1F56D"},{"Typeface name":"Wingdings","Dingbat dec":"38","Dingbat hex":"26","Unicode dec":"128366","Unicode hex":"1F56E"},{"Typeface name":"Wingdings","Dingbat dec":"39","Dingbat hex":"27","Unicode dec":"128367","Unicode hex":"1F56F"},{"Typeface name":"Wingdings","Dingbat dec":"40","Dingbat hex":"28","Unicode dec":"128383","Unicode hex":"1F57F"},{"Typeface name":"Wingdings","Dingbat dec":"41","Dingbat hex":"29","Unicode dec":"9990","Unicode hex":"2706"},{"Typeface name":"Wingdings","Dingbat dec":"42","Dingbat hex":"2A","Unicode dec":"128386","Unicode hex":"1F582"},{"Typeface name":"Wingdings","Dingbat dec":"43","Dingbat hex":"2B","Unicode dec":"128387","Unicode hex":"1F583"},{"Typeface name":"Wingdings","Dingbat dec":"44","Dingbat hex":"2C","Unicode dec":"128234","Unicode hex":"1F4EA"},{"Typeface name":"Wingdings","Dingbat dec":"45","Dingbat hex":"2D","Unicode dec":"128235","Unicode hex":"1F4EB"},{"Typeface name":"Wingdings","Dingbat dec":"46","Dingbat hex":"2E","Unicode dec":"128236","Unicode hex":"1F4EC"},{"Typeface name":"Wingdings","Dingbat dec":"47","Dingbat hex":"2F","Unicode dec":"128237","Unicode hex":"1F4ED"},{"Typeface name":"Wingdings","Dingbat dec":"48","Dingbat hex":"30","Unicode dec":"128448","Unicode hex":"1F5C0"},{"Typeface name":"Wingdings","Dingbat dec":"49","Dingbat hex":"31","Unicode dec":"128449","Unicode hex":"1F5C1"},{"Typeface name":"Wingdings","Dingbat dec":"50","Dingbat hex":"32","Unicode dec":"128462","Unicode hex":"1F5CE"},{"Typeface name":"Wingdings","Dingbat dec":"51","Dingbat hex":"33","Unicode dec":"128463","Unicode hex":"1F5CF"},{"Typeface name":"Wingdings","Dingbat dec":"52","Dingbat hex":"34","Unicode dec":"128464","Unicode hex":"1F5D0"},{"Typeface name":"Wingdings","Dingbat dec":"53","Dingbat hex":"35","Unicode dec":"128452","Unicode hex":"1F5C4"},{"Typeface name":"Wingdings","Dingbat dec":"54","Dingbat hex":"36","Unicode dec":"8987","Unicode hex":"231B"},{"Typeface name":"Wingdings","Dingbat dec":"55","Dingbat hex":"37","Unicode dec":"128430","Unicode hex":"1F5AE"},{"Typeface name":"Wingdings","Dingbat dec":"56","Dingbat hex":"38","Unicode dec":"128432","Unicode hex":"1F5B0"},{"Typeface name":"Wingdings","Dingbat dec":"57","Dingbat hex":"39","Unicode dec":"128434","Unicode hex":"1F5B2"},{"Typeface name":"Wingdings","Dingbat dec":"58","Dingbat hex":"3A","Unicode dec":"128435","Unicode hex":"1F5B3"},{"Typeface name":"Wingdings","Dingbat dec":"59","Dingbat hex":"3B","Unicode dec":"128436","Unicode hex":"1F5B4"},{"Typeface name":"Wingdings","Dingbat dec":"60","Dingbat hex":"3C","Unicode dec":"128427","Unicode hex":"1F5AB"},{"Typeface name":"Wingdings","Dingbat dec":"61","Dingbat hex":"3D","Unicode dec":"128428","Unicode hex":"1F5AC"},{"Typeface name":"Wingdings","Dingbat dec":"62","Dingbat hex":"3E","Unicode dec":"9991","Unicode hex":"2707"},{"Typeface name":"Wingdings","Dingbat dec":"63","Dingbat hex":"3F","Unicode dec":"9997","Unicode hex":"270D"},{"Typeface name":"Wingdings","Dingbat dec":"64","Dingbat hex":"40","Unicode dec":"128398","Unicode hex":"1F58E"},{"Typeface name":"Wingdings","Dingbat dec":"65","Dingbat hex":"41","Unicode dec":"9996","Unicode hex":"270C"},{"Typeface name":"Wingdings","Dingbat dec":"66","Dingbat hex":"42","Unicode dec":"128399","Unicode hex":"1F58F"},{"Typeface name":"Wingdings","Dingbat dec":"67","Dingbat hex":"43","Unicode dec":"128077","Unicode hex":"1F44D"},{"Typeface name":"Wingdings","Dingbat dec":"68","Dingbat hex":"44","Unicode dec":"128078","Unicode hex":"1F44E"},{"Typeface name":"Wingdings","Dingbat dec":"69","Dingbat hex":"45","Unicode dec":"9756","Unicode hex":"261C"},{"Typeface name":"Wingdings","Dingbat dec":"70","Dingbat hex":"46","Unicode dec":"9758","Unicode hex":"261E"},{"Typeface name":"Wingdings","Dingbat dec":"71","Dingbat hex":"47","Unicode dec":"9757","Unicode hex":"261D"},{"Typeface name":"Wingdings","Dingbat dec":"72","Dingbat hex":"48","Unicode dec":"9759","Unicode hex":"261F"},{"Typeface name":"Wingdings","Dingbat dec":"73","Dingbat hex":"49","Unicode dec":"128400","Unicode hex":"1F590"},{"Typeface name":"Wingdings","Dingbat dec":"74","Dingbat hex":"4A","Unicode dec":"9786","Unicode hex":"263A"},{"Typeface name":"Wingdings","Dingbat dec":"75","Dingbat hex":"4B","Unicode dec":"128528","Unicode hex":"1F610"},{"Typeface name":"Wingdings","Dingbat dec":"76","Dingbat hex":"4C","Unicode dec":"9785","Unicode hex":"2639"},{"Typeface name":"Wingdings","Dingbat dec":"77","Dingbat hex":"4D","Unicode dec":"128163","Unicode hex":"1F4A3"},{"Typeface name":"Wingdings","Dingbat dec":"78","Dingbat hex":"4E","Unicode dec":"128369","Unicode hex":"1F571"},{"Typeface name":"Wingdings","Dingbat dec":"79","Dingbat hex":"4F","Unicode dec":"127987","Unicode hex":"1F3F3"},{"Typeface name":"Wingdings","Dingbat dec":"80","Dingbat hex":"50","Unicode dec":"127985","Unicode hex":"1F3F1"},{"Typeface name":"Wingdings","Dingbat dec":"81","Dingbat hex":"51","Unicode dec":"9992","Unicode hex":"2708"},{"Typeface name":"Wingdings","Dingbat dec":"82","Dingbat hex":"52","Unicode dec":"9788","Unicode hex":"263C"},{"Typeface name":"Wingdings","Dingbat dec":"83","Dingbat hex":"53","Unicode dec":"127778","Unicode hex":"1F322"},{"Typeface name":"Wingdings","Dingbat dec":"84","Dingbat hex":"54","Unicode dec":"10052","Unicode hex":"2744"},{"Typeface name":"Wingdings","Dingbat dec":"85","Dingbat hex":"55","Unicode dec":"128326","Unicode hex":"1F546"},{"Typeface name":"Wingdings","Dingbat dec":"86","Dingbat hex":"56","Unicode dec":"10014","Unicode hex":"271E"},{"Typeface name":"Wingdings","Dingbat dec":"87","Dingbat hex":"57","Unicode dec":"128328","Unicode hex":"1F548"},{"Typeface name":"Wingdings","Dingbat dec":"88","Dingbat hex":"58","Unicode dec":"10016","Unicode hex":"2720"},{"Typeface name":"Wingdings","Dingbat dec":"89","Dingbat hex":"59","Unicode dec":"10017","Unicode hex":"2721"},{"Typeface name":"Wingdings","Dingbat dec":"90","Dingbat hex":"5A","Unicode dec":"9770","Unicode hex":"262A"},{"Typeface name":"Wingdings","Dingbat dec":"91","Dingbat hex":"5B","Unicode dec":"9775","Unicode hex":"262F"},{"Typeface name":"Wingdings","Dingbat dec":"92","Dingbat hex":"5C","Unicode dec":"128329","Unicode hex":"1F549"},{"Typeface name":"Wingdings","Dingbat dec":"93","Dingbat hex":"5D","Unicode dec":"9784","Unicode hex":"2638"},{"Typeface name":"Wingdings","Dingbat dec":"94","Dingbat hex":"5E","Unicode dec":"9800","Unicode hex":"2648"},{"Typeface name":"Wingdings","Dingbat dec":"95","Dingbat hex":"5F","Unicode dec":"9801","Unicode hex":"2649"},{"Typeface name":"Wingdings","Dingbat dec":"96","Dingbat hex":"60","Unicode dec":"9802","Unicode hex":"264A"},{"Typeface name":"Wingdings","Dingbat dec":"97","Dingbat hex":"61","Unicode dec":"9803","Unicode hex":"264B"},{"Typeface name":"Wingdings","Dingbat dec":"98","Dingbat hex":"62","Unicode dec":"9804","Unicode hex":"264C"},{"Typeface name":"Wingdings","Dingbat dec":"99","Dingbat hex":"63","Unicode dec":"9805","Unicode hex":"264D"},{"Typeface name":"Wingdings","Dingbat dec":"100","Dingbat hex":"64","Unicode dec":"9806","Unicode hex":"264E"},{"Typeface name":"Wingdings","Dingbat dec":"101","Dingbat hex":"65","Unicode dec":"9807","Unicode hex":"264F"},{"Typeface name":"Wingdings","Dingbat dec":"102","Dingbat hex":"66","Unicode dec":"9808","Unicode hex":"2650"},{"Typeface name":"Wingdings","Dingbat dec":"103","Dingbat hex":"67","Unicode dec":"9809","Unicode hex":"2651"},{"Typeface name":"Wingdings","Dingbat dec":"104","Dingbat hex":"68","Unicode dec":"9810","Unicode hex":"2652"},{"Typeface name":"Wingdings","Dingbat dec":"105","Dingbat hex":"69","Unicode dec":"9811","Unicode hex":"2653"},{"Typeface name":"Wingdings","Dingbat dec":"106","Dingbat hex":"6A","Unicode dec":"128624","Unicode hex":"1F670"},{"Typeface name":"Wingdings","Dingbat dec":"107","Dingbat hex":"6B","Unicode dec":"128629","Unicode hex":"1F675"},{"Typeface name":"Wingdings","Dingbat dec":"108","Dingbat hex":"6C","Unicode dec":"9899","Unicode hex":"26AB"},{"Typeface name":"Wingdings","Dingbat dec":"109","Dingbat hex":"6D","Unicode dec":"128318","Unicode hex":"1F53E"},{"Typeface name":"Wingdings","Dingbat dec":"110","Dingbat hex":"6E","Unicode dec":"9724","Unicode hex":"25FC"},{"Typeface name":"Wingdings","Dingbat dec":"111","Dingbat hex":"6F","Unicode dec":"128911","Unicode hex":"1F78F"},{"Typeface name":"Wingdings","Dingbat dec":"112","Dingbat hex":"70","Unicode dec":"128912","Unicode hex":"1F790"},{"Typeface name":"Wingdings","Dingbat dec":"113","Dingbat hex":"71","Unicode dec":"10065","Unicode hex":"2751"},{"Typeface name":"Wingdings","Dingbat dec":"114","Dingbat hex":"72","Unicode dec":"10066","Unicode hex":"2752"},{"Typeface name":"Wingdings","Dingbat dec":"115","Dingbat hex":"73","Unicode dec":"128927","Unicode hex":"1F79F"},{"Typeface name":"Wingdings","Dingbat dec":"116","Dingbat hex":"74","Unicode dec":"10731","Unicode hex":"29EB"},{"Typeface name":"Wingdings","Dingbat dec":"117","Dingbat hex":"75","Unicode dec":"9670","Unicode hex":"25C6"},{"Typeface name":"Wingdings","Dingbat dec":"118","Dingbat hex":"76","Unicode dec":"10070","Unicode hex":"2756"},{"Typeface name":"Wingdings","Dingbat dec":"119","Dingbat hex":"77","Unicode dec":"11049","Unicode hex":"2B29"},{"Typeface name":"Wingdings","Dingbat dec":"120","Dingbat hex":"78","Unicode dec":"8999","Unicode hex":"2327"},{"Typeface name":"Wingdings","Dingbat dec":"121","Dingbat hex":"79","Unicode dec":"11193","Unicode hex":"2BB9"},{"Typeface name":"Wingdings","Dingbat dec":"122","Dingbat hex":"7A","Unicode dec":"8984","Unicode hex":"2318"},{"Typeface name":"Wingdings","Dingbat dec":"123","Dingbat hex":"7B","Unicode dec":"127989","Unicode hex":"1F3F5"},{"Typeface name":"Wingdings","Dingbat dec":"124","Dingbat hex":"7C","Unicode dec":"127990","Unicode hex":"1F3F6"},{"Typeface name":"Wingdings","Dingbat dec":"125","Dingbat hex":"7D","Unicode dec":"128630","Unicode hex":"1F676"},{"Typeface name":"Wingdings","Dingbat dec":"126","Dingbat hex":"7E","Unicode dec":"128631","Unicode hex":"1F677"},{"Typeface name":"Wingdings","Dingbat dec":"127","Dingbat hex":"7F","Unicode dec":"9647","Unicode hex":"25AF"},{"Typeface name":"Wingdings","Dingbat dec":"128","Dingbat hex":"80","Unicode dec":"127243","Unicode hex":"1F10B"},{"Typeface name":"Wingdings","Dingbat dec":"129","Dingbat hex":"81","Unicode dec":"10112","Unicode hex":"2780"},{"Typeface name":"Wingdings","Dingbat dec":"130","Dingbat hex":"82","Unicode dec":"10113","Unicode hex":"2781"},{"Typeface name":"Wingdings","Dingbat dec":"131","Dingbat hex":"83","Unicode dec":"10114","Unicode hex":"2782"},{"Typeface name":"Wingdings","Dingbat dec":"132","Dingbat hex":"84","Unicode dec":"10115","Unicode hex":"2783"},{"Typeface name":"Wingdings","Dingbat dec":"133","Dingbat hex":"85","Unicode dec":"10116","Unicode hex":"2784"},{"Typeface name":"Wingdings","Dingbat dec":"134","Dingbat hex":"86","Unicode dec":"10117","Unicode hex":"2785"},{"Typeface name":"Wingdings","Dingbat dec":"135","Dingbat hex":"87","Unicode dec":"10118","Unicode hex":"2786"},{"Typeface name":"Wingdings","Dingbat dec":"136","Dingbat hex":"88","Unicode dec":"10119","Unicode hex":"2787"},{"Typeface name":"Wingdings","Dingbat dec":"137","Dingbat hex":"89","Unicode dec":"10120","Unicode hex":"2788"},{"Typeface name":"Wingdings","Dingbat dec":"138","Dingbat hex":"8A","Unicode dec":"10121","Unicode hex":"2789"},{"Typeface name":"Wingdings","Dingbat dec":"139","Dingbat hex":"8B","Unicode dec":"127244","Unicode hex":"1F10C"},{"Typeface name":"Wingdings","Dingbat dec":"140","Dingbat hex":"8C","Unicode dec":"10122","Unicode hex":"278A"},{"Typeface name":"Wingdings","Dingbat dec":"141","Dingbat hex":"8D","Unicode dec":"10123","Unicode hex":"278B"},{"Typeface name":"Wingdings","Dingbat dec":"142","Dingbat hex":"8E","Unicode dec":"10124","Unicode hex":"278C"},{"Typeface name":"Wingdings","Dingbat dec":"143","Dingbat hex":"8F","Unicode dec":"10125","Unicode hex":"278D"},{"Typeface name":"Wingdings","Dingbat dec":"144","Dingbat hex":"90","Unicode dec":"10126","Unicode hex":"278E"},{"Typeface name":"Wingdings","Dingbat dec":"145","Dingbat hex":"91","Unicode dec":"10127","Unicode hex":"278F"},{"Typeface name":"Wingdings","Dingbat dec":"146","Dingbat hex":"92","Unicode dec":"10128","Unicode hex":"2790"},{"Typeface name":"Wingdings","Dingbat dec":"147","Dingbat hex":"93","Unicode dec":"10129","Unicode hex":"2791"},{"Typeface name":"Wingdings","Dingbat dec":"148","Dingbat hex":"94","Unicode dec":"10130","Unicode hex":"2792"},{"Typeface name":"Wingdings","Dingbat dec":"149","Dingbat hex":"95","Unicode dec":"10131","Unicode hex":"2793"},{"Typeface name":"Wingdings","Dingbat dec":"150","Dingbat hex":"96","Unicode dec":"128610","Unicode hex":"1F662"},{"Typeface name":"Wingdings","Dingbat dec":"151","Dingbat hex":"97","Unicode dec":"128608","Unicode hex":"1F660"},{"Typeface name":"Wingdings","Dingbat dec":"152","Dingbat hex":"98","Unicode dec":"128609","Unicode hex":"1F661"},{"Typeface name":"Wingdings","Dingbat dec":"153","Dingbat hex":"99","Unicode dec":"128611","Unicode hex":"1F663"},{"Typeface name":"Wingdings","Dingbat dec":"154","Dingbat hex":"9A","Unicode dec":"128606","Unicode hex":"1F65E"},{"Typeface name":"Wingdings","Dingbat dec":"155","Dingbat hex":"9B","Unicode dec":"128604","Unicode hex":"1F65C"},{"Typeface name":"Wingdings","Dingbat dec":"156","Dingbat hex":"9C","Unicode dec":"128605","Unicode hex":"1F65D"},{"Typeface name":"Wingdings","Dingbat dec":"157","Dingbat hex":"9D","Unicode dec":"128607","Unicode hex":"1F65F"},{"Typeface name":"Wingdings","Dingbat dec":"158","Dingbat hex":"9E","Unicode dec":"8729","Unicode hex":"2219"},{"Typeface name":"Wingdings","Dingbat dec":"159","Dingbat hex":"9F","Unicode dec":"8226","Unicode hex":"2022"},{"Typeface name":"Wingdings","Dingbat dec":"160","Dingbat hex":"A0","Unicode dec":"11037","Unicode hex":"2B1D"},{"Typeface name":"Wingdings","Dingbat dec":"161","Dingbat hex":"A1","Unicode dec":"11096","Unicode hex":"2B58"},{"Typeface name":"Wingdings","Dingbat dec":"162","Dingbat hex":"A2","Unicode dec":"128902","Unicode hex":"1F786"},{"Typeface name":"Wingdings","Dingbat dec":"163","Dingbat hex":"A3","Unicode dec":"128904","Unicode hex":"1F788"},{"Typeface name":"Wingdings","Dingbat dec":"164","Dingbat hex":"A4","Unicode dec":"128906","Unicode hex":"1F78A"},{"Typeface name":"Wingdings","Dingbat dec":"165","Dingbat hex":"A5","Unicode dec":"128907","Unicode hex":"1F78B"},{"Typeface name":"Wingdings","Dingbat dec":"166","Dingbat hex":"A6","Unicode dec":"128319","Unicode hex":"1F53F"},{"Typeface name":"Wingdings","Dingbat dec":"167","Dingbat hex":"A7","Unicode dec":"9642","Unicode hex":"25AA"},{"Typeface name":"Wingdings","Dingbat dec":"168","Dingbat hex":"A8","Unicode dec":"128910","Unicode hex":"1F78E"},{"Typeface name":"Wingdings","Dingbat dec":"169","Dingbat hex":"A9","Unicode dec":"128961","Unicode hex":"1F7C1"},{"Typeface name":"Wingdings","Dingbat dec":"170","Dingbat hex":"AA","Unicode dec":"128965","Unicode hex":"1F7C5"},{"Typeface name":"Wingdings","Dingbat dec":"171","Dingbat hex":"AB","Unicode dec":"9733","Unicode hex":"2605"},{"Typeface name":"Wingdings","Dingbat dec":"172","Dingbat hex":"AC","Unicode dec":"128971","Unicode hex":"1F7CB"},{"Typeface name":"Wingdings","Dingbat dec":"173","Dingbat hex":"AD","Unicode dec":"128975","Unicode hex":"1F7CF"},{"Typeface name":"Wingdings","Dingbat dec":"174","Dingbat hex":"AE","Unicode dec":"128979","Unicode hex":"1F7D3"},{"Typeface name":"Wingdings","Dingbat dec":"175","Dingbat hex":"AF","Unicode dec":"128977","Unicode hex":"1F7D1"},{"Typeface name":"Wingdings","Dingbat dec":"176","Dingbat hex":"B0","Unicode dec":"11216","Unicode hex":"2BD0"},{"Typeface name":"Wingdings","Dingbat dec":"177","Dingbat hex":"B1","Unicode dec":"8982","Unicode hex":"2316"},{"Typeface name":"Wingdings","Dingbat dec":"178","Dingbat hex":"B2","Unicode dec":"11214","Unicode hex":"2BCE"},{"Typeface name":"Wingdings","Dingbat dec":"179","Dingbat hex":"B3","Unicode dec":"11215","Unicode hex":"2BCF"},{"Typeface name":"Wingdings","Dingbat dec":"180","Dingbat hex":"B4","Unicode dec":"11217","Unicode hex":"2BD1"},{"Typeface name":"Wingdings","Dingbat dec":"181","Dingbat hex":"B5","Unicode dec":"10026","Unicode hex":"272A"},{"Typeface name":"Wingdings","Dingbat dec":"182","Dingbat hex":"B6","Unicode dec":"10032","Unicode hex":"2730"},{"Typeface name":"Wingdings","Dingbat dec":"183","Dingbat hex":"B7","Unicode dec":"128336","Unicode hex":"1F550"},{"Typeface name":"Wingdings","Dingbat dec":"184","Dingbat hex":"B8","Unicode dec":"128337","Unicode hex":"1F551"},{"Typeface name":"Wingdings","Dingbat dec":"185","Dingbat hex":"B9","Unicode dec":"128338","Unicode hex":"1F552"},{"Typeface name":"Wingdings","Dingbat dec":"186","Dingbat hex":"BA","Unicode dec":"128339","Unicode hex":"1F553"},{"Typeface name":"Wingdings","Dingbat dec":"187","Dingbat hex":"BB","Unicode dec":"128340","Unicode hex":"1F554"},{"Typeface name":"Wingdings","Dingbat dec":"188","Dingbat hex":"BC","Unicode dec":"128341","Unicode hex":"1F555"},{"Typeface name":"Wingdings","Dingbat dec":"189","Dingbat hex":"BD","Unicode dec":"128342","Unicode hex":"1F556"},{"Typeface name":"Wingdings","Dingbat dec":"190","Dingbat hex":"BE","Unicode dec":"128343","Unicode hex":"1F557"},{"Typeface name":"Wingdings","Dingbat dec":"191","Dingbat hex":"BF","Unicode dec":"128344","Unicode hex":"1F558"},{"Typeface name":"Wingdings","Dingbat dec":"192","Dingbat hex":"C0","Unicode dec":"128345","Unicode hex":"1F559"},{"Typeface name":"Wingdings","Dingbat dec":"193","Dingbat hex":"C1","Unicode dec":"128346","Unicode hex":"1F55A"},{"Typeface name":"Wingdings","Dingbat dec":"194","Dingbat hex":"C2","Unicode dec":"128347","Unicode hex":"1F55B"},{"Typeface name":"Wingdings","Dingbat dec":"195","Dingbat hex":"C3","Unicode dec":"11184","Unicode hex":"2BB0"},{"Typeface name":"Wingdings","Dingbat dec":"196","Dingbat hex":"C4","Unicode dec":"11185","Unicode hex":"2BB1"},{"Typeface name":"Wingdings","Dingbat dec":"197","Dingbat hex":"C5","Unicode dec":"11186","Unicode hex":"2BB2"},{"Typeface name":"Wingdings","Dingbat dec":"198","Dingbat hex":"C6","Unicode dec":"11187","Unicode hex":"2BB3"},{"Typeface name":"Wingdings","Dingbat dec":"199","Dingbat hex":"C7","Unicode dec":"11188","Unicode hex":"2BB4"},{"Typeface name":"Wingdings","Dingbat dec":"200","Dingbat hex":"C8","Unicode dec":"11189","Unicode hex":"2BB5"},{"Typeface name":"Wingdings","Dingbat dec":"201","Dingbat hex":"C9","Unicode dec":"11190","Unicode hex":"2BB6"},{"Typeface name":"Wingdings","Dingbat dec":"202","Dingbat hex":"CA","Unicode dec":"11191","Unicode hex":"2BB7"},{"Typeface name":"Wingdings","Dingbat dec":"203","Dingbat hex":"CB","Unicode dec":"128618","Unicode hex":"1F66A"},{"Typeface name":"Wingdings","Dingbat dec":"204","Dingbat hex":"CC","Unicode dec":"128619","Unicode hex":"1F66B"},{"Typeface name":"Wingdings","Dingbat dec":"205","Dingbat hex":"CD","Unicode dec":"128597","Unicode hex":"1F655"},{"Typeface name":"Wingdings","Dingbat dec":"206","Dingbat hex":"CE","Unicode dec":"128596","Unicode hex":"1F654"},{"Typeface name":"Wingdings","Dingbat dec":"207","Dingbat hex":"CF","Unicode dec":"128599","Unicode hex":"1F657"},{"Typeface name":"Wingdings","Dingbat dec":"208","Dingbat hex":"D0","Unicode dec":"128598","Unicode hex":"1F656"},{"Typeface name":"Wingdings","Dingbat dec":"209","Dingbat hex":"D1","Unicode dec":"128592","Unicode hex":"1F650"},{"Typeface name":"Wingdings","Dingbat dec":"210","Dingbat hex":"D2","Unicode dec":"128593","Unicode hex":"1F651"},{"Typeface name":"Wingdings","Dingbat dec":"211","Dingbat hex":"D3","Unicode dec":"128594","Unicode hex":"1F652"},{"Typeface name":"Wingdings","Dingbat dec":"212","Dingbat hex":"D4","Unicode dec":"128595","Unicode hex":"1F653"},{"Typeface name":"Wingdings","Dingbat dec":"213","Dingbat hex":"D5","Unicode dec":"9003","Unicode hex":"232B"},{"Typeface name":"Wingdings","Dingbat dec":"214","Dingbat hex":"D6","Unicode dec":"8998","Unicode hex":"2326"},{"Typeface name":"Wingdings","Dingbat dec":"215","Dingbat hex":"D7","Unicode dec":"11160","Unicode hex":"2B98"},{"Typeface name":"Wingdings","Dingbat dec":"216","Dingbat hex":"D8","Unicode dec":"11162","Unicode hex":"2B9A"},{"Typeface name":"Wingdings","Dingbat dec":"217","Dingbat hex":"D9","Unicode dec":"11161","Unicode hex":"2B99"},{"Typeface name":"Wingdings","Dingbat dec":"218","Dingbat hex":"DA","Unicode dec":"11163","Unicode hex":"2B9B"},{"Typeface name":"Wingdings","Dingbat dec":"219","Dingbat hex":"DB","Unicode dec":"11144","Unicode hex":"2B88"},{"Typeface name":"Wingdings","Dingbat dec":"220","Dingbat hex":"DC","Unicode dec":"11146","Unicode hex":"2B8A"},{"Typeface name":"Wingdings","Dingbat dec":"221","Dingbat hex":"DD","Unicode dec":"11145","Unicode hex":"2B89"},{"Typeface name":"Wingdings","Dingbat dec":"222","Dingbat hex":"DE","Unicode dec":"11147","Unicode hex":"2B8B"},{"Typeface name":"Wingdings","Dingbat dec":"223","Dingbat hex":"DF","Unicode dec":"129128","Unicode hex":"1F868"},{"Typeface name":"Wingdings","Dingbat dec":"224","Dingbat hex":"E0","Unicode dec":"129130","Unicode hex":"1F86A"},{"Typeface name":"Wingdings","Dingbat dec":"225","Dingbat hex":"E1","Unicode dec":"129129","Unicode hex":"1F869"},{"Typeface name":"Wingdings","Dingbat dec":"226","Dingbat hex":"E2","Unicode dec":"129131","Unicode hex":"1F86B"},{"Typeface name":"Wingdings","Dingbat dec":"227","Dingbat hex":"E3","Unicode dec":"129132","Unicode hex":"1F86C"},{"Typeface name":"Wingdings","Dingbat dec":"228","Dingbat hex":"E4","Unicode dec":"129133","Unicode hex":"1F86D"},{"Typeface name":"Wingdings","Dingbat dec":"229","Dingbat hex":"E5","Unicode dec":"129135","Unicode hex":"1F86F"},{"Typeface name":"Wingdings","Dingbat dec":"230","Dingbat hex":"E6","Unicode dec":"129134","Unicode hex":"1F86E"},{"Typeface name":"Wingdings","Dingbat dec":"231","Dingbat hex":"E7","Unicode dec":"129144","Unicode hex":"1F878"},{"Typeface name":"Wingdings","Dingbat dec":"232","Dingbat hex":"E8","Unicode dec":"129146","Unicode hex":"1F87A"},{"Typeface name":"Wingdings","Dingbat dec":"233","Dingbat hex":"E9","Unicode dec":"129145","Unicode hex":"1F879"},{"Typeface name":"Wingdings","Dingbat dec":"234","Dingbat hex":"EA","Unicode dec":"129147","Unicode hex":"1F87B"},{"Typeface name":"Wingdings","Dingbat dec":"235","Dingbat hex":"EB","Unicode dec":"129148","Unicode hex":"1F87C"},{"Typeface name":"Wingdings","Dingbat dec":"236","Dingbat hex":"EC","Unicode dec":"129149","Unicode hex":"1F87D"},{"Typeface name":"Wingdings","Dingbat dec":"237","Dingbat hex":"ED","Unicode dec":"129151","Unicode hex":"1F87F"},{"Typeface name":"Wingdings","Dingbat dec":"238","Dingbat hex":"EE","Unicode dec":"129150","Unicode hex":"1F87E"},{"Typeface name":"Wingdings","Dingbat dec":"239","Dingbat hex":"EF","Unicode dec":"8678","Unicode hex":"21E6"},{"Typeface name":"Wingdings","Dingbat dec":"240","Dingbat hex":"F0","Unicode dec":"8680","Unicode hex":"21E8"},{"Typeface name":"Wingdings","Dingbat dec":"241","Dingbat hex":"F1","Unicode dec":"8679","Unicode hex":"21E7"},{"Typeface name":"Wingdings","Dingbat dec":"242","Dingbat hex":"F2","Unicode dec":"8681","Unicode hex":"21E9"},{"Typeface name":"Wingdings","Dingbat dec":"243","Dingbat hex":"F3","Unicode dec":"11012","Unicode hex":"2B04"},{"Typeface name":"Wingdings","Dingbat dec":"244","Dingbat hex":"F4","Unicode dec":"8691","Unicode hex":"21F3"},{"Typeface name":"Wingdings","Dingbat dec":"245","Dingbat hex":"F5","Unicode dec":"11009","Unicode hex":"2B01"},{"Typeface name":"Wingdings","Dingbat dec":"246","Dingbat hex":"F6","Unicode dec":"11008","Unicode hex":"2B00"},{"Typeface name":"Wingdings","Dingbat dec":"247","Dingbat hex":"F7","Unicode dec":"11011","Unicode hex":"2B03"},{"Typeface name":"Wingdings","Dingbat dec":"248","Dingbat hex":"F8","Unicode dec":"11010","Unicode hex":"2B02"},{"Typeface name":"Wingdings","Dingbat dec":"249","Dingbat hex":"F9","Unicode dec":"129196","Unicode hex":"1F8AC"},{"Typeface name":"Wingdings","Dingbat dec":"250","Dingbat hex":"FA","Unicode dec":"129197","Unicode hex":"1F8AD"},{"Typeface name":"Wingdings","Dingbat dec":"251","Dingbat hex":"FB","Unicode dec":"128502","Unicode hex":"1F5F6"},{"Typeface name":"Wingdings","Dingbat dec":"252","Dingbat hex":"FC","Unicode dec":"10003","Unicode hex":"2713"},{"Typeface name":"Wingdings","Dingbat dec":"253","Dingbat hex":"FD","Unicode dec":"128503","Unicode hex":"1F5F7"},{"Typeface name":"Wingdings","Dingbat dec":"254","Dingbat hex":"FE","Unicode dec":"128505","Unicode hex":"1F5F9"},{"Typeface name":"Wingdings 2","Dingbat dec":"32","Dingbat hex":"20","Unicode dec":"32","Unicode hex":"20"},{"Typeface name":"Wingdings 2","Dingbat dec":"33","Dingbat hex":"21","Unicode dec":"128394","Unicode hex":"1F58A"},{"Typeface name":"Wingdings 2","Dingbat dec":"34","Dingbat hex":"22","Unicode dec":"128395","Unicode hex":"1F58B"},{"Typeface name":"Wingdings 2","Dingbat dec":"35","Dingbat hex":"23","Unicode dec":"128396","Unicode hex":"1F58C"},{"Typeface name":"Wingdings 2","Dingbat dec":"36","Dingbat hex":"24","Unicode dec":"128397","Unicode hex":"1F58D"},{"Typeface name":"Wingdings 2","Dingbat dec":"37","Dingbat hex":"25","Unicode dec":"9988","Unicode hex":"2704"},{"Typeface name":"Wingdings 2","Dingbat dec":"38","Dingbat hex":"26","Unicode dec":"9984","Unicode hex":"2700"},{"Typeface name":"Wingdings 2","Dingbat dec":"39","Dingbat hex":"27","Unicode dec":"128382","Unicode hex":"1F57E"},{"Typeface name":"Wingdings 2","Dingbat dec":"40","Dingbat hex":"28","Unicode dec":"128381","Unicode hex":"1F57D"},{"Typeface name":"Wingdings 2","Dingbat dec":"41","Dingbat hex":"29","Unicode dec":"128453","Unicode hex":"1F5C5"},{"Typeface name":"Wingdings 2","Dingbat dec":"42","Dingbat hex":"2A","Unicode dec":"128454","Unicode hex":"1F5C6"},{"Typeface name":"Wingdings 2","Dingbat dec":"43","Dingbat hex":"2B","Unicode dec":"128455","Unicode hex":"1F5C7"},{"Typeface name":"Wingdings 2","Dingbat dec":"44","Dingbat hex":"2C","Unicode dec":"128456","Unicode hex":"1F5C8"},{"Typeface name":"Wingdings 2","Dingbat dec":"45","Dingbat hex":"2D","Unicode dec":"128457","Unicode hex":"1F5C9"},{"Typeface name":"Wingdings 2","Dingbat dec":"46","Dingbat hex":"2E","Unicode dec":"128458","Unicode hex":"1F5CA"},{"Typeface name":"Wingdings 2","Dingbat dec":"47","Dingbat hex":"2F","Unicode dec":"128459","Unicode hex":"1F5CB"},{"Typeface name":"Wingdings 2","Dingbat dec":"48","Dingbat hex":"30","Unicode dec":"128460","Unicode hex":"1F5CC"},{"Typeface name":"Wingdings 2","Dingbat dec":"49","Dingbat hex":"31","Unicode dec":"128461","Unicode hex":"1F5CD"},{"Typeface name":"Wingdings 2","Dingbat dec":"50","Dingbat hex":"32","Unicode dec":"128203","Unicode hex":"1F4CB"},{"Typeface name":"Wingdings 2","Dingbat dec":"51","Dingbat hex":"33","Unicode dec":"128465","Unicode hex":"1F5D1"},{"Typeface name":"Wingdings 2","Dingbat dec":"52","Dingbat hex":"34","Unicode dec":"128468","Unicode hex":"1F5D4"},{"Typeface name":"Wingdings 2","Dingbat dec":"53","Dingbat hex":"35","Unicode dec":"128437","Unicode hex":"1F5B5"},{"Typeface name":"Wingdings 2","Dingbat dec":"54","Dingbat hex":"36","Unicode dec":"128438","Unicode hex":"1F5B6"},{"Typeface name":"Wingdings 2","Dingbat dec":"55","Dingbat hex":"37","Unicode dec":"128439","Unicode hex":"1F5B7"},{"Typeface name":"Wingdings 2","Dingbat dec":"56","Dingbat hex":"38","Unicode dec":"128440","Unicode hex":"1F5B8"},{"Typeface name":"Wingdings 2","Dingbat dec":"57","Dingbat hex":"39","Unicode dec":"128429","Unicode hex":"1F5AD"},{"Typeface name":"Wingdings 2","Dingbat dec":"58","Dingbat hex":"3A","Unicode dec":"128431","Unicode hex":"1F5AF"},{"Typeface name":"Wingdings 2","Dingbat dec":"59","Dingbat hex":"3B","Unicode dec":"128433","Unicode hex":"1F5B1"},{"Typeface name":"Wingdings 2","Dingbat dec":"60","Dingbat hex":"3C","Unicode dec":"128402","Unicode hex":"1F592"},{"Typeface name":"Wingdings 2","Dingbat dec":"61","Dingbat hex":"3D","Unicode dec":"128403","Unicode hex":"1F593"},{"Typeface name":"Wingdings 2","Dingbat dec":"62","Dingbat hex":"3E","Unicode dec":"128408","Unicode hex":"1F598"},{"Typeface name":"Wingdings 2","Dingbat dec":"63","Dingbat hex":"3F","Unicode dec":"128409","Unicode hex":"1F599"},{"Typeface name":"Wingdings 2","Dingbat dec":"64","Dingbat hex":"40","Unicode dec":"128410","Unicode hex":"1F59A"},{"Typeface name":"Wingdings 2","Dingbat dec":"65","Dingbat hex":"41","Unicode dec":"128411","Unicode hex":"1F59B"},{"Typeface name":"Wingdings 2","Dingbat dec":"66","Dingbat hex":"42","Unicode dec":"128072","Unicode hex":"1F448"},{"Typeface name":"Wingdings 2","Dingbat dec":"67","Dingbat hex":"43","Unicode dec":"128073","Unicode hex":"1F449"},{"Typeface name":"Wingdings 2","Dingbat dec":"68","Dingbat hex":"44","Unicode dec":"128412","Unicode hex":"1F59C"},{"Typeface name":"Wingdings 2","Dingbat dec":"69","Dingbat hex":"45","Unicode dec":"128413","Unicode hex":"1F59D"},{"Typeface name":"Wingdings 2","Dingbat dec":"70","Dingbat hex":"46","Unicode dec":"128414","Unicode hex":"1F59E"},{"Typeface name":"Wingdings 2","Dingbat dec":"71","Dingbat hex":"47","Unicode dec":"128415","Unicode hex":"1F59F"},{"Typeface name":"Wingdings 2","Dingbat dec":"72","Dingbat hex":"48","Unicode dec":"128416","Unicode hex":"1F5A0"},{"Typeface name":"Wingdings 2","Dingbat dec":"73","Dingbat hex":"49","Unicode dec":"128417","Unicode hex":"1F5A1"},{"Typeface name":"Wingdings 2","Dingbat dec":"74","Dingbat hex":"4A","Unicode dec":"128070","Unicode hex":"1F446"},{"Typeface name":"Wingdings 2","Dingbat dec":"75","Dingbat hex":"4B","Unicode dec":"128071","Unicode hex":"1F447"},{"Typeface name":"Wingdings 2","Dingbat dec":"76","Dingbat hex":"4C","Unicode dec":"128418","Unicode hex":"1F5A2"},{"Typeface name":"Wingdings 2","Dingbat dec":"77","Dingbat hex":"4D","Unicode dec":"128419","Unicode hex":"1F5A3"},{"Typeface name":"Wingdings 2","Dingbat dec":"78","Dingbat hex":"4E","Unicode dec":"128401","Unicode hex":"1F591"},{"Typeface name":"Wingdings 2","Dingbat dec":"79","Dingbat hex":"4F","Unicode dec":"128500","Unicode hex":"1F5F4"},{"Typeface name":"Wingdings 2","Dingbat dec":"80","Dingbat hex":"50","Unicode dec":"128504","Unicode hex":"1F5F8"},{"Typeface name":"Wingdings 2","Dingbat dec":"81","Dingbat hex":"51","Unicode dec":"128501","Unicode hex":"1F5F5"},{"Typeface name":"Wingdings 2","Dingbat dec":"82","Dingbat hex":"52","Unicode dec":"9745","Unicode hex":"2611"},{"Typeface name":"Wingdings 2","Dingbat dec":"83","Dingbat hex":"53","Unicode dec":"11197","Unicode hex":"2BBD"},{"Typeface name":"Wingdings 2","Dingbat dec":"84","Dingbat hex":"54","Unicode dec":"9746","Unicode hex":"2612"},{"Typeface name":"Wingdings 2","Dingbat dec":"85","Dingbat hex":"55","Unicode dec":"11198","Unicode hex":"2BBE"},{"Typeface name":"Wingdings 2","Dingbat dec":"86","Dingbat hex":"56","Unicode dec":"11199","Unicode hex":"2BBF"},{"Typeface name":"Wingdings 2","Dingbat dec":"87","Dingbat hex":"57","Unicode dec":"128711","Unicode hex":"1F6C7"},{"Typeface name":"Wingdings 2","Dingbat dec":"88","Dingbat hex":"58","Unicode dec":"10680","Unicode hex":"29B8"},{"Typeface name":"Wingdings 2","Dingbat dec":"89","Dingbat hex":"59","Unicode dec":"128625","Unicode hex":"1F671"},{"Typeface name":"Wingdings 2","Dingbat dec":"90","Dingbat hex":"5A","Unicode dec":"128628","Unicode hex":"1F674"},{"Typeface name":"Wingdings 2","Dingbat dec":"91","Dingbat hex":"5B","Unicode dec":"128626","Unicode hex":"1F672"},{"Typeface name":"Wingdings 2","Dingbat dec":"92","Dingbat hex":"5C","Unicode dec":"128627","Unicode hex":"1F673"},{"Typeface name":"Wingdings 2","Dingbat dec":"93","Dingbat hex":"5D","Unicode dec":"8253","Unicode hex":"203D"},{"Typeface name":"Wingdings 2","Dingbat dec":"94","Dingbat hex":"5E","Unicode dec":"128633","Unicode hex":"1F679"},{"Typeface name":"Wingdings 2","Dingbat dec":"95","Dingbat hex":"5F","Unicode dec":"128634","Unicode hex":"1F67A"},{"Typeface name":"Wingdings 2","Dingbat dec":"96","Dingbat hex":"60","Unicode dec":"128635","Unicode hex":"1F67B"},{"Typeface name":"Wingdings 2","Dingbat dec":"97","Dingbat hex":"61","Unicode dec":"128614","Unicode hex":"1F666"},{"Typeface name":"Wingdings 2","Dingbat dec":"98","Dingbat hex":"62","Unicode dec":"128612","Unicode hex":"1F664"},{"Typeface name":"Wingdings 2","Dingbat dec":"99","Dingbat hex":"63","Unicode dec":"128613","Unicode hex":"1F665"},{"Typeface name":"Wingdings 2","Dingbat dec":"100","Dingbat hex":"64","Unicode dec":"128615","Unicode hex":"1F667"},{"Typeface name":"Wingdings 2","Dingbat dec":"101","Dingbat hex":"65","Unicode dec":"128602","Unicode hex":"1F65A"},{"Typeface name":"Wingdings 2","Dingbat dec":"102","Dingbat hex":"66","Unicode dec":"128600","Unicode hex":"1F658"},{"Typeface name":"Wingdings 2","Dingbat dec":"103","Dingbat hex":"67","Unicode dec":"128601","Unicode hex":"1F659"},{"Typeface name":"Wingdings 2","Dingbat dec":"104","Dingbat hex":"68","Unicode dec":"128603","Unicode hex":"1F65B"},{"Typeface name":"Wingdings 2","Dingbat dec":"105","Dingbat hex":"69","Unicode dec":"9450","Unicode hex":"24EA"},{"Typeface name":"Wingdings 2","Dingbat dec":"106","Dingbat hex":"6A","Unicode dec":"9312","Unicode hex":"2460"},{"Typeface name":"Wingdings 2","Dingbat dec":"107","Dingbat hex":"6B","Unicode dec":"9313","Unicode hex":"2461"},{"Typeface name":"Wingdings 2","Dingbat dec":"108","Dingbat hex":"6C","Unicode dec":"9314","Unicode hex":"2462"},{"Typeface name":"Wingdings 2","Dingbat dec":"109","Dingbat hex":"6D","Unicode dec":"9315","Unicode hex":"2463"},{"Typeface name":"Wingdings 2","Dingbat dec":"110","Dingbat hex":"6E","Unicode dec":"9316","Unicode hex":"2464"},{"Typeface name":"Wingdings 2","Dingbat dec":"111","Dingbat hex":"6F","Unicode dec":"9317","Unicode hex":"2465"},{"Typeface name":"Wingdings 2","Dingbat dec":"112","Dingbat hex":"70","Unicode dec":"9318","Unicode hex":"2466"},{"Typeface name":"Wingdings 2","Dingbat dec":"113","Dingbat hex":"71","Unicode dec":"9319","Unicode hex":"2467"},{"Typeface name":"Wingdings 2","Dingbat dec":"114","Dingbat hex":"72","Unicode dec":"9320","Unicode hex":"2468"},{"Typeface name":"Wingdings 2","Dingbat dec":"115","Dingbat hex":"73","Unicode dec":"9321","Unicode hex":"2469"},{"Typeface name":"Wingdings 2","Dingbat dec":"116","Dingbat hex":"74","Unicode dec":"9471","Unicode hex":"24FF"},{"Typeface name":"Wingdings 2","Dingbat dec":"117","Dingbat hex":"75","Unicode dec":"10102","Unicode hex":"2776"},{"Typeface name":"Wingdings 2","Dingbat dec":"118","Dingbat hex":"76","Unicode dec":"10103","Unicode hex":"2777"},{"Typeface name":"Wingdings 2","Dingbat dec":"119","Dingbat hex":"77","Unicode dec":"10104","Unicode hex":"2778"},{"Typeface name":"Wingdings 2","Dingbat dec":"120","Dingbat hex":"78","Unicode dec":"10105","Unicode hex":"2779"},{"Typeface name":"Wingdings 2","Dingbat dec":"121","Dingbat hex":"79","Unicode dec":"10106","Unicode hex":"277A"},{"Typeface name":"Wingdings 2","Dingbat dec":"122","Dingbat hex":"7A","Unicode dec":"10107","Unicode hex":"277B"},{"Typeface name":"Wingdings 2","Dingbat dec":"123","Dingbat hex":"7B","Unicode dec":"10108","Unicode hex":"277C"},{"Typeface name":"Wingdings 2","Dingbat dec":"124","Dingbat hex":"7C","Unicode dec":"10109","Unicode hex":"277D"},{"Typeface name":"Wingdings 2","Dingbat dec":"125","Dingbat hex":"7D","Unicode dec":"10110","Unicode hex":"277E"},{"Typeface name":"Wingdings 2","Dingbat dec":"126","Dingbat hex":"7E","Unicode dec":"10111","Unicode hex":"277F"},{"Typeface name":"Wingdings 2","Dingbat dec":"128","Dingbat hex":"80","Unicode dec":"9737","Unicode hex":"2609"},{"Typeface name":"Wingdings 2","Dingbat dec":"129","Dingbat hex":"81","Unicode dec":"127765","Unicode hex":"1F315"},{"Typeface name":"Wingdings 2","Dingbat dec":"130","Dingbat hex":"82","Unicode dec":"9789","Unicode hex":"263D"},{"Typeface name":"Wingdings 2","Dingbat dec":"131","Dingbat hex":"83","Unicode dec":"9790","Unicode hex":"263E"},{"Typeface name":"Wingdings 2","Dingbat dec":"132","Dingbat hex":"84","Unicode dec":"11839","Unicode hex":"2E3F"},{"Typeface name":"Wingdings 2","Dingbat dec":"133","Dingbat hex":"85","Unicode dec":"10013","Unicode hex":"271D"},{"Typeface name":"Wingdings 2","Dingbat dec":"134","Dingbat hex":"86","Unicode dec":"128327","Unicode hex":"1F547"},{"Typeface name":"Wingdings 2","Dingbat dec":"135","Dingbat hex":"87","Unicode dec":"128348","Unicode hex":"1F55C"},{"Typeface name":"Wingdings 2","Dingbat dec":"136","Dingbat hex":"88","Unicode dec":"128349","Unicode hex":"1F55D"},{"Typeface name":"Wingdings 2","Dingbat dec":"137","Dingbat hex":"89","Unicode dec":"128350","Unicode hex":"1F55E"},{"Typeface name":"Wingdings 2","Dingbat dec":"138","Dingbat hex":"8A","Unicode dec":"128351","Unicode hex":"1F55F"},{"Typeface name":"Wingdings 2","Dingbat dec":"139","Dingbat hex":"8B","Unicode dec":"128352","Unicode hex":"1F560"},{"Typeface name":"Wingdings 2","Dingbat dec":"140","Dingbat hex":"8C","Unicode dec":"128353","Unicode hex":"1F561"},{"Typeface name":"Wingdings 2","Dingbat dec":"141","Dingbat hex":"8D","Unicode dec":"128354","Unicode hex":"1F562"},{"Typeface name":"Wingdings 2","Dingbat dec":"142","Dingbat hex":"8E","Unicode dec":"128355","Unicode hex":"1F563"},{"Typeface name":"Wingdings 2","Dingbat dec":"143","Dingbat hex":"8F","Unicode dec":"128356","Unicode hex":"1F564"},{"Typeface name":"Wingdings 2","Dingbat dec":"144","Dingbat hex":"90","Unicode dec":"128357","Unicode hex":"1F565"},{"Typeface name":"Wingdings 2","Dingbat dec":"145","Dingbat hex":"91","Unicode dec":"128358","Unicode hex":"1F566"},{"Typeface name":"Wingdings 2","Dingbat dec":"146","Dingbat hex":"92","Unicode dec":"128359","Unicode hex":"1F567"},{"Typeface name":"Wingdings 2","Dingbat dec":"147","Dingbat hex":"93","Unicode dec":"128616","Unicode hex":"1F668"},{"Typeface name":"Wingdings 2","Dingbat dec":"148","Dingbat hex":"94","Unicode dec":"128617","Unicode hex":"1F669"},{"Typeface name":"Wingdings 2","Dingbat dec":"149","Dingbat hex":"95","Unicode dec":"8901","Unicode hex":"22C5"},{"Typeface name":"Wingdings 2","Dingbat dec":"150","Dingbat hex":"96","Unicode dec":"128900","Unicode hex":"1F784"},{"Typeface name":"Wingdings 2","Dingbat dec":"151","Dingbat hex":"97","Unicode dec":"10625","Unicode hex":"2981"},{"Typeface name":"Wingdings 2","Dingbat dec":"152","Dingbat hex":"98","Unicode dec":"9679","Unicode hex":"25CF"},{"Typeface name":"Wingdings 2","Dingbat dec":"153","Dingbat hex":"99","Unicode dec":"9675","Unicode hex":"25CB"},{"Typeface name":"Wingdings 2","Dingbat dec":"154","Dingbat hex":"9A","Unicode dec":"128901","Unicode hex":"1F785"},{"Typeface name":"Wingdings 2","Dingbat dec":"155","Dingbat hex":"9B","Unicode dec":"128903","Unicode hex":"1F787"},{"Typeface name":"Wingdings 2","Dingbat dec":"156","Dingbat hex":"9C","Unicode dec":"128905","Unicode hex":"1F789"},{"Typeface name":"Wingdings 2","Dingbat dec":"157","Dingbat hex":"9D","Unicode dec":"8857","Unicode hex":"2299"},{"Typeface name":"Wingdings 2","Dingbat dec":"158","Dingbat hex":"9E","Unicode dec":"10687","Unicode hex":"29BF"},{"Typeface name":"Wingdings 2","Dingbat dec":"159","Dingbat hex":"9F","Unicode dec":"128908","Unicode hex":"1F78C"},{"Typeface name":"Wingdings 2","Dingbat dec":"160","Dingbat hex":"A0","Unicode dec":"128909","Unicode hex":"1F78D"},{"Typeface name":"Wingdings 2","Dingbat dec":"161","Dingbat hex":"A1","Unicode dec":"9726","Unicode hex":"25FE"},{"Typeface name":"Wingdings 2","Dingbat dec":"162","Dingbat hex":"A2","Unicode dec":"9632","Unicode hex":"25A0"},{"Typeface name":"Wingdings 2","Dingbat dec":"163","Dingbat hex":"A3","Unicode dec":"9633","Unicode hex":"25A1"},{"Typeface name":"Wingdings 2","Dingbat dec":"164","Dingbat hex":"A4","Unicode dec":"128913","Unicode hex":"1F791"},{"Typeface name":"Wingdings 2","Dingbat dec":"165","Dingbat hex":"A5","Unicode dec":"128914","Unicode hex":"1F792"},{"Typeface name":"Wingdings 2","Dingbat dec":"166","Dingbat hex":"A6","Unicode dec":"128915","Unicode hex":"1F793"},{"Typeface name":"Wingdings 2","Dingbat dec":"167","Dingbat hex":"A7","Unicode dec":"128916","Unicode hex":"1F794"},{"Typeface name":"Wingdings 2","Dingbat dec":"168","Dingbat hex":"A8","Unicode dec":"9635","Unicode hex":"25A3"},{"Typeface name":"Wingdings 2","Dingbat dec":"169","Dingbat hex":"A9","Unicode dec":"128917","Unicode hex":"1F795"},{"Typeface name":"Wingdings 2","Dingbat dec":"170","Dingbat hex":"AA","Unicode dec":"128918","Unicode hex":"1F796"},{"Typeface name":"Wingdings 2","Dingbat dec":"171","Dingbat hex":"AB","Unicode dec":"128919","Unicode hex":"1F797"},{"Typeface name":"Wingdings 2","Dingbat dec":"172","Dingbat hex":"AC","Unicode dec":"128920","Unicode hex":"1F798"},{"Typeface name":"Wingdings 2","Dingbat dec":"173","Dingbat hex":"AD","Unicode dec":"11049","Unicode hex":"2B29"},{"Typeface name":"Wingdings 2","Dingbat dec":"174","Dingbat hex":"AE","Unicode dec":"11045","Unicode hex":"2B25"},{"Typeface name":"Wingdings 2","Dingbat dec":"175","Dingbat hex":"AF","Unicode dec":"9671","Unicode hex":"25C7"},{"Typeface name":"Wingdings 2","Dingbat dec":"176","Dingbat hex":"B0","Unicode dec":"128922","Unicode hex":"1F79A"},{"Typeface name":"Wingdings 2","Dingbat dec":"177","Dingbat hex":"B1","Unicode dec":"9672","Unicode hex":"25C8"},{"Typeface name":"Wingdings 2","Dingbat dec":"178","Dingbat hex":"B2","Unicode dec":"128923","Unicode hex":"1F79B"},{"Typeface name":"Wingdings 2","Dingbat dec":"179","Dingbat hex":"B3","Unicode dec":"128924","Unicode hex":"1F79C"},{"Typeface name":"Wingdings 2","Dingbat dec":"180","Dingbat hex":"B4","Unicode dec":"128925","Unicode hex":"1F79D"},{"Typeface name":"Wingdings 2","Dingbat dec":"181","Dingbat hex":"B5","Unicode dec":"128926","Unicode hex":"1F79E"},{"Typeface name":"Wingdings 2","Dingbat dec":"182","Dingbat hex":"B6","Unicode dec":"11050","Unicode hex":"2B2A"},{"Typeface name":"Wingdings 2","Dingbat dec":"183","Dingbat hex":"B7","Unicode dec":"11047","Unicode hex":"2B27"},{"Typeface name":"Wingdings 2","Dingbat dec":"184","Dingbat hex":"B8","Unicode dec":"9674","Unicode hex":"25CA"},{"Typeface name":"Wingdings 2","Dingbat dec":"185","Dingbat hex":"B9","Unicode dec":"128928","Unicode hex":"1F7A0"},{"Typeface name":"Wingdings 2","Dingbat dec":"186","Dingbat hex":"BA","Unicode dec":"9686","Unicode hex":"25D6"},{"Typeface name":"Wingdings 2","Dingbat dec":"187","Dingbat hex":"BB","Unicode dec":"9687","Unicode hex":"25D7"},{"Typeface name":"Wingdings 2","Dingbat dec":"188","Dingbat hex":"BC","Unicode dec":"11210","Unicode hex":"2BCA"},{"Typeface name":"Wingdings 2","Dingbat dec":"189","Dingbat hex":"BD","Unicode dec":"11211","Unicode hex":"2BCB"},{"Typeface name":"Wingdings 2","Dingbat dec":"190","Dingbat hex":"BE","Unicode dec":"11200","Unicode hex":"2BC0"},{"Typeface name":"Wingdings 2","Dingbat dec":"191","Dingbat hex":"BF","Unicode dec":"11201","Unicode hex":"2BC1"},{"Typeface name":"Wingdings 2","Dingbat dec":"192","Dingbat hex":"C0","Unicode dec":"11039","Unicode hex":"2B1F"},{"Typeface name":"Wingdings 2","Dingbat dec":"193","Dingbat hex":"C1","Unicode dec":"11202","Unicode hex":"2BC2"},{"Typeface name":"Wingdings 2","Dingbat dec":"194","Dingbat hex":"C2","Unicode dec":"11043","Unicode hex":"2B23"},{"Typeface name":"Wingdings 2","Dingbat dec":"195","Dingbat hex":"C3","Unicode dec":"11042","Unicode hex":"2B22"},{"Typeface name":"Wingdings 2","Dingbat dec":"196","Dingbat hex":"C4","Unicode dec":"11203","Unicode hex":"2BC3"},{"Typeface name":"Wingdings 2","Dingbat dec":"197","Dingbat hex":"C5","Unicode dec":"11204","Unicode hex":"2BC4"},{"Typeface name":"Wingdings 2","Dingbat dec":"198","Dingbat hex":"C6","Unicode dec":"128929","Unicode hex":"1F7A1"},{"Typeface name":"Wingdings 2","Dingbat dec":"199","Dingbat hex":"C7","Unicode dec":"128930","Unicode hex":"1F7A2"},{"Typeface name":"Wingdings 2","Dingbat dec":"200","Dingbat hex":"C8","Unicode dec":"128931","Unicode hex":"1F7A3"},{"Typeface name":"Wingdings 2","Dingbat dec":"201","Dingbat hex":"C9","Unicode dec":"128932","Unicode hex":"1F7A4"},{"Typeface name":"Wingdings 2","Dingbat dec":"202","Dingbat hex":"CA","Unicode dec":"128933","Unicode hex":"1F7A5"},{"Typeface name":"Wingdings 2","Dingbat dec":"203","Dingbat hex":"CB","Unicode dec":"128934","Unicode hex":"1F7A6"},{"Typeface name":"Wingdings 2","Dingbat dec":"204","Dingbat hex":"CC","Unicode dec":"128935","Unicode hex":"1F7A7"},{"Typeface name":"Wingdings 2","Dingbat dec":"205","Dingbat hex":"CD","Unicode dec":"128936","Unicode hex":"1F7A8"},{"Typeface name":"Wingdings 2","Dingbat dec":"206","Dingbat hex":"CE","Unicode dec":"128937","Unicode hex":"1F7A9"},{"Typeface name":"Wingdings 2","Dingbat dec":"207","Dingbat hex":"CF","Unicode dec":"128938","Unicode hex":"1F7AA"},{"Typeface name":"Wingdings 2","Dingbat dec":"208","Dingbat hex":"D0","Unicode dec":"128939","Unicode hex":"1F7AB"},{"Typeface name":"Wingdings 2","Dingbat dec":"209","Dingbat hex":"D1","Unicode dec":"128940","Unicode hex":"1F7AC"},{"Typeface name":"Wingdings 2","Dingbat dec":"210","Dingbat hex":"D2","Unicode dec":"128941","Unicode hex":"1F7AD"},{"Typeface name":"Wingdings 2","Dingbat dec":"211","Dingbat hex":"D3","Unicode dec":"128942","Unicode hex":"1F7AE"},{"Typeface name":"Wingdings 2","Dingbat dec":"212","Dingbat hex":"D4","Unicode dec":"128943","Unicode hex":"1F7AF"},{"Typeface name":"Wingdings 2","Dingbat dec":"213","Dingbat hex":"D5","Unicode dec":"128944","Unicode hex":"1F7B0"},{"Typeface name":"Wingdings 2","Dingbat dec":"214","Dingbat hex":"D6","Unicode dec":"128945","Unicode hex":"1F7B1"},{"Typeface name":"Wingdings 2","Dingbat dec":"215","Dingbat hex":"D7","Unicode dec":"128946","Unicode hex":"1F7B2"},{"Typeface name":"Wingdings 2","Dingbat dec":"216","Dingbat hex":"D8","Unicode dec":"128947","Unicode hex":"1F7B3"},{"Typeface name":"Wingdings 2","Dingbat dec":"217","Dingbat hex":"D9","Unicode dec":"128948","Unicode hex":"1F7B4"},{"Typeface name":"Wingdings 2","Dingbat dec":"218","Dingbat hex":"DA","Unicode dec":"128949","Unicode hex":"1F7B5"},{"Typeface name":"Wingdings 2","Dingbat dec":"219","Dingbat hex":"DB","Unicode dec":"128950","Unicode hex":"1F7B6"},{"Typeface name":"Wingdings 2","Dingbat dec":"220","Dingbat hex":"DC","Unicode dec":"128951","Unicode hex":"1F7B7"},{"Typeface name":"Wingdings 2","Dingbat dec":"221","Dingbat hex":"DD","Unicode dec":"128952","Unicode hex":"1F7B8"},{"Typeface name":"Wingdings 2","Dingbat dec":"222","Dingbat hex":"DE","Unicode dec":"128953","Unicode hex":"1F7B9"},{"Typeface name":"Wingdings 2","Dingbat dec":"223","Dingbat hex":"DF","Unicode dec":"128954","Unicode hex":"1F7BA"},{"Typeface name":"Wingdings 2","Dingbat dec":"224","Dingbat hex":"E0","Unicode dec":"128955","Unicode hex":"1F7BB"},{"Typeface name":"Wingdings 2","Dingbat dec":"225","Dingbat hex":"E1","Unicode dec":"128956","Unicode hex":"1F7BC"},{"Typeface name":"Wingdings 2","Dingbat dec":"226","Dingbat hex":"E2","Unicode dec":"128957","Unicode hex":"1F7BD"},{"Typeface name":"Wingdings 2","Dingbat dec":"227","Dingbat hex":"E3","Unicode dec":"128958","Unicode hex":"1F7BE"},{"Typeface name":"Wingdings 2","Dingbat dec":"228","Dingbat hex":"E4","Unicode dec":"128959","Unicode hex":"1F7BF"},{"Typeface name":"Wingdings 2","Dingbat dec":"229","Dingbat hex":"E5","Unicode dec":"128960","Unicode hex":"1F7C0"},{"Typeface name":"Wingdings 2","Dingbat dec":"230","Dingbat hex":"E6","Unicode dec":"128962","Unicode hex":"1F7C2"},{"Typeface name":"Wingdings 2","Dingbat dec":"231","Dingbat hex":"E7","Unicode dec":"128964","Unicode hex":"1F7C4"},{"Typeface name":"Wingdings 2","Dingbat dec":"232","Dingbat hex":"E8","Unicode dec":"128966","Unicode hex":"1F7C6"},{"Typeface name":"Wingdings 2","Dingbat dec":"233","Dingbat hex":"E9","Unicode dec":"128969","Unicode hex":"1F7C9"},{"Typeface name":"Wingdings 2","Dingbat dec":"234","Dingbat hex":"EA","Unicode dec":"128970","Unicode hex":"1F7CA"},{"Typeface name":"Wingdings 2","Dingbat dec":"235","Dingbat hex":"EB","Unicode dec":"10038","Unicode hex":"2736"},{"Typeface name":"Wingdings 2","Dingbat dec":"236","Dingbat hex":"EC","Unicode dec":"128972","Unicode hex":"1F7CC"},{"Typeface name":"Wingdings 2","Dingbat dec":"237","Dingbat hex":"ED","Unicode dec":"128974","Unicode hex":"1F7CE"},{"Typeface name":"Wingdings 2","Dingbat dec":"238","Dingbat hex":"EE","Unicode dec":"128976","Unicode hex":"1F7D0"},{"Typeface name":"Wingdings 2","Dingbat dec":"239","Dingbat hex":"EF","Unicode dec":"128978","Unicode hex":"1F7D2"},{"Typeface name":"Wingdings 2","Dingbat dec":"240","Dingbat hex":"F0","Unicode dec":"10041","Unicode hex":"2739"},{"Typeface name":"Wingdings 2","Dingbat dec":"241","Dingbat hex":"F1","Unicode dec":"128963","Unicode hex":"1F7C3"},{"Typeface name":"Wingdings 2","Dingbat dec":"242","Dingbat hex":"F2","Unicode dec":"128967","Unicode hex":"1F7C7"},{"Typeface name":"Wingdings 2","Dingbat dec":"243","Dingbat hex":"F3","Unicode dec":"10031","Unicode hex":"272F"},{"Typeface name":"Wingdings 2","Dingbat dec":"244","Dingbat hex":"F4","Unicode dec":"128973","Unicode hex":"1F7CD"},{"Typeface name":"Wingdings 2","Dingbat dec":"245","Dingbat hex":"F5","Unicode dec":"128980","Unicode hex":"1F7D4"},{"Typeface name":"Wingdings 2","Dingbat dec":"246","Dingbat hex":"F6","Unicode dec":"11212","Unicode hex":"2BCC"},{"Typeface name":"Wingdings 2","Dingbat dec":"247","Dingbat hex":"F7","Unicode dec":"11213","Unicode hex":"2BCD"},{"Typeface name":"Wingdings 2","Dingbat dec":"248","Dingbat hex":"F8","Unicode dec":"8251","Unicode hex":"203B"},{"Typeface name":"Wingdings 2","Dingbat dec":"249","Dingbat hex":"F9","Unicode dec":"8258","Unicode hex":"2042"},{"Typeface name":"Wingdings 3","Dingbat dec":"32","Dingbat hex":"20","Unicode dec":"32","Unicode hex":"20"},{"Typeface name":"Wingdings 3","Dingbat dec":"33","Dingbat hex":"21","Unicode dec":"11104","Unicode hex":"2B60"},{"Typeface name":"Wingdings 3","Dingbat dec":"34","Dingbat hex":"22","Unicode dec":"11106","Unicode hex":"2B62"},{"Typeface name":"Wingdings 3","Dingbat dec":"35","Dingbat hex":"23","Unicode dec":"11105","Unicode hex":"2B61"},{"Typeface name":"Wingdings 3","Dingbat dec":"36","Dingbat hex":"24","Unicode dec":"11107","Unicode hex":"2B63"},{"Typeface name":"Wingdings 3","Dingbat dec":"37","Dingbat hex":"25","Unicode dec":"11110","Unicode hex":"2B66"},{"Typeface name":"Wingdings 3","Dingbat dec":"38","Dingbat hex":"26","Unicode dec":"11111","Unicode hex":"2B67"},{"Typeface name":"Wingdings 3","Dingbat dec":"39","Dingbat hex":"27","Unicode dec":"11113","Unicode hex":"2B69"},{"Typeface name":"Wingdings 3","Dingbat dec":"40","Dingbat hex":"28","Unicode dec":"11112","Unicode hex":"2B68"},{"Typeface name":"Wingdings 3","Dingbat dec":"41","Dingbat hex":"29","Unicode dec":"11120","Unicode hex":"2B70"},{"Typeface name":"Wingdings 3","Dingbat dec":"42","Dingbat hex":"2A","Unicode dec":"11122","Unicode hex":"2B72"},{"Typeface name":"Wingdings 3","Dingbat dec":"43","Dingbat hex":"2B","Unicode dec":"11121","Unicode hex":"2B71"},{"Typeface name":"Wingdings 3","Dingbat dec":"44","Dingbat hex":"2C","Unicode dec":"11123","Unicode hex":"2B73"},{"Typeface name":"Wingdings 3","Dingbat dec":"45","Dingbat hex":"2D","Unicode dec":"11126","Unicode hex":"2B76"},{"Typeface name":"Wingdings 3","Dingbat dec":"46","Dingbat hex":"2E","Unicode dec":"11128","Unicode hex":"2B78"},{"Typeface name":"Wingdings 3","Dingbat dec":"47","Dingbat hex":"2F","Unicode dec":"11131","Unicode hex":"2B7B"},{"Typeface name":"Wingdings 3","Dingbat dec":"48","Dingbat hex":"30","Unicode dec":"11133","Unicode hex":"2B7D"},{"Typeface name":"Wingdings 3","Dingbat dec":"49","Dingbat hex":"31","Unicode dec":"11108","Unicode hex":"2B64"},{"Typeface name":"Wingdings 3","Dingbat dec":"50","Dingbat hex":"32","Unicode dec":"11109","Unicode hex":"2B65"},{"Typeface name":"Wingdings 3","Dingbat dec":"51","Dingbat hex":"33","Unicode dec":"11114","Unicode hex":"2B6A"},{"Typeface name":"Wingdings 3","Dingbat dec":"52","Dingbat hex":"34","Unicode dec":"11116","Unicode hex":"2B6C"},{"Typeface name":"Wingdings 3","Dingbat dec":"53","Dingbat hex":"35","Unicode dec":"11115","Unicode hex":"2B6B"},{"Typeface name":"Wingdings 3","Dingbat dec":"54","Dingbat hex":"36","Unicode dec":"11117","Unicode hex":"2B6D"},{"Typeface name":"Wingdings 3","Dingbat dec":"55","Dingbat hex":"37","Unicode dec":"11085","Unicode hex":"2B4D"},{"Typeface name":"Wingdings 3","Dingbat dec":"56","Dingbat hex":"38","Unicode dec":"11168","Unicode hex":"2BA0"},{"Typeface name":"Wingdings 3","Dingbat dec":"57","Dingbat hex":"39","Unicode dec":"11169","Unicode hex":"2BA1"},{"Typeface name":"Wingdings 3","Dingbat dec":"58","Dingbat hex":"3A","Unicode dec":"11170","Unicode hex":"2BA2"},{"Typeface name":"Wingdings 3","Dingbat dec":"59","Dingbat hex":"3B","Unicode dec":"11171","Unicode hex":"2BA3"},{"Typeface name":"Wingdings 3","Dingbat dec":"60","Dingbat hex":"3C","Unicode dec":"11172","Unicode hex":"2BA4"},{"Typeface name":"Wingdings 3","Dingbat dec":"61","Dingbat hex":"3D","Unicode dec":"11173","Unicode hex":"2BA5"},{"Typeface name":"Wingdings 3","Dingbat dec":"62","Dingbat hex":"3E","Unicode dec":"11174","Unicode hex":"2BA6"},{"Typeface name":"Wingdings 3","Dingbat dec":"63","Dingbat hex":"3F","Unicode dec":"11175","Unicode hex":"2BA7"},{"Typeface name":"Wingdings 3","Dingbat dec":"64","Dingbat hex":"40","Unicode dec":"11152","Unicode hex":"2B90"},{"Typeface name":"Wingdings 3","Dingbat dec":"65","Dingbat hex":"41","Unicode dec":"11153","Unicode hex":"2B91"},{"Typeface name":"Wingdings 3","Dingbat dec":"66","Dingbat hex":"42","Unicode dec":"11154","Unicode hex":"2B92"},{"Typeface name":"Wingdings 3","Dingbat dec":"67","Dingbat hex":"43","Unicode dec":"11155","Unicode hex":"2B93"},{"Typeface name":"Wingdings 3","Dingbat dec":"68","Dingbat hex":"44","Unicode dec":"11136","Unicode hex":"2B80"},{"Typeface name":"Wingdings 3","Dingbat dec":"69","Dingbat hex":"45","Unicode dec":"11139","Unicode hex":"2B83"},{"Typeface name":"Wingdings 3","Dingbat dec":"70","Dingbat hex":"46","Unicode dec":"11134","Unicode hex":"2B7E"},{"Typeface name":"Wingdings 3","Dingbat dec":"71","Dingbat hex":"47","Unicode dec":"11135","Unicode hex":"2B7F"},{"Typeface name":"Wingdings 3","Dingbat dec":"72","Dingbat hex":"48","Unicode dec":"11140","Unicode hex":"2B84"},{"Typeface name":"Wingdings 3","Dingbat dec":"73","Dingbat hex":"49","Unicode dec":"11142","Unicode hex":"2B86"},{"Typeface name":"Wingdings 3","Dingbat dec":"74","Dingbat hex":"4A","Unicode dec":"11141","Unicode hex":"2B85"},{"Typeface name":"Wingdings 3","Dingbat dec":"75","Dingbat hex":"4B","Unicode dec":"11143","Unicode hex":"2B87"},{"Typeface name":"Wingdings 3","Dingbat dec":"76","Dingbat hex":"4C","Unicode dec":"11151","Unicode hex":"2B8F"},{"Typeface name":"Wingdings 3","Dingbat dec":"77","Dingbat hex":"4D","Unicode dec":"11149","Unicode hex":"2B8D"},{"Typeface name":"Wingdings 3","Dingbat dec":"78","Dingbat hex":"4E","Unicode dec":"11150","Unicode hex":"2B8E"},{"Typeface name":"Wingdings 3","Dingbat dec":"79","Dingbat hex":"4F","Unicode dec":"11148","Unicode hex":"2B8C"},{"Typeface name":"Wingdings 3","Dingbat dec":"80","Dingbat hex":"50","Unicode dec":"11118","Unicode hex":"2B6E"},{"Typeface name":"Wingdings 3","Dingbat dec":"81","Dingbat hex":"51","Unicode dec":"11119","Unicode hex":"2B6F"},{"Typeface name":"Wingdings 3","Dingbat dec":"82","Dingbat hex":"52","Unicode dec":"9099","Unicode hex":"238B"},{"Typeface name":"Wingdings 3","Dingbat dec":"83","Dingbat hex":"53","Unicode dec":"8996","Unicode hex":"2324"},{"Typeface name":"Wingdings 3","Dingbat dec":"84","Dingbat hex":"54","Unicode dec":"8963","Unicode hex":"2303"},{"Typeface name":"Wingdings 3","Dingbat dec":"85","Dingbat hex":"55","Unicode dec":"8997","Unicode hex":"2325"},{"Typeface name":"Wingdings 3","Dingbat dec":"86","Dingbat hex":"56","Unicode dec":"9251","Unicode hex":"2423"},{"Typeface name":"Wingdings 3","Dingbat dec":"87","Dingbat hex":"57","Unicode dec":"9085","Unicode hex":"237D"},{"Typeface name":"Wingdings 3","Dingbat dec":"88","Dingbat hex":"58","Unicode dec":"8682","Unicode hex":"21EA"},{"Typeface name":"Wingdings 3","Dingbat dec":"89","Dingbat hex":"59","Unicode dec":"11192","Unicode hex":"2BB8"},{"Typeface name":"Wingdings 3","Dingbat dec":"90","Dingbat hex":"5A","Unicode dec":"129184","Unicode hex":"1F8A0"},{"Typeface name":"Wingdings 3","Dingbat dec":"91","Dingbat hex":"5B","Unicode dec":"129185","Unicode hex":"1F8A1"},{"Typeface name":"Wingdings 3","Dingbat dec":"92","Dingbat hex":"5C","Unicode dec":"129186","Unicode hex":"1F8A2"},{"Typeface name":"Wingdings 3","Dingbat dec":"93","Dingbat hex":"5D","Unicode dec":"129187","Unicode hex":"1F8A3"},{"Typeface name":"Wingdings 3","Dingbat dec":"94","Dingbat hex":"5E","Unicode dec":"129188","Unicode hex":"1F8A4"},{"Typeface name":"Wingdings 3","Dingbat dec":"95","Dingbat hex":"5F","Unicode dec":"129189","Unicode hex":"1F8A5"},{"Typeface name":"Wingdings 3","Dingbat dec":"96","Dingbat hex":"60","Unicode dec":"129190","Unicode hex":"1F8A6"},{"Typeface name":"Wingdings 3","Dingbat dec":"97","Dingbat hex":"61","Unicode dec":"129191","Unicode hex":"1F8A7"},{"Typeface name":"Wingdings 3","Dingbat dec":"98","Dingbat hex":"62","Unicode dec":"129192","Unicode hex":"1F8A8"},{"Typeface name":"Wingdings 3","Dingbat dec":"99","Dingbat hex":"63","Unicode dec":"129193","Unicode hex":"1F8A9"},{"Typeface name":"Wingdings 3","Dingbat dec":"100","Dingbat hex":"64","Unicode dec":"129194","Unicode hex":"1F8AA"},{"Typeface name":"Wingdings 3","Dingbat dec":"101","Dingbat hex":"65","Unicode dec":"129195","Unicode hex":"1F8AB"},{"Typeface name":"Wingdings 3","Dingbat dec":"102","Dingbat hex":"66","Unicode dec":"129104","Unicode hex":"1F850"},{"Typeface name":"Wingdings 3","Dingbat dec":"103","Dingbat hex":"67","Unicode dec":"129106","Unicode hex":"1F852"},{"Typeface name":"Wingdings 3","Dingbat dec":"104","Dingbat hex":"68","Unicode dec":"129105","Unicode hex":"1F851"},{"Typeface name":"Wingdings 3","Dingbat dec":"105","Dingbat hex":"69","Unicode dec":"129107","Unicode hex":"1F853"},{"Typeface name":"Wingdings 3","Dingbat dec":"106","Dingbat hex":"6A","Unicode dec":"129108","Unicode hex":"1F854"},{"Typeface name":"Wingdings 3","Dingbat dec":"107","Dingbat hex":"6B","Unicode dec":"129109","Unicode hex":"1F855"},{"Typeface name":"Wingdings 3","Dingbat dec":"108","Dingbat hex":"6C","Unicode dec":"129111","Unicode hex":"1F857"},{"Typeface name":"Wingdings 3","Dingbat dec":"109","Dingbat hex":"6D","Unicode dec":"129110","Unicode hex":"1F856"},{"Typeface name":"Wingdings 3","Dingbat dec":"110","Dingbat hex":"6E","Unicode dec":"129112","Unicode hex":"1F858"},{"Typeface name":"Wingdings 3","Dingbat dec":"111","Dingbat hex":"6F","Unicode dec":"129113","Unicode hex":"1F859"},{"Typeface name":"Wingdings 3","Dingbat dec":"112","Dingbat hex":"70","Unicode dec":"9650","Unicode hex":"25B2"},{"Typeface name":"Wingdings 3","Dingbat dec":"113","Dingbat hex":"71","Unicode dec":"9660","Unicode hex":"25BC"},{"Typeface name":"Wingdings 3","Dingbat dec":"114","Dingbat hex":"72","Unicode dec":"9651","Unicode hex":"25B3"},{"Typeface name":"Wingdings 3","Dingbat dec":"115","Dingbat hex":"73","Unicode dec":"9661","Unicode hex":"25BD"},{"Typeface name":"Wingdings 3","Dingbat dec":"116","Dingbat hex":"74","Unicode dec":"9664","Unicode hex":"25C0"},{"Typeface name":"Wingdings 3","Dingbat dec":"117","Dingbat hex":"75","Unicode dec":"9654","Unicode hex":"25B6"},{"Typeface name":"Wingdings 3","Dingbat dec":"118","Dingbat hex":"76","Unicode dec":"9665","Unicode hex":"25C1"},{"Typeface name":"Wingdings 3","Dingbat dec":"119","Dingbat hex":"77","Unicode dec":"9655","Unicode hex":"25B7"},{"Typeface name":"Wingdings 3","Dingbat dec":"120","Dingbat hex":"78","Unicode dec":"9699","Unicode hex":"25E3"},{"Typeface name":"Wingdings 3","Dingbat dec":"121","Dingbat hex":"79","Unicode dec":"9698","Unicode hex":"25E2"},{"Typeface name":"Wingdings 3","Dingbat dec":"122","Dingbat hex":"7A","Unicode dec":"9700","Unicode hex":"25E4"},{"Typeface name":"Wingdings 3","Dingbat dec":"123","Dingbat hex":"7B","Unicode dec":"9701","Unicode hex":"25E5"},{"Typeface name":"Wingdings 3","Dingbat dec":"124","Dingbat hex":"7C","Unicode dec":"128896","Unicode hex":"1F780"},{"Typeface name":"Wingdings 3","Dingbat dec":"125","Dingbat hex":"7D","Unicode dec":"128898","Unicode hex":"1F782"},{"Typeface name":"Wingdings 3","Dingbat dec":"126","Dingbat hex":"7E","Unicode dec":"128897","Unicode hex":"1F781"},{"Typeface name":"Wingdings 3","Dingbat dec":"128","Dingbat hex":"80","Unicode dec":"128899","Unicode hex":"1F783"},{"Typeface name":"Wingdings 3","Dingbat dec":"129","Dingbat hex":"81","Unicode dec":"11205","Unicode hex":"2BC5"},{"Typeface name":"Wingdings 3","Dingbat dec":"130","Dingbat hex":"82","Unicode dec":"11206","Unicode hex":"2BC6"},{"Typeface name":"Wingdings 3","Dingbat dec":"131","Dingbat hex":"83","Unicode dec":"11207","Unicode hex":"2BC7"},{"Typeface name":"Wingdings 3","Dingbat dec":"132","Dingbat hex":"84","Unicode dec":"11208","Unicode hex":"2BC8"},{"Typeface name":"Wingdings 3","Dingbat dec":"133","Dingbat hex":"85","Unicode dec":"11164","Unicode hex":"2B9C"},{"Typeface name":"Wingdings 3","Dingbat dec":"134","Dingbat hex":"86","Unicode dec":"11166","Unicode hex":"2B9E"},{"Typeface name":"Wingdings 3","Dingbat dec":"135","Dingbat hex":"87","Unicode dec":"11165","Unicode hex":"2B9D"},{"Typeface name":"Wingdings 3","Dingbat dec":"136","Dingbat hex":"88","Unicode dec":"11167","Unicode hex":"2B9F"},{"Typeface name":"Wingdings 3","Dingbat dec":"137","Dingbat hex":"89","Unicode dec":"129040","Unicode hex":"1F810"},{"Typeface name":"Wingdings 3","Dingbat dec":"138","Dingbat hex":"8A","Unicode dec":"129042","Unicode hex":"1F812"},{"Typeface name":"Wingdings 3","Dingbat dec":"139","Dingbat hex":"8B","Unicode dec":"129041","Unicode hex":"1F811"},{"Typeface name":"Wingdings 3","Dingbat dec":"140","Dingbat hex":"8C","Unicode dec":"129043","Unicode hex":"1F813"},{"Typeface name":"Wingdings 3","Dingbat dec":"141","Dingbat hex":"8D","Unicode dec":"129044","Unicode hex":"1F814"},{"Typeface name":"Wingdings 3","Dingbat dec":"142","Dingbat hex":"8E","Unicode dec":"129046","Unicode hex":"1F816"},{"Typeface name":"Wingdings 3","Dingbat dec":"143","Dingbat hex":"8F","Unicode dec":"129045","Unicode hex":"1F815"},{"Typeface name":"Wingdings 3","Dingbat dec":"144","Dingbat hex":"90","Unicode dec":"129047","Unicode hex":"1F817"},{"Typeface name":"Wingdings 3","Dingbat dec":"145","Dingbat hex":"91","Unicode dec":"129048","Unicode hex":"1F818"},{"Typeface name":"Wingdings 3","Dingbat dec":"146","Dingbat hex":"92","Unicode dec":"129050","Unicode hex":"1F81A"},{"Typeface name":"Wingdings 3","Dingbat dec":"147","Dingbat hex":"93","Unicode dec":"129049","Unicode hex":"1F819"},{"Typeface name":"Wingdings 3","Dingbat dec":"148","Dingbat hex":"94","Unicode dec":"129051","Unicode hex":"1F81B"},{"Typeface name":"Wingdings 3","Dingbat dec":"149","Dingbat hex":"95","Unicode dec":"129052","Unicode hex":"1F81C"},{"Typeface name":"Wingdings 3","Dingbat dec":"150","Dingbat hex":"96","Unicode dec":"129054","Unicode hex":"1F81E"},{"Typeface name":"Wingdings 3","Dingbat dec":"151","Dingbat hex":"97","Unicode dec":"129053","Unicode hex":"1F81D"},{"Typeface name":"Wingdings 3","Dingbat dec":"152","Dingbat hex":"98","Unicode dec":"129055","Unicode hex":"1F81F"},{"Typeface name":"Wingdings 3","Dingbat dec":"153","Dingbat hex":"99","Unicode dec":"129024","Unicode hex":"1F800"},{"Typeface name":"Wingdings 3","Dingbat dec":"154","Dingbat hex":"9A","Unicode dec":"129026","Unicode hex":"1F802"},{"Typeface name":"Wingdings 3","Dingbat dec":"155","Dingbat hex":"9B","Unicode dec":"129025","Unicode hex":"1F801"},{"Typeface name":"Wingdings 3","Dingbat dec":"156","Dingbat hex":"9C","Unicode dec":"129027","Unicode hex":"1F803"},{"Typeface name":"Wingdings 3","Dingbat dec":"157","Dingbat hex":"9D","Unicode dec":"129028","Unicode hex":"1F804"},{"Typeface name":"Wingdings 3","Dingbat dec":"158","Dingbat hex":"9E","Unicode dec":"129030","Unicode hex":"1F806"},{"Typeface name":"Wingdings 3","Dingbat dec":"159","Dingbat hex":"9F","Unicode dec":"129029","Unicode hex":"1F805"},{"Typeface name":"Wingdings 3","Dingbat dec":"160","Dingbat hex":"A0","Unicode dec":"129031","Unicode hex":"1F807"},{"Typeface name":"Wingdings 3","Dingbat dec":"161","Dingbat hex":"A1","Unicode dec":"129032","Unicode hex":"1F808"},{"Typeface name":"Wingdings 3","Dingbat dec":"162","Dingbat hex":"A2","Unicode dec":"129034","Unicode hex":"1F80A"},{"Typeface name":"Wingdings 3","Dingbat dec":"163","Dingbat hex":"A3","Unicode dec":"129033","Unicode hex":"1F809"},{"Typeface name":"Wingdings 3","Dingbat dec":"164","Dingbat hex":"A4","Unicode dec":"129035","Unicode hex":"1F80B"},{"Typeface name":"Wingdings 3","Dingbat dec":"165","Dingbat hex":"A5","Unicode dec":"129056","Unicode hex":"1F820"},{"Typeface name":"Wingdings 3","Dingbat dec":"166","Dingbat hex":"A6","Unicode dec":"129058","Unicode hex":"1F822"},{"Typeface name":"Wingdings 3","Dingbat dec":"167","Dingbat hex":"A7","Unicode dec":"129060","Unicode hex":"1F824"},{"Typeface name":"Wingdings 3","Dingbat dec":"168","Dingbat hex":"A8","Unicode dec":"129062","Unicode hex":"1F826"},{"Typeface name":"Wingdings 3","Dingbat dec":"169","Dingbat hex":"A9","Unicode dec":"129064","Unicode hex":"1F828"},{"Typeface name":"Wingdings 3","Dingbat dec":"170","Dingbat hex":"AA","Unicode dec":"129066","Unicode hex":"1F82A"},{"Typeface name":"Wingdings 3","Dingbat dec":"171","Dingbat hex":"AB","Unicode dec":"129068","Unicode hex":"1F82C"},{"Typeface name":"Wingdings 3","Dingbat dec":"172","Dingbat hex":"AC","Unicode dec":"129180","Unicode hex":"1F89C"},{"Typeface name":"Wingdings 3","Dingbat dec":"173","Dingbat hex":"AD","Unicode dec":"129181","Unicode hex":"1F89D"},{"Typeface name":"Wingdings 3","Dingbat dec":"174","Dingbat hex":"AE","Unicode dec":"129182","Unicode hex":"1F89E"},{"Typeface name":"Wingdings 3","Dingbat dec":"175","Dingbat hex":"AF","Unicode dec":"129183","Unicode hex":"1F89F"},{"Typeface name":"Wingdings 3","Dingbat dec":"176","Dingbat hex":"B0","Unicode dec":"129070","Unicode hex":"1F82E"},{"Typeface name":"Wingdings 3","Dingbat dec":"177","Dingbat hex":"B1","Unicode dec":"129072","Unicode hex":"1F830"},{"Typeface name":"Wingdings 3","Dingbat dec":"178","Dingbat hex":"B2","Unicode dec":"129074","Unicode hex":"1F832"},{"Typeface name":"Wingdings 3","Dingbat dec":"179","Dingbat hex":"B3","Unicode dec":"129076","Unicode hex":"1F834"},{"Typeface name":"Wingdings 3","Dingbat dec":"180","Dingbat hex":"B4","Unicode dec":"129078","Unicode hex":"1F836"},{"Typeface name":"Wingdings 3","Dingbat dec":"181","Dingbat hex":"B5","Unicode dec":"129080","Unicode hex":"1F838"},{"Typeface name":"Wingdings 3","Dingbat dec":"182","Dingbat hex":"B6","Unicode dec":"129082","Unicode hex":"1F83A"},{"Typeface name":"Wingdings 3","Dingbat dec":"183","Dingbat hex":"B7","Unicode dec":"129081","Unicode hex":"1F839"},{"Typeface name":"Wingdings 3","Dingbat dec":"184","Dingbat hex":"B8","Unicode dec":"129083","Unicode hex":"1F83B"},{"Typeface name":"Wingdings 3","Dingbat dec":"185","Dingbat hex":"B9","Unicode dec":"129176","Unicode hex":"1F898"},{"Typeface name":"Wingdings 3","Dingbat dec":"186","Dingbat hex":"BA","Unicode dec":"129178","Unicode hex":"1F89A"},{"Typeface name":"Wingdings 3","Dingbat dec":"187","Dingbat hex":"BB","Unicode dec":"129177","Unicode hex":"1F899"},{"Typeface name":"Wingdings 3","Dingbat dec":"188","Dingbat hex":"BC","Unicode dec":"129179","Unicode hex":"1F89B"},{"Typeface name":"Wingdings 3","Dingbat dec":"189","Dingbat hex":"BD","Unicode dec":"129084","Unicode hex":"1F83C"},{"Typeface name":"Wingdings 3","Dingbat dec":"190","Dingbat hex":"BE","Unicode dec":"129086","Unicode hex":"1F83E"},{"Typeface name":"Wingdings 3","Dingbat dec":"191","Dingbat hex":"BF","Unicode dec":"129085","Unicode hex":"1F83D"},{"Typeface name":"Wingdings 3","Dingbat dec":"192","Dingbat hex":"C0","Unicode dec":"129087","Unicode hex":"1F83F"},{"Typeface name":"Wingdings 3","Dingbat dec":"193","Dingbat hex":"C1","Unicode dec":"129088","Unicode hex":"1F840"},{"Typeface name":"Wingdings 3","Dingbat dec":"194","Dingbat hex":"C2","Unicode dec":"129090","Unicode hex":"1F842"},{"Typeface name":"Wingdings 3","Dingbat dec":"195","Dingbat hex":"C3","Unicode dec":"129089","Unicode hex":"1F841"},{"Typeface name":"Wingdings 3","Dingbat dec":"196","Dingbat hex":"C4","Unicode dec":"129091","Unicode hex":"1F843"},{"Typeface name":"Wingdings 3","Dingbat dec":"197","Dingbat hex":"C5","Unicode dec":"129092","Unicode hex":"1F844"},{"Typeface name":"Wingdings 3","Dingbat dec":"198","Dingbat hex":"C6","Unicode dec":"129094","Unicode hex":"1F846"},{"Typeface name":"Wingdings 3","Dingbat dec":"199","Dingbat hex":"C7","Unicode dec":"129093","Unicode hex":"1F845"},{"Typeface name":"Wingdings 3","Dingbat dec":"200","Dingbat hex":"C8","Unicode dec":"129095","Unicode hex":"1F847"},{"Typeface name":"Wingdings 3","Dingbat dec":"201","Dingbat hex":"C9","Unicode dec":"11176","Unicode hex":"2BA8"},{"Typeface name":"Wingdings 3","Dingbat dec":"202","Dingbat hex":"CA","Unicode dec":"11177","Unicode hex":"2BA9"},{"Typeface name":"Wingdings 3","Dingbat dec":"203","Dingbat hex":"CB","Unicode dec":"11178","Unicode hex":"2BAA"},{"Typeface name":"Wingdings 3","Dingbat dec":"204","Dingbat hex":"CC","Unicode dec":"11179","Unicode hex":"2BAB"},{"Typeface name":"Wingdings 3","Dingbat dec":"205","Dingbat hex":"CD","Unicode dec":"11180","Unicode hex":"2BAC"},{"Typeface name":"Wingdings 3","Dingbat dec":"206","Dingbat hex":"CE","Unicode dec":"11181","Unicode hex":"2BAD"},{"Typeface name":"Wingdings 3","Dingbat dec":"207","Dingbat hex":"CF","Unicode dec":"11182","Unicode hex":"2BAE"},{"Typeface name":"Wingdings 3","Dingbat dec":"208","Dingbat hex":"D0","Unicode dec":"11183","Unicode hex":"2BAF"},{"Typeface name":"Wingdings 3","Dingbat dec":"209","Dingbat hex":"D1","Unicode dec":"129120","Unicode hex":"1F860"},{"Typeface name":"Wingdings 3","Dingbat dec":"210","Dingbat hex":"D2","Unicode dec":"129122","Unicode hex":"1F862"},{"Typeface name":"Wingdings 3","Dingbat dec":"211","Dingbat hex":"D3","Unicode dec":"129121","Unicode hex":"1F861"},{"Typeface name":"Wingdings 3","Dingbat dec":"212","Dingbat hex":"D4","Unicode dec":"129123","Unicode hex":"1F863"},{"Typeface name":"Wingdings 3","Dingbat dec":"213","Dingbat hex":"D5","Unicode dec":"129124","Unicode hex":"1F864"},{"Typeface name":"Wingdings 3","Dingbat dec":"214","Dingbat hex":"D6","Unicode dec":"129125","Unicode hex":"1F865"},{"Typeface name":"Wingdings 3","Dingbat dec":"215","Dingbat hex":"D7","Unicode dec":"129127","Unicode hex":"1F867"},{"Typeface name":"Wingdings 3","Dingbat dec":"216","Dingbat hex":"D8","Unicode dec":"129126","Unicode hex":"1F866"},{"Typeface name":"Wingdings 3","Dingbat dec":"217","Dingbat hex":"D9","Unicode dec":"129136","Unicode hex":"1F870"},{"Typeface name":"Wingdings 3","Dingbat dec":"218","Dingbat hex":"DA","Unicode dec":"129138","Unicode hex":"1F872"},{"Typeface name":"Wingdings 3","Dingbat dec":"219","Dingbat hex":"DB","Unicode dec":"129137","Unicode hex":"1F871"},{"Typeface name":"Wingdings 3","Dingbat dec":"220","Dingbat hex":"DC","Unicode dec":"129139","Unicode hex":"1F873"},{"Typeface name":"Wingdings 3","Dingbat dec":"221","Dingbat hex":"DD","Unicode dec":"129140","Unicode hex":"1F874"},{"Typeface name":"Wingdings 3","Dingbat dec":"222","Dingbat hex":"DE","Unicode dec":"129141","Unicode hex":"1F875"},{"Typeface name":"Wingdings 3","Dingbat dec":"223","Dingbat hex":"DF","Unicode dec":"129143","Unicode hex":"1F877"},{"Typeface name":"Wingdings 3","Dingbat dec":"224","Dingbat hex":"E0","Unicode dec":"129142","Unicode hex":"1F876"},{"Typeface name":"Wingdings 3","Dingbat dec":"225","Dingbat hex":"E1","Unicode dec":"129152","Unicode hex":"1F880"},{"Typeface name":"Wingdings 3","Dingbat dec":"226","Dingbat hex":"E2","Unicode dec":"129154","Unicode hex":"1F882"},{"Typeface name":"Wingdings 3","Dingbat dec":"227","Dingbat hex":"E3","Unicode dec":"129153","Unicode hex":"1F881"},{"Typeface name":"Wingdings 3","Dingbat dec":"228","Dingbat hex":"E4","Unicode dec":"129155","Unicode hex":"1F883"},{"Typeface name":"Wingdings 3","Dingbat dec":"229","Dingbat hex":"E5","Unicode dec":"129156","Unicode hex":"1F884"},{"Typeface name":"Wingdings 3","Dingbat dec":"230","Dingbat hex":"E6","Unicode dec":"129157","Unicode hex":"1F885"},{"Typeface name":"Wingdings 3","Dingbat dec":"231","Dingbat hex":"E7","Unicode dec":"129159","Unicode hex":"1F887"},{"Typeface name":"Wingdings 3","Dingbat dec":"232","Dingbat hex":"E8","Unicode dec":"129158","Unicode hex":"1F886"},{"Typeface name":"Wingdings 3","Dingbat dec":"233","Dingbat hex":"E9","Unicode dec":"129168","Unicode hex":"1F890"},{"Typeface name":"Wingdings 3","Dingbat dec":"234","Dingbat hex":"EA","Unicode dec":"129170","Unicode hex":"1F892"},{"Typeface name":"Wingdings 3","Dingbat dec":"235","Dingbat hex":"EB","Unicode dec":"129169","Unicode hex":"1F891"},{"Typeface name":"Wingdings 3","Dingbat dec":"236","Dingbat hex":"EC","Unicode dec":"129171","Unicode hex":"1F893"},{"Typeface name":"Wingdings 3","Dingbat dec":"237","Dingbat hex":"ED","Unicode dec":"129172","Unicode hex":"1F894"},{"Typeface name":"Wingdings 3","Dingbat dec":"238","Dingbat hex":"EE","Unicode dec":"129174","Unicode hex":"1F896"},{"Typeface name":"Wingdings 3","Dingbat dec":"239","Dingbat hex":"EF","Unicode dec":"129173","Unicode hex":"1F895"},{"Typeface name":"Wingdings 3","Dingbat dec":"240","Dingbat hex":"F0","Unicode dec":"129175","Unicode hex":"1F897"}];return ed.default=i,ed}var Sv;function HS(){if(Sv)return qn;Sv=1;var i=qn&&qn.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(qn,"__esModule",{value:!0}),qn.hex=qn.dec=qn.codePoint=void 0;for(var e=i(qS()),t={},n=String.fromCodePoint?String.fromCodePoint:h,r=0,s=e.default;r<s.length;r++){var o=s[r],a=parseInt(o["Unicode dec"],10),c={codePoint:a,string:n(a)};t[o["Typeface name"].toUpperCase()+"_"+o["Dingbat dec"]]=c}function l(f,b){return t[f.toUpperCase()+"_"+b]}qn.codePoint=l;function u(f,b){return l(f,parseInt(b,10))}qn.dec=u;function d(f,b){return l(f,parseInt(b,16))}qn.hex=d;function h(f){if(f<=65535)return String.fromCharCode(f);var b=Math.floor((f-65536)/1024)+55296,g=(f-65536)%1024+56320;return String.fromCharCode(b,g)}return qn}var td={},Uv;function VS(){if(Uv)return td;Uv=1,td.uriToZipEntryName=i,td.replaceFragment=e;function i(t,n){return n.charAt(0)==="/"?n.substr(1):t+"/"+n}function e(t,n){var r=t.indexOf("#");return r!==-1&&(t=t.substring(0,r)),t+"#"+n}return td}var Iv;function GS(){if(Iv)return Qu;Iv=1,Qu.createBodyReader=o,Qu._readNumberingProperties=c;var i=HS(),e=gt,t=So(),n=fr().Result,r=fr().warning,s=VS();function o(D){return{readXmlElement:function(A){return new a(D).readXmlElement(A)},readXmlElements:function(A){return new a(D).readXmlElements(A)}}}function a(D){var A=[],T=[],E=[],I=D.relationships,N=D.contentTypes,R=D.docxFile,P=D.files,j=D.numbering,U=D.styles;function B(se){var me=se.map(S);return y(me)}function S(se){if(se.type==="element"){var me=We[se.name];if(me)return me(se);if(!Object.prototype.hasOwnProperty.call(u,se.name)){var be=r("An unrecognised element was ignored: "+se.name);return d([be])}}return h()}function J(se){return Y(se).map(function(me){return{type:"paragraphProperties",styleId:me.styleId,styleName:me.name,alignment:se.firstOrEmpty("w:jc").attributes["w:val"],numbering:c(me.styleId,se.firstOrEmpty("w:numPr"),j),indent:q(se.firstOrEmpty("w:ind"))}})}function q(se){return{start:se.attributes["w:start"]||se.attributes["w:left"],end:se.attributes["w:end"]||se.attributes["w:right"],firstLine:se.attributes["w:firstLine"],hanging:se.attributes["w:hanging"]}}function O(se){return F(se).map(function(me){var be=se.firstOrEmpty("w:sz").attributes["w:val"],_e=/^[0-9]+$/.test(be)?parseInt(be,10)/2:null;return{type:"runProperties",styleId:me.styleId,styleName:me.name,verticalAlignment:se.firstOrEmpty("w:vertAlign").attributes["w:val"],font:se.firstOrEmpty("w:rFonts").attributes["w:ascii"],fontSize:_e,isBold:H(se.first("w:b")),isUnderline:K(se.first("w:u")),isItalic:H(se.first("w:i")),isStrikethrough:H(se.first("w:strike")),isAllCaps:H(se.first("w:caps")),isSmallCaps:H(se.first("w:smallCaps"))}})}function K(se){if(se){var me=se.attributes["w:val"];return me!==void 0&&me!=="false"&&me!=="0"&&me!=="none"}else return!1}function H(se){if(se){var me=se.attributes["w:val"];return me!=="false"&&me!=="0"}else return!1}function Y(se){return $(se,"w:pStyle","Paragraph",U.findParagraphStyleById)}function F(se){return $(se,"w:rStyle","Run",U.findCharacterStyleById)}function X(se){return $(se,"w:tblStyle","Table",U.findTableStyleById)}function $(se,me,be,_e){var Ie=[],Re=se.first(me),Je=null,fn=null;if(Re&&(Je=Re.attributes["w:val"],Je)){var Ct=_e(Je);Ct?fn=Ct.name:Ie.push(xe(be,Je))}return b({styleId:Je,name:fn},Ie)}var ne={type:"unknown"};function oe(se){var me=se.attributes["w:fldCharType"];if(me==="begin")A.push(ne),T=[];else if(me==="end")A.pop();else if(me==="separate"){var be=le(T.join("")),_e=be===null?ne:{type:"hyperlink",options:be};A.pop(),A.push(_e)}return h()}function pe(){var se=e.last(A.filter(function(me){return me.type==="hyperlink"}));return se?se.options:null}function le(se){var me=/\s*HYPERLINK "(.*)"/.exec(se);if(me)return{href:me[1]};var be=/\s*HYPERLINK\s+\\l\s+"(.*)"/.exec(se);return be?{anchor:be[1]}:null}function ge(se){return T.push(se.text()),h()}function ye(se){var me=se.attributes["w:font"],be=se.attributes["w:char"],_e=i.hex(me,be);return _e==null&&/^F0..$/.test(be)&&(_e=i.hex(me,be.substring(2))),_e==null?d([r("A w:sym element with an unsupported character was ignored: char "+be+" in font "+me)]):f(new t.Text(_e.string))}function De(se){return function(me){var be=me.attributes["w:id"];return f(new t.NoteReference({noteType:se,noteId:be}))}}function we(se){return f(t.commentReference({commentId:se.attributes["w:id"]}))}function Se(se){return B(se.children)}var We={"w:p":function(se){var me=se.firstOrEmpty("w:pPr"),be=!!me.firstOrEmpty("w:rPr").first("w:del");if(be)return se.children.forEach(function(Ie){E.push(Ie)}),h();var _e=se.children;return E.length>0&&(_e=E.concat(_e),E=[]),g.map(J(me),B(_e),function(Ie,Re){return new t.Paragraph(Re,Ie)}).insertExtra()},"w:r":function(se){return g.map(O(se.firstOrEmpty("w:rPr")),B(se.children),function(me,be){var _e=pe();return _e!==null&&(be=[new t.Hyperlink(be,_e)]),new t.Run(be,me)})},"w:fldChar":oe,"w:instrText":ge,"w:t":function(se){return f(new t.Text(se.text()))},"w:tab":function(se){return f(new t.Tab)},"w:noBreakHyphen":function(){return f(new t.Text("‑"))},"w:softHyphen":function(se){return f(new t.Text("­"))},"w:sym":ye,"w:hyperlink":function(se){var me=se.attributes["r:id"],be=se.attributes["w:anchor"];return B(se.children).map(function(_e){function Ie(Je){var fn=se.attributes["w:tgtFrame"]||null;return new t.Hyperlink(_e,e.extend({targetFrame:fn},Je))}if(me){var Re=I.findTargetByRelationshipId(me);return be&&(Re=s.replaceFragment(Re,be)),Ie({href:Re})}else return be?Ie({anchor:be}):_e})},"w:tbl":C,"w:tr":Q,"w:tc":V,"w:footnoteReference":De("footnote"),"w:endnoteReference":De("endnote"),"w:commentReference":we,"w:br":function(se){var me=se.attributes["w:type"];return me==null||me==="textWrapping"?f(t.lineBreak):me==="page"?f(t.pageBreak):me==="column"?f(t.columnBreak):d([r("Unsupported break type: "+me)])},"w:bookmarkStart":function(se){var me=se.attributes["w:name"];return me==="_GoBack"?h():f(new t.BookmarkStart({name:me}))},"mc:AlternateContent":function(se){return Se(se.first("mc:Fallback"))},"w:sdt":function(se){return B(se.firstOrEmpty("w:sdtContent").children)},"w:ins":Se,"w:object":Se,"w:smartTag":Se,"w:drawing":Se,"w:pict":function(se){return Se(se).toExtra()},"v:roundrect":Se,"v:shape":Se,"v:textbox":Se,"w:txbxContent":Se,"wp:inline":ue,"wp:anchor":ue,"v:imagedata":ie,"v:group":Se,"v:rect":Se};return{readXmlElement:S,readXmlElements:B};function C(se){var me=ae(se.firstOrEmpty("w:tblPr"));return B(se.children).flatMap(ee).flatMap(function(be){return me.map(function(_e){return t.Table(be,_e)})})}function ae(se){return X(se).map(function(me){return{styleId:me.styleId,styleName:me.name}})}function Q(se){var me=se.firstOrEmpty("w:trPr"),be=!!me.first("w:tblHeader");return B(se.children).map(function(_e){return t.TableRow(_e,{isHeader:be})})}function V(se){return B(se.children).map(function(me){var be=se.firstOrEmpty("w:tcPr"),_e=be.firstOrEmpty("w:gridSpan").attributes["w:val"],Ie=_e?parseInt(_e,10):1,Re=t.TableCell(me,{colSpan:Ie});return Re._vMerge=z(be),Re})}function z(se){var me=se.first("w:vMerge");if(me){var be=me.attributes["w:val"];return be==="continue"||!be}else return null}function ee(se){var me=e.any(se,function(Ie){return Ie.type!==t.types.tableRow});if(me)return b(se,[r("unexpected non-row element in table, cell merging may be incorrect")]);var be=e.any(se,function(Ie){return e.any(Ie.children,function(Re){return Re.type!==t.types.tableCell})});if(be)return b(se,[r("unexpected non-cell element in table row, cell merging may be incorrect")]);var _e={};return se.forEach(function(Ie){var Re=0;Ie.children.forEach(function(Je){Je._vMerge&&_e[Re]?_e[Re].rowSpan++:(_e[Re]=Je,Je._vMerge=!1),Re+=Je.colSpan})}),se.forEach(function(Ie){Ie.children=Ie.children.filter(function(Re){return!Re._vMerge}),Ie.children.forEach(function(Re){delete Re._vMerge})}),f(se)}function ue(se){var me=se.getElementsByTagName("a:graphic").getElementsByTagName("a:graphicData").getElementsByTagName("pic:pic").getElementsByTagName("pic:blipFill").getElementsByTagName("a:blip");return y(me.map(he.bind(null,se)))}function he(se,me){var be=se.first("wp:docPr").attributes,_e=re(be.descr)?be.title:be.descr,Ie=Z(me);return Ie===null?d([r("Could not find image file for a:blip element")]):fe(Ie,_e)}function re(se){return se==null||/^\s*$/.test(se)}function Z(se){var me=se.attributes["r:embed"],be=se.attributes["r:link"];if(me)return ce(me);if(be){var _e=I.findTargetByRelationshipId(be);return{path:_e,read:P.read.bind(P,_e)}}else return null}function ie(se){var me=se.attributes["r:id"];return me?fe(ce(me),se.attributes["o:title"]):d([r("A v:imagedata element without a relationship ID was ignored")])}function ce(se){var me=s.uriToZipEntryName("word",I.findTargetByRelationshipId(se));return{path:me,read:R.read.bind(R,me)}}function fe(se,me){var be=N.findContentType(se.path),_e=t.Image({readImage:se.read,altText:me,contentType:be}),Ie=l[be]?[]:r("Image of type "+be+" is unlikely to display in web browsers");return b(_e,Ie)}function xe(se,me){return r(se+" style with ID "+me+" was referenced but not defined in the document")}}function c(D,A,T){var E=A.firstOrEmpty("w:ilvl").attributes["w:val"],I=A.firstOrEmpty("w:numId").attributes["w:val"];if(E!==void 0&&I!==void 0)return T.findLevel(I,E);if(D!=null){var N=T.findLevelByParagraphStyleId(D);if(N!=null)return N}return null}var l={"image/png":!0,"image/gif":!0,"image/jpeg":!0,"image/svg+xml":!0,"image/tiff":!0},u={"office-word:wrap":!0,"v:shadow":!0,"v:shapetype":!0,"w:annotationRef":!0,"w:bookmarkEnd":!0,"w:sectPr":!0,"w:proofErr":!0,"w:lastRenderedPageBreak":!0,"w:commentRangeStart":!0,"w:commentRangeEnd":!0,"w:del":!0,"w:footnoteRef":!0,"w:endnoteRef":!0,"w:pPr":!0,"w:rPr":!0,"w:tblPr":!0,"w:tblGrid":!0,"w:trPr":!0,"w:tcPr":!0};function d(D){return new g(null,null,D)}function h(){return new g(null)}function f(D){return new g(D)}function b(D,A){return new g(D,null,A)}function g(D,A,T){this.value=D||[],this.extra=A||[],this._result=new n({element:this.value,extra:A},T),this.messages=this._result.messages}g.prototype.toExtra=function(){return new g(null,v(this.extra,this.value),this.messages)},g.prototype.insertExtra=function(){var D=this.extra;return D&&D.length?new g(v(this.value,D),null,this.messages):this},g.prototype.map=function(D){var A=this._result.map(function(T){return D(T.element)});return new g(A.value,this.extra,A.messages)},g.prototype.flatMap=function(D){var A=this._result.flatMap(function(T){return D(T.element)._result});return new g(A.value.element,v(this.extra,A.value.extra),A.messages)},g.map=function(D,A,T){return new g(T(D.value,A.value),v(D.extra,A.extra),D.messages.concat(A.messages))};function y(D){var A=n.combine(e.pluck(D,"_result"));return new g(e.flatten(e.pluck(A.value,"element")),e.filter(e.flatten(e.pluck(A.value,"extra")),x),A.messages)}function v(D,A){return e.flatten([D,A])}function x(D){return D}return Qu}var jp={},Rv;function zS(){if(Rv)return jp;Rv=1,jp.DocumentXmlReader=t;var i=So(),e=fr().Result;function t(n){var r=n.bodyReader;function s(o){var a=o.first("w:body");if(a==null)throw new Error("Could not find the body element: are you sure this is a docx file?");var c=r.readXmlElements(a.children).map(function(l){return new i.Document(l,{notes:n.notes,comments:n.comments})});return new e(c.value,c.messages)}return{convertXmlToDocument:s}}return jp}var pc={},Fv;function $S(){if(Fv)return pc;Fv=1,pc.readRelationships=i,pc.defaultValue=new e([]),pc.Relationships=e;function i(t){var n=[];return t.children.forEach(function(r){if(r.name==="relationships:Relationship"){var s={relationshipId:r.attributes.Id,target:r.attributes.Target,type:r.attributes.Type};n.push(s)}}),new e(n)}function e(t){var n={};t.forEach(function(s){n[s.relationshipId]=s.target});var r={};return t.forEach(function(s){r[s.type]||(r[s.type]=[]),r[s.type].push(s.target)}),{findTargetByRelationshipId:function(s){return n[s]},findTargetsByType:function(s){return r[s]||[]}}}return pc}var nd={},Nv;function XS(){if(Nv)return nd;Nv=1,nd.readContentTypesFromXml=e;var i={png:"png",gif:"gif",jpeg:"jpeg",jpg:"jpeg",tif:"tiff",tiff:"tiff",bmp:"bmp"};nd.defaultContentTypes=t({},{});function e(n){var r={},s={};return n.children.forEach(function(o){if(o.name==="content-types:Default"&&(r[o.attributes.Extension]=o.attributes.ContentType),o.name==="content-types:Override"){var a=o.attributes.PartName;a.charAt(0)==="/"&&(a=a.substring(1)),s[a]=o.attributes.ContentType}}),t(s,r)}function t(n,r){return{findContentType:function(s){var o=n[s];if(o)return o;var a=s.split("."),c=a[a.length-1];if(r.hasOwnProperty(c))return r[c];var l=i[c.toLowerCase()];return l?"image/"+l:null}}}return nd}var gc={},kv;function jS(){if(kv)return gc;kv=1;var i=gt;gc.readNumberingXml=t,gc.Numbering=e,gc.defaultNumbering=new e({},{});function e(o,a,c){var l=i.flatten(i.values(a).map(function(f){return i.values(f.levels)})),u=i.indexBy(l.filter(function(f){return f.paragraphStyleId!=null}),"paragraphStyleId");function d(f,b){var g=o[f];if(g){var y=a[g.abstractNumId];if(y){if(y.numStyleLink==null)return a[g.abstractNumId].levels[b];var v=c.findNumberingStyleById(y.numStyleLink);return d(v.numId,b)}else return null}else return null}function h(f){return u[f]||null}return{findLevel:d,findLevelByParagraphStyleId:h}}function t(o,a){if(!a||!a.styles)throw new Error("styles is missing");var c=n(o),l=s(o);return new e(l,c,a.styles)}function n(o){var a={};return o.getElementsByTagName("w:abstractNum").forEach(function(c){var l=c.attributes["w:abstractNumId"];a[l]=r(c)}),a}function r(o){var a={};o.getElementsByTagName("w:lvl").forEach(function(l){var u=l.attributes["w:ilvl"],d=l.firstOrEmpty("w:numFmt").attributes["w:val"],h=l.firstOrEmpty("w:pStyle").attributes["w:val"];a[u]={isOrdered:d!=="bullet",level:u,paragraphStyleId:h}});var c=o.firstOrEmpty("w:numStyleLink").attributes["w:val"];return{levels:a,numStyleLink:c}}function s(o){var a={};return o.getElementsByTagName("w:num").forEach(function(c){var l=c.attributes["w:numId"],u=c.first("w:abstractNumId").attributes["w:val"];a[l]={abstractNumId:u}}),a}return gc}var mc={},Mv;function YS(){if(Mv)return mc;Mv=1,mc.readStylesXml=e,mc.Styles=i,mc.defaultStyles=new i({},{});function i(s,o,a,c){return{findParagraphStyleById:function(l){return s[l]},findCharacterStyleById:function(l){return o[l]},findTableStyleById:function(l){return a[l]},findNumberingStyleById:function(l){return c[l]}}}i.EMPTY=new i({},{},{},{});function e(s){var o={},a={},c={},l={},u={paragraph:o,character:a,table:c};return s.getElementsByTagName("w:style").forEach(function(d){var h=t(d);if(h.type==="numbering")l[h.styleId]=r(d);else{var f=u[h.type];f&&(f[h.styleId]=h)}}),new i(o,a,c,l)}function t(s){var o=s.attributes["w:type"],a=s.attributes["w:styleId"],c=n(s);return{type:o,styleId:a,name:c}}function n(s){var o=s.first("w:name");return o?o.attributes["w:val"]:null}function r(s){var o=s.firstOrEmpty("w:pPr").firstOrEmpty("w:numPr").firstOrEmpty("w:numId").attributes["w:val"];return{numId:o}}return mc}var No={},Pv;function JS(){if(Pv)return No;Pv=1;var i=So(),e=fr().Result;No.createFootnotesReader=t.bind(No,"footnote"),No.createEndnotesReader=t.bind(No,"endnote");function t(n,r){function s(c){return e.combine(c.getElementsByTagName("w:"+n).filter(o).map(a))}function o(c){var l=c.attributes["w:type"];return l!=="continuationSeparator"&&l!=="separator"}function a(c){var l=c.attributes["w:id"];return r.readXmlElements(c.children).map(function(u){return i.Note({noteType:n,noteId:l,body:u})})}return s}return No}var Yp={},Lv;function KS(){if(Lv)return Yp;Lv=1;var i=So(),e=fr().Result;function t(n){function r(o){return e.combine(o.getElementsByTagName("w:comment").map(s))}function s(o){var a=o.attributes["w:id"];function c(l){return(o.attributes[l]||"").trim()||null}return n.readXmlElements(o.children).map(function(l){return i.comment({commentId:a,body:l,authorName:c("w:author"),authorInitials:c("w:initials")})})}return r}return Yp.createCommentsReader=t,Yp}var Jp={},Bv;function ZS(){if(Bv)return Jp;Bv=1;var i=ts();Jp.Files=e;function e(){function t(n){return i.reject(new Error("could not open external image: '"+n+`'
cannot open linked files from a web browser`))}return{read:t}}return Jp}var Ov;function QS(){if(Ov)return Xu;Ov=1,Xu.read=g,Xu._findPartPaths=y;var i=SC,e=ts(),t=So(),n=fr().Result,r=mT(),s=WS().readXmlFromZipFile,o=GS().createBodyReader,a=zS().DocumentXmlReader,c=$S(),l=XS(),u=jS(),d=YS(),h=JS(),f=KS(),b=ZS().Files;function g(P,j){return j=j||{},e.props({contentTypes:E(P),partPaths:y(P),docxFile:P,files:new b(j.path?i.dirname(j.path):null)}).also(function(U){return{styles:N(P,U.partPaths.styles)}}).also(function(U){return{numbering:I(P,U.partPaths.numbering,U.styles)}}).also(function(U){return{footnotes:A(U.partPaths.footnotes,U,function(B,S){return S?h.createFootnotesReader(B)(S):new n([])}),endnotes:A(U.partPaths.endnotes,U,function(B,S){return S?h.createEndnotesReader(B)(S):new n([])}),comments:A(U.partPaths.comments,U,function(B,S){return S?f.createCommentsReader(B)(S):new n([])})}}).also(function(U){return{notes:U.footnotes.flatMap(function(B){return U.endnotes.map(function(S){return new t.Notes(B.concat(S))})})}}).then(function(U){return A(U.partPaths.mainDocument,U,function(B,S){return U.notes.flatMap(function(J){return U.comments.flatMap(function(q){var O=new a({bodyReader:B,notes:J,comments:q});return O.convertXmlToDocument(S)})})})})}function y(P){return R(P).then(function(j){var U=v({docxFile:P,relationships:j,relationshipType:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",basePath:"",fallbackPath:"word/document.xml"});if(!P.exists(U))throw new Error("Could not find main document part. Are you sure this is a valid .docx file?");return D({filename:T(U),readElement:c.readRelationships,defaultValue:c.defaultValue})(P).then(function(B){function S(J){return v({docxFile:P,relationships:B,relationshipType:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/"+J,basePath:r.splitPath(U).dirname,fallbackPath:"word/"+J+".xml"})}return{mainDocument:U,comments:S("comments"),endnotes:S("endnotes"),footnotes:S("footnotes"),numbering:S("numbering"),styles:S("styles")}})})}function v(P){var j=P.docxFile,U=P.relationships,B=P.relationshipType,S=P.basePath,J=P.fallbackPath,q=U.findTargetsByType(B),O=q.map(function(H){return x(r.joinPath(S,H),"/")}),K=O.filter(function(H){return j.exists(H)});return K.length===0?J:K[0]}function x(P,j){return P.substring(0,j.length)===j?P.substring(j.length):P}function D(P){return function(j){return s(j,P.filename).then(function(U){return U?P.readElement(U):P.defaultValue})}}function A(P,j,U){var B=D({filename:T(P),readElement:c.readRelationships,defaultValue:c.defaultValue});return B(j.docxFile).then(function(S){var J=new o({relationships:S,contentTypes:j.contentTypes,docxFile:j.docxFile,numbering:j.numbering,styles:j.styles,files:j.files});return s(j.docxFile,P).then(function(q){return U(J,q)})})}function T(P){var j=r.splitPath(P);return r.joinPath(j.dirname,"_rels",j.basename+".rels")}var E=D({filename:"[Content_Types].xml",readElement:l.readContentTypesFromXml,defaultValue:l.defaultContentTypes});function I(P,j,U){return D({filename:j,readElement:function(B){return u.readNumberingXml(B,{styles:U})},defaultValue:u.defaultNumbering})(P)}function N(P,j){return D({filename:j,readElement:d.readStylesXml,defaultValue:d.defaultStyles})(P)}var R=D({filename:"_rels/.rels",readElement:c.readRelationships,defaultValue:c.defaultValue});return Xu}var id={},Wv;function eU(){if(Wv)return id;Wv=1;var i=gt,e=ts(),t=_T();id.writeStyleMap=o,id.readStyleMap=u;var n="http://schemas.zwobble.org/mammoth/style-map",r="mammoth/style-map",s="/"+r;function o(d,h){return d.write(r,h),a(d).then(function(){return c(d)})}function a(d){var h="word/_rels/document.xml.rels",f="http://schemas.openxmlformats.org/package/2006/relationships",b="{"+f+"}Relationship";return d.read(h,"utf8").then(t.readString).then(function(g){var y=g.children;l(y,b,"Id",{Id:"rMammothStyleMap",Type:n,Target:s});var v={"":f};return d.write(h,t.writeString(g,v))})}function c(d){var h="[Content_Types].xml",f="http://schemas.openxmlformats.org/package/2006/content-types",b="{"+f+"}Override";return d.read(h,"utf8").then(t.readString).then(function(g){var y=g.children;l(y,b,"PartName",{PartName:s,ContentType:"text/prs.mammoth.style-map"});var v={"":f};return d.write(h,t.writeString(g,v))})}function l(d,h,f,b){var g=i.find(d,function(y){return y.name===h&&y.attributes[f]===b[f]});g?g.attributes=b:d.push(t.element(h,b))}function u(d){return d.exists(r)?d.read(r,"utf8"):e.resolve(null)}return id}var rd={},ds={},Ri={},vr={},qv;function DT(){if(qv)return vr;qv=1;var i=Uf();function e(c,l,u){return n(i.element(c,l,{fresh:!1}),u)}function t(c,l,u){var d=i.element(c,l,{fresh:!0});return n(d,u)}function n(c,l){return{type:"element",tag:c,children:l||[]}}function r(c){return{type:"text",value:c}}var s={type:"forceWrite"};vr.freshElement=t,vr.nonFreshElement=e,vr.elementWithTag=n,vr.text=r,vr.forceWrite=s;var o={br:!0,hr:!0,img:!0};function a(c){return c.children.length===0&&o[c.tag.tagName]}return vr.isVoidElement=a,vr}var Kp,Hv;function tU(){if(Hv)return Kp;Hv=1;var i=gt,e=DT();function t(g){return n(l(g))}function n(g){var y=[];return g.map(r).forEach(function(v){c(y,v)}),y}function r(g){return s[g.type](g)}var s={element:o,text:a,forceWrite:a};function o(g){return e.elementWithTag(g.tag,n(g.children))}function a(g){return g}function c(g,y){var v=g[g.length-1];y.type==="element"&&!y.tag.fresh&&v&&v.type==="element"&&y.tag.matchesElement(v.tag)?(y.tag.separator&&c(v.children,e.text(y.tag.separator)),y.children.forEach(function(x){c(v.children,x)})):g.push(y)}function l(g){return u(g,function(y){return d[y.type](y)})}function u(g,y){return i.flatten(i.map(g,y),!0)}var d={element:f,text:b,forceWrite:h};function h(g){return[g]}function f(g){var y=l(g.children);return y.length===0&&!e.isVoidElement(g)?[]:[e.elementWithTag(g.tag,y)]}function b(g){return g.value.length===0?[]:[g]}return Kp=t,Kp}var Vv;function Sf(){if(Vv)return Ri;Vv=1;var i=DT();Ri.freshElement=i.freshElement,Ri.nonFreshElement=i.nonFreshElement,Ri.elementWithTag=i.elementWithTag,Ri.text=i.text,Ri.forceWrite=i.forceWrite,Ri.simplify=tU();function e(o,a){a.forEach(function(c){t(o,c)})}function t(o,a){n[a.type](o,a)}var n={element:r,text:s,forceWrite:function(){}};function r(o,a){i.isVoidElement(a)?o.selfClosing(a.tag.tagName,a.tag.attributes):(o.open(a.tag.tagName,a.tag.attributes),e(o,a.children),o.close(a.tag.tagName))}function s(o,a){o.text(a.value)}return Ri.write=e,Ri}var Gv;function Uf(){if(Gv)return ds;Gv=1;var i=gt,e=Sf();ds.topLevelElement=t,ds.elements=n,ds.element=s;function t(a,c){return n([s(a,c,{fresh:!0})])}function n(a){return new r(a.map(function(c){return i.isString(c)?s(c):c}))}function r(a){this._elements=a}r.prototype.wrap=function(c){for(var l=c(),u=this._elements.length-1;u>=0;u--)l=this._elements[u].wrapNodes(l);return l};function s(a,c,l){return l=l||{},new o(a,c,l)}function o(a,c,l){var u={};i.isArray(a)?(a.forEach(function(d){u[d]=!0}),a=a[0]):u[a]=!0,this.tagName=a,this.tagNames=u,this.attributes=c||{},this.fresh=l.fresh,this.separator=l.separator}return o.prototype.matchesElement=function(a){return this.tagNames[a.tagName]&&i.isEqual(this.attributes||{},a.attributes||{})},o.prototype.wrap=function(c){return this.wrapNodes(c())},o.prototype.wrapNodes=function(c){return[e.elementWithTag(this,c)]},ds.empty=n([]),ds.ignore={wrap:function(){return[]}},ds}var Zp={},zv;function TT(){return zv||(zv=1,(function(i){var e=gt,t=ts(),n=Sf();i.imgElement=r;function r(s){return function(o,a){return t.when(s(o)).then(function(c){var l={};return o.altText&&(l.alt=o.altText),e.extend(l,c),[n.freshElement("img",l)]})}}i.inline=i.imgElement,i.dataUri=r(function(s){return s.readAsBase64String().then(function(o){return{src:"data:"+s.contentType+";base64,"+o}})})})(Zp)),Zp}var Qp={},eg={},$v;function nU(){if($v)return eg;$v=1;var i=gt;eg.writer=e;function e(a){return a=a||{},a.prettyPrint?n():r()}var t={div:!0,p:!0,ul:!0,li:!0};function n(){var a=0,c="  ",l=[],u=!0,d=!1,h=r();function f(T,E){t[T]&&D(),l.push(T),h.open(T,E),t[T]&&a++,u=!1}function b(T){t[T]&&(a--,D()),l.pop(),h.close(T)}function g(T){x();var E=A()?T:T.replace(`
`,`
`+c);h.text(E)}function y(T,E){D(),h.selfClosing(T,E)}function v(){return l.length===0||t[l[l.length-1]]}function x(){d||(D(),d=!0)}function D(){if(d=!1,!u&&v()&&!A()){h._append(`
`);for(var T=0;T<a;T++)h._append(c)}}function A(){return i.some(l,function(T){return T==="pre"})}return{asString:h.asString,open:f,close:b,text:g,selfClosing:y}}function r(){var a=[];function c(g,y){var v=d(y);a.push("<"+g+v+">")}function l(g){a.push("</"+g+">")}function u(g,y){var v=d(y);a.push("<"+g+v+" />")}function d(g){return i.map(g,function(y,v){return" "+v+'="'+o(y)+'"'}).join("")}function h(g){a.push(s(g))}function f(g){a.push(g)}function b(){return a.join("")}return{asString:b,open:c,close:l,text:h,selfClosing:u,_append:f}}function s(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function o(a){return a.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}return eg}var tg={},Xv;function iU(){if(Xv)return tg;Xv=1;var i=gt;function e(d){return t(d,d)}function t(d,h){return function(){return{start:d,end:h}}}function n(d){var h=d.href||"";return h?{start:"[",end:"]("+h+")",anchorPosition:"before"}:{}}function r(d){var h=d.src||"",f=d.alt||"";return h||f?{start:"!["+f+"]("+h+")"}:{}}function s(d){return function(h,f){return{start:f?`
`:"",end:f?"":`
`,list:{isOrdered:d.isOrdered,indent:f?f.indent+1:0,count:0}}}}function o(d,h,f){h=h||{indent:0,isOrdered:!1,count:0},h.count++,f.hasClosed=!1;var b=h.isOrdered?h.count+".":"-",g=c("	",h.indent)+b+" ";return{start:g,end:function(){if(!f.hasClosed)return f.hasClosed=!0,`
`}}}var a={p:t("",`

`),br:t("",`  
`),ul:s({isOrdered:!1}),ol:s({isOrdered:!0}),li:o,strong:e("__"),em:e("*"),a:n,img:r};(function(){for(var d=1;d<=6;d++)a["h"+d]=t(c("#",d)+" ",`

`)})();function c(d,h){return new Array(h+1).join(d)}function l(){var d=[],h=[],f=null,b={};function g(T,E){E=E||{};var I=a[T]||function(){return{}},N=I(E,f,b);h.push({end:N.end,list:f}),N.list&&(f=N.list);var R=N.anchorPosition==="before";R&&y(E),d.push(N.start||""),R||y(E)}function y(T){T.id&&d.push('<a id="'+T.id+'"></a>')}function v(T){var E=h.pop();f=E.list;var I=i.isFunction(E.end)?E.end():E.end;d.push(I||"")}function x(T,E){g(T,E),v()}function D(T){d.push(u(T))}function A(){return d.join("")}return{asString:A,open:g,close:v,text:D,selfClosing:x}}tg.writer=l;function u(d){return d.replace(/\\/g,"\\\\").replace(/([\`\*_\{\}\[\]\(\)\#\+\-\.\!])/g,"\\$1")}return tg}var jv;function rU(){if(jv)return Qp;jv=1;var i=nU(),e=iU();Qp.writer=t;function t(n){return n=n||{},n.outputFormat==="markdown"?e.writer():i.writer(n)}return Qp}var Yv;function sU(){if(Yv)return rd;Yv=1;var i=gt,e=ts(),t=So(),n=Uf(),r=fr(),s=TT(),o=Sf(),a=rU();rd.DocumentConverter=c;function c(y){return{convertToHtml:function(v){var x=i.indexBy(v.type===t.types.document?v.comments:[],"commentId"),D=new l(y,x);return D.convertToHtml(v)}}}function l(y,v){var x=1,D=[],A=[];y=i.extend({ignoreEmptyParagraphs:!0},y);var T=y.idPrefix===void 0?"":y.idPrefix,E=y.ignoreEmptyParagraphs,I=n.topLevelElement("p"),N=y.styleMap||[];function R(C){var ae=[],Q=j(C,ae,{}),V=[];b(Q,function(ee){ee.type==="deferred"&&V.push(ee)});var z={};return e.mapSeries(V,function(ee){return ee.value().then(function(ue){z[ee.id]=ue})}).then(function(){function ee(he){return f(he,function(re){return re.type==="deferred"?z[re.id]:re.children?[i.extend({},re,{children:ee(re.children)})]:[re]})}var ue=a.writer({prettyPrint:y.prettyPrint,outputFormat:y.outputFormat});return o.write(ue,o.simplify(ee(Q))),new r.Result(ue.asString(),ae)})}function P(C,ae,Q){return f(C,function(V){return j(V,ae,Q)})}function j(C,ae,Q){if(!Q)throw new Error("options not set");var V=We[C.type];return V?V(C,ae,Q):[]}function U(C,ae,Q){return B(C,ae).wrap(function(){var V=P(C.children,ae,Q);return E?V:[o.forceWrite].concat(V)})}function B(C,ae){var Q=O(C);return Q?Q.to:(C.styleId&&ae.push(h("paragraph",C)),I)}function S(C,ae,Q){var V=function(){return P(C.children,ae,Q)},z=[];C.isSmallCaps&&z.push(J("smallCaps")),C.isAllCaps&&z.push(J("allCaps")),C.isStrikethrough&&z.push(J("strikethrough","s")),C.isUnderline&&z.push(J("underline")),C.verticalAlignment===t.verticalAlignment.subscript&&z.push(n.element("sub",{},{fresh:!1})),C.verticalAlignment===t.verticalAlignment.superscript&&z.push(n.element("sup",{},{fresh:!1})),C.isItalic&&z.push(J("italic","em")),C.isBold&&z.push(J("bold","strong"));var ee=n.empty,ue=O(C);return ue?ee=ue.to:C.styleId&&ae.push(h("run",C)),z.push(ee),z.forEach(function(he){V=he.wrap.bind(he,V)}),V()}function J(C,ae){var Q=q({type:C});return Q||(ae?n.element(ae,{},{fresh:!1}):n.empty)}function q(C,ae){var Q=O(C);return Q?Q.to:ae}function O(C){for(var ae=0;ae<N.length;ae++)if(N[ae].from.matches(C))return N[ae]}function K(C){return function(ae,Q){return e.attempt(function(){return C(ae,Q)}).caught(function(V){return Q.push(r.error(V)),[]})}}function H(C){return F(C.noteType,C.noteId)}function Y(C){return X(C.noteType,C.noteId)}function F(C,ae){return $(C+"-"+ae)}function X(C,ae){return $(C+"-ref-"+ae)}function $(C){return T+C}var ne=n.elements([n.element("table",{},{fresh:!0})]);function oe(C,ae,Q){return q(C,ne).wrap(function(){return pe(C,ae,Q)})}function pe(C,ae,Q){var V=i.findIndex(C.children,function(he){return!he.type===t.types.tableRow||!he.isHeader});V===-1&&(V=C.children.length);var z;if(V===0)z=P(C.children,ae,i.extend({},Q,{isTableHeader:!1}));else{var ee=P(C.children.slice(0,V),ae,i.extend({},Q,{isTableHeader:!0})),ue=P(C.children.slice(V),ae,i.extend({},Q,{isTableHeader:!1}));z=[o.freshElement("thead",{},ee),o.freshElement("tbody",{},ue)]}return[o.forceWrite].concat(z)}function le(C,ae,Q){var V=P(C.children,ae,Q);return[o.freshElement("tr",{},[o.forceWrite].concat(V))]}function ge(C,ae,Q){var V=Q.isTableHeader?"th":"td",z=P(C.children,ae,Q),ee={};return C.colSpan!==1&&(ee.colspan=C.colSpan.toString()),C.rowSpan!==1&&(ee.rowspan=C.rowSpan.toString()),[o.freshElement(V,ee,[o.forceWrite].concat(z))]}function ye(C,ae,Q){return q(C,n.ignore).wrap(function(){var V=v[C.commentId],z=A.length+1,ee="["+g(V)+z+"]";return A.push({label:ee,comment:V}),[o.freshElement("a",{href:"#"+F("comment",C.commentId),id:X("comment",C.commentId)},[o.text(ee)])]})}function De(C,ae,Q){var V=C.label,z=C.comment,ee=P(z.body,ae,Q).concat([o.nonFreshElement("p",{},[o.text(" "),o.freshElement("a",{href:"#"+X("comment",z.commentId)},[o.text("↑")])])]);return[o.freshElement("dt",{id:F("comment",z.commentId)},[o.text("Comment "+V)]),o.freshElement("dd",{},ee)]}function we(C,ae,Q){return Se(C).wrap(function(){return[]})}function Se(C){var ae=O(C);return ae?ae.to:C.breakType==="line"?n.topLevelElement("br"):n.empty}var We={document:function(C,ae,Q){var V=P(C.children,ae,Q),z=D.map(function(ue){return C.notes.resolve(ue)}),ee=P(z,ae,Q);return V.concat([o.freshElement("ol",{},ee),o.freshElement("dl",{},f(A,function(ue){return De(ue,ae,Q)}))])},paragraph:U,run:S,text:function(C,ae,Q){return[o.text(C.value)]},tab:function(C,ae,Q){return[o.text("	")]},hyperlink:function(C,ae,Q){var V=C.anchor?"#"+$(C.anchor):C.href,z={href:V};C.targetFrame!=null&&(z.target=C.targetFrame);var ee=P(C.children,ae,Q);return[o.nonFreshElement("a",z,ee)]},bookmarkStart:function(C,ae,Q){var V=o.freshElement("a",{id:$(C.name)},[o.forceWrite]);return[V]},noteReference:function(C,ae,Q){D.push(C);var V=o.freshElement("a",{href:"#"+H(C),id:Y(C)},[o.text("["+x+++"]")]);return[o.freshElement("sup",{},[V])]},note:function(C,ae,Q){var V=P(C.body,ae,Q),z=o.elementWithTag(n.element("p",{},{fresh:!1}),[o.text(" "),o.freshElement("a",{href:"#"+Y(C)},[o.text("↑")])]),ee=V.concat([z]);return o.freshElement("li",{id:H(C)},ee)},commentReference:ye,comment:De,image:d(K(y.convertImage||s.dataUri)),table:oe,tableRow:le,tableCell:ge,break:we};return{convertToHtml:R}}var u=1;function d(y){return function(v,x,D){return[{type:"deferred",id:u++,value:function(){return y(v,x,D)}}]}}function h(y,v){return r.warning("Unrecognised "+y+" style: '"+v.styleName+"' (Style ID: "+v.styleId+")")}function f(y,v){return i.flatten(y.map(v),!0)}function b(y,v){y.forEach(function(x){v(x),x.children&&b(x.children,v)})}var g=rd.commentAuthorLabel=function(v){return v.authorInitials||""};return rd}var ng={},Jv;function oU(){if(Jv)return ng;Jv=1;var i=So();function e(t){if(t.type==="text")return t.value;if(t.type===i.types.tab)return"	";var n=t.type==="paragraph"?`

`:"";return(t.children||[]).map(e).join("")+n}return ng.convertElementToRawText=e,ng}var yc={},Hn={},ig={},rg={exports:{}},Kv;function aU(){if(Kv)return rg.exports;Kv=1;var i=rg.exports=function(e,t){this._tokens=e,this._startIndex=t||0};return i.prototype.head=function(){return this._tokens[this._startIndex]},i.prototype.tail=function(e){return new i(this._tokens,this._startIndex+1)},i.prototype.toArray=function(){return this._tokens.slice(this._startIndex)},i.prototype.end=function(){return this._tokens[this._tokens.length-1]},i.prototype.to=function(e){var t=this.head().source,n=e.head()||e.end();return t.to(n.source)},rg.exports}var Zv;function cU(){if(Zv)return ig;Zv=1;var i=aU();return ig.Parser=function(e){var t=function(n,r){return n(new i(r))};return{parseTokens:t}},ig}var sg={},og={},Qv;function lU(){return Qv||(Qv=1,(function(i){i.none=Object.create({value:function(){throw new Error("Called value on none")},isNone:function(){return!0},isSome:function(){return!1},map:function(){return i.none},flatMap:function(){return i.none},filter:function(){return i.none},toArray:function(){return[]},orElse:e,valueOrElse:e});function e(n){return typeof n=="function"?n():n}i.some=function(n){return new t(n)};var t=function(n){this._value=n};t.prototype.value=function(){return this._value},t.prototype.isNone=function(){return!1},t.prototype.isSome=function(){return!0},t.prototype.map=function(n){return new t(n(this._value))},t.prototype.flatMap=function(n){return n(this._value)},t.prototype.filter=function(n){return n(this._value)?this:i.none},t.prototype.toArray=function(){return[this._value]},t.prototype.orElse=function(n){return this},t.prototype.valueOrElse=function(n){return this._value},i.isOption=function(n){return n===i.none||n instanceof t},i.fromNullable=function(n){return n==null?i.none:new t(n)}})(og)),og}var ag,ex;function Ky(){if(ex)return ag;ex=1,ag={failure:function(e,t){if(e.length<1)throw new Error("Failure must have errors");return new i({status:"failure",remaining:t,errors:e})},error:function(e,t){if(e.length<1)throw new Error("Failure must have errors");return new i({status:"error",remaining:t,errors:e})},success:function(e,t,n){return new i({status:"success",value:e,source:n,remaining:t,errors:[]})},cut:function(e){return new i({status:"cut",remaining:e,errors:[]})}};var i=function(e){this._value=e.value,this._status=e.status,this._hasValue=e.value!==void 0,this._remaining=e.remaining,this._source=e.source,this._errors=e.errors};return i.prototype.map=function(e){return this._hasValue?new i({value:e(this._value,this._source),status:this._status,remaining:this._remaining,source:this._source,errors:this._errors}):this},i.prototype.changeRemaining=function(e){return new i({value:this._value,status:this._status,remaining:e,source:this._source,errors:this._errors})},i.prototype.isSuccess=function(){return this._status==="success"||this._status==="cut"},i.prototype.isFailure=function(){return this._status==="failure"},i.prototype.isError=function(){return this._status==="error"},i.prototype.isCut=function(){return this._status==="cut"},i.prototype.value=function(){return this._value},i.prototype.remaining=function(){return this._remaining},i.prototype.source=function(){return this._source},i.prototype.errors=function(){return this._errors},ag}var cg={},tx;function AT(){if(tx)return cg;tx=1,cg.error=function(e){return new i(e)};var i=function(e){this.expected=e.expected,this.actual=e.actual,this._location=e.location};return i.prototype.describe=function(){var e=this._location?this._location.describe()+`:
`:"";return e+"Expected "+this.expected+`
but got `+this.actual},i.prototype.lineNumber=function(){return this._location.lineNumber()},i.prototype.characterNumber=function(){return this._location.characterNumber()},cg}var lg={},nx;function uU(){if(nx)return lg;nx=1,lg.fromArray=function(e){var t=0,n=function(){return t<e.length};return new i({hasNext:n,next:function(){if(n())return e[t++];throw new Error("No more elements")}})};var i=function(e){this._iterator=e};return i.prototype.map=function(e){var t=this._iterator;return new i({hasNext:function(){return t.hasNext()},next:function(){return e(t.next())}})},i.prototype.filter=function(e){var t=this._iterator,n=!1,r=!1,s,o=function(){if(!n)for(n=!0,r=!1;t.hasNext()&&!r;)s=t.next(),r=e(s)};return new i({hasNext:function(){return o(),r},next:function(){o();var a=s;return n=!1,a}})},i.prototype.first=function(){var e=this._iterator;return this._iterator.hasNext()?e.next():null},i.prototype.toArray=function(){for(var e=[];this._iterator.hasNext();)e.push(this._iterator.next());return e},lg}var ix;function ET(){return ix||(ix=1,(function(i){var e=gt,t=lU(),n=Ky(),r=AT(),s=uU();i.token=function(h,f){var b=f!==void 0;return function(g){var y=g.head();if(y&&y.name===h&&(!b||y.value===f))return n.success(y.value,g.tail(),y.source);var v=u({name:h,value:f});return d(g,v)}},i.tokenOfType=function(h){return i.token(h)},i.firstOf=function(h,f){return e.isArray(f)||(f=Array.prototype.slice.call(arguments,1)),function(b){return s.fromArray(f).map(function(g){return g(b)}).filter(function(g){return g.isSuccess()||g.isError()}).first()||d(b,h)}},i.then=function(h,f){return function(b){var g=h(b);return g.map||console.log(g),g.map(f)}},i.sequence=function(){var h=Array.prototype.slice.call(arguments,0),f=function(g){var y=e.foldl(h,function(x,D){var A=x.result,T=x.hasCut;if(!A.isSuccess())return{result:A,hasCut:T};var E=D(A.remaining());if(E.isCut())return{result:A,hasCut:!0};if(E.isSuccess()){var I;D.isCaptured?I=A.value().withValue(D,E.value()):I=A.value();var N=E.remaining(),R=g.to(N);return{result:n.success(I,N,R),hasCut:T}}else return T?{result:n.error(E.errors(),E.remaining()),hasCut:T}:{result:E,hasCut:T}},{result:n.success(new o,g),hasCut:!1}).result,v=g.to(y.remaining());return y.map(function(x){return x.withValue(i.sequence.source,v)})};f.head=function(){var g=e.find(h,b);return i.then(f,i.sequence.extract(g))},f.map=function(g){return i.then(f,function(y){return g.apply(this,y.toArray())})};function b(g){return g.isCaptured}return f};var o=function(h,f){this._values=h||{},this._valuesArray=f||[]};o.prototype.withValue=function(h,f){if(h.captureName&&h.captureName in this._values)throw new Error('Cannot add second value for capture "'+h.captureName+'"');var b=e.clone(this._values);b[h.captureName]=f;var g=this._valuesArray.concat([f]);return new o(b,g)},o.prototype.get=function(h){if(h.captureName in this._values)return this._values[h.captureName];throw new Error('No value for capture "'+h.captureName+'"')},o.prototype.toArray=function(){return this._valuesArray},i.sequence.capture=function(h,f){var b=function(){return h.apply(this,arguments)};return b.captureName=f,b.isCaptured=!0,b},i.sequence.extract=function(h){return function(f){return f.get(h)}},i.sequence.applyValues=function(h){var f=Array.prototype.slice.call(arguments,1);return function(b){var g=f.map(function(y){return b.get(y)});return h.apply(this,g)}},i.sequence.source={captureName:"☃source☃"},i.sequence.cut=function(){return function(h){return n.cut(h)}},i.optional=function(h){return function(f){var b=h(f);return b.isSuccess()?b.map(t.some):b.isFailure()?n.success(t.none,f):b}},i.zeroOrMoreWithSeparator=function(h,f){return l(h,f,!1)},i.oneOrMoreWithSeparator=function(h,f){return l(h,f,!0)};var a=i.zeroOrMore=function(h){return function(f){for(var b=[],g;(g=h(f))&&g.isSuccess();)f=g.remaining(),b.push(g.value());return g.isError()?g:n.success(b,f)}};i.oneOrMore=function(h){return i.oneOrMoreWithSeparator(h,c)};function c(h){return n.success(null,h)}var l=function(h,f,b){return function(g){var y=h(g);if(y.isSuccess()){var v=i.sequence.capture(h,"main"),x=a(i.then(i.sequence(f,v),i.sequence.extract(v))),D=x(y.remaining());return n.success([y.value()].concat(D.value()),D.remaining())}else return b||y.isError()?y:n.success([],g)}};i.leftAssociative=function(h,f,b){var g;b?g=[{func:b,rule:f}]:g=f,g=g.map(function(v){return i.then(v.rule,function(x){return function(D,A){return v.func(D,x,A)}})});var y=i.firstOf.apply(null,["rules"].concat(g));return function(v){var x=v,D=h(v);if(!D.isSuccess())return D;for(var A=y(D.remaining());A.isSuccess();){var T=A.remaining(),E=x.to(A.remaining()),I=A.value();D=n.success(I(D.value(),E),T,E),A=y(D.remaining())}return A.isError()?A:D}},i.leftAssociative.firstOf=function(){return Array.prototype.slice.call(arguments,0)},i.nonConsuming=function(h){return function(f){return h(f).changeRemaining(f)}};var u=function(h){return h.value?h.name+' "'+h.value+'"':h.name};function d(h,f){var b,g=h.head();return g?b=r.error({expected:f,actual:u(g),location:g.source}):b=r.error({expected:f,actual:"end of tokens"}),n.failure([b],h)}})(sg)),sg}var ug={exports:{}},rx;function wT(){if(rx)return ug.exports;rx=1,ug.exports=function(e,t){var n={asString:function(){return e},range:function(r,s){return new i(e,t,r,s)}};return n};var i=function(e,t,n,r){this._string=e,this._description=t,this._startIndex=n,this._endIndex=r};return i.prototype.to=function(e){return new i(this._string,this._description,this._startIndex,e._endIndex)},i.prototype.describe=function(){var e=this._position(),t=this._description?this._description+`
`:"";return t+"Line number: "+e.lineNumber+`
Character number: `+e.characterNumber},i.prototype.lineNumber=function(){return this._position().lineNumber},i.prototype.characterNumber=function(){return this._position().characterNumber},i.prototype._position=function(){for(var e=this,t=0,n=function(){return e._string.indexOf(`
`,t)},r=1;n()!==-1&&n()<this._startIndex;)t=n()+1,r+=1;var s=this._startIndex-t+1;return{lineNumber:r,characterNumber:s}},ug.exports}var dg,sx;function CT(){return sx||(sx=1,dg=function(i,e,t){this.name=i,this.value=e,t&&(this.source=t)}),dg}var hg={},ox;function dU(){return ox||(ox=1,(function(i){var e=ET(),t=Ky();i.parser=function(s,o,a){var c={rule:h,leftAssociative:f,rightAssociative:b},l=new n(a.map(d)),u=e.firstOf(s,o);function d(v){return{name:v.name,rule:r(v.ruleBuilder.bind(null,c))}}function h(){return g(l)}function f(v){return g(l.untilExclusive(v))}function b(v){return g(l.untilInclusive(v))}function g(v){return y.bind(null,v)}function y(v,x){var D=u(x);return D.isSuccess()?v.apply(D):D}return c};function n(s){function o(d){return new n(s.slice(0,c().indexOf(d)))}function a(d){return new n(s.slice(0,c().indexOf(d)+1))}function c(){return s.map(function(d){return d.name})}function l(d){for(var h,f;;)if(h=u(d.remaining()),h.isSuccess())f=d.source().to(h.source()),d=t.success(h.value()(d.value(),f),h.remaining(),f);else return h.isFailure()?d:h}function u(d){return e.firstOf("infix",s.map(function(h){return h.rule}))(d)}return{apply:l,untilExclusive:o,untilInclusive:a}}i.infix=function(s,o){function a(c){return i.infix(s,function(l){var u=o(l);return function(d){var h=u(d);return h.map(function(f){return function(b,g){return c(b,f,g)}})}})}return{name:s,ruleBuilder:o,map:a}};var r=function(s){var o;return function(a){return o||(o=s()),o(a)}}})(hg)),hg}var fg={},ax;function hU(){if(ax)return fg;ax=1;var i=CT(),e=wT();fg.RegexTokeniser=t;function t(n){n=n.map(function(a){return{name:a.name,regex:new RegExp(a.regex.source,"g")}});function r(a,c){for(var l=new e(a,c),u=0,d=[];u<a.length;){var h=s(a,u,l);u=h.endIndex,d.push(h.token)}return d.push(o(a,l)),d}function s(a,c,l){for(var u=0;u<n.length;u++){var d=n[u].regex;d.lastIndex=c;var h=d.exec(a);if(h){var b=c+h[0].length;if(h.index===c&&b>c){var f=h[1],g=new i(n[u].name,f,l.range(c,b));return{token:g,endIndex:b}}}}var b=c+1,g=new i("unrecognisedCharacter",a.substring(c,b),l.range(c,b));return{token:g,endIndex:b}}function o(a,c){return new i("end",null,c.range(a.length,a.length))}return{tokenise:r}}return fg}var cx;function ST(){return cx||(cx=1,Hn.Parser=cU().Parser,Hn.rules=ET(),Hn.errors=AT(),Hn.results=Ky(),Hn.StringSource=wT(),Hn.Token=CT(),Hn.bottomUp=dU(),Hn.RegexTokeniser=hU().RegexTokeniser,Hn.rule=function(i){var e;return function(t){return e||(e=i()),e(t)}}),Hn}var Ut={},lx;function fU(){if(lx)return Ut;lx=1,Ut.paragraph=i,Ut.run=e,Ut.table=t,Ut.bold=new n("bold"),Ut.italic=new n("italic"),Ut.underline=new n("underline"),Ut.strikethrough=new n("strikethrough"),Ut.allCaps=new n("allCaps"),Ut.smallCaps=new n("smallCaps"),Ut.commentReference=new n("commentReference"),Ut.lineBreak=new n("break",{breakType:"line"}),Ut.pageBreak=new n("break",{breakType:"page"}),Ut.columnBreak=new n("break",{breakType:"column"}),Ut.equalTo=s,Ut.startsWith=o;function i(l){return new n("paragraph",l)}function e(l){return new n("run",l)}function t(l){return new n("table",l)}function n(l,u){u=u||{},this._elementType=l,this._styleId=u.styleId,this._styleName=u.styleName,u.list&&(this._listIndex=u.list.levelIndex,this._listIsOrdered=u.list.isOrdered)}n.prototype.matches=function(l){return l.type===this._elementType&&(this._styleId===void 0||l.styleId===this._styleId)&&(this._styleName===void 0||l.styleName&&this._styleName.operator(this._styleName.operand,l.styleName))&&(this._listIndex===void 0||r(l,this._listIndex,this._listIsOrdered))&&(this._breakType===void 0||this._breakType===l.breakType)};function r(l,u,d){return l.numbering&&l.numbering.level==u&&l.numbering.isOrdered==d}function s(l){return{operator:a,operand:l}}function o(l){return{operator:c,operand:l}}function a(l,u){return l.toUpperCase()===u.toUpperCase()}function c(l,u){return u.toUpperCase().indexOf(l.toUpperCase())===0}return Ut}var pg={},ux;function pU(){if(ux)return pg;ux=1;var i=ST(),e=i.RegexTokeniser;pg.tokenise=n;var t="'((?:\\\\.|[^'])*)";function n(r){var s="(?:[a-zA-Z\\-_]|\\\\.)",o=new e([{name:"identifier",regex:new RegExp("("+s+"(?:"+s+"|[0-9])*)")},{name:"dot",regex:/\./},{name:"colon",regex:/:/},{name:"gt",regex:/>/},{name:"whitespace",regex:/\s+/},{name:"arrow",regex:/=>/},{name:"equals",regex:/=/},{name:"startsWith",regex:/\^=/},{name:"open-paren",regex:/\(/},{name:"close-paren",regex:/\)/},{name:"open-square-bracket",regex:/\[/},{name:"close-square-bracket",regex:/\]/},{name:"string",regex:new RegExp(t+"'")},{name:"unterminated-string",regex:new RegExp(t)},{name:"integer",regex:/([0-9]+)/},{name:"choice",regex:/\|/},{name:"bang",regex:/(!)/}]);return o.tokenise(r)}return pg}var dx;function gU(){if(dx)return yc;dx=1;var i=gt,e=ST(),t=fU(),n=Uf(),r=pU().tokenise,s=fr();yc.readHtmlPath=u,yc.readDocumentMatcher=c,yc.readStyle=o;function o(N){return A(I,N)}function a(){return e.rules.sequence(e.rules.sequence.capture(l()),e.rules.tokenOfType("whitespace"),e.rules.tokenOfType("arrow"),e.rules.sequence.capture(e.rules.optional(e.rules.sequence(e.rules.tokenOfType("whitespace"),e.rules.sequence.capture(d())).head())),e.rules.tokenOfType("end")).map(function(N,R){return{from:N,to:R.valueOrElse(n.empty)}})}function c(N){return A(l(),N)}function l(){var N=e.rules.sequence,R=function(ye,De){return e.rules.then(e.rules.token("identifier",ye),function(){return De})},P=R("p",t.paragraph),j=R("r",t.run),U=e.rules.firstOf("p or r or table",P,j),B=e.rules.sequence(e.rules.tokenOfType("dot"),e.rules.sequence.cut(),e.rules.sequence.capture(h)).map(function(ye){return{styleId:ye}}),S=e.rules.firstOf("style name matcher",e.rules.then(e.rules.sequence(e.rules.tokenOfType("equals"),e.rules.sequence.cut(),e.rules.sequence.capture(b)).head(),function(ye){return{styleName:t.equalTo(ye)}}),e.rules.then(e.rules.sequence(e.rules.tokenOfType("startsWith"),e.rules.sequence.cut(),e.rules.sequence.capture(b)).head(),function(ye){return{styleName:t.startsWith(ye)}})),J=e.rules.sequence(e.rules.tokenOfType("open-square-bracket"),e.rules.sequence.cut(),e.rules.token("identifier","style-name"),e.rules.sequence.capture(S),e.rules.tokenOfType("close-square-bracket")).head(),q=e.rules.firstOf("list type",R("ordered-list",{isOrdered:!0}),R("unordered-list",{isOrdered:!1})),O=N(e.rules.tokenOfType("colon"),N.capture(q),N.cut(),e.rules.tokenOfType("open-paren"),N.capture(f),e.rules.tokenOfType("close-paren")).map(function(ye,De){return{list:{isOrdered:ye.isOrdered,levelIndex:De-1}}});function K(ye){var De=e.rules.firstOf.apply(e.rules.firstOf,["matcher suffix"].concat(ye)),we=e.rules.zeroOrMore(De);return e.rules.then(we,function(Se){var We={};return Se.forEach(function(C){i.extend(We,C)}),We})}var H=N(N.capture(U),N.capture(K([B,J,O]))).map(function(ye,De){return ye(De)}),Y=N(e.rules.token("identifier","table"),N.capture(K([B,J]))).map(function(ye){return t.table(ye)}),F=R("b",t.bold),X=R("i",t.italic),$=R("u",t.underline),ne=R("strike",t.strikethrough),oe=R("all-caps",t.allCaps),pe=R("small-caps",t.smallCaps),le=R("comment-reference",t.commentReference),ge=N(e.rules.token("identifier","br"),N.cut(),e.rules.tokenOfType("open-square-bracket"),e.rules.token("identifier","type"),e.rules.tokenOfType("equals"),N.capture(b),e.rules.tokenOfType("close-square-bracket")).map(function(ye){switch(ye){case"line":return t.lineBreak;case"page":return t.pageBreak;case"column":return t.columnBreak}});return e.rules.firstOf("element type",H,Y,F,X,$,ne,oe,pe,le,ge)}function u(N){return A(d(),N)}function d(){var N=e.rules.sequence.capture,R=e.rules.tokenOfType("whitespace"),P=e.rules.then(e.rules.optional(e.rules.sequence(e.rules.tokenOfType("colon"),e.rules.token("identifier","fresh"))),function(S){return S.map(function(){return!0}).valueOrElse(!1)}),j=e.rules.then(e.rules.optional(e.rules.sequence(e.rules.tokenOfType("colon"),e.rules.token("identifier","separator"),e.rules.tokenOfType("open-paren"),N(b),e.rules.tokenOfType("close-paren")).head()),function(S){return S.valueOrElse("")}),U=e.rules.oneOrMoreWithSeparator(h,e.rules.tokenOfType("choice")),B=e.rules.sequence(N(U),N(e.rules.zeroOrMore(D)),N(P),N(j)).map(function(S,J,q,O){var K={},H={};return J.forEach(function(Y){Y.append&&K[Y.name]?K[Y.name]+=" "+Y.value:K[Y.name]=Y.value}),q&&(H.fresh=!0),O&&(H.separator=O),n.element(S,K,H)});return e.rules.firstOf("html path",e.rules.then(e.rules.tokenOfType("bang"),function(){return n.ignore}),e.rules.then(e.rules.zeroOrMoreWithSeparator(B,e.rules.sequence(R,e.rules.tokenOfType("gt"),R)),n.elements))}var h=e.rules.then(e.rules.tokenOfType("identifier"),y),f=e.rules.tokenOfType("integer"),b=e.rules.then(e.rules.tokenOfType("string"),y),g={n:`
`,r:"\r",t:"	"};function y(N){return N.replace(/\\(.)/g,function(R,P){return g[P]||P})}var v=e.rules.sequence(e.rules.tokenOfType("open-square-bracket"),e.rules.sequence.cut(),e.rules.sequence.capture(h),e.rules.tokenOfType("equals"),e.rules.sequence.capture(b),e.rules.tokenOfType("close-square-bracket")).map(function(N,R){return{name:N,value:R,append:!1}}),x=e.rules.sequence(e.rules.tokenOfType("dot"),e.rules.sequence.cut(),e.rules.sequence.capture(h)).map(function(N){return{name:"class",value:N,append:!0}}),D=e.rules.firstOf("attribute or class",v,x);function A(N,R){var P=r(R),j=e.Parser(),U=j.parseTokens(N,P);return U.isSuccess()?s.success(U.value()):new s.Result(null,[s.warning(T(R,U))])}function T(N,R){return"Did not understand this style mapping, so ignored it: "+N+`
`+R.errors().map(E).join(`
`)}function E(N){return"Error was at character number "+N.characterNumber()+": Expected "+N.expected+" but got "+N.actual}var I=a();return yc}var bc={},hx;function mU(){if(hx)return bc;hx=1,bc.readOptions=n;var i=gt,e=bc._defaultStyleMap=["p.Heading1 => h1:fresh","p.Heading2 => h2:fresh","p.Heading3 => h3:fresh","p.Heading4 => h4:fresh","p.Heading5 => h5:fresh","p.Heading6 => h6:fresh","p[style-name='Heading 1'] => h1:fresh","p[style-name='Heading 2'] => h2:fresh","p[style-name='Heading 3'] => h3:fresh","p[style-name='Heading 4'] => h4:fresh","p[style-name='Heading 5'] => h5:fresh","p[style-name='Heading 6'] => h6:fresh","p[style-name='heading 1'] => h1:fresh","p[style-name='heading 2'] => h2:fresh","p[style-name='heading 3'] => h3:fresh","p[style-name='heading 4'] => h4:fresh","p[style-name='heading 5'] => h5:fresh","p[style-name='heading 6'] => h6:fresh","r[style-name='Strong'] => strong","p[style-name='footnote text'] => p:fresh","r[style-name='footnote reference'] =>","p[style-name='endnote text'] => p:fresh","r[style-name='endnote reference'] =>","p[style-name='annotation text'] => p:fresh","r[style-name='annotation reference'] =>","p[style-name='Footnote'] => p:fresh","r[style-name='Footnote anchor'] =>","p[style-name='Endnote'] => p:fresh","r[style-name='Endnote anchor'] =>","p:unordered-list(1) => ul > li:fresh","p:unordered-list(2) => ul|ol > li > ul > li:fresh","p:unordered-list(3) => ul|ol > li > ul|ol > li > ul > li:fresh","p:unordered-list(4) => ul|ol > li > ul|ol > li > ul|ol > li > ul > li:fresh","p:unordered-list(5) => ul|ol > li > ul|ol > li > ul|ol > li > ul|ol > li > ul > li:fresh","p:ordered-list(1) => ol > li:fresh","p:ordered-list(2) => ul|ol > li > ol > li:fresh","p:ordered-list(3) => ul|ol > li > ul|ol > li > ol > li:fresh","p:ordered-list(4) => ul|ol > li > ul|ol > li > ul|ol > li > ol > li:fresh","p:ordered-list(5) => ul|ol > li > ul|ol > li > ul|ol > li > ul|ol > li > ol > li:fresh","r[style-name='Hyperlink'] =>","p[style-name='Normal'] => p:fresh"],t=bc._standardOptions={transformDocument:s,includeDefaultStyleMap:!0,includeEmbeddedStyleMap:!0};function n(o){return o=o||{},i.extend({},t,o,{customStyleMap:r(o.styleMap),readStyleMap:function(){var a=this.customStyleMap;return this.includeEmbeddedStyleMap&&(a=a.concat(r(this.embeddedStyleMap))),this.includeDefaultStyleMap&&(a=a.concat(e)),a}})}function r(o){return o?i.isString(o)?o.split(`
`).map(function(a){return a.trim()}).filter(function(a){return a!==""&&a.charAt(0)!=="#"}):o:[]}function s(o){return o}return bc}var gg={},fx;function yU(){if(fx)return gg;fx=1;var i=ts(),e=mT();gg.openZip=t;function t(n){return n.arrayBuffer?i.resolve(e.openArrayBuffer(n.arrayBuffer)):i.reject(new Error("Could not find file in options"))}return gg}var hs={},px;function bU(){if(px)return hs;px=1;var i=gt;hs.paragraph=e,hs.run=t,hs._elements=r,hs.getDescendantsOfType=s,hs.getDescendants=o;function e(c){return n("paragraph",c)}function t(c){return n("run",c)}function n(c,l){return r(function(u){return u.type===c?l(u):u})}function r(c){return function l(u){if(u.children){var d=i.map(u.children,l);u=i.extend(u,{children:d})}return c(u)}}function s(c,l){return o(c).filter(function(u){return u.type===l})}function o(c){var l=[];return a(c,function(u){l.push(u)}),l}function a(c,l){c.children&&c.children.forEach(function(u){a(u,l),l(u)})}return hs}var mg={},gx;function vU(){if(gx)return mg;gx=1;var i=Uf(),e=Sf();mg.element=t;function t(n){return function(r){return e.elementWithTag(i.element(n),[r])}}return mg}var mx;function xU(){if(mx)return En;mx=1;var i=gt,e=QS(),t=eU(),n=sU().DocumentConverter,r=oU().convertElementToRawText,s=gU().readStyle,o=mU().readOptions,a=yU(),c=fr().Result;En.convertToHtml=l,En.convertToMarkdown=u,En.convert=d,En.extractRawText=g,En.images=TT(),En.transforms=bU(),En.underline=vU(),En.embedStyleMap=y,En.readEmbeddedStyleMap=h;function l(v,x){return d(v,x)}function u(v,x){var D=Object.create(x||{});return D.outputFormat="markdown",d(v,D)}function d(v,x){return x=o(x),a.openZip(v).tap(function(D){return t.readStyleMap(D).then(function(A){x.embeddedStyleMap=A})}).then(function(D){return e.read(D,v).then(function(A){return A.map(x.transformDocument)}).then(function(A){return f(A,x)})})}function h(v){return a.openZip(v).then(t.readStyleMap)}function f(v,x){var D=b(x.readStyleMap()),A=i.extend({},x,{styleMap:D.value}),T=new n(A);return v.flatMapThen(function(E){return D.flatMapThen(function(I){return T.convertToHtml(E)})})}function b(v){return c.combine((v||[]).map(s)).map(function(x){return x.filter(function(D){return!!D})})}function g(v){return a.openZip(v).then(e.read).then(function(x){return x.map(r)})}function y(v,x){return a.openZip(v).tap(function(D){return t.writeStyleMap(D,x)}).then(function(D){return D.toArrayBuffer()}).then(function(D){return{toArrayBuffer:function(){return D},toBuffer:function(){return Buffer.from(D)}}})}return En.styleMapping=function(){throw new Error(`Use a raw string instead of mammoth.styleMapping e.g. "p[style-name='Title'] => h1" instead of mammoth.styleMapping("p[style-name='Title'] => h1")`)},En}var _U=xU();const DU=zh(_U);class TU{constructor(e=1440*60*1e3){this.cache=new Map,this.ttlMs=e}getKey(e,t="v1"){return`${e.name}-${e.size}-${e.lastModified}-${t}`}set(e,t,n="v1"){const r=this.getKey(e,n);this.cache.set(r,{data:t,timestamp:Date.now(),version:n})}get(e,t="v1"){const n=this.getKey(e,t),r=this.cache.get(n);return r?Date.now()-r.timestamp>this.ttlMs?(this.cache.delete(n),null):r.data:null}clear(){this.cache.clear()}size(){return this.cache.size}}const yx=new TU(1440*60*1e3);hw.workerSrc="https://cdn.jsdelivr.net/npm/pdfjs-dist@4.3.136/build/pdf.worker.min.mjs";const bx=15,AU=200,EU=2,wU=1.5,CU=i=>i.replace(/\r\n/g,`
`).replace(/\r/g,`
`).replace(/[ \t]{2,}/g," ").replace(/\n{3,}/g,`

`).trim(),SU=(i,e=AU)=>i.replace(/[^\w\s]/g,"").trim().length>=e,vx=async i=>{try{return(await Qw.recognize(i,"eng+vie")).data.text}catch(e){return console.warn("OCR failed, returning empty string:",e),""}},UT=async(i,e)=>{if(i.size>bx*1024*1024)throw new Error(`File is too large. Maximum size is ${bx}MB.`);const t=i.type,n=i.name.toLowerCase(),r=yx.get(i,"text-extraction");if(r)return e("Đang tải từ cache..."),r;let s="";try{if(t==="application/pdf"||n.endsWith(".pdf")){e("Đang đọc file PDF...");const a=await i.arrayBuffer(),c=await fw({data:a}).promise;let l="";const u=Math.min(3,c.numPages);for(let d=1;d<=u;d++){const f=await(await c.getPage(d)).getTextContent();l+=f.items.map(b=>b.str).join(" ")+`
`}if(SU(l)){for(let d=1;d<=c.numPages;d++)if(d>u){const f=await(await c.getPage(d)).getTextContent();l+=f.items.map(b=>b.str).join(" ")+`
`}s=l,e("Đã trích xuất text từ PDF thành công")}else{e("PDF là ảnh scan, đang dùng OCR tối ưu...");let d="";const h=Math.min(EU,c.numPages);for(let f=1;f<=h;f++){e(`Đang OCR trang ${f}/${h}...`);const b=await c.getPage(f),g=b.getViewport({scale:wU}),y=document.createElement("canvas"),v=y.getContext("2d",{willReadFrequently:!0});if(v){y.height=g.height,y.width=g.width,await b.render({canvasContext:v,viewport:g}).promise;const x=await vx(y);d+=x+`

`}}s=d,e("Đã hoàn thành OCR")}}else if(t==="application/vnd.openxmlformats-officedocument.wordprocessingml.document"||n.endsWith(".docx")){e("Đang đọc file DOCX...");const a=await i.arrayBuffer();s=(await DU.extractRawText({arrayBuffer:a})).value,e("Đã đọc file DOCX thành công")}else if(t.startsWith("image/")){e("Đang OCR ảnh...");const a=document.createElement("canvas"),c=a.getContext("2d"),l=new Image;await new Promise((u,d)=>{l.onload=()=>{let{width:b,height:g}=l;b>1200&&(g=g*1200/b,b=1200),g>1600&&(b=b*1600/g,g=1600),a.width=b,a.height=g,c==null||c.drawImage(l,0,0,b,g),u(void 0)},l.onerror=d,l.src=URL.createObjectURL(i)}),s=await vx(a),e("Đã OCR ảnh thành công")}else if(t==="text/plain"||n.endsWith(".txt"))s=await i.text(),e("Đã đọc file text");else throw new Error(`Định dạng file không được hỗ trợ: ${i.name}`);const o=CU(s);return yx.set(i,o,"text-extraction"),o}catch(o){throw console.error("Error extracting text from file:",o),new Error(`Lỗi xử lý file ${i.name}: ${o instanceof Error?o.message:"Unknown error"}`)}},UU=UT,IU=UT;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let RU,FU;function NU(){return{geminiUrl:RU,vertexUrl:FU}}function kU(i,e,t,n){var r,s;if(!(i!=null&&i.baseUrl)){const o=NU();return e?(r=o.vertexUrl)!==null&&r!==void 0?r:t:(s=o.geminiUrl)!==null&&s!==void 0?s:n}return i.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Uo{}function Ee(i,e){const t=/\{([^}]+)\}/g;return i.replace(t,(n,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const s=e[r];return s!=null?String(s):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function _(i,e,t){for(let s=0;s<e.length-1;s++){const o=e[s];if(o.endsWith("[]")){const a=o.slice(0,-2);if(!(a in i))if(Array.isArray(t))i[a]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(i[a])){const c=i[a];if(Array.isArray(t))for(let l=0;l<c.length;l++){const u=c[l];_(u,e.slice(s+1),t[l])}else for(const l of c)_(l,e.slice(s+1),t)}return}else if(o.endsWith("[0]")){const a=o.slice(0,-3);a in i||(i[a]=[{}]);const c=i[a];_(c[0],e.slice(s+1),t);return}(!i[o]||typeof i[o]!="object")&&(i[o]={}),i=i[o]}const n=e[e.length-1],r=i[n];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${n}`)}else n==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(i,t):i[n]=t}function m(i,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return i;for(let n=0;n<e.length;n++){if(typeof i!="object"||i===null)return t;const r=e[n];if(r.endsWith("[]")){const s=r.slice(0,-2);if(s in i){const o=i[s];return Array.isArray(o)?o.map(a=>m(a,e.slice(n+1),t)):t}else return t}else i=i[r]}return i}catch(n){if(n instanceof TypeError)return t;throw n}}function MU(i,e){for(const[t,n]of Object.entries(e)){const r=t.split("."),s=n.split("."),o=new Set;let a=-1;for(let c=0;c<r.length;c++)if(r[c]==="*"){a=c;break}if(a!==-1&&s.length>a)for(let c=a;c<s.length;c++){const l=s[c];l!=="*"&&!l.endsWith("[]")&&!l.endsWith("[0]")&&o.add(l)}qm(i,r,s,0,o)}}function qm(i,e,t,n,r){if(n>=e.length||typeof i!="object"||i===null)return;const s=e[n];if(s.endsWith("[]")){const o=s.slice(0,-2),a=i;if(o in a&&Array.isArray(a[o]))for(const c of a[o])qm(c,e,t,n+1,r)}else if(s==="*"){if(typeof i=="object"&&i!==null&&!Array.isArray(i)){const o=i,a=Object.keys(o).filter(l=>!l.startsWith("_")&&!r.has(l)),c={};for(const l of a)c[l]=o[l];for(const[l,u]of Object.entries(c)){const d=[];for(const h of t.slice(n))h==="*"?d.push(l):d.push(h);_(o,d,u)}for(const l of a)delete o[l]}}else{const o=i;s in o&&qm(o[s],e,t,n+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zy(i){if(typeof i!="string")throw new Error("fromImageBytes must be a string");return i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function PU(i){const e={},t=m(i,["operationName"]);t!=null&&_(e,["operationName"],t);const n=m(i,["resourceName"]);return n!=null&&_(e,["_url","resourceName"],n),e}function LU(i){const e={},t=m(i,["name"]);t!=null&&_(e,["name"],t);const n=m(i,["metadata"]);n!=null&&_(e,["metadata"],n);const r=m(i,["done"]);r!=null&&_(e,["done"],r);const s=m(i,["error"]);s!=null&&_(e,["error"],s);const o=m(i,["response","generateVideoResponse"]);return o!=null&&_(e,["response"],OU(o)),e}function BU(i){const e={},t=m(i,["name"]);t!=null&&_(e,["name"],t);const n=m(i,["metadata"]);n!=null&&_(e,["metadata"],n);const r=m(i,["done"]);r!=null&&_(e,["done"],r);const s=m(i,["error"]);s!=null&&_(e,["error"],s);const o=m(i,["response"]);return o!=null&&_(e,["response"],WU(o)),e}function OU(i){const e={},t=m(i,["generatedSamples"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>qU(o))),_(e,["generatedVideos"],s)}const n=m(i,["raiMediaFilteredCount"]);n!=null&&_(e,["raiMediaFilteredCount"],n);const r=m(i,["raiMediaFilteredReasons"]);return r!=null&&_(e,["raiMediaFilteredReasons"],r),e}function WU(i){const e={},t=m(i,["videos"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>HU(o))),_(e,["generatedVideos"],s)}const n=m(i,["raiMediaFilteredCount"]);n!=null&&_(e,["raiMediaFilteredCount"],n);const r=m(i,["raiMediaFilteredReasons"]);return r!=null&&_(e,["raiMediaFilteredReasons"],r),e}function qU(i){const e={},t=m(i,["video"]);return t!=null&&_(e,["video"],zU(t)),e}function HU(i){const e={},t=m(i,["_self"]);return t!=null&&_(e,["video"],$U(t)),e}function VU(i){const e={},t=m(i,["operationName"]);return t!=null&&_(e,["_url","operationName"],t),e}function GU(i){const e={},t=m(i,["operationName"]);return t!=null&&_(e,["_url","operationName"],t),e}function zU(i){const e={},t=m(i,["uri"]);t!=null&&_(e,["uri"],t);const n=m(i,["encodedVideo"]);n!=null&&_(e,["videoBytes"],Zy(n));const r=m(i,["encoding"]);return r!=null&&_(e,["mimeType"],r),e}function $U(i){const e={},t=m(i,["gcsUri"]);t!=null&&_(e,["uri"],t);const n=m(i,["bytesBase64Encoded"]);n!=null&&_(e,["videoBytes"],Zy(n));const r=m(i,["mimeType"]);return r!=null&&_(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var xx;(function(i){i.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",i.OUTCOME_OK="OUTCOME_OK",i.OUTCOME_FAILED="OUTCOME_FAILED",i.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(xx||(xx={}));var _x;(function(i){i.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",i.PYTHON="PYTHON"})(_x||(_x={}));var Dx;(function(i){i.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",i.SILENT="SILENT",i.WHEN_IDLE="WHEN_IDLE",i.INTERRUPT="INTERRUPT"})(Dx||(Dx={}));var Ne;(function(i){i.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",i.STRING="STRING",i.NUMBER="NUMBER",i.INTEGER="INTEGER",i.BOOLEAN="BOOLEAN",i.ARRAY="ARRAY",i.OBJECT="OBJECT",i.NULL="NULL"})(Ne||(Ne={}));var Tx;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",i.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",i.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",i.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",i.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Tx||(Tx={}));var Ax;(function(i){i.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",i.SEVERITY="SEVERITY",i.PROBABILITY="PROBABILITY"})(Ax||(Ax={}));var Ex;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE",i.OFF="OFF"})(Ex||(Ex={}));var wx;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(wx||(wx={}));var Cx;(function(i){i.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",i.NO_AUTH="NO_AUTH",i.API_KEY_AUTH="API_KEY_AUTH",i.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",i.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",i.OAUTH="OAUTH",i.OIDC_AUTH="OIDC_AUTH"})(Cx||(Cx={}));var Sx;(function(i){i.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",i.SIMPLE_SEARCH="SIMPLE_SEARCH",i.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Sx||(Sx={}));var Ux;(function(i){i.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",i.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",i.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",i.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",i.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Ux||(Ux={}));var Ix;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.IMAGE_SAFETY="IMAGE_SAFETY",i.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",i.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",i.NO_IMAGE="NO_IMAGE"})(Ix||(Ix={}));var Rx;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(Rx||(Rx={}));var Fx;(function(i){i.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",i.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",i.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",i.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",i.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Fx||(Fx={}));var Nx;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.IMAGE_SAFETY="IMAGE_SAFETY",i.MODEL_ARMOR="MODEL_ARMOR",i.JAILBREAK="JAILBREAK"})(Nx||(Nx={}));var kx;(function(i){i.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",i.ON_DEMAND="ON_DEMAND",i.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(kx||(kx={}));var gh;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.AUDIO="AUDIO"})(gh||(gh={}));var Mx;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Mx||(Mx={}));var Hm;(function(i){i.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",i.JOB_STATE_QUEUED="JOB_STATE_QUEUED",i.JOB_STATE_PENDING="JOB_STATE_PENDING",i.JOB_STATE_RUNNING="JOB_STATE_RUNNING",i.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",i.JOB_STATE_FAILED="JOB_STATE_FAILED",i.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",i.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",i.JOB_STATE_PAUSED="JOB_STATE_PAUSED",i.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",i.JOB_STATE_UPDATING="JOB_STATE_UPDATING",i.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Hm||(Hm={}));var Px;(function(i){i.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",i.TUNING_MODE_FULL="TUNING_MODE_FULL",i.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Px||(Px={}));var Lx;(function(i){i.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",i.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",i.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",i.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",i.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",i.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",i.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Lx||(Lx={}));var Bx;(function(i){i.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",i.TUNING_TASK_I2V="TUNING_TASK_I2V",i.TUNING_TASK_T2V="TUNING_TASK_T2V"})(Bx||(Bx={}));var Ox;(function(i){i.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",i.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",i.BALANCED="BALANCED",i.PRIORITIZE_COST="PRIORITIZE_COST"})(Ox||(Ox={}));var Wx;(function(i){i.UNSPECIFIED="UNSPECIFIED",i.BLOCKING="BLOCKING",i.NON_BLOCKING="NON_BLOCKING"})(Wx||(Wx={}));var qx;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(qx||(qx={}));var Hx;(function(i){i.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",i.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Hx||(Hx={}));var Vx;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE",i.VALIDATED="VALIDATED"})(Vx||(Vx={}));var Gx;(function(i){i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(Gx||(Gx={}));var zx;(function(i){i.DONT_ALLOW="DONT_ALLOW",i.ALLOW_ADULT="ALLOW_ADULT",i.ALLOW_ALL="ALLOW_ALL"})(zx||(zx={}));var $x;(function(i){i.auto="auto",i.en="en",i.ja="ja",i.ko="ko",i.hi="hi",i.zh="zh",i.pt="pt",i.es="es"})($x||($x={}));var Xx;(function(i){i.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",i.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",i.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",i.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",i.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Xx||(Xx={}));var jx;(function(i){i.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",i.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",i.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",i.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(jx||(jx={}));var Yx;(function(i){i.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",i.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",i.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",i.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Yx||(Yx={}));var Jx;(function(i){i.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",i.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",i.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",i.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",i.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",i.EDIT_MODE_STYLE="EDIT_MODE_STYLE",i.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",i.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Jx||(Jx={}));var Kx;(function(i){i.FOREGROUND="FOREGROUND",i.BACKGROUND="BACKGROUND",i.PROMPT="PROMPT",i.SEMANTIC="SEMANTIC",i.INTERACTIVE="INTERACTIVE"})(Kx||(Kx={}));var Zx;(function(i){i.ASSET="ASSET",i.STYLE="STYLE"})(Zx||(Zx={}));var Qx;(function(i){i.INSERT="INSERT",i.REMOVE="REMOVE",i.REMOVE_STATIC="REMOVE_STATIC",i.OUTPAINT="OUTPAINT"})(Qx||(Qx={}));var e1;(function(i){i.OPTIMIZED="OPTIMIZED",i.LOSSLESS="LOSSLESS"})(e1||(e1={}));var t1;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.PROCESSING="PROCESSING",i.ACTIVE="ACTIVE",i.FAILED="FAILED"})(t1||(t1={}));var n1;(function(i){i.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",i.UPLOADED="UPLOADED",i.GENERATED="GENERATED"})(n1||(n1={}));var i1;(function(i){i.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.RESPONSE_REJECTED="RESPONSE_REJECTED",i.NEED_MORE_INPUT="NEED_MORE_INPUT"})(i1||(i1={}));var r1;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.VIDEO="VIDEO",i.AUDIO="AUDIO",i.DOCUMENT="DOCUMENT"})(r1||(r1={}));var s1;(function(i){i.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",i.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",i.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(s1||(s1={}));var o1;(function(i){i.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",i.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",i.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(o1||(o1={}));var a1;(function(i){i.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",i.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",i.NO_INTERRUPTION="NO_INTERRUPTION"})(a1||(a1={}));var c1;(function(i){i.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",i.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",i.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(c1||(c1={}));var l1;(function(i){i.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",i.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",i.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",i.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",i.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",i.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",i.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",i.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",i.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",i.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",i.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",i.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",i.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(l1||(l1={}));var u1;(function(i){i.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",i.QUALITY="QUALITY",i.DIVERSITY="DIVERSITY",i.VOCALIZATION="VOCALIZATION"})(u1||(u1={}));var Wo;(function(i){i.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",i.PLAY="PLAY",i.PAUSE="PAUSE",i.STOP="STOP",i.RESET_CONTEXT="RESET_CONTEXT"})(Wo||(Wo={}));class Vm{constructor(e){const t={};for(const n of e.headers.entries())t[n[0]]=n[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class vc{get text(){var e,t,n,r,s,o,a,c;if(((r=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let l="",u=!1;const d=[];for(const h of(c=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&c!==void 0?c:[]){for(const[f,b]of Object.entries(h))f!=="text"&&f!=="thought"&&(b!==null||b!==void 0)&&d.push(f);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;u=!0,l+=h.text}}return d.length>0&&console.warn(`there are non-text parts ${d} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),u?l:void 0}get data(){var e,t,n,r,s,o,a,c;if(((r=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let l="";const u=[];for(const d of(c=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&c!==void 0?c:[]){for(const[h,f]of Object.entries(d))h!=="inlineData"&&(f!==null||f!==void 0)&&u.push(h);d.inlineData&&typeof d.inlineData.data=="string"&&(l+=atob(d.inlineData.data))}return u.length>0&&console.warn(`there are non-data parts ${u} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),l.length>0?btoa(l):void 0}get functionCalls(){var e,t,n,r,s,o,a,c;if(((r=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const l=(c=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(u=>u.functionCall).map(u=>u.functionCall).filter(u=>u!==void 0);if((l==null?void 0:l.length)!==0)return l}get executableCode(){var e,t,n,r,s,o,a,c,l;if(((r=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const u=(c=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(d=>d.executableCode).map(d=>d.executableCode).filter(d=>d!==void 0);if((u==null?void 0:u.length)!==0)return(l=u==null?void 0:u[0])===null||l===void 0?void 0:l.code}get codeExecutionResult(){var e,t,n,r,s,o,a,c,l;if(((r=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const u=(c=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(d=>d.codeExecutionResult).map(d=>d.codeExecutionResult).filter(d=>d!==void 0);if((u==null?void 0:u.length)!==0)return(l=u==null?void 0:u[0])===null||l===void 0?void 0:l.output}}class d1{}class h1{}class XU{}class jU{}class YU{}class JU{}class f1{}class p1{}class g1{}class KU{}class mh{_fromAPIResponse({apiResponse:e,isVertexAI:t}){const n=new mh;let r;const s=e;return t?r=BU(s):r=LU(s),Object.assign(n,r),n}}class m1{}class y1{}class b1{}class ZU{}class QU{}class eI{}class v1{}class tI{get text(){var e,t,n;let r="",s=!1;const o=[];for(const a of(n=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&n!==void 0?n:[]){for(const[c,l]of Object.entries(a))c!=="text"&&c!=="thought"&&l!==null&&o.push(c);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;s=!0,r+=a.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?r:void 0}get data(){var e,t,n;let r="";const s=[];for(const o of(n=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&n!==void 0?n:[]){for(const[a,c]of Object.entries(o))a!=="inlineData"&&c!==null&&s.push(a);o.inlineData&&typeof o.inlineData.data=="string"&&(r+=atob(o.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class nI{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function je(i,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(i.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function IT(i,e){const t=je(i,e);return t?t.startsWith("publishers/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/${t}`:t.startsWith("models/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/publishers/google/${t}`:t:""}function RT(i){return Array.isArray(i)?i.map(e=>yh(e)):[yh(i)]}function yh(i){if(typeof i=="object"&&i!==null)return i;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof i}`)}function FT(i){const e=yh(i);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function NT(i){const e=yh(i);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function x1(i){if(i==null)throw new Error("PartUnion is required");if(typeof i=="object")return i;if(typeof i=="string")return{text:i};throw new Error(`Unsupported part type: ${typeof i}`)}function kT(i){if(i==null||Array.isArray(i)&&i.length===0)throw new Error("PartListUnion is required");return Array.isArray(i)?i.map(e=>x1(e)):[x1(i)]}function Gm(i){return i!=null&&typeof i=="object"&&"parts"in i&&Array.isArray(i.parts)}function _1(i){return i!=null&&typeof i=="object"&&"functionCall"in i}function D1(i){return i!=null&&typeof i=="object"&&"functionResponse"in i}function Vt(i){if(i==null)throw new Error("ContentUnion is required");return Gm(i)?i:{role:"user",parts:kT(i)}}function Qy(i,e){if(!e)return[];if(i.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const n=Vt(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]});if(i.isVertexAI()){const t=Vt(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>Vt(t)):[Vt(e)]}function On(i){if(i==null||Array.isArray(i)&&i.length===0)throw new Error("contents are required");if(!Array.isArray(i)){if(_1(i)||D1(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Vt(i)]}const e=[],t=[],n=Gm(i[0]);for(const r of i){const s=Gm(r);if(s!=n)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(r);else{if(_1(r)||D1(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return n||e.push({role:"user",parts:kT(t)}),e}function iI(i,e){i.includes("null")&&(e.nullable=!0);const t=i.filter(n=>n!=="null");if(t.length===1)e.type=Object.values(Ne).includes(t[0].toUpperCase())?t[0].toUpperCase():Ne.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const n of t)e.anyOf.push({type:Object.values(Ne).includes(n.toUpperCase())?n.toUpperCase():Ne.TYPE_UNSPECIFIED})}}function $o(i){const e={},t=["items"],n=["anyOf"],r=["properties"];if(i.type&&i.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=i.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,i=s[1]):s[1].type==="null"&&(e.nullable=!0,i=s[0])),i.type instanceof Array&&iI(i.type,e);for(const[o,a]of Object.entries(i))if(a!=null)if(o=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(Ne).includes(a.toUpperCase())?a.toUpperCase():Ne.TYPE_UNSPECIFIED}else if(t.includes(o))e[o]=$o(a);else if(n.includes(o)){const c=[];for(const l of a){if(l.type=="null"){e.nullable=!0;continue}c.push($o(l))}e[o]=c}else if(r.includes(o)){const c={};for(const[l,u]of Object.entries(a))c[l]=$o(u);e[o]=c}else{if(o==="additionalProperties")continue;e[o]=a}return e}function e0(i){return $o(i)}function t0(i){if(typeof i=="object")return i;if(typeof i=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:i}}};throw new Error(`Unsupported speechConfig type: ${typeof i}`)}function n0(i){if("multiSpeakerVoiceConfig"in i)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return i}function Za(i){if(i.functionDeclarations)for(const e of i.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=$o(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=$o(e.response));return i}function Qa(i){if(i==null)throw new Error("tools is required");if(!Array.isArray(i))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of i)e.push(t);return e}function rI(i,e,t,n=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===n;return i.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${i.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${i.getProject()}/locations/${i.getLocation()}/${e}`:r?`projects/${i.getProject()}/locations/${i.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function mr(i,e){if(typeof e!="string")throw new Error("name must be a string");return rI(i,e,"cachedContents")}function MT(i){switch(i){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return i}}function is(i){return Zy(i)}function sI(i){return i!=null&&typeof i=="object"&&"name"in i}function oI(i){return i!=null&&typeof i=="object"&&"video"in i}function aI(i){return i!=null&&typeof i=="object"&&"uri"in i}function PT(i){var e;let t;if(sI(i)&&(t=i.name),!(aI(i)&&(t=i.uri,t===void 0))&&!(oI(i)&&(t=(e=i.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof i=="string"&&(t=i),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function LT(i,e){let t;return i.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function BT(i){for(const e of["models","tunedModels","publisherModels"])if(cI(i,e))return i[e];return[]}function cI(i,e){return i!==null&&typeof i=="object"&&e in i}function lI(i,e={}){const t=i,n={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(n.responseJsonSchema=t.outputSchema),e.behavior&&(n.behavior=e.behavior),{functionDeclarations:[n]}}function uI(i,e={}){const t=[],n=new Set;for(const r of i){const s=r.name;if(n.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);n.add(s);const o=lI(r,e);o.functionDeclarations&&t.push(...o.functionDeclarations)}return{functionDeclarations:t}}function OT(i,e){let t;if(typeof e=="string")if(i.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(i.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const n=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(i.isVertexAI()){if(r>0||n!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(n>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function dI(i){if(typeof i!="string")return i;const e=i;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function WT(i){if(typeof i!="object"||i===null)return{};const e=i,t=e.inlinedResponses;if(typeof t!="object"||t===null)return i;const r=t.inlinedResponses;if(!Array.isArray(r)||r.length===0)return i;let s=!1;for(const o of r){if(typeof o!="object"||o===null)continue;const c=o.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){s=!0;break}}return s&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),i}function ec(i,e){const t=e;if(!i.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function qT(i){const e=i;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hI(i){const e={},t=m(i,["responsesFile"]);t!=null&&_(e,["fileName"],t);const n=m(i,["inlinedResponses","inlinedResponses"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>VI(o))),_(e,["inlinedResponses"],s)}const r=m(i,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),_(e,["inlinedEmbedContentResponses"],s)}return e}function fI(i){const e={},t=m(i,["predictionsFormat"]);t!=null&&_(e,["format"],t);const n=m(i,["gcsDestination","outputUriPrefix"]);n!=null&&_(e,["gcsUri"],n);const r=m(i,["bigqueryDestination","outputUri"]);return r!=null&&_(e,["bigqueryUri"],r),e}function pI(i){const e={},t=m(i,["format"]);t!=null&&_(e,["predictionsFormat"],t);const n=m(i,["gcsUri"]);n!=null&&_(e,["gcsDestination","outputUriPrefix"],n);const r=m(i,["bigqueryUri"]);if(r!=null&&_(e,["bigqueryDestination","outputUri"],r),m(i,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(i,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(m(i,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Kd(i){const e={},t=m(i,["name"]);t!=null&&_(e,["name"],t);const n=m(i,["metadata","displayName"]);n!=null&&_(e,["displayName"],n);const r=m(i,["metadata","state"]);r!=null&&_(e,["state"],qT(r));const s=m(i,["metadata","createTime"]);s!=null&&_(e,["createTime"],s);const o=m(i,["metadata","endTime"]);o!=null&&_(e,["endTime"],o);const a=m(i,["metadata","updateTime"]);a!=null&&_(e,["updateTime"],a);const c=m(i,["metadata","model"]);c!=null&&_(e,["model"],c);const l=m(i,["metadata","output"]);return l!=null&&_(e,["dest"],hI(WT(l))),e}function zm(i){const e={},t=m(i,["name"]);t!=null&&_(e,["name"],t);const n=m(i,["displayName"]);n!=null&&_(e,["displayName"],n);const r=m(i,["state"]);r!=null&&_(e,["state"],qT(r));const s=m(i,["error"]);s!=null&&_(e,["error"],s);const o=m(i,["createTime"]);o!=null&&_(e,["createTime"],o);const a=m(i,["startTime"]);a!=null&&_(e,["startTime"],a);const c=m(i,["endTime"]);c!=null&&_(e,["endTime"],c);const l=m(i,["updateTime"]);l!=null&&_(e,["updateTime"],l);const u=m(i,["model"]);u!=null&&_(e,["model"],u);const d=m(i,["inputConfig"]);d!=null&&_(e,["src"],gI(d));const h=m(i,["outputConfig"]);return h!=null&&_(e,["dest"],fI(WT(h))),e}function gI(i){const e={},t=m(i,["instancesFormat"]);t!=null&&_(e,["format"],t);const n=m(i,["gcsSource","uris"]);n!=null&&_(e,["gcsUri"],n);const r=m(i,["bigquerySource","inputUri"]);return r!=null&&_(e,["bigqueryUri"],r),e}function mI(i,e){const t={};if(m(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(m(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const n=m(e,["fileName"]);n!=null&&_(t,["fileName"],n);const r=m(e,["inlinedRequests"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>HI(i,o))),_(t,["requests","requests"],s)}return t}function yI(i){const e={},t=m(i,["format"]);t!=null&&_(e,["instancesFormat"],t);const n=m(i,["gcsUri"]);n!=null&&_(e,["gcsSource","uris"],n);const r=m(i,["bigqueryUri"]);if(r!=null&&_(e,["bigquerySource","inputUri"],r),m(i,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(i,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function bI(i){const e={};if(m(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=m(i,["data"]);t!=null&&_(e,["data"],t);const n=m(i,["mimeType"]);return n!=null&&_(e,["mimeType"],n),e}function vI(i,e){const t={},n=m(e,["name"]);return n!=null&&_(t,["_url","name"],ec(i,n)),t}function xI(i,e){const t={},n=m(e,["name"]);return n!=null&&_(t,["_url","name"],ec(i,n)),t}function _I(i){const e={},t=m(i,["content"]);t!=null&&_(e,["content"],t);const n=m(i,["citationMetadata"]);n!=null&&_(e,["citationMetadata"],DI(n));const r=m(i,["tokenCount"]);r!=null&&_(e,["tokenCount"],r);const s=m(i,["finishReason"]);s!=null&&_(e,["finishReason"],s);const o=m(i,["urlContextMetadata"]);o!=null&&_(e,["urlContextMetadata"],o);const a=m(i,["avgLogprobs"]);a!=null&&_(e,["avgLogprobs"],a);const c=m(i,["groundingMetadata"]);c!=null&&_(e,["groundingMetadata"],c);const l=m(i,["index"]);l!=null&&_(e,["index"],l);const u=m(i,["logprobsResult"]);u!=null&&_(e,["logprobsResult"],u);const d=m(i,["safetyRatings"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(f=>f)),_(e,["safetyRatings"],h)}return e}function DI(i){const e={},t=m(i,["citationSources"]);if(t!=null){let n=t;Array.isArray(n)&&(n=n.map(r=>r)),_(e,["citations"],n)}return e}function HT(i){const e={},t=m(i,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(s=>JI(s))),_(e,["parts"],r)}const n=m(i,["role"]);return n!=null&&_(e,["role"],n),e}function TI(i,e){const t={},n=m(i,["displayName"]);if(e!==void 0&&n!=null&&_(e,["batch","displayName"],n),m(i,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function AI(i,e){const t={},n=m(i,["displayName"]);e!==void 0&&n!=null&&_(e,["displayName"],n);const r=m(i,["dest"]);return e!==void 0&&r!=null&&_(e,["outputConfig"],pI(dI(r))),t}function T1(i,e){const t={},n=m(e,["model"]);n!=null&&_(t,["_url","model"],je(i,n));const r=m(e,["src"]);r!=null&&_(t,["batch","inputConfig"],mI(i,OT(i,r)));const s=m(e,["config"]);return s!=null&&TI(s,t),t}function EI(i,e){const t={},n=m(e,["model"]);n!=null&&_(t,["model"],je(i,n));const r=m(e,["src"]);r!=null&&_(t,["inputConfig"],yI(OT(i,r)));const s=m(e,["config"]);return s!=null&&AI(s,t),t}function wI(i,e){const t={},n=m(i,["displayName"]);return e!==void 0&&n!=null&&_(e,["batch","displayName"],n),t}function CI(i,e){const t={},n=m(e,["model"]);n!=null&&_(t,["_url","model"],je(i,n));const r=m(e,["src"]);r!=null&&_(t,["batch","inputConfig"],kI(i,r));const s=m(e,["config"]);return s!=null&&wI(s,t),t}function SI(i,e){const t={},n=m(e,["name"]);return n!=null&&_(t,["_url","name"],ec(i,n)),t}function UI(i,e){const t={},n=m(e,["name"]);return n!=null&&_(t,["_url","name"],ec(i,n)),t}function II(i){const e={},t=m(i,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const n=m(i,["name"]);n!=null&&_(e,["name"],n);const r=m(i,["done"]);r!=null&&_(e,["done"],r);const s=m(i,["error"]);return s!=null&&_(e,["error"],s),e}function RI(i){const e={},t=m(i,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const n=m(i,["name"]);n!=null&&_(e,["name"],n);const r=m(i,["done"]);r!=null&&_(e,["done"],r);const s=m(i,["error"]);return s!=null&&_(e,["error"],s),e}function FI(i,e){const t={},n=m(e,["contents"]);if(n!=null){let s=Qy(i,n);Array.isArray(s)&&(s=s.map(o=>o)),_(t,["requests[]","request","content"],s)}const r=m(e,["config"]);return r!=null&&(_(t,["_self"],NI(r,t)),MU(t,{"requests[].*":"requests[].request.*"})),t}function NI(i,e){const t={},n=m(i,["taskType"]);e!==void 0&&n!=null&&_(e,["requests[]","taskType"],n);const r=m(i,["title"]);e!==void 0&&r!=null&&_(e,["requests[]","title"],r);const s=m(i,["outputDimensionality"]);if(e!==void 0&&s!=null&&_(e,["requests[]","outputDimensionality"],s),m(i,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(i,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function kI(i,e){const t={},n=m(e,["fileName"]);n!=null&&_(t,["file_name"],n);const r=m(e,["inlinedRequests"]);return r!=null&&_(t,["requests"],FI(i,r)),t}function MI(i){const e={};if(m(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=m(i,["fileUri"]);t!=null&&_(e,["fileUri"],t);const n=m(i,["mimeType"]);return n!=null&&_(e,["mimeType"],n),e}function PI(i,e,t){const n={},r=m(e,["systemInstruction"]);t!==void 0&&r!=null&&_(t,["systemInstruction"],HT(Vt(r)));const s=m(e,["temperature"]);s!=null&&_(n,["temperature"],s);const o=m(e,["topP"]);o!=null&&_(n,["topP"],o);const a=m(e,["topK"]);a!=null&&_(n,["topK"],a);const c=m(e,["candidateCount"]);c!=null&&_(n,["candidateCount"],c);const l=m(e,["maxOutputTokens"]);l!=null&&_(n,["maxOutputTokens"],l);const u=m(e,["stopSequences"]);u!=null&&_(n,["stopSequences"],u);const d=m(e,["responseLogprobs"]);d!=null&&_(n,["responseLogprobs"],d);const h=m(e,["logprobs"]);h!=null&&_(n,["logprobs"],h);const f=m(e,["presencePenalty"]);f!=null&&_(n,["presencePenalty"],f);const b=m(e,["frequencyPenalty"]);b!=null&&_(n,["frequencyPenalty"],b);const g=m(e,["seed"]);g!=null&&_(n,["seed"],g);const y=m(e,["responseMimeType"]);y!=null&&_(n,["responseMimeType"],y);const v=m(e,["responseSchema"]);v!=null&&_(n,["responseSchema"],e0(v));const x=m(e,["responseJsonSchema"]);if(x!=null&&_(n,["responseJsonSchema"],x),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const D=m(e,["safetySettings"]);if(t!==void 0&&D!=null){let U=D;Array.isArray(U)&&(U=U.map(B=>KI(B))),_(t,["safetySettings"],U)}const A=m(e,["tools"]);if(t!==void 0&&A!=null){let U=Qa(A);Array.isArray(U)&&(U=U.map(B=>ZI(Za(B)))),_(t,["tools"],U)}const T=m(e,["toolConfig"]);if(t!==void 0&&T!=null&&_(t,["toolConfig"],T),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const E=m(e,["cachedContent"]);t!==void 0&&E!=null&&_(t,["cachedContent"],mr(i,E));const I=m(e,["responseModalities"]);I!=null&&_(n,["responseModalities"],I);const N=m(e,["mediaResolution"]);N!=null&&_(n,["mediaResolution"],N);const R=m(e,["speechConfig"]);if(R!=null&&_(n,["speechConfig"],t0(R)),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=m(e,["thinkingConfig"]);P!=null&&_(n,["thinkingConfig"],P);const j=m(e,["imageConfig"]);return j!=null&&_(n,["imageConfig"],j),n}function LI(i){const e={},t=m(i,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const n=m(i,["candidates"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(l=>_I(l))),_(e,["candidates"],c)}const r=m(i,["modelVersion"]);r!=null&&_(e,["modelVersion"],r);const s=m(i,["promptFeedback"]);s!=null&&_(e,["promptFeedback"],s);const o=m(i,["responseId"]);o!=null&&_(e,["responseId"],o);const a=m(i,["usageMetadata"]);return a!=null&&_(e,["usageMetadata"],a),e}function BI(i,e){const t={},n=m(e,["name"]);return n!=null&&_(t,["_url","name"],ec(i,n)),t}function OI(i,e){const t={},n=m(e,["name"]);return n!=null&&_(t,["_url","name"],ec(i,n)),t}function WI(i){const e={};if(m(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=m(i,["enableWidget"]);return t!=null&&_(e,["enableWidget"],t),e}function qI(i){const e={},t=m(i,["timeRangeFilter"]);if(t!=null&&_(e,["timeRangeFilter"],t),m(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function HI(i,e){const t={},n=m(e,["model"]);n!=null&&_(t,["request","model"],je(i,n));const r=m(e,["contents"]);if(r!=null){let a=On(r);Array.isArray(a)&&(a=a.map(c=>HT(c))),_(t,["request","contents"],a)}const s=m(e,["metadata"]);s!=null&&_(t,["metadata"],s);const o=m(e,["config"]);return o!=null&&_(t,["request","generationConfig"],PI(i,o,m(t,["request"],{}))),t}function VI(i){const e={},t=m(i,["response"]);t!=null&&_(e,["response"],LI(t));const n=m(i,["error"]);return n!=null&&_(e,["error"],n),e}function GI(i,e){const t={},n=m(i,["pageSize"]);e!==void 0&&n!=null&&_(e,["_query","pageSize"],n);const r=m(i,["pageToken"]);if(e!==void 0&&r!=null&&_(e,["_query","pageToken"],r),m(i,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function zI(i,e){const t={},n=m(i,["pageSize"]);e!==void 0&&n!=null&&_(e,["_query","pageSize"],n);const r=m(i,["pageToken"]);e!==void 0&&r!=null&&_(e,["_query","pageToken"],r);const s=m(i,["filter"]);return e!==void 0&&s!=null&&_(e,["_query","filter"],s),t}function $I(i){const e={},t=m(i,["config"]);return t!=null&&GI(t,e),e}function XI(i){const e={},t=m(i,["config"]);return t!=null&&zI(t,e),e}function jI(i){const e={},t=m(i,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const n=m(i,["nextPageToken"]);n!=null&&_(e,["nextPageToken"],n);const r=m(i,["operations"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>Kd(o))),_(e,["batchJobs"],s)}return e}function YI(i){const e={},t=m(i,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const n=m(i,["nextPageToken"]);n!=null&&_(e,["nextPageToken"],n);const r=m(i,["batchPredictionJobs"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>zm(o))),_(e,["batchJobs"],s)}return e}function JI(i){const e={},t=m(i,["videoMetadata"]);t!=null&&_(e,["videoMetadata"],t);const n=m(i,["thought"]);n!=null&&_(e,["thought"],n);const r=m(i,["inlineData"]);r!=null&&_(e,["inlineData"],bI(r));const s=m(i,["fileData"]);s!=null&&_(e,["fileData"],MI(s));const o=m(i,["thoughtSignature"]);o!=null&&_(e,["thoughtSignature"],o);const a=m(i,["functionCall"]);a!=null&&_(e,["functionCall"],a);const c=m(i,["codeExecutionResult"]);c!=null&&_(e,["codeExecutionResult"],c);const l=m(i,["executableCode"]);l!=null&&_(e,["executableCode"],l);const u=m(i,["functionResponse"]);u!=null&&_(e,["functionResponse"],u);const d=m(i,["text"]);return d!=null&&_(e,["text"],d),e}function KI(i){const e={};if(m(i,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=m(i,["category"]);t!=null&&_(e,["category"],t);const n=m(i,["threshold"]);return n!=null&&_(e,["threshold"],n),e}function ZI(i){const e={},t=m(i,["functionDeclarations"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>u)),_(e,["functionDeclarations"],l)}if(m(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=m(i,["googleSearch"]);n!=null&&_(e,["googleSearch"],qI(n));const r=m(i,["googleSearchRetrieval"]);if(r!=null&&_(e,["googleSearchRetrieval"],r),m(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=m(i,["googleMaps"]);s!=null&&_(e,["googleMaps"],WI(s));const o=m(i,["urlContext"]);o!=null&&_(e,["urlContext"],o);const a=m(i,["computerUse"]);a!=null&&_(e,["computerUse"],a);const c=m(i,["codeExecution"]);return c!=null&&_(e,["codeExecution"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var vo;(function(i){i.PAGED_ITEM_BATCH_JOBS="batchJobs",i.PAGED_ITEM_MODELS="models",i.PAGED_ITEM_TUNING_JOBS="tuningJobs",i.PAGED_ITEM_FILES="files",i.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(vo||(vo={}));class Ou{constructor(e,t,n,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,n,r)}init(e,t,n){var r,s;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!n||Object.keys(n).length===0?o={config:{}}:typeof n=="object"?o=Object.assign({},n):o=n,o.config&&(o.config.pageToken=t.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(s=(r=o.config)===null||r===void 0?void 0:r.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QI extends Uo{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)},this.list=async(t={})=>new Ou(vo.PAGED_ITEM_BATCH_JOBS,n=>this.listInternal(n),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=T1(this.apiClient,e),n=t._url,r=Ee("{model}:batchGenerateContent",n),a=t.batch.inputConfig.requests,c=a.requests,l=[];for(const u of c){const d=Object.assign({},u);if(d.systemInstruction){const h=d.systemInstruction;delete d.systemInstruction;const f=d.request;f.systemInstruction=h,d.request=f}l.push(d)}return a.requests=l,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const n=t?Object.assign({},t):{},r=Date.now().toString();if(n.displayName||(n.displayName=`genaiBatchJob_${r}`),n.dest===void 0){const s=this.getGcsUri(e),o=this.getBigqueryUri(e);if(s)s.endsWith(".jsonl")?n.dest=`${s.slice(0,-6)}/dest`:n.dest=`${s}_dest_${r}`;else if(o)n.dest=`${o}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return n}async createInternal(e){var t,n,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const l=EI(this.apiClient,e);return a=Ee("batchPredictionJobs",l._url),c=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),o.then(u=>zm(u))}else{const l=T1(this.apiClient,e);return a=Ee("{model}:batchGenerateContent",l._url),c=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>Kd(u))}}async createEmbeddingsInternal(e){var t,n;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=CI(this.apiClient,e);return s=Ee("{model}:asyncBatchEmbedContent",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),r.then(c=>Kd(c))}}async get(e){var t,n,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const l=OI(this.apiClient,e);return a=Ee("batchPredictionJobs/{name}",l._url),c=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),o.then(u=>zm(u))}else{const l=BI(this.apiClient,e);return a=Ee("batches/{name}",l._url),c=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>Kd(u))}}async cancel(e){var t,n,r,s;let o="",a={};if(this.apiClient.isVertexAI()){const c=xI(this.apiClient,e);o=Ee("batchPredictionJobs/{name}:cancel",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal})}else{const c=vI(this.apiClient,e);o=Ee("batches/{name}:cancel",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,n,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const l=XI(e);return a=Ee("batchPredictionJobs",l._url),c=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:u.headers},h})),o.then(u=>{const d=YI(u),h=new v1;return Object.assign(h,d),h})}else{const l=$I(e);return a=Ee("batches",l._url),c=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:u.headers},h})),o.then(u=>{const d=jI(u),h=new v1;return Object.assign(h,d),h})}}async delete(e){var t,n,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const l=UI(this.apiClient,e);return a=Ee("batchPredictionJobs/{name}",l._url),c=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:u.headers},h})),o.then(u=>RI(u))}else{const l=SI(this.apiClient,e);return a=Ee("batches/{name}",l._url),c=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:u.headers},h})),o.then(u=>II(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eR(i){const e={};if(m(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=m(i,["data"]);t!=null&&_(e,["data"],t);const n=m(i,["mimeType"]);return n!=null&&_(e,["mimeType"],n),e}function A1(i){const e={},t=m(i,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(s=>_R(s))),_(e,["parts"],r)}const n=m(i,["role"]);return n!=null&&_(e,["role"],n),e}function tR(i,e){const t={},n=m(i,["ttl"]);e!==void 0&&n!=null&&_(e,["ttl"],n);const r=m(i,["expireTime"]);e!==void 0&&r!=null&&_(e,["expireTime"],r);const s=m(i,["displayName"]);e!==void 0&&s!=null&&_(e,["displayName"],s);const o=m(i,["contents"]);if(e!==void 0&&o!=null){let u=On(o);Array.isArray(u)&&(u=u.map(d=>A1(d))),_(e,["contents"],u)}const a=m(i,["systemInstruction"]);e!==void 0&&a!=null&&_(e,["systemInstruction"],A1(Vt(a)));const c=m(i,["tools"]);if(e!==void 0&&c!=null){let u=c;Array.isArray(u)&&(u=u.map(d=>DR(d))),_(e,["tools"],u)}const l=m(i,["toolConfig"]);if(e!==void 0&&l!=null&&_(e,["toolConfig"],l),m(i,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function nR(i,e){const t={},n=m(i,["ttl"]);e!==void 0&&n!=null&&_(e,["ttl"],n);const r=m(i,["expireTime"]);e!==void 0&&r!=null&&_(e,["expireTime"],r);const s=m(i,["displayName"]);e!==void 0&&s!=null&&_(e,["displayName"],s);const o=m(i,["contents"]);if(e!==void 0&&o!=null){let d=On(o);Array.isArray(d)&&(d=d.map(h=>h)),_(e,["contents"],d)}const a=m(i,["systemInstruction"]);e!==void 0&&a!=null&&_(e,["systemInstruction"],Vt(a));const c=m(i,["tools"]);if(e!==void 0&&c!=null){let d=c;Array.isArray(d)&&(d=d.map(h=>TR(h))),_(e,["tools"],d)}const l=m(i,["toolConfig"]);e!==void 0&&l!=null&&_(e,["toolConfig"],l);const u=m(i,["kmsKeyName"]);return e!==void 0&&u!=null&&_(e,["encryption_spec","kmsKeyName"],u),t}function iR(i,e){const t={},n=m(e,["model"]);n!=null&&_(t,["model"],IT(i,n));const r=m(e,["config"]);return r!=null&&tR(r,t),t}function rR(i,e){const t={},n=m(e,["model"]);n!=null&&_(t,["model"],IT(i,n));const r=m(e,["config"]);return r!=null&&nR(r,t),t}function sR(i,e){const t={},n=m(e,["name"]);return n!=null&&_(t,["_url","name"],mr(i,n)),t}function oR(i,e){const t={},n=m(e,["name"]);return n!=null&&_(t,["_url","name"],mr(i,n)),t}function aR(i){const e={},t=m(i,["sdkHttpResponse"]);return t!=null&&_(e,["sdkHttpResponse"],t),e}function cR(i){const e={},t=m(i,["sdkHttpResponse"]);return t!=null&&_(e,["sdkHttpResponse"],t),e}function lR(i){const e={};if(m(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=m(i,["fileUri"]);t!=null&&_(e,["fileUri"],t);const n=m(i,["mimeType"]);return n!=null&&_(e,["mimeType"],n),e}function uR(i){const e={};if(m(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=m(i,["description"]);t!=null&&_(e,["description"],t);const n=m(i,["name"]);n!=null&&_(e,["name"],n);const r=m(i,["parameters"]);r!=null&&_(e,["parameters"],r);const s=m(i,["parametersJsonSchema"]);s!=null&&_(e,["parametersJsonSchema"],s);const o=m(i,["response"]);o!=null&&_(e,["response"],o);const a=m(i,["responseJsonSchema"]);return a!=null&&_(e,["responseJsonSchema"],a),e}function dR(i,e){const t={},n=m(e,["name"]);return n!=null&&_(t,["_url","name"],mr(i,n)),t}function hR(i,e){const t={},n=m(e,["name"]);return n!=null&&_(t,["_url","name"],mr(i,n)),t}function fR(i){const e={};if(m(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=m(i,["enableWidget"]);return t!=null&&_(e,["enableWidget"],t),e}function pR(i){const e={},t=m(i,["timeRangeFilter"]);if(t!=null&&_(e,["timeRangeFilter"],t),m(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function gR(i,e){const t={},n=m(i,["pageSize"]);e!==void 0&&n!=null&&_(e,["_query","pageSize"],n);const r=m(i,["pageToken"]);return e!==void 0&&r!=null&&_(e,["_query","pageToken"],r),t}function mR(i,e){const t={},n=m(i,["pageSize"]);e!==void 0&&n!=null&&_(e,["_query","pageSize"],n);const r=m(i,["pageToken"]);return e!==void 0&&r!=null&&_(e,["_query","pageToken"],r),t}function yR(i){const e={},t=m(i,["config"]);return t!=null&&gR(t,e),e}function bR(i){const e={},t=m(i,["config"]);return t!=null&&mR(t,e),e}function vR(i){const e={},t=m(i,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const n=m(i,["nextPageToken"]);n!=null&&_(e,["nextPageToken"],n);const r=m(i,["cachedContents"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),_(e,["cachedContents"],s)}return e}function xR(i){const e={},t=m(i,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const n=m(i,["nextPageToken"]);n!=null&&_(e,["nextPageToken"],n);const r=m(i,["cachedContents"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),_(e,["cachedContents"],s)}return e}function _R(i){const e={},t=m(i,["videoMetadata"]);t!=null&&_(e,["videoMetadata"],t);const n=m(i,["thought"]);n!=null&&_(e,["thought"],n);const r=m(i,["inlineData"]);r!=null&&_(e,["inlineData"],eR(r));const s=m(i,["fileData"]);s!=null&&_(e,["fileData"],lR(s));const o=m(i,["thoughtSignature"]);o!=null&&_(e,["thoughtSignature"],o);const a=m(i,["functionCall"]);a!=null&&_(e,["functionCall"],a);const c=m(i,["codeExecutionResult"]);c!=null&&_(e,["codeExecutionResult"],c);const l=m(i,["executableCode"]);l!=null&&_(e,["executableCode"],l);const u=m(i,["functionResponse"]);u!=null&&_(e,["functionResponse"],u);const d=m(i,["text"]);return d!=null&&_(e,["text"],d),e}function DR(i){const e={},t=m(i,["functionDeclarations"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>u)),_(e,["functionDeclarations"],l)}if(m(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=m(i,["googleSearch"]);n!=null&&_(e,["googleSearch"],pR(n));const r=m(i,["googleSearchRetrieval"]);if(r!=null&&_(e,["googleSearchRetrieval"],r),m(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=m(i,["googleMaps"]);s!=null&&_(e,["googleMaps"],fR(s));const o=m(i,["urlContext"]);o!=null&&_(e,["urlContext"],o);const a=m(i,["computerUse"]);a!=null&&_(e,["computerUse"],a);const c=m(i,["codeExecution"]);return c!=null&&_(e,["codeExecution"],c),e}function TR(i){const e={},t=m(i,["functionDeclarations"]);if(t!=null){let d=t;Array.isArray(d)&&(d=d.map(h=>uR(h))),_(e,["functionDeclarations"],d)}const n=m(i,["retrieval"]);n!=null&&_(e,["retrieval"],n);const r=m(i,["googleSearch"]);r!=null&&_(e,["googleSearch"],r);const s=m(i,["googleSearchRetrieval"]);s!=null&&_(e,["googleSearchRetrieval"],s);const o=m(i,["enterpriseWebSearch"]);o!=null&&_(e,["enterpriseWebSearch"],o);const a=m(i,["googleMaps"]);a!=null&&_(e,["googleMaps"],a);const c=m(i,["urlContext"]);c!=null&&_(e,["urlContext"],c);const l=m(i,["computerUse"]);l!=null&&_(e,["computerUse"],l);const u=m(i,["codeExecution"]);return u!=null&&_(e,["codeExecution"],u),e}function AR(i,e){const t={},n=m(i,["ttl"]);e!==void 0&&n!=null&&_(e,["ttl"],n);const r=m(i,["expireTime"]);return e!==void 0&&r!=null&&_(e,["expireTime"],r),t}function ER(i,e){const t={},n=m(i,["ttl"]);e!==void 0&&n!=null&&_(e,["ttl"],n);const r=m(i,["expireTime"]);return e!==void 0&&r!=null&&_(e,["expireTime"],r),t}function wR(i,e){const t={},n=m(e,["name"]);n!=null&&_(t,["_url","name"],mr(i,n));const r=m(e,["config"]);return r!=null&&AR(r,t),t}function CR(i,e){const t={},n=m(e,["name"]);n!=null&&_(t,["_url","name"],mr(i,n));const r=m(e,["config"]);return r!=null&&ER(r,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SR extends Uo{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Ou(vo.PAGED_ITEM_CACHED_CONTENTS,n=>this.listInternal(n),await this.listInternal(t),t)}async create(e){var t,n,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const l=rR(this.apiClient,e);return a=Ee("cachedContents",l._url),c=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),o.then(u=>u)}else{const l=iR(this.apiClient,e);return a=Ee("cachedContents",l._url),c=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>u)}}async get(e){var t,n,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const l=hR(this.apiClient,e);return a=Ee("{name}",l._url),c=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),o.then(u=>u)}else{const l=dR(this.apiClient,e);return a=Ee("{name}",l._url),c=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>u)}}async delete(e){var t,n,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const l=oR(this.apiClient,e);return a=Ee("{name}",l._url),c=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:u.headers},h})),o.then(u=>{const d=cR(u),h=new y1;return Object.assign(h,d),h})}else{const l=sR(this.apiClient,e);return a=Ee("{name}",l._url),c=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:u.headers},h})),o.then(u=>{const d=aR(u),h=new y1;return Object.assign(h,d),h})}}async update(e){var t,n,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const l=CR(this.apiClient,e);return a=Ee("{name}",l._url),c=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),o.then(u=>u)}else{const l=wR(this.apiClient,e);return a=Ee("{name}",l._url),c=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>u)}}async listInternal(e){var t,n,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const l=bR(e);return a=Ee("cachedContents",l._url),c=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:u.headers},h})),o.then(u=>{const d=xR(u),h=new b1;return Object.assign(h,d),h})}else{const l=yR(e);return a=Ee("cachedContents",l._url),c=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:u.headers},h})),o.then(u=>{const d=vR(u),h=new b1;return Object.assign(h,d),h})}}}function E1(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],n=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function lt(i){return this instanceof lt?(this.v=i,this):new lt(i)}function Xo(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(i,e||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),r[Symbol.asyncIterator]=function(){return this},r;function o(f){return function(b){return Promise.resolve(b).then(f,d)}}function a(f,b){n[f]&&(r[f]=function(g){return new Promise(function(y,v){s.push([f,g,y,v])>1||c(f,g)})},b&&(r[f]=b(r[f])))}function c(f,b){try{l(n[f](b))}catch(g){h(s[0][3],g)}}function l(f){f.value instanceof lt?Promise.resolve(f.value.v).then(u,d):h(s[0][2],f)}function u(f){c("next",f)}function d(f){c("throw",f)}function h(f,b){f(b),s.shift(),s.length&&c(s[0][0],s[0][1])}}function Oc(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof E1=="function"?E1(i):i[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=i[s]&&function(o){return new Promise(function(a,c){o=i[s](o),r(a,c,o.done,o.value)})}}function r(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UR(i){var e;if(i.candidates==null||i.candidates.length===0)return!1;const t=(e=i.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:VT(t)}function VT(i){if(i.parts===void 0||i.parts.length===0)return!1;for(const e of i.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function IR(i){if(i.length!==0){for(const e of i)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function w1(i){if(i===void 0||i.length===0)return[];const e=[],t=i.length;let n=0;for(;n<t;)if(i[n].role==="user")e.push(i[n]),n++;else{const r=[];let s=!0;for(;n<t&&i[n].role==="model";)r.push(i[n]),s&&!VT(i[n])&&(s=!1),n++;s?e.push(...r):e.pop()}return e}class RR{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new FR(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class FR{constructor(e,t,n,r={},s=[]){this.apiClient=e,this.modelsModule=t,this.model=n,this.config=r,this.history=s,this.sendPromise=Promise.resolve(),IR(s)}async sendMessage(e){var t;await this.sendPromise;const n=Vt(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var s,o,a;const c=await r,l=(o=(s=c.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content,u=c.automaticFunctionCallingHistory,d=this.getHistory(!0).length;let h=[];u!=null&&(h=(a=u.slice(d))!==null&&a!==void 0?a:[]);const f=l?[l]:[];this.recordHistory(n,f,h)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const n=Vt(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const s=await r;return this.processStreamResponse(s,n)}getHistory(e=!1){const t=e?w1(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var n,r;return Xo(this,arguments,function*(){var o,a,c,l;const u=[];try{for(var d=!0,h=Oc(e),f;f=yield lt(h.next()),o=f.done,!o;d=!0){l=f.value,d=!1;const b=l;if(UR(b)){const g=(r=(n=b.candidates)===null||n===void 0?void 0:n[0])===null||r===void 0?void 0:r.content;g!==void 0&&u.push(g)}yield yield lt(b)}}catch(b){a={error:b}}finally{try{!d&&!o&&(c=h.return)&&(yield lt(c.call(h)))}finally{if(a)throw a.error}}this.recordHistory(t,u)})}recordHistory(e,t,n){let r=[];t.length>0&&t.every(s=>s.role!==void 0)?r=t:r.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...w1(n)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class If extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,If.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function NR(i){const e={},t=m(i,["file"]);return t!=null&&_(e,["file"],t),e}function kR(i){const e={},t=m(i,["sdkHttpResponse"]);return t!=null&&_(e,["sdkHttpResponse"],t),e}function MR(i){const e={},t=m(i,["name"]);return t!=null&&_(e,["_url","file"],PT(t)),e}function PR(i){const e={},t=m(i,["sdkHttpResponse"]);return t!=null&&_(e,["sdkHttpResponse"],t),e}function LR(i){const e={},t=m(i,["name"]);return t!=null&&_(e,["_url","file"],PT(t)),e}function BR(i,e){const t={},n=m(i,["pageSize"]);e!==void 0&&n!=null&&_(e,["_query","pageSize"],n);const r=m(i,["pageToken"]);return e!==void 0&&r!=null&&_(e,["_query","pageToken"],r),t}function OR(i){const e={},t=m(i,["config"]);return t!=null&&BR(t,e),e}function WR(i){const e={},t=m(i,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const n=m(i,["nextPageToken"]);n!=null&&_(e,["nextPageToken"],n);const r=m(i,["files"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),_(e,["files"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qR extends Uo{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Ou(vo.PAGED_ITEM_FILES,n=>this.listInternal(n),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,n;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=OR(e);return s=Ee("files",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json().then(l=>{const u=l;return u.sdkHttpResponse={headers:c.headers},u})),r.then(c=>{const l=WR(c),u=new ZU;return Object.assign(u,l),u})}}async createInternal(e){var t,n;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=NR(e);return s=Ee("upload/v1beta/files",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),r.then(c=>{const l=kR(c),u=new QU;return Object.assign(u,l),u})}}async get(e){var t,n;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=LR(e);return s=Ee("files/{file}",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async delete(e){var t,n;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=MR(e);return s=Ee("files/{file}",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json().then(l=>{const u=l;return u.sdkHttpResponse={headers:c.headers},u})),r.then(c=>{const l=PR(c),u=new eI;return Object.assign(u,l),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zd(i){const e={};if(m(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=m(i,["data"]);t!=null&&_(e,["data"],t);const n=m(i,["mimeType"]);return n!=null&&_(e,["mimeType"],n),e}function HR(i){const e={},t=m(i,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(s=>iF(s))),_(e,["parts"],r)}const n=m(i,["role"]);return n!=null&&_(e,["role"],n),e}function VR(i){const e={};if(m(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=m(i,["fileUri"]);t!=null&&_(e,["fileUri"],t);const n=m(i,["mimeType"]);return n!=null&&_(e,["mimeType"],n),e}function GR(i){const e={};if(m(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=m(i,["description"]);t!=null&&_(e,["description"],t);const n=m(i,["name"]);n!=null&&_(e,["name"],n);const r=m(i,["parameters"]);r!=null&&_(e,["parameters"],r);const s=m(i,["parametersJsonSchema"]);s!=null&&_(e,["parametersJsonSchema"],s);const o=m(i,["response"]);o!=null&&_(e,["response"],o);const a=m(i,["responseJsonSchema"]);return a!=null&&_(e,["responseJsonSchema"],a),e}function zR(i){const e={},t=m(i,["modelSelectionConfig"]);t!=null&&_(e,["modelConfig"],t);const n=m(i,["audioTimestamp"]);n!=null&&_(e,["audioTimestamp"],n);const r=m(i,["candidateCount"]);r!=null&&_(e,["candidateCount"],r);const s=m(i,["enableAffectiveDialog"]);s!=null&&_(e,["enableAffectiveDialog"],s);const o=m(i,["frequencyPenalty"]);o!=null&&_(e,["frequencyPenalty"],o);const a=m(i,["logprobs"]);a!=null&&_(e,["logprobs"],a);const c=m(i,["maxOutputTokens"]);c!=null&&_(e,["maxOutputTokens"],c);const l=m(i,["mediaResolution"]);l!=null&&_(e,["mediaResolution"],l);const u=m(i,["presencePenalty"]);u!=null&&_(e,["presencePenalty"],u);const d=m(i,["responseJsonSchema"]);d!=null&&_(e,["responseJsonSchema"],d);const h=m(i,["responseLogprobs"]);h!=null&&_(e,["responseLogprobs"],h);const f=m(i,["responseMimeType"]);f!=null&&_(e,["responseMimeType"],f);const b=m(i,["responseModalities"]);b!=null&&_(e,["responseModalities"],b);const g=m(i,["responseSchema"]);g!=null&&_(e,["responseSchema"],g);const y=m(i,["routingConfig"]);y!=null&&_(e,["routingConfig"],y);const v=m(i,["seed"]);v!=null&&_(e,["seed"],v);const x=m(i,["speechConfig"]);x!=null&&_(e,["speechConfig"],GT(x));const D=m(i,["stopSequences"]);D!=null&&_(e,["stopSequences"],D);const A=m(i,["temperature"]);A!=null&&_(e,["temperature"],A);const T=m(i,["thinkingConfig"]);T!=null&&_(e,["thinkingConfig"],T);const E=m(i,["topK"]);E!=null&&_(e,["topK"],E);const I=m(i,["topP"]);if(I!=null&&_(e,["topP"],I),m(i,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function $R(i){const e={};if(m(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=m(i,["enableWidget"]);return t!=null&&_(e,["enableWidget"],t),e}function XR(i){const e={},t=m(i,["timeRangeFilter"]);if(t!=null&&_(e,["timeRangeFilter"],t),m(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function jR(i,e){const t={},n=m(i,["generationConfig"]);e!==void 0&&n!=null&&_(e,["setup","generationConfig"],n);const r=m(i,["responseModalities"]);e!==void 0&&r!=null&&_(e,["setup","generationConfig","responseModalities"],r);const s=m(i,["temperature"]);e!==void 0&&s!=null&&_(e,["setup","generationConfig","temperature"],s);const o=m(i,["topP"]);e!==void 0&&o!=null&&_(e,["setup","generationConfig","topP"],o);const a=m(i,["topK"]);e!==void 0&&a!=null&&_(e,["setup","generationConfig","topK"],a);const c=m(i,["maxOutputTokens"]);e!==void 0&&c!=null&&_(e,["setup","generationConfig","maxOutputTokens"],c);const l=m(i,["mediaResolution"]);e!==void 0&&l!=null&&_(e,["setup","generationConfig","mediaResolution"],l);const u=m(i,["seed"]);e!==void 0&&u!=null&&_(e,["setup","generationConfig","seed"],u);const d=m(i,["speechConfig"]);e!==void 0&&d!=null&&_(e,["setup","generationConfig","speechConfig"],n0(d));const h=m(i,["thinkingConfig"]);e!==void 0&&h!=null&&_(e,["setup","generationConfig","thinkingConfig"],h);const f=m(i,["enableAffectiveDialog"]);e!==void 0&&f!=null&&_(e,["setup","generationConfig","enableAffectiveDialog"],f);const b=m(i,["systemInstruction"]);e!==void 0&&b!=null&&_(e,["setup","systemInstruction"],HR(Vt(b)));const g=m(i,["tools"]);if(e!==void 0&&g!=null){let E=Qa(g);Array.isArray(E)&&(E=E.map(I=>sF(Za(I)))),_(e,["setup","tools"],E)}const y=m(i,["sessionResumption"]);e!==void 0&&y!=null&&_(e,["setup","sessionResumption"],rF(y));const v=m(i,["inputAudioTranscription"]);e!==void 0&&v!=null&&_(e,["setup","inputAudioTranscription"],v);const x=m(i,["outputAudioTranscription"]);e!==void 0&&x!=null&&_(e,["setup","outputAudioTranscription"],x);const D=m(i,["realtimeInputConfig"]);e!==void 0&&D!=null&&_(e,["setup","realtimeInputConfig"],D);const A=m(i,["contextWindowCompression"]);e!==void 0&&A!=null&&_(e,["setup","contextWindowCompression"],A);const T=m(i,["proactivity"]);return e!==void 0&&T!=null&&_(e,["setup","proactivity"],T),t}function YR(i,e){const t={},n=m(i,["generationConfig"]);e!==void 0&&n!=null&&_(e,["setup","generationConfig"],zR(n));const r=m(i,["responseModalities"]);e!==void 0&&r!=null&&_(e,["setup","generationConfig","responseModalities"],r);const s=m(i,["temperature"]);e!==void 0&&s!=null&&_(e,["setup","generationConfig","temperature"],s);const o=m(i,["topP"]);e!==void 0&&o!=null&&_(e,["setup","generationConfig","topP"],o);const a=m(i,["topK"]);e!==void 0&&a!=null&&_(e,["setup","generationConfig","topK"],a);const c=m(i,["maxOutputTokens"]);e!==void 0&&c!=null&&_(e,["setup","generationConfig","maxOutputTokens"],c);const l=m(i,["mediaResolution"]);e!==void 0&&l!=null&&_(e,["setup","generationConfig","mediaResolution"],l);const u=m(i,["seed"]);e!==void 0&&u!=null&&_(e,["setup","generationConfig","seed"],u);const d=m(i,["speechConfig"]);e!==void 0&&d!=null&&_(e,["setup","generationConfig","speechConfig"],GT(n0(d)));const h=m(i,["thinkingConfig"]);e!==void 0&&h!=null&&_(e,["setup","generationConfig","thinkingConfig"],h);const f=m(i,["enableAffectiveDialog"]);e!==void 0&&f!=null&&_(e,["setup","generationConfig","enableAffectiveDialog"],f);const b=m(i,["systemInstruction"]);e!==void 0&&b!=null&&_(e,["setup","systemInstruction"],Vt(b));const g=m(i,["tools"]);if(e!==void 0&&g!=null){let E=Qa(g);Array.isArray(E)&&(E=E.map(I=>oF(Za(I)))),_(e,["setup","tools"],E)}const y=m(i,["sessionResumption"]);e!==void 0&&y!=null&&_(e,["setup","sessionResumption"],y);const v=m(i,["inputAudioTranscription"]);e!==void 0&&v!=null&&_(e,["setup","inputAudioTranscription"],v);const x=m(i,["outputAudioTranscription"]);e!==void 0&&x!=null&&_(e,["setup","outputAudioTranscription"],x);const D=m(i,["realtimeInputConfig"]);e!==void 0&&D!=null&&_(e,["setup","realtimeInputConfig"],D);const A=m(i,["contextWindowCompression"]);e!==void 0&&A!=null&&_(e,["setup","contextWindowCompression"],A);const T=m(i,["proactivity"]);return e!==void 0&&T!=null&&_(e,["setup","proactivity"],T),t}function JR(i,e){const t={},n=m(e,["model"]);n!=null&&_(t,["setup","model"],je(i,n));const r=m(e,["config"]);return r!=null&&_(t,["config"],jR(r,t)),t}function KR(i,e){const t={},n=m(e,["model"]);n!=null&&_(t,["setup","model"],je(i,n));const r=m(e,["config"]);return r!=null&&_(t,["config"],YR(r,t)),t}function ZR(i){const e={},t=m(i,["musicGenerationConfig"]);return t!=null&&_(e,["musicGenerationConfig"],t),e}function QR(i){const e={},t=m(i,["weightedPrompts"]);if(t!=null){let n=t;Array.isArray(n)&&(n=n.map(r=>r)),_(e,["weightedPrompts"],n)}return e}function eF(i){const e={},t=m(i,["media"]);if(t!=null){let l=RT(t);Array.isArray(l)&&(l=l.map(u=>Zd(u))),_(e,["mediaChunks"],l)}const n=m(i,["audio"]);n!=null&&_(e,["audio"],Zd(NT(n)));const r=m(i,["audioStreamEnd"]);r!=null&&_(e,["audioStreamEnd"],r);const s=m(i,["video"]);s!=null&&_(e,["video"],Zd(FT(s)));const o=m(i,["text"]);o!=null&&_(e,["text"],o);const a=m(i,["activityStart"]);a!=null&&_(e,["activityStart"],a);const c=m(i,["activityEnd"]);return c!=null&&_(e,["activityEnd"],c),e}function tF(i){const e={},t=m(i,["media"]);if(t!=null){let l=RT(t);Array.isArray(l)&&(l=l.map(u=>u)),_(e,["mediaChunks"],l)}const n=m(i,["audio"]);n!=null&&_(e,["audio"],NT(n));const r=m(i,["audioStreamEnd"]);r!=null&&_(e,["audioStreamEnd"],r);const s=m(i,["video"]);s!=null&&_(e,["video"],FT(s));const o=m(i,["text"]);o!=null&&_(e,["text"],o);const a=m(i,["activityStart"]);a!=null&&_(e,["activityStart"],a);const c=m(i,["activityEnd"]);return c!=null&&_(e,["activityEnd"],c),e}function nF(i){const e={},t=m(i,["setupComplete"]);t!=null&&_(e,["setupComplete"],t);const n=m(i,["serverContent"]);n!=null&&_(e,["serverContent"],n);const r=m(i,["toolCall"]);r!=null&&_(e,["toolCall"],r);const s=m(i,["toolCallCancellation"]);s!=null&&_(e,["toolCallCancellation"],s);const o=m(i,["usageMetadata"]);o!=null&&_(e,["usageMetadata"],aF(o));const a=m(i,["goAway"]);a!=null&&_(e,["goAway"],a);const c=m(i,["sessionResumptionUpdate"]);return c!=null&&_(e,["sessionResumptionUpdate"],c),e}function iF(i){const e={},t=m(i,["videoMetadata"]);t!=null&&_(e,["videoMetadata"],t);const n=m(i,["thought"]);n!=null&&_(e,["thought"],n);const r=m(i,["inlineData"]);r!=null&&_(e,["inlineData"],Zd(r));const s=m(i,["fileData"]);s!=null&&_(e,["fileData"],VR(s));const o=m(i,["thoughtSignature"]);o!=null&&_(e,["thoughtSignature"],o);const a=m(i,["functionCall"]);a!=null&&_(e,["functionCall"],a);const c=m(i,["codeExecutionResult"]);c!=null&&_(e,["codeExecutionResult"],c);const l=m(i,["executableCode"]);l!=null&&_(e,["executableCode"],l);const u=m(i,["functionResponse"]);u!=null&&_(e,["functionResponse"],u);const d=m(i,["text"]);return d!=null&&_(e,["text"],d),e}function rF(i){const e={},t=m(i,["handle"]);if(t!=null&&_(e,["handle"],t),m(i,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function GT(i){const e={},t=m(i,["voiceConfig"]);if(t!=null&&_(e,["voiceConfig"],t),m(i,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const n=m(i,["languageCode"]);return n!=null&&_(e,["languageCode"],n),e}function sF(i){const e={},t=m(i,["functionDeclarations"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>u)),_(e,["functionDeclarations"],l)}if(m(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=m(i,["googleSearch"]);n!=null&&_(e,["googleSearch"],XR(n));const r=m(i,["googleSearchRetrieval"]);if(r!=null&&_(e,["googleSearchRetrieval"],r),m(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=m(i,["googleMaps"]);s!=null&&_(e,["googleMaps"],$R(s));const o=m(i,["urlContext"]);o!=null&&_(e,["urlContext"],o);const a=m(i,["computerUse"]);a!=null&&_(e,["computerUse"],a);const c=m(i,["codeExecution"]);return c!=null&&_(e,["codeExecution"],c),e}function oF(i){const e={},t=m(i,["functionDeclarations"]);if(t!=null){let d=t;Array.isArray(d)&&(d=d.map(h=>GR(h))),_(e,["functionDeclarations"],d)}const n=m(i,["retrieval"]);n!=null&&_(e,["retrieval"],n);const r=m(i,["googleSearch"]);r!=null&&_(e,["googleSearch"],r);const s=m(i,["googleSearchRetrieval"]);s!=null&&_(e,["googleSearchRetrieval"],s);const o=m(i,["enterpriseWebSearch"]);o!=null&&_(e,["enterpriseWebSearch"],o);const a=m(i,["googleMaps"]);a!=null&&_(e,["googleMaps"],a);const c=m(i,["urlContext"]);c!=null&&_(e,["urlContext"],c);const l=m(i,["computerUse"]);l!=null&&_(e,["computerUse"],l);const u=m(i,["codeExecution"]);return u!=null&&_(e,["codeExecution"],u),e}function aF(i){const e={},t=m(i,["promptTokenCount"]);t!=null&&_(e,["promptTokenCount"],t);const n=m(i,["cachedContentTokenCount"]);n!=null&&_(e,["cachedContentTokenCount"],n);const r=m(i,["candidatesTokenCount"]);r!=null&&_(e,["responseTokenCount"],r);const s=m(i,["toolUsePromptTokenCount"]);s!=null&&_(e,["toolUsePromptTokenCount"],s);const o=m(i,["thoughtsTokenCount"]);o!=null&&_(e,["thoughtsTokenCount"],o);const a=m(i,["totalTokenCount"]);a!=null&&_(e,["totalTokenCount"],a);const c=m(i,["promptTokensDetails"]);if(c!=null){let f=c;Array.isArray(f)&&(f=f.map(b=>b)),_(e,["promptTokensDetails"],f)}const l=m(i,["cacheTokensDetails"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(b=>b)),_(e,["cacheTokensDetails"],f)}const u=m(i,["candidatesTokensDetails"]);if(u!=null){let f=u;Array.isArray(f)&&(f=f.map(b=>b)),_(e,["responseTokensDetails"],f)}const d=m(i,["toolUsePromptTokensDetails"]);if(d!=null){let f=d;Array.isArray(f)&&(f=f.map(b=>b)),_(e,["toolUsePromptTokensDetails"],f)}const h=m(i,["trafficType"]);return h!=null&&_(e,["trafficType"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cF(i){const e={};if(m(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=m(i,["data"]);t!=null&&_(e,["data"],t);const n=m(i,["mimeType"]);return n!=null&&_(e,["mimeType"],n),e}function lF(i){const e={},t=m(i,["content"]);t!=null&&_(e,["content"],t);const n=m(i,["citationMetadata"]);n!=null&&_(e,["citationMetadata"],uF(n));const r=m(i,["tokenCount"]);r!=null&&_(e,["tokenCount"],r);const s=m(i,["finishReason"]);s!=null&&_(e,["finishReason"],s);const o=m(i,["urlContextMetadata"]);o!=null&&_(e,["urlContextMetadata"],o);const a=m(i,["avgLogprobs"]);a!=null&&_(e,["avgLogprobs"],a);const c=m(i,["groundingMetadata"]);c!=null&&_(e,["groundingMetadata"],c);const l=m(i,["index"]);l!=null&&_(e,["index"],l);const u=m(i,["logprobsResult"]);u!=null&&_(e,["logprobsResult"],u);const d=m(i,["safetyRatings"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(f=>f)),_(e,["safetyRatings"],h)}return e}function uF(i){const e={},t=m(i,["citationSources"]);if(t!=null){let n=t;Array.isArray(n)&&(n=n.map(r=>r)),_(e,["citations"],n)}return e}function dF(i,e){const t={},n=m(e,["model"]);n!=null&&_(t,["_url","model"],je(i,n));const r=m(e,["contents"]);if(r!=null){let s=On(r);Array.isArray(s)&&(s=s.map(o=>o)),_(t,["contents"],s)}return t}function hF(i){const e={},t=m(i,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const n=m(i,["tokensInfo"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),_(e,["tokensInfo"],r)}return e}function fF(i){const e={},t=m(i,["values"]);t!=null&&_(e,["values"],t);const n=m(i,["statistics"]);return n!=null&&_(e,["statistics"],pF(n)),e}function pF(i){const e={},t=m(i,["truncated"]);t!=null&&_(e,["truncated"],t);const n=m(i,["token_count"]);return n!=null&&_(e,["tokenCount"],n),e}function Rf(i){const e={},t=m(i,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(s=>vN(s))),_(e,["parts"],r)}const n=m(i,["role"]);return n!=null&&_(e,["role"],n),e}function gF(i){const e={},t=m(i,["controlType"]);t!=null&&_(e,["controlType"],t);const n=m(i,["enableControlImageComputation"]);return n!=null&&_(e,["computeControl"],n),e}function mF(i){const e={};if(m(i,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(m(i,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(m(i,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function yF(i,e){const t={},n=m(i,["systemInstruction"]);e!==void 0&&n!=null&&_(e,["systemInstruction"],Vt(n));const r=m(i,["tools"]);if(e!==void 0&&r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>YT(a))),_(e,["tools"],o)}const s=m(i,["generationConfig"]);return e!==void 0&&s!=null&&_(e,["generationConfig"],oN(s)),t}function bF(i,e){const t={},n=m(e,["model"]);n!=null&&_(t,["_url","model"],je(i,n));const r=m(e,["contents"]);if(r!=null){let o=On(r);Array.isArray(o)&&(o=o.map(a=>Rf(a))),_(t,["contents"],o)}const s=m(e,["config"]);return s!=null&&mF(s),t}function vF(i,e){const t={},n=m(e,["model"]);n!=null&&_(t,["_url","model"],je(i,n));const r=m(e,["contents"]);if(r!=null){let o=On(r);Array.isArray(o)&&(o=o.map(a=>a)),_(t,["contents"],o)}const s=m(e,["config"]);return s!=null&&yF(s,t),t}function xF(i){const e={},t=m(i,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const n=m(i,["totalTokens"]);n!=null&&_(e,["totalTokens"],n);const r=m(i,["cachedContentTokenCount"]);return r!=null&&_(e,["cachedContentTokenCount"],r),e}function _F(i){const e={},t=m(i,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const n=m(i,["totalTokens"]);return n!=null&&_(e,["totalTokens"],n),e}function DF(i,e){const t={},n=m(e,["model"]);return n!=null&&_(t,["_url","name"],je(i,n)),t}function TF(i,e){const t={},n=m(e,["model"]);return n!=null&&_(t,["_url","name"],je(i,n)),t}function AF(i){const e={},t=m(i,["sdkHttpResponse"]);return t!=null&&_(e,["sdkHttpResponse"],t),e}function EF(i){const e={},t=m(i,["sdkHttpResponse"]);return t!=null&&_(e,["sdkHttpResponse"],t),e}function wF(i,e){const t={},n=m(i,["outputGcsUri"]);e!==void 0&&n!=null&&_(e,["parameters","storageUri"],n);const r=m(i,["negativePrompt"]);e!==void 0&&r!=null&&_(e,["parameters","negativePrompt"],r);const s=m(i,["numberOfImages"]);e!==void 0&&s!=null&&_(e,["parameters","sampleCount"],s);const o=m(i,["aspectRatio"]);e!==void 0&&o!=null&&_(e,["parameters","aspectRatio"],o);const a=m(i,["guidanceScale"]);e!==void 0&&a!=null&&_(e,["parameters","guidanceScale"],a);const c=m(i,["seed"]);e!==void 0&&c!=null&&_(e,["parameters","seed"],c);const l=m(i,["safetyFilterLevel"]);e!==void 0&&l!=null&&_(e,["parameters","safetySetting"],l);const u=m(i,["personGeneration"]);e!==void 0&&u!=null&&_(e,["parameters","personGeneration"],u);const d=m(i,["includeSafetyAttributes"]);e!==void 0&&d!=null&&_(e,["parameters","includeSafetyAttributes"],d);const h=m(i,["includeRaiReason"]);e!==void 0&&h!=null&&_(e,["parameters","includeRaiReason"],h);const f=m(i,["language"]);e!==void 0&&f!=null&&_(e,["parameters","language"],f);const b=m(i,["outputMimeType"]);e!==void 0&&b!=null&&_(e,["parameters","outputOptions","mimeType"],b);const g=m(i,["outputCompressionQuality"]);e!==void 0&&g!=null&&_(e,["parameters","outputOptions","compressionQuality"],g);const y=m(i,["addWatermark"]);e!==void 0&&y!=null&&_(e,["parameters","addWatermark"],y);const v=m(i,["labels"]);e!==void 0&&v!=null&&_(e,["labels"],v);const x=m(i,["editMode"]);e!==void 0&&x!=null&&_(e,["parameters","editMode"],x);const D=m(i,["baseSteps"]);return e!==void 0&&D!=null&&_(e,["parameters","editConfig","baseSteps"],D),t}function CF(i,e){const t={},n=m(e,["model"]);n!=null&&_(t,["_url","model"],je(i,n));const r=m(e,["prompt"]);r!=null&&_(t,["instances[0]","prompt"],r);const s=m(e,["referenceImages"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>EN(c))),_(t,["instances[0]","referenceImages"],a)}const o=m(e,["config"]);return o!=null&&wF(o,t),t}function SF(i){const e={},t=m(i,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const n=m(i,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Ff(s))),_(e,["generatedImages"],r)}return e}function UF(i,e){const t={},n=m(i,["taskType"]);e!==void 0&&n!=null&&_(e,["requests[]","taskType"],n);const r=m(i,["title"]);e!==void 0&&r!=null&&_(e,["requests[]","title"],r);const s=m(i,["outputDimensionality"]);if(e!==void 0&&s!=null&&_(e,["requests[]","outputDimensionality"],s),m(i,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(i,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function IF(i,e){const t={},n=m(i,["taskType"]);e!==void 0&&n!=null&&_(e,["instances[]","task_type"],n);const r=m(i,["title"]);e!==void 0&&r!=null&&_(e,["instances[]","title"],r);const s=m(i,["outputDimensionality"]);e!==void 0&&s!=null&&_(e,["parameters","outputDimensionality"],s);const o=m(i,["mimeType"]);e!==void 0&&o!=null&&_(e,["instances[]","mimeType"],o);const a=m(i,["autoTruncate"]);return e!==void 0&&a!=null&&_(e,["parameters","autoTruncate"],a),t}function RF(i,e){const t={},n=m(e,["model"]);n!=null&&_(t,["_url","model"],je(i,n));const r=m(e,["contents"]);if(r!=null){let a=Qy(i,r);Array.isArray(a)&&(a=a.map(c=>c)),_(t,["requests[]","content"],a)}const s=m(e,["config"]);s!=null&&UF(s,t);const o=m(e,["model"]);return o!==void 0&&_(t,["requests[]","model"],je(i,o)),t}function FF(i,e){const t={},n=m(e,["model"]);n!=null&&_(t,["_url","model"],je(i,n));const r=m(e,["contents"]);if(r!=null){let o=Qy(i,r);Array.isArray(o)&&(o=o.map(a=>a)),_(t,["instances[]","content"],o)}const s=m(e,["config"]);return s!=null&&IF(s,t),t}function NF(i){const e={},t=m(i,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const n=m(i,["embeddings"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>o)),_(e,["embeddings"],s)}const r=m(i,["metadata"]);return r!=null&&_(e,["metadata"],r),e}function kF(i){const e={},t=m(i,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const n=m(i,["predictions[]","embeddings"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>fF(o))),_(e,["embeddings"],s)}const r=m(i,["metadata"]);return r!=null&&_(e,["metadata"],r),e}function MF(i){const e={},t=m(i,["endpoint"]);t!=null&&_(e,["name"],t);const n=m(i,["deployedModelId"]);return n!=null&&_(e,["deployedModelId"],n),e}function PF(i){const e={};if(m(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=m(i,["fileUri"]);t!=null&&_(e,["fileUri"],t);const n=m(i,["mimeType"]);return n!=null&&_(e,["mimeType"],n),e}function LF(i){const e={};if(m(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=m(i,["description"]);t!=null&&_(e,["description"],t);const n=m(i,["name"]);n!=null&&_(e,["name"],n);const r=m(i,["parameters"]);r!=null&&_(e,["parameters"],r);const s=m(i,["parametersJsonSchema"]);s!=null&&_(e,["parametersJsonSchema"],s);const o=m(i,["response"]);o!=null&&_(e,["response"],o);const a=m(i,["responseJsonSchema"]);return a!=null&&_(e,["responseJsonSchema"],a),e}function BF(i,e,t){const n={},r=m(e,["systemInstruction"]);t!==void 0&&r!=null&&_(t,["systemInstruction"],Rf(Vt(r)));const s=m(e,["temperature"]);s!=null&&_(n,["temperature"],s);const o=m(e,["topP"]);o!=null&&_(n,["topP"],o);const a=m(e,["topK"]);a!=null&&_(n,["topK"],a);const c=m(e,["candidateCount"]);c!=null&&_(n,["candidateCount"],c);const l=m(e,["maxOutputTokens"]);l!=null&&_(n,["maxOutputTokens"],l);const u=m(e,["stopSequences"]);u!=null&&_(n,["stopSequences"],u);const d=m(e,["responseLogprobs"]);d!=null&&_(n,["responseLogprobs"],d);const h=m(e,["logprobs"]);h!=null&&_(n,["logprobs"],h);const f=m(e,["presencePenalty"]);f!=null&&_(n,["presencePenalty"],f);const b=m(e,["frequencyPenalty"]);b!=null&&_(n,["frequencyPenalty"],b);const g=m(e,["seed"]);g!=null&&_(n,["seed"],g);const y=m(e,["responseMimeType"]);y!=null&&_(n,["responseMimeType"],y);const v=m(e,["responseSchema"]);v!=null&&_(n,["responseSchema"],e0(v));const x=m(e,["responseJsonSchema"]);if(x!=null&&_(n,["responseJsonSchema"],x),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const D=m(e,["safetySettings"]);if(t!==void 0&&D!=null){let U=D;Array.isArray(U)&&(U=U.map(B=>wN(B))),_(t,["safetySettings"],U)}const A=m(e,["tools"]);if(t!==void 0&&A!=null){let U=Qa(A);Array.isArray(U)&&(U=U.map(B=>FN(Za(B)))),_(t,["tools"],U)}const T=m(e,["toolConfig"]);if(t!==void 0&&T!=null&&_(t,["toolConfig"],T),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const E=m(e,["cachedContent"]);t!==void 0&&E!=null&&_(t,["cachedContent"],mr(i,E));const I=m(e,["responseModalities"]);I!=null&&_(n,["responseModalities"],I);const N=m(e,["mediaResolution"]);N!=null&&_(n,["mediaResolution"],N);const R=m(e,["speechConfig"]);if(R!=null&&_(n,["speechConfig"],t0(R)),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=m(e,["thinkingConfig"]);P!=null&&_(n,["thinkingConfig"],P);const j=m(e,["imageConfig"]);return j!=null&&_(n,["imageConfig"],j),n}function OF(i,e,t){const n={},r=m(e,["systemInstruction"]);t!==void 0&&r!=null&&_(t,["systemInstruction"],Vt(r));const s=m(e,["temperature"]);s!=null&&_(n,["temperature"],s);const o=m(e,["topP"]);o!=null&&_(n,["topP"],o);const a=m(e,["topK"]);a!=null&&_(n,["topK"],a);const c=m(e,["candidateCount"]);c!=null&&_(n,["candidateCount"],c);const l=m(e,["maxOutputTokens"]);l!=null&&_(n,["maxOutputTokens"],l);const u=m(e,["stopSequences"]);u!=null&&_(n,["stopSequences"],u);const d=m(e,["responseLogprobs"]);d!=null&&_(n,["responseLogprobs"],d);const h=m(e,["logprobs"]);h!=null&&_(n,["logprobs"],h);const f=m(e,["presencePenalty"]);f!=null&&_(n,["presencePenalty"],f);const b=m(e,["frequencyPenalty"]);b!=null&&_(n,["frequencyPenalty"],b);const g=m(e,["seed"]);g!=null&&_(n,["seed"],g);const y=m(e,["responseMimeType"]);y!=null&&_(n,["responseMimeType"],y);const v=m(e,["responseSchema"]);v!=null&&_(n,["responseSchema"],e0(v));const x=m(e,["responseJsonSchema"]);x!=null&&_(n,["responseJsonSchema"],x);const D=m(e,["routingConfig"]);D!=null&&_(n,["routingConfig"],D);const A=m(e,["modelSelectionConfig"]);A!=null&&_(n,["modelConfig"],A);const T=m(e,["safetySettings"]);if(t!==void 0&&T!=null){let q=T;Array.isArray(q)&&(q=q.map(O=>O)),_(t,["safetySettings"],q)}const E=m(e,["tools"]);if(t!==void 0&&E!=null){let q=Qa(E);Array.isArray(q)&&(q=q.map(O=>YT(Za(O)))),_(t,["tools"],q)}const I=m(e,["toolConfig"]);t!==void 0&&I!=null&&_(t,["toolConfig"],I);const N=m(e,["labels"]);t!==void 0&&N!=null&&_(t,["labels"],N);const R=m(e,["cachedContent"]);t!==void 0&&R!=null&&_(t,["cachedContent"],mr(i,R));const P=m(e,["responseModalities"]);P!=null&&_(n,["responseModalities"],P);const j=m(e,["mediaResolution"]);j!=null&&_(n,["mediaResolution"],j);const U=m(e,["speechConfig"]);U!=null&&_(n,["speechConfig"],jT(t0(U)));const B=m(e,["audioTimestamp"]);B!=null&&_(n,["audioTimestamp"],B);const S=m(e,["thinkingConfig"]);S!=null&&_(n,["thinkingConfig"],S);const J=m(e,["imageConfig"]);return J!=null&&_(n,["imageConfig"],J),n}function C1(i,e){const t={},n=m(e,["model"]);n!=null&&_(t,["_url","model"],je(i,n));const r=m(e,["contents"]);if(r!=null){let o=On(r);Array.isArray(o)&&(o=o.map(a=>Rf(a))),_(t,["contents"],o)}const s=m(e,["config"]);return s!=null&&_(t,["generationConfig"],BF(i,s,t)),t}function S1(i,e){const t={},n=m(e,["model"]);n!=null&&_(t,["_url","model"],je(i,n));const r=m(e,["contents"]);if(r!=null){let o=On(r);Array.isArray(o)&&(o=o.map(a=>a)),_(t,["contents"],o)}const s=m(e,["config"]);return s!=null&&_(t,["generationConfig"],OF(i,s,t)),t}function U1(i){const e={},t=m(i,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const n=m(i,["candidates"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(l=>lF(l))),_(e,["candidates"],c)}const r=m(i,["modelVersion"]);r!=null&&_(e,["modelVersion"],r);const s=m(i,["promptFeedback"]);s!=null&&_(e,["promptFeedback"],s);const o=m(i,["responseId"]);o!=null&&_(e,["responseId"],o);const a=m(i,["usageMetadata"]);return a!=null&&_(e,["usageMetadata"],a),e}function I1(i){const e={},t=m(i,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const n=m(i,["candidates"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>u)),_(e,["candidates"],l)}const r=m(i,["createTime"]);r!=null&&_(e,["createTime"],r);const s=m(i,["modelVersion"]);s!=null&&_(e,["modelVersion"],s);const o=m(i,["promptFeedback"]);o!=null&&_(e,["promptFeedback"],o);const a=m(i,["responseId"]);a!=null&&_(e,["responseId"],a);const c=m(i,["usageMetadata"]);return c!=null&&_(e,["usageMetadata"],c),e}function WF(i,e){const t={};if(m(i,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(i,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const n=m(i,["numberOfImages"]);e!==void 0&&n!=null&&_(e,["parameters","sampleCount"],n);const r=m(i,["aspectRatio"]);e!==void 0&&r!=null&&_(e,["parameters","aspectRatio"],r);const s=m(i,["guidanceScale"]);if(e!==void 0&&s!=null&&_(e,["parameters","guidanceScale"],s),m(i,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=m(i,["safetyFilterLevel"]);e!==void 0&&o!=null&&_(e,["parameters","safetySetting"],o);const a=m(i,["personGeneration"]);e!==void 0&&a!=null&&_(e,["parameters","personGeneration"],a);const c=m(i,["includeSafetyAttributes"]);e!==void 0&&c!=null&&_(e,["parameters","includeSafetyAttributes"],c);const l=m(i,["includeRaiReason"]);e!==void 0&&l!=null&&_(e,["parameters","includeRaiReason"],l);const u=m(i,["language"]);e!==void 0&&u!=null&&_(e,["parameters","language"],u);const d=m(i,["outputMimeType"]);e!==void 0&&d!=null&&_(e,["parameters","outputOptions","mimeType"],d);const h=m(i,["outputCompressionQuality"]);if(e!==void 0&&h!=null&&_(e,["parameters","outputOptions","compressionQuality"],h),m(i,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(m(i,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const f=m(i,["imageSize"]);if(e!==void 0&&f!=null&&_(e,["parameters","sampleImageSize"],f),m(i,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function qF(i,e){const t={},n=m(i,["outputGcsUri"]);e!==void 0&&n!=null&&_(e,["parameters","storageUri"],n);const r=m(i,["negativePrompt"]);e!==void 0&&r!=null&&_(e,["parameters","negativePrompt"],r);const s=m(i,["numberOfImages"]);e!==void 0&&s!=null&&_(e,["parameters","sampleCount"],s);const o=m(i,["aspectRatio"]);e!==void 0&&o!=null&&_(e,["parameters","aspectRatio"],o);const a=m(i,["guidanceScale"]);e!==void 0&&a!=null&&_(e,["parameters","guidanceScale"],a);const c=m(i,["seed"]);e!==void 0&&c!=null&&_(e,["parameters","seed"],c);const l=m(i,["safetyFilterLevel"]);e!==void 0&&l!=null&&_(e,["parameters","safetySetting"],l);const u=m(i,["personGeneration"]);e!==void 0&&u!=null&&_(e,["parameters","personGeneration"],u);const d=m(i,["includeSafetyAttributes"]);e!==void 0&&d!=null&&_(e,["parameters","includeSafetyAttributes"],d);const h=m(i,["includeRaiReason"]);e!==void 0&&h!=null&&_(e,["parameters","includeRaiReason"],h);const f=m(i,["language"]);e!==void 0&&f!=null&&_(e,["parameters","language"],f);const b=m(i,["outputMimeType"]);e!==void 0&&b!=null&&_(e,["parameters","outputOptions","mimeType"],b);const g=m(i,["outputCompressionQuality"]);e!==void 0&&g!=null&&_(e,["parameters","outputOptions","compressionQuality"],g);const y=m(i,["addWatermark"]);e!==void 0&&y!=null&&_(e,["parameters","addWatermark"],y);const v=m(i,["labels"]);e!==void 0&&v!=null&&_(e,["labels"],v);const x=m(i,["imageSize"]);e!==void 0&&x!=null&&_(e,["parameters","sampleImageSize"],x);const D=m(i,["enhancePrompt"]);return e!==void 0&&D!=null&&_(e,["parameters","enhancePrompt"],D),t}function HF(i,e){const t={},n=m(e,["model"]);n!=null&&_(t,["_url","model"],je(i,n));const r=m(e,["prompt"]);r!=null&&_(t,["instances[0]","prompt"],r);const s=m(e,["config"]);return s!=null&&WF(s,t),t}function VF(i,e){const t={},n=m(e,["model"]);n!=null&&_(t,["_url","model"],je(i,n));const r=m(e,["prompt"]);r!=null&&_(t,["instances[0]","prompt"],r);const s=m(e,["config"]);return s!=null&&qF(s,t),t}function GF(i){const e={},t=m(i,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const n=m(i,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>nN(o))),_(e,["generatedImages"],s)}const r=m(i,["positivePromptSafetyAttributes"]);return r!=null&&_(e,["positivePromptSafetyAttributes"],$T(r)),e}function zF(i){const e={},t=m(i,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const n=m(i,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>Ff(o))),_(e,["generatedImages"],s)}const r=m(i,["positivePromptSafetyAttributes"]);return r!=null&&_(e,["positivePromptSafetyAttributes"],XT(r)),e}function $F(i,e){const t={},n=m(i,["numberOfVideos"]);if(e!==void 0&&n!=null&&_(e,["parameters","sampleCount"],n),m(i,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(i,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=m(i,["durationSeconds"]);if(e!==void 0&&r!=null&&_(e,["parameters","durationSeconds"],r),m(i,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=m(i,["aspectRatio"]);e!==void 0&&s!=null&&_(e,["parameters","aspectRatio"],s);const o=m(i,["resolution"]);e!==void 0&&o!=null&&_(e,["parameters","resolution"],o);const a=m(i,["personGeneration"]);if(e!==void 0&&a!=null&&_(e,["parameters","personGeneration"],a),m(i,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=m(i,["negativePrompt"]);e!==void 0&&c!=null&&_(e,["parameters","negativePrompt"],c);const l=m(i,["enhancePrompt"]);if(e!==void 0&&l!=null&&_(e,["parameters","enhancePrompt"],l),m(i,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const u=m(i,["lastFrame"]);e!==void 0&&u!=null&&_(e,["instances[0]","lastFrame"],Nf(u));const d=m(i,["referenceImages"]);if(e!==void 0&&d!=null){let h=d;Array.isArray(h)&&(h=h.map(f=>zN(f))),_(e,["instances[0]","referenceImages"],h)}if(m(i,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(m(i,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function XF(i,e){const t={},n=m(i,["numberOfVideos"]);e!==void 0&&n!=null&&_(e,["parameters","sampleCount"],n);const r=m(i,["outputGcsUri"]);e!==void 0&&r!=null&&_(e,["parameters","storageUri"],r);const s=m(i,["fps"]);e!==void 0&&s!=null&&_(e,["parameters","fps"],s);const o=m(i,["durationSeconds"]);e!==void 0&&o!=null&&_(e,["parameters","durationSeconds"],o);const a=m(i,["seed"]);e!==void 0&&a!=null&&_(e,["parameters","seed"],a);const c=m(i,["aspectRatio"]);e!==void 0&&c!=null&&_(e,["parameters","aspectRatio"],c);const l=m(i,["resolution"]);e!==void 0&&l!=null&&_(e,["parameters","resolution"],l);const u=m(i,["personGeneration"]);e!==void 0&&u!=null&&_(e,["parameters","personGeneration"],u);const d=m(i,["pubsubTopic"]);e!==void 0&&d!=null&&_(e,["parameters","pubsubTopic"],d);const h=m(i,["negativePrompt"]);e!==void 0&&h!=null&&_(e,["parameters","negativePrompt"],h);const f=m(i,["enhancePrompt"]);e!==void 0&&f!=null&&_(e,["parameters","enhancePrompt"],f);const b=m(i,["generateAudio"]);e!==void 0&&b!=null&&_(e,["parameters","generateAudio"],b);const g=m(i,["lastFrame"]);e!==void 0&&g!=null&&_(e,["instances[0]","lastFrame"],ri(g));const y=m(i,["referenceImages"]);if(e!==void 0&&y!=null){let D=y;Array.isArray(D)&&(D=D.map(A=>$N(A))),_(e,["instances[0]","referenceImages"],D)}const v=m(i,["mask"]);e!==void 0&&v!=null&&_(e,["instances[0]","mask"],GN(v));const x=m(i,["compressionQuality"]);return e!==void 0&&x!=null&&_(e,["parameters","compressionQuality"],x),t}function jF(i){const e={},t=m(i,["name"]);t!=null&&_(e,["name"],t);const n=m(i,["metadata"]);n!=null&&_(e,["metadata"],n);const r=m(i,["done"]);r!=null&&_(e,["done"],r);const s=m(i,["error"]);s!=null&&_(e,["error"],s);const o=m(i,["response","generateVideoResponse"]);return o!=null&&_(e,["response"],ZF(o)),e}function YF(i){const e={},t=m(i,["name"]);t!=null&&_(e,["name"],t);const n=m(i,["metadata"]);n!=null&&_(e,["metadata"],n);const r=m(i,["done"]);r!=null&&_(e,["done"],r);const s=m(i,["error"]);s!=null&&_(e,["error"],s);const o=m(i,["response"]);return o!=null&&_(e,["response"],QF(o)),e}function JF(i,e){const t={},n=m(e,["model"]);n!=null&&_(t,["_url","model"],je(i,n));const r=m(e,["prompt"]);r!=null&&_(t,["instances[0]","prompt"],r);const s=m(e,["image"]);s!=null&&_(t,["instances[0]","image"],Nf(s));const o=m(e,["video"]);o!=null&&_(t,["instances[0]","video"],JT(o));const a=m(e,["source"]);a!=null&&eN(a,t);const c=m(e,["config"]);return c!=null&&$F(c,t),t}function KF(i,e){const t={},n=m(e,["model"]);n!=null&&_(t,["_url","model"],je(i,n));const r=m(e,["prompt"]);r!=null&&_(t,["instances[0]","prompt"],r);const s=m(e,["image"]);s!=null&&_(t,["instances[0]","image"],ri(s));const o=m(e,["video"]);o!=null&&_(t,["instances[0]","video"],KT(o));const a=m(e,["source"]);a!=null&&tN(a,t);const c=m(e,["config"]);return c!=null&&XF(c,t),t}function ZF(i){const e={},t=m(i,["generatedSamples"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>rN(o))),_(e,["generatedVideos"],s)}const n=m(i,["raiMediaFilteredCount"]);n!=null&&_(e,["raiMediaFilteredCount"],n);const r=m(i,["raiMediaFilteredReasons"]);return r!=null&&_(e,["raiMediaFilteredReasons"],r),e}function QF(i){const e={},t=m(i,["videos"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>sN(o))),_(e,["generatedVideos"],s)}const n=m(i,["raiMediaFilteredCount"]);n!=null&&_(e,["raiMediaFilteredCount"],n);const r=m(i,["raiMediaFilteredReasons"]);return r!=null&&_(e,["raiMediaFilteredReasons"],r),e}function eN(i,e){const t={},n=m(i,["prompt"]);e!==void 0&&n!=null&&_(e,["instances[0]","prompt"],n);const r=m(i,["image"]);e!==void 0&&r!=null&&_(e,["instances[0]","image"],Nf(r));const s=m(i,["video"]);return e!==void 0&&s!=null&&_(e,["instances[0]","video"],JT(s)),t}function tN(i,e){const t={},n=m(i,["prompt"]);e!==void 0&&n!=null&&_(e,["instances[0]","prompt"],n);const r=m(i,["image"]);e!==void 0&&r!=null&&_(e,["instances[0]","image"],ri(r));const s=m(i,["video"]);return e!==void 0&&s!=null&&_(e,["instances[0]","video"],KT(s)),t}function nN(i){const e={},t=m(i,["_self"]);t!=null&&_(e,["image"],dN(t));const n=m(i,["raiFilteredReason"]);n!=null&&_(e,["raiFilteredReason"],n);const r=m(i,["_self"]);return r!=null&&_(e,["safetyAttributes"],$T(r)),e}function Ff(i){const e={},t=m(i,["_self"]);t!=null&&_(e,["image"],zT(t));const n=m(i,["raiFilteredReason"]);n!=null&&_(e,["raiFilteredReason"],n);const r=m(i,["_self"]);r!=null&&_(e,["safetyAttributes"],XT(r));const s=m(i,["prompt"]);return s!=null&&_(e,["enhancedPrompt"],s),e}function iN(i){const e={},t=m(i,["_self"]);t!=null&&_(e,["mask"],zT(t));const n=m(i,["labels"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),_(e,["labels"],r)}return e}function rN(i){const e={},t=m(i,["video"]);return t!=null&&_(e,["video"],HN(t)),e}function sN(i){const e={},t=m(i,["_self"]);return t!=null&&_(e,["video"],VN(t)),e}function oN(i){const e={},t=m(i,["modelSelectionConfig"]);t!=null&&_(e,["modelConfig"],t);const n=m(i,["audioTimestamp"]);n!=null&&_(e,["audioTimestamp"],n);const r=m(i,["candidateCount"]);r!=null&&_(e,["candidateCount"],r);const s=m(i,["enableAffectiveDialog"]);s!=null&&_(e,["enableAffectiveDialog"],s);const o=m(i,["frequencyPenalty"]);o!=null&&_(e,["frequencyPenalty"],o);const a=m(i,["logprobs"]);a!=null&&_(e,["logprobs"],a);const c=m(i,["maxOutputTokens"]);c!=null&&_(e,["maxOutputTokens"],c);const l=m(i,["mediaResolution"]);l!=null&&_(e,["mediaResolution"],l);const u=m(i,["presencePenalty"]);u!=null&&_(e,["presencePenalty"],u);const d=m(i,["responseJsonSchema"]);d!=null&&_(e,["responseJsonSchema"],d);const h=m(i,["responseLogprobs"]);h!=null&&_(e,["responseLogprobs"],h);const f=m(i,["responseMimeType"]);f!=null&&_(e,["responseMimeType"],f);const b=m(i,["responseModalities"]);b!=null&&_(e,["responseModalities"],b);const g=m(i,["responseSchema"]);g!=null&&_(e,["responseSchema"],g);const y=m(i,["routingConfig"]);y!=null&&_(e,["routingConfig"],y);const v=m(i,["seed"]);v!=null&&_(e,["seed"],v);const x=m(i,["speechConfig"]);x!=null&&_(e,["speechConfig"],jT(x));const D=m(i,["stopSequences"]);D!=null&&_(e,["stopSequences"],D);const A=m(i,["temperature"]);A!=null&&_(e,["temperature"],A);const T=m(i,["thinkingConfig"]);T!=null&&_(e,["thinkingConfig"],T);const E=m(i,["topK"]);E!=null&&_(e,["topK"],E);const I=m(i,["topP"]);if(I!=null&&_(e,["topP"],I),m(i,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function aN(i,e){const t={},n=m(e,["model"]);return n!=null&&_(t,["_url","name"],je(i,n)),t}function cN(i,e){const t={},n=m(e,["model"]);return n!=null&&_(t,["_url","name"],je(i,n)),t}function lN(i){const e={};if(m(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=m(i,["enableWidget"]);return t!=null&&_(e,["enableWidget"],t),e}function uN(i){const e={},t=m(i,["timeRangeFilter"]);if(t!=null&&_(e,["timeRangeFilter"],t),m(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function dN(i){const e={},t=m(i,["bytesBase64Encoded"]);t!=null&&_(e,["imageBytes"],is(t));const n=m(i,["mimeType"]);return n!=null&&_(e,["mimeType"],n),e}function zT(i){const e={},t=m(i,["gcsUri"]);t!=null&&_(e,["gcsUri"],t);const n=m(i,["bytesBase64Encoded"]);n!=null&&_(e,["imageBytes"],is(n));const r=m(i,["mimeType"]);return r!=null&&_(e,["mimeType"],r),e}function Nf(i){const e={};if(m(i,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=m(i,["imageBytes"]);t!=null&&_(e,["bytesBase64Encoded"],is(t));const n=m(i,["mimeType"]);return n!=null&&_(e,["mimeType"],n),e}function ri(i){const e={},t=m(i,["gcsUri"]);t!=null&&_(e,["gcsUri"],t);const n=m(i,["imageBytes"]);n!=null&&_(e,["bytesBase64Encoded"],is(n));const r=m(i,["mimeType"]);return r!=null&&_(e,["mimeType"],r),e}function hN(i,e,t){const n={},r=m(e,["pageSize"]);t!==void 0&&r!=null&&_(t,["_query","pageSize"],r);const s=m(e,["pageToken"]);t!==void 0&&s!=null&&_(t,["_query","pageToken"],s);const o=m(e,["filter"]);t!==void 0&&o!=null&&_(t,["_query","filter"],o);const a=m(e,["queryBase"]);return t!==void 0&&a!=null&&_(t,["_url","models_url"],LT(i,a)),n}function fN(i,e,t){const n={},r=m(e,["pageSize"]);t!==void 0&&r!=null&&_(t,["_query","pageSize"],r);const s=m(e,["pageToken"]);t!==void 0&&s!=null&&_(t,["_query","pageToken"],s);const o=m(e,["filter"]);t!==void 0&&o!=null&&_(t,["_query","filter"],o);const a=m(e,["queryBase"]);return t!==void 0&&a!=null&&_(t,["_url","models_url"],LT(i,a)),n}function pN(i,e){const t={},n=m(e,["config"]);return n!=null&&hN(i,n,t),t}function gN(i,e){const t={},n=m(e,["config"]);return n!=null&&fN(i,n,t),t}function mN(i){const e={},t=m(i,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const n=m(i,["nextPageToken"]);n!=null&&_(e,["nextPageToken"],n);const r=m(i,["_self"]);if(r!=null){let s=BT(r);Array.isArray(s)&&(s=s.map(o=>$m(o))),_(e,["models"],s)}return e}function yN(i){const e={},t=m(i,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const n=m(i,["nextPageToken"]);n!=null&&_(e,["nextPageToken"],n);const r=m(i,["_self"]);if(r!=null){let s=BT(r);Array.isArray(s)&&(s=s.map(o=>Xm(o))),_(e,["models"],s)}return e}function bN(i){const e={},t=m(i,["maskMode"]);t!=null&&_(e,["maskMode"],t);const n=m(i,["segmentationClasses"]);n!=null&&_(e,["maskClasses"],n);const r=m(i,["maskDilation"]);return r!=null&&_(e,["dilation"],r),e}function $m(i){const e={},t=m(i,["name"]);t!=null&&_(e,["name"],t);const n=m(i,["displayName"]);n!=null&&_(e,["displayName"],n);const r=m(i,["description"]);r!=null&&_(e,["description"],r);const s=m(i,["version"]);s!=null&&_(e,["version"],s);const o=m(i,["_self"]);o!=null&&_(e,["tunedModelInfo"],NN(o));const a=m(i,["inputTokenLimit"]);a!=null&&_(e,["inputTokenLimit"],a);const c=m(i,["outputTokenLimit"]);c!=null&&_(e,["outputTokenLimit"],c);const l=m(i,["supportedGenerationMethods"]);return l!=null&&_(e,["supportedActions"],l),e}function Xm(i){const e={},t=m(i,["name"]);t!=null&&_(e,["name"],t);const n=m(i,["displayName"]);n!=null&&_(e,["displayName"],n);const r=m(i,["description"]);r!=null&&_(e,["description"],r);const s=m(i,["versionId"]);s!=null&&_(e,["version"],s);const o=m(i,["deployedModels"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(h=>MF(h))),_(e,["endpoints"],d)}const a=m(i,["labels"]);a!=null&&_(e,["labels"],a);const c=m(i,["_self"]);c!=null&&_(e,["tunedModelInfo"],kN(c));const l=m(i,["defaultCheckpointId"]);l!=null&&_(e,["defaultCheckpointId"],l);const u=m(i,["checkpoints"]);if(u!=null){let d=u;Array.isArray(d)&&(d=d.map(h=>h)),_(e,["checkpoints"],d)}return e}function vN(i){const e={},t=m(i,["videoMetadata"]);t!=null&&_(e,["videoMetadata"],t);const n=m(i,["thought"]);n!=null&&_(e,["thought"],n);const r=m(i,["inlineData"]);r!=null&&_(e,["inlineData"],cF(r));const s=m(i,["fileData"]);s!=null&&_(e,["fileData"],PF(s));const o=m(i,["thoughtSignature"]);o!=null&&_(e,["thoughtSignature"],o);const a=m(i,["functionCall"]);a!=null&&_(e,["functionCall"],a);const c=m(i,["codeExecutionResult"]);c!=null&&_(e,["codeExecutionResult"],c);const l=m(i,["executableCode"]);l!=null&&_(e,["executableCode"],l);const u=m(i,["functionResponse"]);u!=null&&_(e,["functionResponse"],u);const d=m(i,["text"]);return d!=null&&_(e,["text"],d),e}function xN(i){const e={},t=m(i,["productImage"]);return t!=null&&_(e,["image"],ri(t)),e}function _N(i,e){const t={},n=m(i,["numberOfImages"]);e!==void 0&&n!=null&&_(e,["parameters","sampleCount"],n);const r=m(i,["baseSteps"]);e!==void 0&&r!=null&&_(e,["parameters","editConfig","baseSteps"],r);const s=m(i,["outputGcsUri"]);e!==void 0&&s!=null&&_(e,["parameters","storageUri"],s);const o=m(i,["seed"]);e!==void 0&&o!=null&&_(e,["parameters","seed"],o);const a=m(i,["safetyFilterLevel"]);e!==void 0&&a!=null&&_(e,["parameters","safetySetting"],a);const c=m(i,["personGeneration"]);e!==void 0&&c!=null&&_(e,["parameters","personGeneration"],c);const l=m(i,["addWatermark"]);e!==void 0&&l!=null&&_(e,["parameters","addWatermark"],l);const u=m(i,["outputMimeType"]);e!==void 0&&u!=null&&_(e,["parameters","outputOptions","mimeType"],u);const d=m(i,["outputCompressionQuality"]);e!==void 0&&d!=null&&_(e,["parameters","outputOptions","compressionQuality"],d);const h=m(i,["enhancePrompt"]);e!==void 0&&h!=null&&_(e,["parameters","enhancePrompt"],h);const f=m(i,["labels"]);return e!==void 0&&f!=null&&_(e,["labels"],f),t}function DN(i,e){const t={},n=m(e,["model"]);n!=null&&_(t,["_url","model"],je(i,n));const r=m(e,["source"]);r!=null&&AN(r,t);const s=m(e,["config"]);return s!=null&&_N(s,t),t}function TN(i){const e={},t=m(i,["predictions"]);if(t!=null){let n=t;Array.isArray(n)&&(n=n.map(r=>Ff(r))),_(e,["generatedImages"],n)}return e}function AN(i,e){const t={},n=m(i,["prompt"]);e!==void 0&&n!=null&&_(e,["instances[0]","prompt"],n);const r=m(i,["personImage"]);e!==void 0&&r!=null&&_(e,["instances[0]","personImage","image"],ri(r));const s=m(i,["productImages"]);if(e!==void 0&&s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>xN(a))),_(e,["instances[0]","productImages"],o)}return t}function EN(i){const e={},t=m(i,["referenceImage"]);t!=null&&_(e,["referenceImage"],ri(t));const n=m(i,["referenceId"]);n!=null&&_(e,["referenceId"],n);const r=m(i,["referenceType"]);r!=null&&_(e,["referenceType"],r);const s=m(i,["maskImageConfig"]);s!=null&&_(e,["maskImageConfig"],bN(s));const o=m(i,["controlImageConfig"]);o!=null&&_(e,["controlImageConfig"],gF(o));const a=m(i,["styleImageConfig"]);a!=null&&_(e,["styleImageConfig"],a);const c=m(i,["subjectImageConfig"]);return c!=null&&_(e,["subjectImageConfig"],c),e}function $T(i){const e={},t=m(i,["safetyAttributes","categories"]);t!=null&&_(e,["categories"],t);const n=m(i,["safetyAttributes","scores"]);n!=null&&_(e,["scores"],n);const r=m(i,["contentType"]);return r!=null&&_(e,["contentType"],r),e}function XT(i){const e={},t=m(i,["safetyAttributes","categories"]);t!=null&&_(e,["categories"],t);const n=m(i,["safetyAttributes","scores"]);n!=null&&_(e,["scores"],n);const r=m(i,["contentType"]);return r!=null&&_(e,["contentType"],r),e}function wN(i){const e={};if(m(i,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=m(i,["category"]);t!=null&&_(e,["category"],t);const n=m(i,["threshold"]);return n!=null&&_(e,["threshold"],n),e}function CN(i){const e={},t=m(i,["image"]);return t!=null&&_(e,["image"],ri(t)),e}function SN(i,e){const t={},n=m(i,["mode"]);e!==void 0&&n!=null&&_(e,["parameters","mode"],n);const r=m(i,["maxPredictions"]);e!==void 0&&r!=null&&_(e,["parameters","maxPredictions"],r);const s=m(i,["confidenceThreshold"]);e!==void 0&&s!=null&&_(e,["parameters","confidenceThreshold"],s);const o=m(i,["maskDilation"]);e!==void 0&&o!=null&&_(e,["parameters","maskDilation"],o);const a=m(i,["binaryColorThreshold"]);e!==void 0&&a!=null&&_(e,["parameters","binaryColorThreshold"],a);const c=m(i,["labels"]);return e!==void 0&&c!=null&&_(e,["labels"],c),t}function UN(i,e){const t={},n=m(e,["model"]);n!=null&&_(t,["_url","model"],je(i,n));const r=m(e,["source"]);r!=null&&RN(r,t);const s=m(e,["config"]);return s!=null&&SN(s,t),t}function IN(i){const e={},t=m(i,["predictions"]);if(t!=null){let n=t;Array.isArray(n)&&(n=n.map(r=>iN(r))),_(e,["generatedMasks"],n)}return e}function RN(i,e){const t={},n=m(i,["prompt"]);e!==void 0&&n!=null&&_(e,["instances[0]","prompt"],n);const r=m(i,["image"]);e!==void 0&&r!=null&&_(e,["instances[0]","image"],ri(r));const s=m(i,["scribbleImage"]);return e!==void 0&&s!=null&&_(e,["instances[0]","scribble"],CN(s)),t}function jT(i){const e={},t=m(i,["voiceConfig"]);if(t!=null&&_(e,["voiceConfig"],t),m(i,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const n=m(i,["languageCode"]);return n!=null&&_(e,["languageCode"],n),e}function FN(i){const e={},t=m(i,["functionDeclarations"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>u)),_(e,["functionDeclarations"],l)}if(m(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=m(i,["googleSearch"]);n!=null&&_(e,["googleSearch"],uN(n));const r=m(i,["googleSearchRetrieval"]);if(r!=null&&_(e,["googleSearchRetrieval"],r),m(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=m(i,["googleMaps"]);s!=null&&_(e,["googleMaps"],lN(s));const o=m(i,["urlContext"]);o!=null&&_(e,["urlContext"],o);const a=m(i,["computerUse"]);a!=null&&_(e,["computerUse"],a);const c=m(i,["codeExecution"]);return c!=null&&_(e,["codeExecution"],c),e}function YT(i){const e={},t=m(i,["functionDeclarations"]);if(t!=null){let d=t;Array.isArray(d)&&(d=d.map(h=>LF(h))),_(e,["functionDeclarations"],d)}const n=m(i,["retrieval"]);n!=null&&_(e,["retrieval"],n);const r=m(i,["googleSearch"]);r!=null&&_(e,["googleSearch"],r);const s=m(i,["googleSearchRetrieval"]);s!=null&&_(e,["googleSearchRetrieval"],s);const o=m(i,["enterpriseWebSearch"]);o!=null&&_(e,["enterpriseWebSearch"],o);const a=m(i,["googleMaps"]);a!=null&&_(e,["googleMaps"],a);const c=m(i,["urlContext"]);c!=null&&_(e,["urlContext"],c);const l=m(i,["computerUse"]);l!=null&&_(e,["computerUse"],l);const u=m(i,["codeExecution"]);return u!=null&&_(e,["codeExecution"],u),e}function NN(i){const e={},t=m(i,["baseModel"]);t!=null&&_(e,["baseModel"],t);const n=m(i,["createTime"]);n!=null&&_(e,["createTime"],n);const r=m(i,["updateTime"]);return r!=null&&_(e,["updateTime"],r),e}function kN(i){const e={},t=m(i,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&_(e,["baseModel"],t);const n=m(i,["createTime"]);n!=null&&_(e,["createTime"],n);const r=m(i,["updateTime"]);return r!=null&&_(e,["updateTime"],r),e}function MN(i,e){const t={},n=m(i,["displayName"]);e!==void 0&&n!=null&&_(e,["displayName"],n);const r=m(i,["description"]);e!==void 0&&r!=null&&_(e,["description"],r);const s=m(i,["defaultCheckpointId"]);return e!==void 0&&s!=null&&_(e,["defaultCheckpointId"],s),t}function PN(i,e){const t={},n=m(i,["displayName"]);e!==void 0&&n!=null&&_(e,["displayName"],n);const r=m(i,["description"]);e!==void 0&&r!=null&&_(e,["description"],r);const s=m(i,["defaultCheckpointId"]);return e!==void 0&&s!=null&&_(e,["defaultCheckpointId"],s),t}function LN(i,e){const t={},n=m(e,["model"]);n!=null&&_(t,["_url","name"],je(i,n));const r=m(e,["config"]);return r!=null&&MN(r,t),t}function BN(i,e){const t={},n=m(e,["model"]);n!=null&&_(t,["_url","model"],je(i,n));const r=m(e,["config"]);return r!=null&&PN(r,t),t}function ON(i,e){const t={},n=m(i,["outputGcsUri"]);e!==void 0&&n!=null&&_(e,["parameters","storageUri"],n);const r=m(i,["includeRaiReason"]);e!==void 0&&r!=null&&_(e,["parameters","includeRaiReason"],r);const s=m(i,["outputMimeType"]);e!==void 0&&s!=null&&_(e,["parameters","outputOptions","mimeType"],s);const o=m(i,["outputCompressionQuality"]);e!==void 0&&o!=null&&_(e,["parameters","outputOptions","compressionQuality"],o);const a=m(i,["enhanceInputImage"]);e!==void 0&&a!=null&&_(e,["parameters","upscaleConfig","enhanceInputImage"],a);const c=m(i,["imagePreservationFactor"]);e!==void 0&&c!=null&&_(e,["parameters","upscaleConfig","imagePreservationFactor"],c);const l=m(i,["labels"]);e!==void 0&&l!=null&&_(e,["labels"],l);const u=m(i,["numberOfImages"]);e!==void 0&&u!=null&&_(e,["parameters","sampleCount"],u);const d=m(i,["mode"]);return e!==void 0&&d!=null&&_(e,["parameters","mode"],d),t}function WN(i,e){const t={},n=m(e,["model"]);n!=null&&_(t,["_url","model"],je(i,n));const r=m(e,["image"]);r!=null&&_(t,["instances[0]","image"],ri(r));const s=m(e,["upscaleFactor"]);s!=null&&_(t,["parameters","upscaleConfig","upscaleFactor"],s);const o=m(e,["config"]);return o!=null&&ON(o,t),t}function qN(i){const e={},t=m(i,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const n=m(i,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Ff(s))),_(e,["generatedImages"],r)}return e}function HN(i){const e={},t=m(i,["uri"]);t!=null&&_(e,["uri"],t);const n=m(i,["encodedVideo"]);n!=null&&_(e,["videoBytes"],is(n));const r=m(i,["encoding"]);return r!=null&&_(e,["mimeType"],r),e}function VN(i){const e={},t=m(i,["gcsUri"]);t!=null&&_(e,["uri"],t);const n=m(i,["bytesBase64Encoded"]);n!=null&&_(e,["videoBytes"],is(n));const r=m(i,["mimeType"]);return r!=null&&_(e,["mimeType"],r),e}function GN(i){const e={},t=m(i,["image"]);t!=null&&_(e,["_self"],ri(t));const n=m(i,["maskMode"]);return n!=null&&_(e,["maskMode"],n),e}function zN(i){const e={},t=m(i,["image"]);t!=null&&_(e,["image"],Nf(t));const n=m(i,["referenceType"]);return n!=null&&_(e,["referenceType"],n),e}function $N(i){const e={},t=m(i,["image"]);t!=null&&_(e,["image"],ri(t));const n=m(i,["referenceType"]);return n!=null&&_(e,["referenceType"],n),e}function JT(i){const e={},t=m(i,["uri"]);t!=null&&_(e,["uri"],t);const n=m(i,["videoBytes"]);n!=null&&_(e,["encodedVideo"],is(n));const r=m(i,["mimeType"]);return r!=null&&_(e,["encoding"],r),e}function KT(i){const e={},t=m(i,["uri"]);t!=null&&_(e,["gcsUri"],t);const n=m(i,["videoBytes"]);n!=null&&_(e,["bytesBase64Encoded"],is(n));const r=m(i,["mimeType"]);return r!=null&&_(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const XN="Content-Type",jN="X-Server-Timeout",YN="User-Agent",jm="x-goog-api-client",JN="1.27.0",KN=`google-genai-sdk/${JN}`,ZN="v1beta1",QN="v1beta",R1=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class ek{constructor(e){var t,n;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:ZN,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:QN,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const n=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&n.push(e.apiVersion),n.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,n){const r=[this.getRequestUrlInternal(t)];return n&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,n);if(e.queryParams)for(const[o,a]of Object.entries(e.queryParams))r.searchParams.append(o,String(a));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,t,r.toString(),e.abortSignal),this.unaryApiCall(r,s,e.httpMethod)}patchHttpOptions(e,t){const n=JSON.parse(JSON.stringify(e));for(const[r,s]of Object.entries(t))typeof s=="object"?n[r]=Object.assign(Object.assign({},n[r]),s):s!==void 0&&(n[r]=s);return n}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,n);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,t,r.toString(),e.abortSignal),this.streamApiCall(r,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,n,r){if(t&&t.timeout||r){const s=new AbortController,o=s.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const a=setTimeout(()=>s.abort(),t.timeout);a&&typeof a.unref=="function"&&a.unref()}r&&r.addEventListener("abort",()=>{s.abort()}),e.signal=o}return t&&t.extraBody!==null&&tk(e,t.extraBody),e.headers=await this.getHeadersInternal(t,n),e}async unaryApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async r=>(await F1(r),new Vm(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async r=>(await F1(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var t;return Xo(this,arguments,function*(){const r=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),s=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let o="";for(;;){const{done:a,value:c}=yield lt(r.read());if(a){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const l=s.decode(c,{stream:!0});try{const d=JSON.parse(l);if("error"in d){const h=JSON.parse(JSON.stringify(d.error)),f=h.status,b=h.code,g=`got status: ${f}. ${JSON.stringify(d)}`;if(b>=400&&b<600)throw new If({message:g,status:b})}}catch(d){if(d.name==="ApiError")throw d}o+=l;let u=o.match(R1);for(;u;){const d=u[1];try{const h=new Response(d,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield lt(new Vm(h)),o=o.slice(u[0].length),u=o.match(R1)}catch(h){throw new Error(`exception parsing stream chunk ${d}. ${h}`)}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(n=>{throw new Error(`exception ${n} sending request`)})}getDefaultHeaders(){const e={},t=KN+" "+this.clientOptions.userAgentExtra;return e[YN]=t,e[jm]=t,e[XN]="application/json",e}async getHeadersInternal(e,t){const n=new Headers;if(e&&e.headers){for(const[r,s]of Object.entries(e.headers))n.append(r,s);e.timeout&&e.timeout>0&&n.append(jN,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n,t),n}async uploadFile(e,t){var n;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const s=this.clientOptions.uploader,o=await s.stat(e);r.sizeBytes=String(o.size);const a=(n=t==null?void 0:t.mimeType)!==null&&n!==void 0?n:o.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=a;const c=await this.fetchUploadUrl(r,t);return s.upload(e,c,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var n;let r={};t!=null&&t.httpOptions?r=t.httpOptions:r={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const s={file:e},o=await this.request({path:Ee("upload/v1beta/files",s._url),body:JSON.stringify(s),httpMethod:"POST",httpOptions:r});if(!o||!(o!=null&&o.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const a=(n=o==null?void 0:o.headers)===null||n===void 0?void 0:n["x-goog-upload-url"];if(a===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return a}}async function F1(i){var e;if(i===void 0)throw new Error("response is undefined");if(!i.ok){const t=i.status;let n;!((e=i.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?n=await i.json():n={error:{message:await i.text(),code:i.status,status:i.statusText}};const r=JSON.stringify(n);throw t>=400&&t<600?new If({message:r,status:t}):new Error(r)}}function tk(i,e){if(!e||Object.keys(e).length===0)return;if(i.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof i.body=="string"&&i.body.length>0)try{const s=JSON.parse(i.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))t=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function n(s,o){const a=Object.assign({},s);for(const c in o)if(Object.prototype.hasOwnProperty.call(o,c)){const l=o[c],u=a[c];l&&typeof l=="object"&&!Array.isArray(l)&&u&&typeof u=="object"&&!Array.isArray(u)?a[c]=n(u,l):(u&&l&&typeof u!=typeof l&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof u}, New type: ${typeof l}. Overwriting.`),a[c]=l)}return a}const r=n(t,e);i.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nk="mcp_used/unknown";let ik=!1;function ZT(i){for(const e of i)if(rk(e)||typeof e=="object"&&"inputSchema"in e)return!0;return ik}function QT(i){var e;const t=(e=i[jm])!==null&&e!==void 0?e:"";i[jm]=(t+` ${nk}`).trimStart()}function rk(i){return i!==null&&typeof i=="object"&&i instanceof i0}function sk(i,e=100){return Xo(this,arguments,function*(){let n,r=0;for(;r<e;){const s=yield lt(i.listTools({cursor:n}));for(const o of s.tools)yield yield lt(o),r++;if(!s.nextCursor)break;n=s.nextCursor}})}class i0{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new i0(e,t)}async initialize(){var e,t,n,r;if(this.mcpTools.length>0)return;const s={},o=[];for(const u of this.mcpClients)try{for(var a=!0,c=(t=void 0,Oc(sk(u))),l;l=await c.next(),e=l.done,!e;a=!0){r=l.value,a=!1;const d=r;o.push(d);const h=d.name;if(s[h])throw new Error(`Duplicate function name ${h} found in MCP tools. Please ensure function names are unique.`);s[h]=u}}catch(d){t={error:d}}finally{try{!a&&!e&&(n=c.return)&&await n.call(c)}finally{if(t)throw t.error}}this.mcpTools=o,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),uI(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const n of e)if(n.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[n.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const o=await r.callTool({name:n.name,arguments:n.args},void 0,s);t.push({functionResponse:{name:n.name,response:o.isError?{error:o}:o}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function ok(i,e,t){const n=new nI;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data),Object.assign(n,r),e(n)}class ak{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n}async connect(e){var t,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),o=uk(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),c=`${r}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${a}`;let l=()=>{};const u=new Promise(D=>{l=D}),d=e.callbacks,h=function(){l({})},f=this.apiClient,b={onopen:h,onmessage:D=>{ok(f,d.onmessage,D)},onerror:(t=d==null?void 0:d.onerror)!==null&&t!==void 0?t:function(D){},onclose:(n=d==null?void 0:d.onclose)!==null&&n!==void 0?n:function(D){}},g=this.webSocketFactory.create(c,lk(o),b);g.connect(),await u;const x={setup:{model:je(this.apiClient,e.model)}};return g.send(JSON.stringify(x)),new ck(g,this.apiClient)}}class ck{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=QR(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=ZR(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Wo.PLAY)}pause(){this.sendPlaybackControl(Wo.PAUSE)}stop(){this.sendPlaybackControl(Wo.STOP)}resetContext(){this.sendPlaybackControl(Wo.RESET_CONTEXT)}close(){this.conn.close()}}function lk(i){const e={};return i.forEach((t,n)=>{e[n]=t}),e}function uk(i){const e=new Headers;for(const[t,n]of Object.entries(i))e.append(t,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dk="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function hk(i,e,t){const n=new tI;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const s=JSON.parse(r);if(i.isVertexAI()){const o=nF(s);Object.assign(n,o)}else Object.assign(n,s);e(n)}class fk{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n,this.music=new ak(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,n,r,s,o,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion();let u;const d=this.apiClient.getHeaders();e.config&&e.config.tools&&ZT(e.config.tools)&&QT(d);const h=yk(d);if(this.apiClient.isVertexAI())u=`${c}/ws/google.cloud.aiplatform.${l}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h,u);else{const R=this.apiClient.getApiKey();let P="BidiGenerateContent",j="key";R!=null&&R.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),l!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),P="BidiGenerateContentConstrained",j="access_token"),u=`${c}/ws/google.ai.generativelanguage.${l}.GenerativeService.${P}?${j}=${R}`}let f=()=>{};const b=new Promise(R=>{f=R}),g=e.callbacks,y=function(){var R;(R=g==null?void 0:g.onopen)===null||R===void 0||R.call(g),f({})},v=this.apiClient,x={onopen:y,onmessage:R=>{hk(v,g.onmessage,R)},onerror:(t=g==null?void 0:g.onerror)!==null&&t!==void 0?t:function(R){},onclose:(n=g==null?void 0:g.onclose)!==null&&n!==void 0?n:function(R){}},D=this.webSocketFactory.create(u,mk(h),x);D.connect(),await b;let A=je(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&A.startsWith("publishers/")){const R=this.apiClient.getProject(),P=this.apiClient.getLocation();A=`projects/${R}/locations/${P}/`+A}let T={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[gh.AUDIO]}:e.config.responseModalities=[gh.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const E=(a=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[],I=[];for(const R of E)if(this.isCallableTool(R)){const P=R;I.push(await P.tool())}else I.push(R);I.length>0&&(e.config.tools=I);const N={model:A,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?T=KR(this.apiClient,N):T=JR(this.apiClient,N),delete T.config,D.send(JSON.stringify(T)),new gk(D,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const pk={turnComplete:!0};class gk{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let n=[];try{n=On(t.turns),e.isVertexAI()||(n=n.map(r=>Rf(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:n,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let n=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?n=t.functionResponses:n=[t.functionResponses],n.length===0)throw new Error("functionResponses is required.");for(const s of n){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(dk)}return{toolResponse:{functionResponses:n}}}sendClientContent(e){e=Object.assign(Object.assign({},pk),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:tF(e)}:t={realtimeInput:eF(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function mk(i){const e={};return i.forEach((t,n)=>{e[n]=t}),e}function yk(i){const e=new Headers;for(const[t,n]of Object.entries(i))e.append(t,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const N1=10;function k1(i){var e,t,n;if(!((e=i==null?void 0:i.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const o of(t=i==null?void 0:i.tools)!==null&&t!==void 0?t:[])if(jo(o)){r=!0;break}if(!r)return!0;const s=(n=i==null?void 0:i.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function jo(i){return"callTool"in i&&typeof i.callTool=="function"}function bk(i){var e,t,n;return(n=(t=(e=i.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>jo(r)))!==null&&n!==void 0?n:!1}function vk(i){var e,t,n;return(n=(t=(e=i.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>!jo(r)))!==null&&n!==void 0?n:!1}function M1(i){var e;return!(!((e=i==null?void 0:i.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xk extends Uo{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var n,r,s,o,a;const c=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!bk(t)||k1(t.config))return await this.generateContentInternal(c);if(vk(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let l,u;const d=On(c.contents),h=(s=(r=(n=c.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&s!==void 0?s:N1;let f=0;for(;f<h&&(l=await this.generateContentInternal(c),!(!l.functionCalls||l.functionCalls.length===0));){const b=l.candidates[0].content,g=[];for(const y of(a=(o=t.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[])if(jo(y)){const x=await y.callTool(l.functionCalls);g.push(...x)}f++,u={role:"user",parts:g},c.contents=On(c.contents),c.contents.push(b),c.contents.push(u),M1(c.config)&&(d.push(b),d.push(u))}return M1(c.config)&&(l.automaticFunctionCallingHistory=d),l},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),k1(t.config)){const n=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(n)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(n=>{var r;let s;const o=[];if(n!=null&&n.generatedImages)for(const c of n.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((r=c==null?void 0:c.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?s=c==null?void 0:c.safetyAttributes:o.push(c);let a;return s?a={generatedImages:o,positivePromptSafetyAttributes:s,sdkHttpResponse:n.sdkHttpResponse}:a={generatedImages:o,sdkHttpResponse:n.sdkHttpResponse},a}),this.list=async t=>{var n;const o={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((n=o.config)===null||n===void 0)&&n.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new Ou(vo.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(o),o)},this.editImage=async t=>{const n={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(n.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(n)},this.upscaleImage=async t=>{let n={numberOfImages:1,mode:"upscale"};t.config&&(n=Object.assign(Object.assign({},n),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:n};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>{var n,r,s,o,a,c;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((n=t.video)===null||n===void 0)&&n.uri&&(!((r=t.video)===null||r===void 0)&&r.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((o=(s=t.source)===null||s===void 0?void 0:s.video)===null||o===void 0)&&o.uri&&(!((c=(a=t.source)===null||a===void 0?void 0:a.video)===null||c===void 0)&&c.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,n,r;const s=(t=e.config)===null||t===void 0?void 0:t.tools;if(!s)return e;const o=await Promise.all(s.map(async c=>jo(c)?await c.tool():c)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(a.config.tools=o,e.config&&e.config.tools&&ZT(e.config.tools)){const c=(r=(n=e.config.httpOptions)===null||n===void 0?void 0:n.headers)!==null&&r!==void 0?r:{};let l=Object.assign({},c);Object.keys(l).length===0&&(l=this.apiClient.getDefaultHeaders()),QT(l),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:l})}return a}async initAfcToolsMap(e){var t,n,r;const s=new Map;for(const o of(n=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&n!==void 0?n:[])if(jo(o)){const a=o,c=await a.tool();for(const l of(r=c.functionDeclarations)!==null&&r!==void 0?r:[]){if(!l.name)throw new Error("Function declaration name is required.");if(s.has(l.name))throw new Error(`Duplicate tool declaration name: ${l.name}`);s.set(l.name,a)}}return s}async processAfcStream(e){var t,n,r;const s=(r=(n=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls)!==null&&r!==void 0?r:N1;let o=!1,a=0;const c=await this.initAfcToolsMap(e);return(function(l,u,d){var h,f;return Xo(this,arguments,function*(){for(var b,g,y,v;a<s;){o&&(a++,o=!1);const T=yield lt(l.processParamsMaybeAddMcpUsage(d)),E=yield lt(l.generateContentStreamInternal(T)),I=[],N=[];try{for(var x=!0,D=(g=void 0,Oc(E)),A;A=yield lt(D.next()),b=A.done,!b;x=!0){v=A.value,x=!1;const R=v;if(yield yield lt(R),R.candidates&&(!((h=R.candidates[0])===null||h===void 0)&&h.content)){N.push(R.candidates[0].content);for(const P of(f=R.candidates[0].content.parts)!==null&&f!==void 0?f:[])if(a<s&&P.functionCall){if(!P.functionCall.name)throw new Error("Function call name was not returned by the model.");if(u.has(P.functionCall.name)){const j=yield lt(u.get(P.functionCall.name).callTool([P.functionCall]));I.push(...j)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${u.keys()}, mising tool: ${P.functionCall.name}`)}}}}catch(R){g={error:R}}finally{try{!x&&!b&&(y=D.return)&&(yield lt(y.call(D)))}finally{if(g)throw g.error}}if(I.length>0){o=!0;const R=new vc;R.candidates=[{content:{role:"user",parts:I}}],yield yield lt(R);const P=[];P.push(...N),P.push({role:"user",parts:I});const j=On(d.contents).concat(P);d.contents=j}else break}})})(this,c,e)}async generateContentInternal(e){var t,n,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const l=S1(this.apiClient,e);return a=Ee("{model}:generateContent",l._url),c=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:u.headers},h})),o.then(u=>{const d=I1(u),h=new vc;return Object.assign(h,d),h})}else{const l=C1(this.apiClient,e);return a=Ee("{model}:generateContent",l._url),c=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:u.headers},h})),o.then(u=>{const d=U1(u),h=new vc;return Object.assign(h,d),h})}}async generateContentStreamInternal(e){var t,n,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const l=S1(this.apiClient,e);return a=Ee("{model}:streamGenerateContent?alt=sse",l._url),c=l._query,delete l._url,delete l._query,o=this.apiClient.requestStream({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}),o.then(function(d){return Xo(this,arguments,function*(){var h,f,b,g;try{for(var y=!0,v=Oc(d),x;x=yield lt(v.next()),h=x.done,!h;y=!0){g=x.value,y=!1;const D=g,A=I1(yield lt(D.json()));A.sdkHttpResponse={headers:D.headers};const T=new vc;Object.assign(T,A),yield yield lt(T)}}catch(D){f={error:D}}finally{try{!y&&!h&&(b=v.return)&&(yield lt(b.call(v)))}finally{if(f)throw f.error}}})})}else{const l=C1(this.apiClient,e);return a=Ee("{model}:streamGenerateContent?alt=sse",l._url),c=l._query,delete l._url,delete l._query,o=this.apiClient.requestStream({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),o.then(function(d){return Xo(this,arguments,function*(){var h,f,b,g;try{for(var y=!0,v=Oc(d),x;x=yield lt(v.next()),h=x.done,!h;y=!0){g=x.value,y=!1;const D=g,A=U1(yield lt(D.json()));A.sdkHttpResponse={headers:D.headers};const T=new vc;Object.assign(T,A),yield yield lt(T)}}catch(D){f={error:D}}finally{try{!y&&!h&&(b=v.return)&&(yield lt(b.call(v)))}finally{if(f)throw f.error}}})})}}async embedContent(e){var t,n,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const l=FF(this.apiClient,e);return a=Ee("{model}:predict",l._url),c=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:u.headers},h})),o.then(u=>{const d=kF(u),h=new d1;return Object.assign(h,d),h})}else{const l=RF(this.apiClient,e);return a=Ee("{model}:batchEmbedContents",l._url),c=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:u.headers},h})),o.then(u=>{const d=NF(u),h=new d1;return Object.assign(h,d),h})}}async generateImagesInternal(e){var t,n,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const l=VF(this.apiClient,e);return a=Ee("{model}:predict",l._url),c=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:u.headers},h})),o.then(u=>{const d=zF(u),h=new h1;return Object.assign(h,d),h})}else{const l=HF(this.apiClient,e);return a=Ee("{model}:predict",l._url),c=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:u.headers},h})),o.then(u=>{const d=GF(u),h=new h1;return Object.assign(h,d),h})}}async editImageInternal(e){var t,n;let r,s="",o={};if(this.apiClient.isVertexAI()){const a=CF(this.apiClient,e);return s=Ee("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json().then(l=>{const u=l;return u.sdkHttpResponse={headers:c.headers},u})),r.then(c=>{const l=SF(c),u=new XU;return Object.assign(u,l),u})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,n;let r,s="",o={};if(this.apiClient.isVertexAI()){const a=WN(this.apiClient,e);return s=Ee("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json().then(l=>{const u=l;return u.sdkHttpResponse={headers:c.headers},u})),r.then(c=>{const l=qN(c),u=new jU;return Object.assign(u,l),u})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,n;let r,s="",o={};if(this.apiClient.isVertexAI()){const a=DN(this.apiClient,e);return s=Ee("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),r.then(c=>{const l=TN(c),u=new YU;return Object.assign(u,l),u})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,n;let r,s="",o={};if(this.apiClient.isVertexAI()){const a=UN(this.apiClient,e);return s=Ee("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),r.then(c=>{const l=IN(c),u=new JU;return Object.assign(u,l),u})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,n,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const l=cN(this.apiClient,e);return a=Ee("{name}",l._url),c=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),o.then(u=>Xm(u))}else{const l=aN(this.apiClient,e);return a=Ee("{name}",l._url),c=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>$m(u))}}async listInternal(e){var t,n,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const l=gN(this.apiClient,e);return a=Ee("{models_url}",l._url),c=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:u.headers},h})),o.then(u=>{const d=yN(u),h=new f1;return Object.assign(h,d),h})}else{const l=pN(this.apiClient,e);return a=Ee("{models_url}",l._url),c=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:u.headers},h})),o.then(u=>{const d=mN(u),h=new f1;return Object.assign(h,d),h})}}async update(e){var t,n,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const l=BN(this.apiClient,e);return a=Ee("{model}",l._url),c=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),o.then(u=>Xm(u))}else{const l=LN(this.apiClient,e);return a=Ee("{name}",l._url),c=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>$m(u))}}async delete(e){var t,n,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const l=TF(this.apiClient,e);return a=Ee("{name}",l._url),c=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:u.headers},h})),o.then(u=>{const d=EF(u),h=new p1;return Object.assign(h,d),h})}else{const l=DF(this.apiClient,e);return a=Ee("{name}",l._url),c=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:u.headers},h})),o.then(u=>{const d=AF(u),h=new p1;return Object.assign(h,d),h})}}async countTokens(e){var t,n,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const l=vF(this.apiClient,e);return a=Ee("{model}:countTokens",l._url),c=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:u.headers},h})),o.then(u=>{const d=_F(u),h=new g1;return Object.assign(h,d),h})}else{const l=bF(this.apiClient,e);return a=Ee("{model}:countTokens",l._url),c=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:u.headers},h})),o.then(u=>{const d=xF(u),h=new g1;return Object.assign(h,d),h})}}async computeTokens(e){var t,n;let r,s="",o={};if(this.apiClient.isVertexAI()){const a=dF(this.apiClient,e);return s=Ee("{model}:computeTokens",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json().then(l=>{const u=l;return u.sdkHttpResponse={headers:c.headers},u})),r.then(c=>{const l=hF(c),u=new KU;return Object.assign(u,l),u})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,n,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const l=KF(this.apiClient,e);return a=Ee("{model}:predictLongRunning",l._url),c=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),o.then(u=>{const d=YF(u),h=new mh;return Object.assign(h,d),h})}else{const l=JF(this.apiClient,e);return a=Ee("{model}:predictLongRunning",l._url),c=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>{const d=jF(u),h=new mh;return Object.assign(h,d),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _k extends Uo{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,n=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let s;n&&"httpOptions"in n&&(s=n.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:s}});return t._fromAPIResponse({apiResponse:o,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:n});return t._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async get(e){const t=e.operation,n=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let s;n&&"httpOptions"in n&&(s=n.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:s}});return t._fromAPIResponse({apiResponse:o,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:n});return t._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async getVideosOperationInternal(e){var t,n,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const l=GU(e);return a=Ee("{operationName}",l._url),c=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),o}else{const l=VU(e);return a=Ee("{operationName}",l._url),c=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o}}async fetchPredictVideosOperationInternal(e){var t,n;let r,s="",o={};if(this.apiClient.isVertexAI()){const a=PU(e);return s=Ee("{resourceName}:fetchPredictOperation",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Dk(i){const e={};if(m(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=m(i,["data"]);t!=null&&_(e,["data"],t);const n=m(i,["mimeType"]);return n!=null&&_(e,["mimeType"],n),e}function Tk(i){const e={},t=m(i,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(s=>Rk(s))),_(e,["parts"],r)}const n=m(i,["role"]);return n!=null&&_(e,["role"],n),e}function Ak(i,e,t){const n={},r=m(e,["expireTime"]);t!==void 0&&r!=null&&_(t,["expireTime"],r);const s=m(e,["newSessionExpireTime"]);t!==void 0&&s!=null&&_(t,["newSessionExpireTime"],s);const o=m(e,["uses"]);t!==void 0&&o!=null&&_(t,["uses"],o);const a=m(e,["liveConnectConstraints"]);t!==void 0&&a!=null&&_(t,["bidiGenerateContentSetup"],Ik(i,a));const c=m(e,["lockAdditionalFields"]);return t!==void 0&&c!=null&&_(t,["fieldMask"],c),n}function Ek(i,e){const t={},n=m(e,["config"]);return n!=null&&_(t,["config"],Ak(i,n,t)),t}function wk(i){const e={};if(m(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=m(i,["fileUri"]);t!=null&&_(e,["fileUri"],t);const n=m(i,["mimeType"]);return n!=null&&_(e,["mimeType"],n),e}function Ck(i){const e={};if(m(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=m(i,["enableWidget"]);return t!=null&&_(e,["enableWidget"],t),e}function Sk(i){const e={},t=m(i,["timeRangeFilter"]);if(t!=null&&_(e,["timeRangeFilter"],t),m(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Uk(i,e){const t={},n=m(i,["generationConfig"]);e!==void 0&&n!=null&&_(e,["setup","generationConfig"],n);const r=m(i,["responseModalities"]);e!==void 0&&r!=null&&_(e,["setup","generationConfig","responseModalities"],r);const s=m(i,["temperature"]);e!==void 0&&s!=null&&_(e,["setup","generationConfig","temperature"],s);const o=m(i,["topP"]);e!==void 0&&o!=null&&_(e,["setup","generationConfig","topP"],o);const a=m(i,["topK"]);e!==void 0&&a!=null&&_(e,["setup","generationConfig","topK"],a);const c=m(i,["maxOutputTokens"]);e!==void 0&&c!=null&&_(e,["setup","generationConfig","maxOutputTokens"],c);const l=m(i,["mediaResolution"]);e!==void 0&&l!=null&&_(e,["setup","generationConfig","mediaResolution"],l);const u=m(i,["seed"]);e!==void 0&&u!=null&&_(e,["setup","generationConfig","seed"],u);const d=m(i,["speechConfig"]);e!==void 0&&d!=null&&_(e,["setup","generationConfig","speechConfig"],n0(d));const h=m(i,["thinkingConfig"]);e!==void 0&&h!=null&&_(e,["setup","generationConfig","thinkingConfig"],h);const f=m(i,["enableAffectiveDialog"]);e!==void 0&&f!=null&&_(e,["setup","generationConfig","enableAffectiveDialog"],f);const b=m(i,["systemInstruction"]);e!==void 0&&b!=null&&_(e,["setup","systemInstruction"],Tk(Vt(b)));const g=m(i,["tools"]);if(e!==void 0&&g!=null){let E=Qa(g);Array.isArray(E)&&(E=E.map(I=>Nk(Za(I)))),_(e,["setup","tools"],E)}const y=m(i,["sessionResumption"]);e!==void 0&&y!=null&&_(e,["setup","sessionResumption"],Fk(y));const v=m(i,["inputAudioTranscription"]);e!==void 0&&v!=null&&_(e,["setup","inputAudioTranscription"],v);const x=m(i,["outputAudioTranscription"]);e!==void 0&&x!=null&&_(e,["setup","outputAudioTranscription"],x);const D=m(i,["realtimeInputConfig"]);e!==void 0&&D!=null&&_(e,["setup","realtimeInputConfig"],D);const A=m(i,["contextWindowCompression"]);e!==void 0&&A!=null&&_(e,["setup","contextWindowCompression"],A);const T=m(i,["proactivity"]);return e!==void 0&&T!=null&&_(e,["setup","proactivity"],T),t}function Ik(i,e){const t={},n=m(e,["model"]);n!=null&&_(t,["setup","model"],je(i,n));const r=m(e,["config"]);return r!=null&&_(t,["config"],Uk(r,t)),t}function Rk(i){const e={},t=m(i,["videoMetadata"]);t!=null&&_(e,["videoMetadata"],t);const n=m(i,["thought"]);n!=null&&_(e,["thought"],n);const r=m(i,["inlineData"]);r!=null&&_(e,["inlineData"],Dk(r));const s=m(i,["fileData"]);s!=null&&_(e,["fileData"],wk(s));const o=m(i,["thoughtSignature"]);o!=null&&_(e,["thoughtSignature"],o);const a=m(i,["functionCall"]);a!=null&&_(e,["functionCall"],a);const c=m(i,["codeExecutionResult"]);c!=null&&_(e,["codeExecutionResult"],c);const l=m(i,["executableCode"]);l!=null&&_(e,["executableCode"],l);const u=m(i,["functionResponse"]);u!=null&&_(e,["functionResponse"],u);const d=m(i,["text"]);return d!=null&&_(e,["text"],d),e}function Fk(i){const e={},t=m(i,["handle"]);if(t!=null&&_(e,["handle"],t),m(i,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Nk(i){const e={},t=m(i,["functionDeclarations"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>u)),_(e,["functionDeclarations"],l)}if(m(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=m(i,["googleSearch"]);n!=null&&_(e,["googleSearch"],Sk(n));const r=m(i,["googleSearchRetrieval"]);if(r!=null&&_(e,["googleSearchRetrieval"],r),m(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=m(i,["googleMaps"]);s!=null&&_(e,["googleMaps"],Ck(s));const o=m(i,["urlContext"]);o!=null&&_(e,["urlContext"],o);const a=m(i,["computerUse"]);a!=null&&_(e,["computerUse"],a);const c=m(i,["codeExecution"]);return c!=null&&_(e,["codeExecution"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kk(i){const e=[];for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t)){const n=i[t];if(typeof n=="object"&&n!=null&&Object.keys(n).length>0){const r=Object.keys(n).map(s=>`${t}.${s}`);e.push(...r)}else e.push(t)}return e.join(",")}function Mk(i,e){let t=null;const n=i.bidiGenerateContentSetup;if(typeof n=="object"&&n!==null&&"setup"in n){const s=n.setup;typeof s=="object"&&s!==null?(i.bidiGenerateContentSetup=s,t=s):delete i.bidiGenerateContentSetup}else n!==void 0&&delete i.bidiGenerateContentSetup;const r=i.fieldMask;if(t){const s=kk(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)s?i.fieldMask=s:delete i.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];r.length>0&&(a=r.map(l=>o.includes(l)?`generationConfig.${l}`:l));const c=[];s&&c.push(s),a.length>0&&c.push(...a),c.length>0?i.fieldMask=c.join(","):delete i.fieldMask}else delete i.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?i.fieldMask=r.join(","):delete i.fieldMask;return i}class Pk extends Uo{constructor(e){super(),this.apiClient=e}async create(e){var t,n;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=Ek(this.apiClient,e);s=Ee("auth_tokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query;const c=Mk(a,e.config);return r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),r.then(l=>l)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Lk(i,e){const t={},n=m(i,["name"]);return n!=null&&_(t,["_url","name"],n),t}function Bk(i,e){const t={},n=m(i,["name"]);return n!=null&&_(t,["_url","name"],n),t}function Ok(i,e,t){const n={};if(m(i,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=m(i,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&_(e,["displayName"],r),m(i,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=m(i,["epochCount"]);e!==void 0&&s!=null&&_(e,["tuningTask","hyperparameters","epochCount"],s);const o=m(i,["learningRateMultiplier"]);if(o!=null&&_(n,["tuningTask","hyperparameters","learningRateMultiplier"],o),m(i,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(m(i,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(m(i,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=m(i,["batchSize"]);e!==void 0&&a!=null&&_(e,["tuningTask","hyperparameters","batchSize"],a);const c=m(i,["learningRate"]);if(e!==void 0&&c!=null&&_(e,["tuningTask","hyperparameters","learningRate"],c),m(i,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return n}function Wk(i,e,t){const n={},r=m(i,["validationDataset"]);e!==void 0&&r!=null&&_(e,["supervisedTuningSpec"],t3(r));const s=m(i,["tunedModelDisplayName"]);e!==void 0&&s!=null&&_(e,["tunedModelDisplayName"],s);const o=m(i,["description"]);e!==void 0&&o!=null&&_(e,["description"],o);const a=m(i,["epochCount"]);e!==void 0&&a!=null&&_(e,["supervisedTuningSpec","hyperParameters","epochCount"],a);const c=m(i,["learningRateMultiplier"]);e!==void 0&&c!=null&&_(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],c);const l=m(i,["exportLastCheckpointOnly"]);e!==void 0&&l!=null&&_(e,["supervisedTuningSpec","exportLastCheckpointOnly"],l);const u=m(i,["adapterSize"]);if(e!==void 0&&u!=null&&_(e,["supervisedTuningSpec","hyperParameters","adapterSize"],u),m(i,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(m(i,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const d=m(i,["labels"]);return e!==void 0&&d!=null&&_(e,["labels"],d),n}function qk(i,e){const t={},n=m(i,["baseModel"]);n!=null&&_(t,["baseModel"],n);const r=m(i,["preTunedModel"]);r!=null&&_(t,["preTunedModel"],r);const s=m(i,["trainingDataset"]);s!=null&&_(t,["tuningTask","trainingData"],Zk(s));const o=m(i,["config"]);return o!=null&&Ok(o,t),t}function Hk(i,e){const t={},n=m(i,["baseModel"]);n!=null&&_(t,["baseModel"],n);const r=m(i,["preTunedModel"]);r!=null&&_(t,["preTunedModel"],r);const s=m(i,["trainingDataset"]);s!=null&&Qk(s,t);const o=m(i,["config"]);return o!=null&&Wk(o,t),t}function Vk(i,e){const t={},n=m(i,["name"]);return n!=null&&_(t,["_url","name"],n),t}function Gk(i,e){const t={},n=m(i,["name"]);return n!=null&&_(t,["_url","name"],n),t}function zk(i,e,t){const n={},r=m(i,["pageSize"]);e!==void 0&&r!=null&&_(e,["_query","pageSize"],r);const s=m(i,["pageToken"]);e!==void 0&&s!=null&&_(e,["_query","pageToken"],s);const o=m(i,["filter"]);return e!==void 0&&o!=null&&_(e,["_query","filter"],o),n}function $k(i,e,t){const n={},r=m(i,["pageSize"]);e!==void 0&&r!=null&&_(e,["_query","pageSize"],r);const s=m(i,["pageToken"]);e!==void 0&&s!=null&&_(e,["_query","pageToken"],s);const o=m(i,["filter"]);return e!==void 0&&o!=null&&_(e,["_query","filter"],o),n}function Xk(i,e){const t={},n=m(i,["config"]);return n!=null&&zk(n,t),t}function jk(i,e){const t={},n=m(i,["config"]);return n!=null&&$k(n,t),t}function Yk(i,e){const t={},n=m(i,["sdkHttpResponse"]);n!=null&&_(t,["sdkHttpResponse"],n);const r=m(i,["nextPageToken"]);r!=null&&_(t,["nextPageToken"],r);const s=m(i,["tunedModels"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>eA(a))),_(t,["tuningJobs"],o)}return t}function Jk(i,e){const t={},n=m(i,["sdkHttpResponse"]);n!=null&&_(t,["sdkHttpResponse"],n);const r=m(i,["nextPageToken"]);r!=null&&_(t,["nextPageToken"],r);const s=m(i,["tuningJobs"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>Ym(a))),_(t,["tuningJobs"],o)}return t}function Kk(i,e){const t={},n=m(i,["name"]);n!=null&&_(t,["model"],n);const r=m(i,["name"]);return r!=null&&_(t,["endpoint"],r),t}function Zk(i,e){const t={};if(m(i,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(i,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=m(i,["examples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),_(t,["examples","examples"],r)}return t}function Qk(i,e,t){const n={},r=m(i,["gcsUri"]);e!==void 0&&r!=null&&_(e,["supervisedTuningSpec","trainingDatasetUri"],r);const s=m(i,["vertexDatasetResource"]);if(e!==void 0&&s!=null&&_(e,["supervisedTuningSpec","trainingDatasetUri"],s),m(i,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function eA(i,e){const t={},n=m(i,["sdkHttpResponse"]);n!=null&&_(t,["sdkHttpResponse"],n);const r=m(i,["name"]);r!=null&&_(t,["name"],r);const s=m(i,["state"]);s!=null&&_(t,["state"],MT(s));const o=m(i,["createTime"]);o!=null&&_(t,["createTime"],o);const a=m(i,["tuningTask","startTime"]);a!=null&&_(t,["startTime"],a);const c=m(i,["tuningTask","completeTime"]);c!=null&&_(t,["endTime"],c);const l=m(i,["updateTime"]);l!=null&&_(t,["updateTime"],l);const u=m(i,["description"]);u!=null&&_(t,["description"],u);const d=m(i,["baseModel"]);d!=null&&_(t,["baseModel"],d);const h=m(i,["_self"]);return h!=null&&_(t,["tunedModel"],Kk(h)),t}function Ym(i,e){const t={},n=m(i,["sdkHttpResponse"]);n!=null&&_(t,["sdkHttpResponse"],n);const r=m(i,["name"]);r!=null&&_(t,["name"],r);const s=m(i,["state"]);s!=null&&_(t,["state"],MT(s));const o=m(i,["createTime"]);o!=null&&_(t,["createTime"],o);const a=m(i,["startTime"]);a!=null&&_(t,["startTime"],a);const c=m(i,["endTime"]);c!=null&&_(t,["endTime"],c);const l=m(i,["updateTime"]);l!=null&&_(t,["updateTime"],l);const u=m(i,["error"]);u!=null&&_(t,["error"],u);const d=m(i,["description"]);d!=null&&_(t,["description"],d);const h=m(i,["baseModel"]);h!=null&&_(t,["baseModel"],h);const f=m(i,["tunedModel"]);f!=null&&_(t,["tunedModel"],f);const b=m(i,["preTunedModel"]);b!=null&&_(t,["preTunedModel"],b);const g=m(i,["supervisedTuningSpec"]);g!=null&&_(t,["supervisedTuningSpec"],g);const y=m(i,["tuningDataStats"]);y!=null&&_(t,["tuningDataStats"],y);const v=m(i,["encryptionSpec"]);v!=null&&_(t,["encryptionSpec"],v);const x=m(i,["partnerModelTuningSpec"]);x!=null&&_(t,["partnerModelTuningSpec"],x);const D=m(i,["customBaseModel"]);D!=null&&_(t,["customBaseModel"],D);const A=m(i,["experiment"]);A!=null&&_(t,["experiment"],A);const T=m(i,["labels"]);T!=null&&_(t,["labels"],T);const E=m(i,["outputUri"]);E!=null&&_(t,["outputUri"],E);const I=m(i,["pipelineJob"]);I!=null&&_(t,["pipelineJob"],I);const N=m(i,["serviceAccount"]);N!=null&&_(t,["serviceAccount"],N);const R=m(i,["tunedModelDisplayName"]);R!=null&&_(t,["tunedModelDisplayName"],R);const P=m(i,["veoTuningSpec"]);return P!=null&&_(t,["veoTuningSpec"],P),t}function e3(i,e){const t={},n=m(i,["sdkHttpResponse"]);n!=null&&_(t,["sdkHttpResponse"],n);const r=m(i,["name"]);r!=null&&_(t,["name"],r);const s=m(i,["metadata"]);s!=null&&_(t,["metadata"],s);const o=m(i,["done"]);o!=null&&_(t,["done"],o);const a=m(i,["error"]);return a!=null&&_(t,["error"],a),t}function t3(i,e){const t={},n=m(i,["gcsUri"]);n!=null&&_(t,["validationDatasetUri"],n);const r=m(i,["vertexDatasetResource"]);return r!=null&&_(t,["validationDatasetUri"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class n3 extends Uo{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new Ou(vo.PAGED_ITEM_TUNING_JOBS,n=>this.listInternal(n),await this.listInternal(t),t),this.tune=async t=>{var n;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const r={tunedModelName:t.baseModel};!((n=t.config)===null||n===void 0)&&n.preTunedModelCheckpointId&&(r.checkpointId=t.config.preTunedModelCheckpointId);const s=Object.assign(Object.assign({},t),{preTunedModel:r});return s.baseModel=void 0,await this.tuneInternal(s)}else{const r=Object.assign({},t);return await this.tuneInternal(r)}else{const r=Object.assign({},t),s=await this.tuneMldevInternal(r);let o="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?o=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(o=s.name.split("/operations/")[0]),{name:o,state:Hm.JOB_STATE_QUEUED}}}}async getInternal(e){var t,n,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const l=Gk(e);return a=Ee("{name}",l._url),c=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:u.headers},h})),o.then(u=>Ym(u))}else{const l=Vk(e);return a=Ee("{name}",l._url),c=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:u.headers},h})),o.then(u=>eA(u))}}async listInternal(e){var t,n,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const l=jk(e);return a=Ee("tuningJobs",l._url),c=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:u.headers},h})),o.then(u=>{const d=Jk(u),h=new m1;return Object.assign(h,d),h})}else{const l=Xk(e);return a=Ee("tunedModels",l._url),c=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:u.headers},h})),o.then(u=>{const d=Yk(u),h=new m1;return Object.assign(h,d),h})}}async cancel(e){var t,n,r,s;let o="",a={};if(this.apiClient.isVertexAI()){const c=Bk(e);o=Ee("{name}:cancel",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal})}else{const c=Lk(e);o=Ee("{name}:cancel",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async tuneInternal(e){var t,n;let r,s="",o={};if(this.apiClient.isVertexAI()){const a=Hk(e);return s=Ee("tuningJobs",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json().then(l=>{const u=l;return u.sdkHttpResponse={headers:c.headers},u})),r.then(c=>Ym(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,n;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=qk(e);return s=Ee("tunedModels",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json().then(l=>{const u=l;return u.sdkHttpResponse={headers:c.headers},u})),r.then(c=>e3(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class i3{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const r3=1024*1024*8,s3=3,o3=1e3,a3=2,yg="x-goog-upload-status";async function c3(i,e,t){var n,r,s;let o=0,a=0,c=new Vm(new Response),l="upload";for(o=i.size;a<o;){const d=Math.min(r3,o-a),h=i.slice(a,a+d);a+d>=o&&(l+=", finalize");let f=0,b=o3;for(;f<s3&&(c=await t.request({path:"",body:h,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(a),"Content-Length":String(d)}}}),!(!((n=c==null?void 0:c.headers)===null||n===void 0)&&n[yg]));)f++,await u3(b),b=b*a3;if(a+=d,((r=c==null?void 0:c.headers)===null||r===void 0?void 0:r[yg])!=="active")break;if(o<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const u=await(c==null?void 0:c.json());if(((s=c==null?void 0:c.headers)===null||s===void 0?void 0:s[yg])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return u.file}async function l3(i){return{size:i.size,type:i.type}}function u3(i){return new Promise(e=>setTimeout(e,i))}class d3{async upload(e,t,n){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await c3(e,t,n)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await l3(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class h3{create(e,t,n){return new f3(e,t,n)}}class f3{constructor(e,t,n){this.url=e,this.headers=t,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const P1="x-goog-api-key";class p3{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(P1)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(P1,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const g3="gl-node/";class m3{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const n=kU(e.httpOptions,e.vertexai,void 0,void 0);n&&(e.httpOptions?e.httpOptions.baseUrl=n:e.httpOptions={baseUrl:n}),this.apiVersion=e.apiVersion;const r=new p3(this.apiKey);this.apiClient=new ek({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:g3+"web",uploader:new d3,downloader:new i3}),this.models=new xk(this.apiClient),this.live=new fk(this.apiClient,r,new h3),this.batches=new QI(this.apiClient),this.chats=new RR(this.models,this.apiClient),this.caches=new SR(this.apiClient),this.files=new qR(this.apiClient),this.operations=new _k(this.apiClient),this.authTokens=new Pk(this.apiClient),this.tunings=new n3(this.apiClient)}}var bg={exports:{}},L1;function y3(){return L1||(L1=1,(function(i){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function r(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function s(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new r(u,d||c,h),b=t?t+l:l;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],f]:c._events[b].push(f):(c._events[b]=f,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new n:delete c._events[l]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(t?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=t?t+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,b=new Array(f);h<f;h++)b[h]=d[h].fn;return b},a.prototype.listenerCount=function(l){var u=t?t+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,h,f,b){var g=t?t+l:l;if(!this._events[g])return!1;var y=this._events[g],v=arguments.length,x,D;if(y.fn){switch(y.once&&this.removeListener(l,y.fn,void 0,!0),v){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,d),!0;case 4:return y.fn.call(y.context,u,d,h),!0;case 5:return y.fn.call(y.context,u,d,h,f),!0;case 6:return y.fn.call(y.context,u,d,h,f,b),!0}for(D=1,x=new Array(v-1);D<v;D++)x[D-1]=arguments[D];y.fn.apply(y.context,x)}else{var A=y.length,T;for(D=0;D<A;D++)switch(y[D].once&&this.removeListener(l,y[D].fn,void 0,!0),v){case 1:y[D].fn.call(y[D].context);break;case 2:y[D].fn.call(y[D].context,u);break;case 3:y[D].fn.call(y[D].context,u,d);break;case 4:y[D].fn.call(y[D].context,u,d,h);break;default:if(!x)for(T=1,x=new Array(v-1);T<v;T++)x[T-1]=arguments[T];y[D].fn.apply(y[D].context,x)}}return!0},a.prototype.on=function(l,u,d){return s(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return s(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,h){var f=t?t+l:l;if(!this._events[f])return this;if(!u)return o(this,f),this;var b=this._events[f];if(b.fn)b.fn===u&&(!h||b.once)&&(!d||b.context===d)&&o(this,f);else{for(var g=0,y=[],v=b.length;g<v;g++)(b[g].fn!==u||h&&!b[g].once||d&&b[g].context!==d)&&y.push(b[g]);y.length?this._events[f]=y.length===1?y[0]:y:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=t?t+l:l,this._events[u]&&o(this,u)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,i.exports=a})(bg)),bg.exports}var b3=y3();const v3=zh(b3);class tA extends Error{constructor(e){super(e),this.name="TimeoutError"}}class x3 extends Error{constructor(e){super(),this.name="AbortError",this.message=e}}const B1=i=>globalThis.DOMException===void 0?new x3(i):new DOMException(i),O1=i=>{const e=i.reason===void 0?B1("This operation was aborted."):i.reason;return e instanceof Error?e:B1(e)};function _3(i,e){const{milliseconds:t,fallback:n,message:r,customTimers:s={setTimeout,clearTimeout}}=e;let o,a;const l=new Promise((u,d)=>{if(typeof t!="number"||Math.sign(t)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${t}\``);if(e.signal){const{signal:f}=e;f.aborted&&d(O1(f)),a=()=>{d(O1(f))},f.addEventListener("abort",a,{once:!0})}if(t===Number.POSITIVE_INFINITY){i.then(u,d);return}const h=new tA;o=s.setTimeout.call(void 0,()=>{if(n){try{u(n())}catch(f){d(f)}return}typeof i.cancel=="function"&&i.cancel(),r===!1?u():r instanceof Error?d(r):(h.message=r??`Promise timed out after ${t} milliseconds`,d(h))},t),(async()=>{try{u(await i)}catch(f){d(f)}})()}).finally(()=>{l.clear(),a&&e.signal&&e.signal.removeEventListener("abort",a)});return l.clear=()=>{s.clearTimeout.call(void 0,o),o=void 0},l}function D3(i,e,t){let n=0,r=i.length;for(;r>0;){const s=Math.trunc(r/2);let o=n+s;t(i[o],e)<=0?(n=++o,r-=s+1):r=s}return n}var Rn;class T3{constructor(){W(this,Rn,[])}enqueue(e,t){t={priority:0,...t};const n={priority:t.priority,id:t.id,run:e};if(this.size===0||p(this,Rn)[this.size-1].priority>=t.priority){p(this,Rn).push(n);return}const r=D3(p(this,Rn),n,(s,o)=>o.priority-s.priority);p(this,Rn).splice(r,0,n)}setPriority(e,t){const n=p(this,Rn).findIndex(s=>s.id===e);if(n===-1)throw new ReferenceError(`No promise function with the id "${e}" exists in the queue.`);const[r]=p(this,Rn).splice(n,1);this.enqueue(r.run,{priority:t,id:e})}dequeue(){const e=p(this,Rn).shift();return e==null?void 0:e.run}filter(e){return p(this,Rn).filter(t=>t.priority===e.priority).map(t=>t.run)}get size(){return p(this,Rn).length}}Rn=new WeakMap;var Ha,Va,Gr,Su,Ga,Uu,Fn,za,Jt,Iu,Nn,$a,ar,Ru,Gh,Xe,nA,iA,rA,sA,oA,Qd,Jm,Km,eh,aA,th;class A3 extends v3{constructor(t){var n,r;super();W(this,Xe);W(this,Ha);W(this,Va);W(this,Gr,0);W(this,Su);W(this,Ga);W(this,Uu,0);W(this,Fn);W(this,za);W(this,Jt);W(this,Iu);W(this,Nn,0);W(this,$a);W(this,ar);W(this,Ru);W(this,Gh,1n);Le(this,"timeout");if(t={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:T3,...t},!(typeof t.intervalCap=="number"&&t.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${((n=t.intervalCap)==null?void 0:n.toString())??""}\` (${typeof t.intervalCap})`);if(t.interval===void 0||!(Number.isFinite(t.interval)&&t.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${((r=t.interval)==null?void 0:r.toString())??""}\` (${typeof t.interval})`);M(this,Ha,t.carryoverConcurrencyCount),M(this,Va,t.intervalCap===Number.POSITIVE_INFINITY||t.interval===0),M(this,Su,t.intervalCap),M(this,Ga,t.interval),M(this,Jt,new t.queueClass),M(this,Iu,t.queueClass),this.concurrency=t.concurrency,this.timeout=t.timeout,M(this,Ru,t.throwOnTimeout===!0),M(this,ar,t.autoStart===!1)}get concurrency(){return p(this,$a)}set concurrency(t){if(!(typeof t=="number"&&t>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${t}\` (${typeof t})`);M(this,$a,t),L(this,Xe,eh).call(this)}setPriority(t,n){p(this,Jt).setPriority(t,n)}async add(t,n={}){return n.id??(n.id=(St(this,Gh)._++).toString()),n={timeout:this.timeout,throwOnTimeout:p(this,Ru),...n},new Promise((r,s)=>{p(this,Jt).enqueue(async()=>{var o;St(this,Nn)._++;try{(o=n.signal)==null||o.throwIfAborted(),St(this,Gr)._++;let a=t({signal:n.signal});n.timeout&&(a=_3(Promise.resolve(a),{milliseconds:n.timeout})),n.signal&&(a=Promise.race([a,L(this,Xe,aA).call(this,n.signal)]));const c=await a;r(c),this.emit("completed",c)}catch(a){if(a instanceof tA&&!n.throwOnTimeout){r();return}s(a),this.emit("error",a)}finally{L(this,Xe,rA).call(this)}},n),this.emit("add"),L(this,Xe,Qd).call(this)})}async addAll(t,n){return Promise.all(t.map(async r=>this.add(r,n)))}start(){return p(this,ar)?(M(this,ar,!1),L(this,Xe,eh).call(this),this):this}pause(){M(this,ar,!0)}clear(){M(this,Jt,new(p(this,Iu)))}async onEmpty(){p(this,Jt).size!==0&&await L(this,Xe,th).call(this,"empty")}async onSizeLessThan(t){p(this,Jt).size<t||await L(this,Xe,th).call(this,"next",()=>p(this,Jt).size<t)}async onIdle(){p(this,Nn)===0&&p(this,Jt).size===0||await L(this,Xe,th).call(this,"idle")}get size(){return p(this,Jt).size}sizeBy(t){return p(this,Jt).filter(t).length}get pending(){return p(this,Nn)}get isPaused(){return p(this,ar)}}Ha=new WeakMap,Va=new WeakMap,Gr=new WeakMap,Su=new WeakMap,Ga=new WeakMap,Uu=new WeakMap,Fn=new WeakMap,za=new WeakMap,Jt=new WeakMap,Iu=new WeakMap,Nn=new WeakMap,$a=new WeakMap,ar=new WeakMap,Ru=new WeakMap,Gh=new WeakMap,Xe=new WeakSet,nA=function(){return p(this,Va)||p(this,Gr)<p(this,Su)},iA=function(){return p(this,Nn)<p(this,$a)},rA=function(){St(this,Nn)._--,L(this,Xe,Qd).call(this),this.emit("next")},sA=function(){L(this,Xe,Km).call(this),L(this,Xe,Jm).call(this),M(this,za,void 0)},oA=function(){const t=Date.now();if(p(this,Fn)===void 0){const n=p(this,Uu)-t;if(n<0)M(this,Gr,p(this,Ha)?p(this,Nn):0);else return p(this,za)===void 0&&M(this,za,setTimeout(()=>{L(this,Xe,sA).call(this)},n)),!0}return!1},Qd=function(){if(p(this,Jt).size===0)return p(this,Fn)&&clearInterval(p(this,Fn)),M(this,Fn,void 0),this.emit("empty"),p(this,Nn)===0&&this.emit("idle"),!1;if(!p(this,ar)){const t=!p(this,Xe,oA);if(p(this,Xe,nA)&&p(this,Xe,iA)){const n=p(this,Jt).dequeue();return n?(this.emit("active"),n(),t&&L(this,Xe,Jm).call(this),!0):!1}}return!1},Jm=function(){p(this,Va)||p(this,Fn)!==void 0||(M(this,Fn,setInterval(()=>{L(this,Xe,Km).call(this)},p(this,Ga))),M(this,Uu,Date.now()+p(this,Ga)))},Km=function(){p(this,Gr)===0&&p(this,Nn)===0&&p(this,Fn)&&(clearInterval(p(this,Fn)),M(this,Fn,void 0)),M(this,Gr,p(this,Ha)?p(this,Nn):0),L(this,Xe,eh).call(this)},eh=function(){for(;L(this,Xe,Qd).call(this););},aA=async function(t){return new Promise((n,r)=>{t.addEventListener("abort",()=>{r(t.reason)},{once:!0})})},th=async function(t,n){return new Promise(r=>{const s=()=>{n&&!n()||(this.off(t,s),r())};this.on(t,s)})};let nh=null,bh=0;const vh=["AIzaSyCbDnp1aAtByJYMRFlVQBKMtPtvqpFDtgs","AIzaSyCJQcFwaYI0GyTIjJDMAc0yLL0MQ-WsbjU","AIzaSyB6ptOgRHW2PnRNxJ8ZHxT0KLF_5X6giKQ","AIzaSyDxq8P2AgiIUqQNZttMcrCh6yjTVutbq9E"].filter(Boolean),E3=new A3({concurrency:2});function cA(){if(!nh){if(vh.length===0)throw new Error("No GEMINI_API_KEY environment variables set.");const i=vh[bh];if(!i)throw new Error("API_KEY environment variable not set.");nh=new m3({apiKey:i})}return nh}function w3(){bh=(bh+1)%vh.length,nh=null}async function kf(i,e,t){const n=Date.now(),r={model:i,contents:typeof e=="string"?e.substring(0,100)+"...":"complex",config:t};try{const s=await E3.add(async()=>{for(let o=0;o<vh.length;o++)try{return await cA().models.generateContent({model:i,contents:e,config:t})}catch(a){console.warn(`API key ${bh+1} failed:`,a),w3()}throw new Error("All API keys failed. Please check your API keys and quota.")});return console.log("generateContent success:",Date.now()-n),s}catch(s){throw console.error("generateContent error:",r,null,Date.now()-n,s instanceof Error?s.message:"Unknown error"),s}}const W1=async(i,e)=>{var r,s,o,a,c,l;const t={type:Ne.OBJECT,properties:{MucDichCongViec:{type:Ne.STRING,description:"Nội dung mục đích công việc, hoặc chuỗi rỗng nếu không tìm thấy."},MoTaCongViec:{type:Ne.STRING,description:"Nội dung mô tả công việc, hoặc chuỗi rỗng nếu không tìm thấy."},YeuCauCongViec:{type:Ne.STRING,description:"Nội dung yêu cầu công việc, hoặc chuỗi rỗng nếu không tìm thấy."}},required:["MucDichCongViec","MoTaCongViec","YeuCauCongViec"]},n=`
    Bạn là một AI chuyên gia xử lý văn bản JD. Nhiệm vụ của bạn là phân tích văn bản JD thô (có thể chứa lỗi OCR) và trích xuất, làm sạch, và cấu trúc lại nội dung một cách CHÍNH XÁC.

    QUY TẮC:
    1.  **Làm sạch văn bản:** Sửa lỗi chính tả, bỏ ký tự thừa, chuẩn hóa dấu câu và viết hoa cho đúng chuẩn tiếng Việt.
    2.  **BẢO TOÀN NỘI DUNG GỐC:** Giữ nguyên văn phong và ý nghĩa của các câu trong JD gốc. Chỉ sửa lỗi chính tả và định dạng, không được diễn giải lại hay tóm tắt làm thay đổi ý.
    3.  **Trích xuất 3 phần cốt lõi:** Chỉ giữ lại nội dung cho 3 mục: "Mục đích công việc", "Mô tả công việc", và "Yêu cầu công việc".
    4.  **Linh hoạt:** Hiểu các tiêu đề đồng nghĩa. Ví dụ: "Nhiệm vụ" là "Mô tả công việc"; "Yêu cầu ứng viên" là "Yêu cầu công việc".
    5.  **Loại bỏ nội dung thừa:** Xóa bỏ tất cả các phần không liên quan như giới thiệu công ty, phúc lợi, lương thưởng, thông tin liên hệ.
    6.  **Xử lý mục bị thiếu:** Nếu không tìm thấy nội dung cho một mục, trả về một chuỗi rỗng ("") cho mục đó trong JSON.
    7.  **Kết quả:** Luôn trả về một đối tượng JSON với 3 khóa bắt buộc: \`MucDichCongViec\`, \`MoTaCongViec\`, \`YeuCauCongViec\`.
    
    Văn bản JD thô cần xử lý:
    ---
    ${i.slice(0,4e3)}
    ---
  `;try{const u=await kf($h,n,{responseMimeType:"application/json",responseSchema:t,temperature:0,topP:0,topK:1}),d=JSON.parse(u.text);if(!(((r=d.MucDichCongViec)==null?void 0:r.trim())||((s=d.MoTaCongViec)==null?void 0:s.trim())||((o=d.YeuCauCongViec)==null?void 0:o.trim())))throw new Error("Không thể trích xuất bất kỳ nội dung có ý nghĩa nào từ JD. Vui lòng kiểm tra file.");let f="";return(a=d.MucDichCongViec)!=null&&a.trim()&&(f+=`### MỤC ĐÍCH CÔNG VIỆC
${d.MucDichCongViec.trim()}

`),(c=d.MoTaCongViec)!=null&&c.trim()&&(f+=`### MÔ TẢ CÔNG VIỆC
${d.MoTaCongViec.trim()}

`),(l=d.YeuCauCongViec)!=null&&l.trim()&&(f+=`### YÊU CẦU CÔNG VIỆC
${d.YeuCauCongViec.trim()}

`),f.trim()}catch(u){throw console.error("Lỗi khi lọc và cấu trúc JD:",u),u instanceof Error&&u.message.includes("Không thể trích xuất")?u:new Error("AI không thể phân tích cấu trúc JD. Vui lòng thử lại.")}},q1=async i=>{if(!i||i.trim().length<20)return"";const e=`Dựa vào văn bản mô tả công việc sau, trích xuất và trả về CHỈ tên chức danh công việc. Không thêm bất kỳ văn bản, nhãn hoặc giải thích nào khác. Ví dụ: nếu văn bản chứa "Chúng tôi đang tìm kiếm một Senior Frontend Developer", bạn phải trả về "Senior Frontend Developer".
  
  Mô tả công việc:
  ---
  ${i.slice(0,1500)} 
  ---
  `;try{const n=(await kf($h,e,{temperature:0,topP:0,topK:1,thinkingConfig:{thinkingBudget:0}})).text.trim();return n.length>0&&n.length<100?n:""}catch(t){return console.error("Lỗi khi trích xuất chức danh công việc từ AI:",t),""}},C3={type:Ne.OBJECT,properties:{"Tiêu chí":{type:Ne.STRING},Điểm:{type:Ne.STRING,description:"Score for the criterion, format: 'score/weight_percentage' (e.g., '12.5/15' for 15% weight)"},"Công thức":{type:Ne.STRING,description:"Formula used, format: 'subscore X/weight_Y% = X points'"},"Dẫn chứng":{type:Ne.STRING,description:"Direct quote from the CV as evidence. Must be in Vietnamese."},"Giải thích":{type:Ne.STRING,description:"Brief explanation of the score. Must be in Vietnamese."}},required:["Tiêu chí","Điểm","Công thức","Dẫn chứng","Giải thích"]},S3={type:Ne.ARRAY,items:{type:Ne.OBJECT,properties:{candidateName:{type:Ne.STRING},phone:{type:Ne.STRING,description:"Candidate's phone number, if found."},email:{type:Ne.STRING,description:"Candidate's email address, if found."},fileName:{type:Ne.STRING},jobTitle:{type:Ne.STRING},industry:{type:Ne.STRING},department:{type:Ne.STRING},experienceLevel:{type:Ne.STRING},hardFilterFailureReason:{type:Ne.STRING,description:"Reason for failing a mandatory hard filter, in Vietnamese."},softFilterWarnings:{type:Ne.ARRAY,items:{type:Ne.STRING},description:"List of warnings for non-mandatory filters that were not met, in Vietnamese."},detectedLocation:{type:Ne.STRING},analysis:{type:Ne.OBJECT,properties:{"Tổng điểm":{type:Ne.INTEGER},Hạng:{type:Ne.STRING},"Chi tiết":{type:Ne.ARRAY,items:C3},"Điểm mạnh CV":{type:Ne.ARRAY,items:{type:Ne.STRING},description:"List of 3-5 key strengths from the CV."},"Điểm yếu CV":{type:Ne.ARRAY,items:{type:Ne.STRING},description:"List of 3-5 key weaknesses from the CV."},educationValidation:{type:Ne.OBJECT,properties:{standardizedEducation:{type:Ne.STRING,description:"Standardized education info format: 'School Name - Degree - Major - Period'"},validationNote:{type:Ne.STRING,description:"'Hợp lệ' or 'Không hợp lệ – cần HR kiểm tra lại'"},warnings:{type:Ne.ARRAY,items:{type:Ne.STRING},description:"List of validation warnings or issues found"}},required:["standardizedEducation","validationNote"]}},required:["Tổng điểm","Hạng","Chi tiết","Điểm mạnh CV","Điểm yếu CV"]}},required:["candidateName","fileName","analysis"]}},U3=i=>Object.values(i).map(e=>{var n;const t=((n=e.children)==null?void 0:n.reduce((r,s)=>r+s.weight,0))||e.weight||0;return`${e.name}: ${t}%`}).join(`
`),I3=(i,e,t)=>{const n=i.replace(/\s+/g," ").trim().slice(0,5e3),r=U3(e);return`
      ANALYZE CVs. Role: Chuyên viên sàng lọc hồ sơ (không phỏng vấn, chỉ phân tích định lượng). Language: VIETNAMESE ONLY. Output: STRICT JSON ARRAY.

      **JOB DESCRIPTION (JD):**
      ${n}

      **SCORING CRITERIA & WEIGHTS:**
      Score these 9 criteria:
      ${r}

      **FILTERS:**
      Location: ${t.location||"N/A"} (Mandatory: ${t.locationMandatory})
      Min Experience: ${t.minExp||"N/A"} years (Mandatory: ${t.minExpMandatory})
      Seniority: ${t.seniority||"N/A"} (Mandatory: ${t.seniorityMandatory})
      Contact Info: (Mandatory: ${t.contactMandatory})

      **SCORING METHODOLOGY:**

      **1. Individual Criterion Scores (Chi tiết):**
      - For each of the 9 criteria, evaluate directly on its weight scale
      - If a criterion has weight W%, score it from 0 to W (not 0-100)
      - Example: If "Phù hợp JD" has 15% weight, score it as X/15 where X is 0-15
      - If "Kinh nghiệm" has 20% weight, score it as Y/20 where Y is 0-20
      - Base evaluation on how well the candidate matches the JD requirements

      **2. Subscore = Criterion Score (already weighted):**
      - The criterion score IS the subscore (no multiplication needed)
      - Formula format: "subscore X/weight_Y% = X points"

      **3. Overall Score Calculation:**
      Base score: 100 points.

      **Hard Filters Penalties:**
      - Each mandatory filter violation: -5 points
      - Special 3 filters (Location, Min Experience, Seniority) when mandatory: -10 points each

      **Bonuses:**
      - Experience: If JD requires Y years, candidate has X>Y years → +1 point per extra year, max +5
      - Core Skills Match: +1 point per core skill matched (from JD keywords), max +5
      - Soft Weights: If sliders enabled, normalize to 0-20 points and add

      **EDUCATION INFORMATION PROCESSING:**

      **1. Education Data Extraction:**
      - Extract complete education information: school name, degree, major, study period
      - Standardize format: "Tên trường - Bậc học - Ngành học - Thời gian"

      **2. School Name Validation:**
      - Check if school name exists and is legitimate
      - Flag warnings for non-educational institutions:
        * Job platforms: TopCV, VietnamWorks, FPT Jobs, JobStreet, etc.
        * Company names: FPT Software, Viettel, VNPT, etc.
        * Websites: facebook.com, google.com, etc.
        * Invalid entries: "Không có", "N/A", random text

      **3. Conflict Detection:**
      - If degree level says "university graduate" but school name is a company/job platform
      - If study period is unrealistic (e.g., 50 years)
      - If major doesn't match degree level

      **4. Scoring Impact:**
      - Valid education: Score normally based on relevance to JD
      - Invalid/suspicious education: -50% from normal score
      - Clear conflicts: -80% from normal score

      **5. Output Format:**
      - Standardized education info: "Đại học Bách khoa Hà Nội - Cử nhân - Công nghệ thông tin - 2015-2019"
      - Note: "Hợp lệ" or "Không hợp lệ – cần HR kiểm tra lại"
      - NEVER auto-correct, only flag for HR review

      **OUTPUT RULES (CRITICAL):**
      1. For each CV, create one JSON object matching the schema.
      2. Calculate detailed scores for 9 criteria using their weight scales (e.g., 12.5/15 for 15% weight criterion).
      3. "Tổng điểm" = 100 + Sum of all criterion scores + Bonuses - Penalties, then cap to 0-100.
      4. **"Hạng" based on final "Tổng điểm":**
         - A: 75-100 points (Excellent match)
         - B: 25-74 points (Good match)
         - C: 0-24 points (Poor match)
      5. Keep "Chi tiết" for logging, but UI shows only total.
      6. **MANDATORY FAIL:** If mandatory filter not met, apply penalties and may result in C grade.
      7. If CV unparsable, create FAILED entry.
      8. **IMPORTANT:** Criterion scores should reflect realistic performance on their weight scale!
    `},R3=async i=>{try{const e=await IU(i,()=>{}),t=8e3,n=e.length>t?e.substring(0,t)+"...":e;return{text:`--- CV Content for ${i.name} ---
${n}`}}catch(e){return console.error(`Could not process file ${i.name} for Gemini`,e),null}};async function*F3(i,e,t,n){const s=[{text:I3(i,e,t)}];for(let o=0;o<n.length;o++){const a=n[o];yield{status:"progress",message:`Đang xử lý tệp ${o+1}/${n.length}: ${a.name}`};const c=await R3(a);c?s.push(c):yield{id:`${a.name}-error-${Date.now()}`,status:"FAILED",error:"Không thể đọc tệp. Vui lòng kiểm tra lại định dạng và nội dung tệp.",candidateName:"Lỗi Xử Lý Tệp",fileName:a.name,jobTitle:"",industry:"",department:"",experienceLevel:"",detectedLocation:"",phone:"",email:""}}yield{status:"progress",message:"Tất cả các tệp đã được xử lý. Đang gửi đến AI để phân tích..."};try{const o=await kf($h,{parts:s},{responseMimeType:"application/json",responseSchema:S3,temperature:0,topP:0,topK:1,thinkingConfig:{thinkingBudget:0}});yield{status:"progress",message:"AI đã phản hồi. Đang hoàn tất..."};const a=o.text.trim();let c=[];try{c=JSON.parse(a)}catch(d){throw console.error("Lỗi phân tích JSON từ AI:",d),console.error("Dữ liệu thô từ AI (500 ký tự đầu):",a.substring(0,500)),new Error("AI đã trả về dữ liệu không hợp lệ. Vui lòng thử lại.")}const l=d=>{let h=2166136261;for(let f=0;f<d.length;f++)h^=d.charCodeAt(f),h=Math.imul(h,16777619);return(h>>>0).toString(36)},u=c.map(d=>{const h=`${d.fileName||""}|${d.candidateName||""}|${d.jobTitle||""}|${d.experienceLevel||""}`;return{...d,id:`cand_${l(h)}`,status:"SUCCESS"}});u.sort((d,h)=>{var g,y;const f=typeof((g=d.analysis)==null?void 0:g["Tổng điểm"])=="number"?d.analysis["Tổng điểm"]:-1,b=typeof((y=h.analysis)==null?void 0:y["Tổng điểm"])=="number"?h.analysis["Tổng điểm"]:-1;return b!==f?b-f:(d.fileName||"").localeCompare(h.fileName||"")});for(const d of u)yield d}catch(o){console.error("Lỗi phân tích từ AI:",o);const a="AI không thể hoàn tất phân tích. Vui lòng thử lại sau. (Lỗi giao tiếp với máy chủ AI)";throw new Error(a)}}const N3={type:Ne.OBJECT,properties:{responseText:{type:Ne.STRING,description:"The natural language response to the user's query."},candidateIds:{type:Ne.ARRAY,description:"An array of candidate IDs that are relevant to the response, if any.",items:{type:Ne.STRING}}},required:["responseText","candidateIds"]},H1=async(i,e)=>{const t=i.candidates.filter(o=>o.status==="SUCCESS"),n=t.map(o=>{var a,c,l,u;return{id:o.id,name:o.candidateName,rank:(a=o.analysis)==null?void 0:a.Hạng,totalScore:(c=o.analysis)==null?void 0:c["Tổng điểm"],jdFitPercent:(u=(l=o.analysis)==null?void 0:l["Chi tiết"])!=null&&u.find(d=>d["Tiêu chí"].startsWith("Phù hợp JD"))?parseInt(o.analysis["Chi tiết"].find(d=>d["Tiêu chí"].startsWith("Phù hợp JD")).Điểm.split("/")[0],10):0,title:o.jobTitle,level:o.experienceLevel}}),r={total:t.length,countA:t.filter(o=>{var a;return((a=o.analysis)==null?void 0:a.Hạng)==="A"}).length,countB:t.filter(o=>{var a;return((a=o.analysis)==null?void 0:a.Hạng)==="B"}).length,countC:t.filter(o=>{var a;return((a=o.analysis)==null?void 0:a.Hạng)==="C"}).length},s=`
    You are a helpful AI recruitment assistant. Your goal is to help the user analyze and select the best candidates based on the provided data.
    Your language MUST BE Vietnamese.

    **CONTEXT DATA:**
    - Job Position: ${i.job.position}
    - Summary: ${JSON.stringify(r)}
    - Candidate List (sanitized): ${JSON.stringify(n.slice(0,20))}
    
    **USER QUERY:** "${e}"

    **YOUR TASKS:**
    1.  Analyze the user's query and the context data.
    2.  Provide a concise, helpful, and natural response in Vietnamese.
    3.  If the query asks you to suggest, filter, or identify candidates, you MUST include their unique 'id' values in the 'candidateIds' array in your JSON output.
    4.  If no specific candidates are relevant, return an empty 'candidateIds' array.
    5.  Common queries to handle:
        - "suggest", "gợi ý": Find the top candidates based on criteria like rank, score, or jdFit.
        - "compare", "so sánh": Provide a brief comparison of specified candidates.
        - "interview questions", "câu hỏi phỏng vấn": Generate relevant interview questions for a candidate or for the role in general.

    **OUTPUT FORMAT:**
    You must respond with a single, valid JSON object that matches this schema:
    {
      "responseText": "Your Vietnamese language answer here.",
      "candidateIds": ["id-of-candidate-1", "id-of-candidate-2", ...]
    }
  `;try{const o=cA(),a=await kf($h,s,{responseMimeType:"application/json",responseSchema:N3,temperature:0,topP:0,topK:1});return JSON.parse(a.text)}catch(o){throw console.error("Error getting chatbot advice from AI:",o),new Error("AI chatbot is currently unavailable.")}};k3();function k3(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}const M3=({jdText:i,setJdText:e,jobPosition:t,setJobPosition:n,onComplete:r})=>{const s=i.trim().length>50&&t.trim().length>3,o=i.length,[a,c]=Be.useState(!1),[l,u]=Be.useState(""),[d,h]=Be.useState(""),[f,b]=Be.useState(!1),[g,y]=Be.useState(""),v=async D=>{var T;const A=(T=D.target.files)==null?void 0:T[0];if(A){c(!0),h(""),y(""),e(""),n(""),u("Bắt đầu xử lý file...");try{const E=await UU(A,R=>{u(R)});if(!E||E.trim().length<50)throw new Error("Không thể trích xuất đủ nội dung từ file. Vui lòng thử file khác hoặc nhập thủ công.");u("AI đang phân tích và cấu trúc JD...");const I=await W1(E);e(I),u("Đã cấu trúc JD, đang xác định chức danh...");const N=await q1(I);N&&n(N)}catch(E){console.error("Lỗi xử lý JD:",E);const I=E instanceof Error?E.message:"Đã xảy ra lỗi không xác định.";h(I),e("")}finally{c(!1),u("")}}},x=async()=>{if(i.trim().length<200){y("Nội dung JD quá ngắn để tóm tắt.");return}b(!0),y(""),h("");try{const D=await W1(i);e(D);const A=await q1(D);A&&n(A)}catch(D){console.error("Lỗi tóm tắt JD:",D);const A=D instanceof Error?D.message:"Đã xảy ra lỗi không xác định khi tóm tắt.";y(A)}finally{b(!1)}};return w.jsx("section",{id:"module-jd",className:"module-pane active w-full","aria-labelledby":"jd-title",children:w.jsx("div",{className:"flex items-center justify-center p-4 sm:p-6 lg:p-8",children:w.jsx("div",{className:"w-full max-w-6xl",style:{maxWidth:"67rem"},children:w.jsxs("div",{className:"p-8 md:p-12 bg-[--card] border border-[--card-stroke] rounded-2xl shadow-2xl backdrop-blur-lg transition-transform duration-300 hover:-translate-y-0.5",style:{boxShadow:"var(--shadow)"},children:[w.jsx("div",{className:"flex flex-col md:flex-row items-start gap-6 mb-8",children:w.jsxs("div",{className:"relative w-full flex-grow",children:[w.jsx("input",{type:"text",id:"job-position",value:t,onChange:D=>n(D.target.value),className:"peer block w-full text-base px-5 py-3.5 bg-white/5 border border-white/10 rounded-xl transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-[--primary]/50 placeholder-transparent",placeholder:"Vd: Senior Frontend Developer","aria-describedby":"job-title-help",required:!0}),w.jsxs("label",{htmlFor:"job-position",className:`absolute -top-2.5 left-3 bg-[--bg] px-1 text-base text-[--muted] transition-all duration-300 pointer-events-none
                               peer-placeholder-shown:top-3.5 peer-placeholder-shown:left-4 peer-placeholder-shown:text-lg peer-placeholder-shown:bg-transparent peer-placeholder-shown:px-0
                               peer-focus:-top-2.5 peer-focus:left-3 peer-focus:bg-[--bg] peer-focus:px-1 peer-focus:text-base peer-focus:text-[--primary]`,children:[w.jsx("i",{className:"fa-solid fa-briefcase mr-1.5 text-[--accent]/80 opacity-0 peer-focus:opacity-100 transition-opacity"}),"Chức danh công việc ",w.jsx("span",{className:"text-red-400",children:"*"})]}),w.jsx("p",{id:"job-title-help",className:"sr-only",children:"Nhập chức danh công việc bạn đang tuyển dụng."})]})}),w.jsxs("div",{className:"relative",children:[w.jsx("textarea",{id:"job-description",className:`w-full px-5 py-4 bg-white/5 border border-white/10 rounded-xl
                           min-h-[270px] sm:min-h-[305px] md:min-h-[347px]
                           text-base text-[--txt] leading-relaxed placeholder:text-[--muted]/60 
                           resize-none 
                           focus:outline-none focus:ring-2 focus:ring-[--primary]/50 whitespace-pre-wrap`,placeholder:"Dán mô tả công việc đầy đủ tại đây, hoặc dùng OCR JD...",value:i,onChange:D=>e(D.target.value)}),f&&w.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-2 text-[--accent]/80 h-8 px-3 bg-[--bg] rounded-lg",children:[w.jsx("i",{className:"fa-solid fa-spinner fa-spin"}),w.jsx("span",{className:"text-xs",children:"AI đang rút gọn..."})]}),w.jsxs("div",{className:"absolute bottom-3 left-4 text-xs font-mono text-[--muted] pointer-events-none",children:[o," ký tự"]})]}),(d||g)&&w.jsxs("p",{className:"text-[--warning] text-sm mt-4 text-left w-full font-medium",children:[w.jsx("i",{className:"fa-solid fa-triangle-exclamation mr-2"}),d||g]}),w.jsxs("div",{className:"mt-10 grid grid-cols-1 md:grid-cols-3 gap-4",children:[w.jsxs("div",{className:"md:col-span-2 flex gap-3",children:[a?w.jsxs("div",{className:"flex-1 h-12 px-4 flex items-center justify-center text-sm font-medium text-white bg-gradient-to-r from-blue-500 to-cyan-600 border border-blue-400/50 rounded-lg",children:[w.jsx("i",{className:"fa-solid fa-spinner fa-spin mr-2"}),w.jsx("span",{children:l})]}):w.jsxs("label",{htmlFor:"ocr-jd-input",title:"Nhận JD từ PDF/DOCX/PNG bằng OCR","aria-label":"Quét OCR JD",className:"flex-1 cursor-pointer h-12 px-4 flex items-center justify-center text-sm font-medium text-white bg-gradient-to-r from-blue-500 to-cyan-600 border border-blue-400/50 rounded-lg hover:from-blue-600 hover:to-cyan-700 hover:shadow-lg hover:shadow-blue-500/25 transition-all duration-200 shadow-md",children:[w.jsx("i",{className:"fa-solid fa-wand-magic-sparkles md:mr-2"}),w.jsx("span",{className:"hidden md:inline",children:"OCR JD"}),w.jsx("input",{id:"ocr-jd-input",type:"file",className:"hidden",accept:".pdf, .docx, .png, .jpg, .jpeg",onChange:v,onClick:D=>{D.target.value=""},disabled:a||f})]}),w.jsxs("button",{onClick:x,disabled:a||f||i.trim().length<200,title:"Dùng AI để tóm tắt và cấu trúc lại JD đã dán","aria-label":"Rút gọn ý chính JD",className:"flex-1 h-12 px-4 flex items-center justify-center text-sm font-medium text-white bg-gradient-to-r from-purple-500 to-pink-600 border border-purple-400/50 rounded-lg hover:from-purple-600 hover:to-pink-700 hover:shadow-lg hover:shadow-purple-500/25 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:shadow-none disabled:bg-slate-600",children:[w.jsx("i",{className:"fa-solid fa-brain md:mr-2"}),w.jsx("span",{className:"hidden md:inline",children:"Rút gọn JD"})]})]}),w.jsxs("button",{onClick:r,disabled:!s,className:"h-12 px-8 text-base font-semibold flex items-center justify-center gap-2 rounded-xl text-[--bg] transition-all duration-300 ease-in-out shadow-lg bg-gradient-to-r from-[--primary] to-[--accent] hover:-translate-y-0.5 hover:shadow-[--accent]/20 hover:shadow-lg active:scale-95 disabled:bg-slate-700/50 disabled:text-slate-400 disabled:translate-y-0 disabled:shadow-none",children:[w.jsx("span",{className:"hidden md:inline",children:"Hoàn thành & Tiếp tục"}),w.jsx("i",{className:"fa-solid fa-check"})]})]})]})})})})},P3=({hardFilters:i,setHardFilters:e})=>{const t=s=>{const{id:o,value:a}=s.target;e(c=>({...c,[o]:a}))},n=s=>{const{id:o,checked:a}=s.target;e(c=>({...c,[o]:a}))},r=(s,o)=>`hf-control w-full bg-slate-800/80 border rounded-lg p-2.5 text-sm focus:ring-2 focus:border-blue-500 transition-all ${s&&!o?"border-red-500/80 ring-2 ring-red-500/30":"border-slate-600 focus:ring-blue-500"}`;return w.jsxs("div",{className:"h-full flex flex-col filters-panel",children:[w.jsx("div",{className:"mb-6",children:w.jsxs("h3",{className:"font-bold bg-gradient-to-r from-red-400 via-orange-500 to-yellow-400 text-transparent bg-clip-text text-lg flex items-center gap-3",children:[w.jsx("i",{className:"fa-solid fa-filter text-red-400 text-xl"}),"Tiêu chí Lọc"]})}),w.jsxs("div",{className:"flex-1 space-y-3 filters-fields-vertical",children:[w.jsxs("div",{className:`p-3 rounded-lg border transition-all duration-200 field block-field ${i.locationMandatory?"bg-blue-900/30 border-blue-700/50":"border-slate-700/40"}`,children:[w.jsxs("div",{className:"flex justify-between items-center mb-1.5",children:[w.jsxs("label",{htmlFor:"location",className:`text-sm font-semibold transition-colors ${i.locationMandatory?"text-blue-300":"text-blue-200"}`,children:["Địa điểm ",i.locationMandatory&&w.jsx("span",{className:"text-red-400",children:"*"})]}),w.jsx("label",{title:"Đánh dấu tiêu chí này là bắt buộc",htmlFor:"locationMandatory",className:"flex items-center cursor-pointer",children:w.jsx("input",{type:"checkbox",id:"locationMandatory",checked:i.locationMandatory,onChange:n,className:"w-4 h-4 text-blue-500 bg-slate-700 border-slate-600 rounded focus:ring-blue-600 focus:ring-offset-slate-800"})})]}),w.jsxs("select",{id:"location",value:i.location,onChange:t,className:r(i.locationMandatory,!!i.location)+" hf-control",children:[w.jsx("option",{value:"",children:"-- Bắt buộc chọn --"}),w.jsx("option",{value:"Hà Nội",children:"Hà Nội"}),w.jsx("option",{value:"Hải Phòng",children:"Hải Phòng"}),w.jsx("option",{value:"Đà Nẵng",children:"Đà Nẵng"}),w.jsx("option",{value:"Thành phố Hồ Chí Minh",children:"Thành phố Hồ Chí Minh"}),w.jsx("option",{value:"Remote",children:"Remote"})]})]}),w.jsxs("div",{className:`p-3 rounded-lg border transition-all duration-200 field block-field ${i.minExpMandatory?"bg-blue-900/30 border-blue-700/50":"border-slate-700/40"}`,children:[w.jsxs("div",{className:"flex justify-between items-center mb-1.5",children:[w.jsxs("label",{htmlFor:"minExp",className:`text-sm font-semibold transition-colors ${i.minExpMandatory?"text-emerald-300":"text-emerald-200"}`,children:["Kinh nghiệm ",i.minExpMandatory&&w.jsx("span",{className:"text-red-400",children:"*"})]}),w.jsx("label",{title:"Đánh dấu tiêu chí này là bắt buộc",htmlFor:"minExpMandatory",className:"flex items-center cursor-pointer",children:w.jsx("input",{type:"checkbox",id:"minExpMandatory",checked:i.minExpMandatory,onChange:n,className:"w-4 h-4 text-emerald-500 bg-slate-700 border-slate-600 rounded focus:ring-emerald-600 focus:ring-offset-slate-800"})})]}),w.jsxs("select",{id:"minExp",value:i.minExp,onChange:t,className:r(i.minExpMandatory,!!i.minExp)+" hf-control",children:[w.jsx("option",{value:"",children:"-- Không yêu cầu --"}),w.jsx("option",{value:"1",children:"≥ 1 năm"}),w.jsx("option",{value:"2",children:"≥ 2 năm"}),w.jsx("option",{value:"3",children:"≥ 3 năm"}),w.jsx("option",{value:"5",children:"≥ 5 năm"})]})]}),w.jsxs("div",{className:`p-3 rounded-lg border transition-all duration-200 field block-field ${i.seniorityMandatory?"bg-blue-900/30 border-blue-700/50":"border-slate-700/40"}`,children:[w.jsxs("div",{className:"flex justify-between items-center mb-1.5",children:[w.jsxs("label",{htmlFor:"seniority",className:`text-sm font-semibold transition-colors ${i.seniorityMandatory?"text-yellow-300":"text-yellow-200"}`,children:["Cấp bậc ",i.seniorityMandatory&&w.jsx("span",{className:"text-red-400",children:"*"})]}),w.jsx("label",{title:"Đánh dấu tiêu chí này là bắt buộc",htmlFor:"seniorityMandatory",className:"flex items-center cursor-pointer",children:w.jsx("input",{type:"checkbox",id:"seniorityMandatory",checked:i.seniorityMandatory,onChange:n,className:"w-4 h-4 text-yellow-500 bg-slate-700 border-slate-600 rounded focus:ring-yellow-600 focus:ring-offset-slate-800"})})]}),w.jsxs("select",{id:"seniority",value:i.seniority,onChange:t,className:r(i.seniorityMandatory,!!i.seniority)+" hf-control",children:[w.jsx("option",{value:"",children:"-- Không yêu cầu --"}),w.jsx("option",{value:"Intern",children:"Intern"}),w.jsx("option",{value:"Junior",children:"Junior"}),w.jsx("option",{value:"Mid-level",children:"Mid-level"}),w.jsx("option",{value:"Senior",children:"Senior"}),w.jsx("option",{value:"Lead",children:"Lead"})]})]}),w.jsxs("div",{className:`p-3 rounded-lg border transition-all duration-200 field block-field ${i.industryMandatory?"bg-blue-900/30 border-blue-700/50":"border-slate-700/40"}`,children:[w.jsxs("div",{className:"flex justify-between items-center mb-1.5",children:[w.jsxs("label",{htmlFor:"industry",className:`text-sm font-medium transition-colors ${i.industryMandatory?"text-blue-300":"text-slate-300"}`,children:["Ngành nghề ",i.industryMandatory&&w.jsx("span",{className:"text-red-400",children:"*"})]}),w.jsx("label",{title:"Đánh dấu tiêu chí này là bắt buộc",htmlFor:"industryMandatory",className:"flex items-center cursor-pointer",children:w.jsx("input",{type:"checkbox",id:"industryMandatory",checked:i.industryMandatory,onChange:n,className:"w-4 h-4 text-indigo-500 bg-slate-700 border-slate-600 rounded focus:ring-indigo-600 focus:ring-offset-slate-800"})})]}),w.jsx("input",{type:"text",id:"industry",value:i.industry,onChange:t,placeholder:"Vd: Software",className:r(i.industryMandatory,!!i.industry)+" hf-control"})]}),w.jsxs("div",{className:`p-3 rounded-lg border transition-all duration-200 field block-field ${i.languageMandatory?"bg-blue-900/30 border-blue-700/50":"border-slate-700/40"}`,children:[w.jsxs("div",{className:"flex justify-between items-center mb-1.5",children:[w.jsxs("label",{className:`text-sm font-semibold transition-colors ${i.languageMandatory?"text-purple-300":"text-purple-200"}`,children:["Ngôn ngữ ",i.languageMandatory&&w.jsx("span",{className:"text-red-400",children:"*"})]}),w.jsx("label",{title:"Đánh dấu tiêu chí này là bắt buộc",htmlFor:"languageMandatory",className:"flex items-center cursor-pointer",children:w.jsx("input",{type:"checkbox",id:"languageMandatory",checked:i.languageMandatory,onChange:n,className:"w-4 h-4 text-pink-500 bg-slate-700 border-slate-600 rounded focus:ring-pink-600 focus:ring-offset-slate-800"})})]}),w.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[w.jsx("input",{type:"text",id:"language",value:i.language,onChange:t,placeholder:"Vd: Tiếng Anh",className:r(i.languageMandatory,!!i.language)+" hf-control"}),w.jsxs("select",{id:"languageLevel",value:i.languageLevel,onChange:t,className:r(!1,!0)+" hf-control",children:[" ",w.jsx("option",{value:"",children:"-- Mức yêu cầu --"}),w.jsx("option",{value:"B1",children:"CEFR B1"}),w.jsx("option",{value:"B2",children:"CEFR B2"}),w.jsx("option",{value:"C1",children:"CEFR C1"}),w.jsx("option",{value:"C2",children:"CEFR C2"})]})]})]}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 items-stretch",children:[w.jsxs("div",{className:`p-3 rounded-lg border transition-all duration-200 field block-field flex flex-col ${i.educationMandatory?"bg-blue-900/30 border-blue-700/50":"border-slate-700/40"}`,children:[w.jsxs("div",{className:"flex justify-between items-center mb-1.5",children:[w.jsxs("label",{htmlFor:"education",className:`text-sm font-semibold transition-colors ${i.educationMandatory?"text-orange-300":"text-orange-200"}`,children:["Bằng cấp ",i.educationMandatory&&w.jsx("span",{className:"text-red-400",children:"*"})]}),w.jsx("label",{title:"Đánh dấu tiêu chí này là bắt buộc",htmlFor:"educationMandatory",className:"flex items-center cursor-pointer",children:w.jsx("input",{type:"checkbox",id:"educationMandatory",checked:i.educationMandatory,onChange:n,className:"w-4 h-4 text-orange-500 bg-slate-700 border-slate-600 rounded focus:ring-orange-600 focus:ring-offset-slate-800"})})]}),w.jsxs("select",{id:"education",value:i.education,onChange:t,className:r(i.educationMandatory,!!i.education)+" hf-control mt-auto",children:[w.jsx("option",{value:"",children:"-- Không yêu cầu --"}),w.jsx("option",{value:"High School",children:"Tốt nghiệp THPT"}),w.jsx("option",{value:"Associate",children:"Cao đẳng"}),w.jsx("option",{value:"Bachelor",children:"Cử nhân"}),w.jsx("option",{value:"Master",children:"Thạc sĩ"}),w.jsx("option",{value:"PhD",children:"Tiến sĩ"})]})]}),w.jsxs("div",{className:`p-3 rounded-lg border transition-all duration-200 field block-field flex flex-col ${i.certificatesMandatory?"bg-blue-900/30 border-blue-700/50":"border-slate-700/40"}`,children:[w.jsxs("div",{className:"flex justify-between items-center mb-1.5",children:[w.jsxs("label",{htmlFor:"certificates",className:`text-sm font-semibold transition-colors ${i.certificatesMandatory?"text-pink-300":"text-pink-200"}`,children:["Chứng chỉ ",i.certificatesMandatory&&w.jsx("span",{className:"text-red-400",children:"*"})]}),w.jsx("label",{title:"Đánh dấu tiêu chí này là bắt buộc",htmlFor:"certificatesMandatory",className:"flex items-center cursor-pointer",children:w.jsx("input",{type:"checkbox",id:"certificatesMandatory",checked:i.certificatesMandatory,onChange:n,className:"w-4 h-4 text-purple-500 bg-slate-700 border-slate-600 rounded focus:ring-purple-600 focus:ring-offset-slate-800"})})]}),w.jsx("input",{type:"text",id:"certificates",value:i.certificates,onChange:t,placeholder:"Vd: PMP, IELTS 7.0",className:r(i.certificatesMandatory,!!i.certificates)+" hf-control mt-auto"})]})]}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 items-stretch",children:[w.jsxs("div",{className:`p-3 rounded-lg border transition-all duration-200 field block-field flex flex-col ${i.workFormatMandatory?"bg-blue-900/30 border-blue-700/50":"border-slate-700/40"}`,children:[w.jsxs("div",{className:"flex justify-between items-center mb-1.5",children:[w.jsxs("label",{htmlFor:"workFormat",className:`text-sm font-medium transition-colors ${i.workFormatMandatory?"text-blue-300":"text-slate-300"}`,children:["Hình thức ",i.workFormatMandatory&&w.jsx("span",{className:"text-red-400",children:"*"})]}),w.jsx("label",{title:"Đánh dấu tiêu chí này là bắt buộc",htmlFor:"workFormatMandatory",className:"flex items-center cursor-pointer",children:w.jsx("input",{type:"checkbox",id:"workFormatMandatory",checked:i.workFormatMandatory,onChange:n,className:"w-4 h-4 text-cyan-500 bg-slate-700 border-slate-600 rounded focus:ring-cyan-600 focus:ring-offset-slate-800"})})]}),w.jsxs("select",{id:"workFormat",value:i.workFormat,onChange:t,className:r(i.workFormatMandatory,!!i.workFormat)+" hf-control mt-auto",children:[w.jsx("option",{value:"",children:"-- Không yêu cầu --"}),w.jsx("option",{value:"Onsite",children:"Onsite"}),w.jsx("option",{value:"Hybrid",children:"Hybrid"}),w.jsx("option",{value:"Remote",children:"Remote"})]})]}),w.jsxs("div",{className:`p-3 rounded-lg border transition-all duration-200 field block-field flex flex-col ${i.contractTypeMandatory?"bg-blue-900/30 border-blue-700/50":"border-slate-700/40"}`,children:[w.jsxs("div",{className:"flex justify-between items-center mb-1.5",children:[w.jsxs("label",{htmlFor:"contractType",className:`text-sm font-medium transition-colors ${i.contractTypeMandatory?"text-blue-300":"text-slate-300"}`,children:["Hợp đồng ",i.contractTypeMandatory&&w.jsx("span",{className:"text-red-400",children:"*"})]}),w.jsx("label",{title:"Đánh dấu tiêu chí này là bắt buộc",htmlFor:"contractTypeMandatory",className:"flex items-center cursor-pointer",children:w.jsx("input",{type:"checkbox",id:"contractTypeMandatory",checked:i.contractTypeMandatory,onChange:n,className:"w-4 h-4 text-teal-500 bg-slate-700 border-slate-600 rounded focus:ring-teal-600 focus:ring-offset-slate-800"})})]}),w.jsxs("select",{id:"contractType",value:i.contractType,onChange:t,className:r(i.contractTypeMandatory,!!i.contractType)+" hf-control mt-auto",children:[w.jsx("option",{value:"",children:"-- Không yêu cầu --"}),w.jsx("option",{value:"Full-time",children:"Full-time"}),w.jsx("option",{value:"Part-time",children:"Part-time"}),w.jsx("option",{value:"Intern",children:"Intern"}),w.jsx("option",{value:"Contract",children:"Contract"})]})]})]})]})]})},L3=({criterion:i,setWeights:e,isExpanded:t,onToggle:n})=>{var a;const r=Be.useMemo(()=>{var c;return((c=i.children)==null?void 0:c.reduce((l,u)=>l+u.weight,0))||0},[i.children]),s=(c,l)=>{e(u=>{const d={...u[i.key]};return d.children&&(d.children=d.children.map(h=>h.key===c?{...h,weight:l}:h)),{...u,[i.key]:d}})},o=r>20?"bg-emerald-500":r>10?"bg-blue-500":"bg-yellow-500";return w.jsxs("div",{className:"weight-tile bg-slate-800/60 border border-slate-700/80 rounded-xl shadow-md transition-all duration-300 hover:border-blue-500/50 hover:shadow-blue-500/10",children:[w.jsxs("button",{type:"button",className:"tile-head w-full flex flex-col p-3 text-left",onClick:n,"aria-expanded":t,children:[w.jsxs("div",{className:"flex items-center justify-between w-full",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("i",{className:`${i.icon} ${i.color} text-lg w-6 text-center`}),w.jsx("span",{className:"tile-title text-base font-semibold text-slate-200",children:i.name})]}),w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsxs("div",{className:"tile-badge text-base font-bold text-slate-100",children:[r,"%"]}),w.jsx("i",{className:`fa-solid fa-chevron-down text-slate-400 transition-transform duration-300 ${t?"rotate-180":""}`})]})]}),w.jsx("div",{className:"mt-2 mx-1 progress progress--thin",children:w.jsx("div",{className:`progress__bar ${o}`,style:{width:`${r}%`}})})]}),w.jsx("div",{className:`transition-all duration-300 ease-in-out overflow-hidden ${t?"max-h-96":"max-h-0"}`,children:w.jsx("div",{className:"tile-rows p-4 pt-2 space-y-4 border-t border-slate-700/50",children:(a=i.children)==null?void 0:a.map(c=>w.jsxs("div",{className:"tile-row grid grid-cols-10 items-center gap-4",children:[w.jsx("span",{className:"row-label text-sm text-slate-400 col-span-4",children:c.name}),w.jsx("input",{type:"range",min:"0",max:Math.max(20,c.weight),value:c.weight,onChange:l=>s(c.key,parseInt(l.target.value,10)),className:"row-range w-full h-1.5 bg-slate-600 rounded-lg appearance-none cursor-pointer col-span-4",style:{background:`linear-gradient(to right, #2563eb ${c.weight/Math.max(20,c.weight)*100}%, #475569 ${c.weight/Math.max(20,c.weight)*100}%)`}}),w.jsx("div",{className:"col-span-2 text-right",children:w.jsxs("span",{className:"row-badge text-sm font-semibold bg-slate-700/80 text-slate-200 px-3 py-1 rounded-md",children:[c.weight,"%"]})})]},c.key))})})]})},B3=({totalWeight:i})=>{const e=Be.useMemo(()=>i===100?"text-emerald-400":i>100?"text-red-400":"text-yellow-400",[i]);return w.jsxs("div",{className:"flex items-center gap-3 total-weight-display",children:[w.jsx("div",{className:"flex-grow total-progress-bar relative h-[3px] bg-slate-700/60 rounded-full overflow-hidden",children:w.jsx("div",{style:{width:`${Math.min(100,i/100*100)}%`},className:`h-full rounded-full transition-all duration-500 ease-out ${i>100?"bg-red-500":i===100?"bg-gradient-to-r from-blue-500 to-emerald-500":"bg-yellow-500"}`})}),w.jsxs("span",{className:`text-sm font-bold flex-shrink-0 ${e}`,children:["Tổng ",i,"%"]})]})},O3=({weights:i,setWeights:e,hardFilters:t,setHardFilters:n,onComplete:r})=>{const[s,o]=Be.useState(null),[a,c]=Be.useState(null),[l,u]=Be.useState(null),[d,h]=Be.useState(1),f=Be.useMemo(()=>Object.values(i).reduce((v,x)=>x.children?v+x.children.reduce((D,A)=>D+A.weight,0):v+(x.weight||0),0),[i]),b=()=>{c(null);const x=[{key:"location",label:"Địa điểm"},{key:"minExp",label:"Kinh nghiệm"},{key:"seniority",label:"Cấp bậc"},{key:"education",label:"Bằng cấp"},{key:"industry",label:"Ngành nghề"},{key:"language",label:"Ngôn ngữ"},{key:"certificates",label:"Chứng chỉ"},{key:"salary",label:"Mức lương"},{key:"workFormat",label:"Hình thức"},{key:"contractType",label:"Hợp đồng"}].find(D=>{const A=`${D.key}Mandatory`;if(!t[A])return!1;if(D.key==="salary")return!t.salaryMin&&!t.salaryMax;const T=D.key;return!t[T]});return x?(c(`Vui lòng điền giá trị cho tiêu chí bắt buộc: ${x.label}.`),!1):!0},g=()=>{if(!b())return;h(2);const v=document.getElementById("module-weights");v&&v.scrollIntoView({behavior:"smooth",block:"start"})},y=()=>{if(u(null),f!==100){u("Tổng trọng số phải bằng 100% trước khi tiếp tục.");return}r()};return w.jsxs("section",{id:"module-weights",className:"module-pane active w-full",children:[w.jsxs("div",{className:"flex items-center gap-3 mb-6 px-2",children:[w.jsx("button",{type:"button",onClick:()=>h(1),className:`px-4 py-2 rounded-lg text-sm font-semibold transition-all ${d===1?"bg-gradient-to-r from-blue-600 to-cyan-600 text-white shadow-lg":"bg-slate-700/40 text-slate-300 hover:bg-slate-600/50"}`,children:"1. Tiêu chí Lọc"}),w.jsx("button",{type:"button",onClick:()=>d===2&&h(2),className:`px-4 py-2 rounded-lg text-sm font-semibold transition-all ${d===2?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"bg-slate-700/40 text-slate-300"} ${d===1?"opacity-50 cursor-not-allowed":"hover:bg-slate-600/50"}`,disabled:d===1,children:"2. Trọng số Chấm điểm"})]}),d===1&&w.jsxs("div",{className:"bg-slate-800/40 border border-white/10 rounded-xl p-6 space-y-6",children:[w.jsx("div",{className:"flex items-center justify-between",children:w.jsxs("h2",{className:"text-xl font-bold bg-gradient-to-r from-blue-400 via-cyan-400 to-teal-400 text-transparent bg-clip-text flex items-center gap-3",children:[w.jsx("i",{className:"fa-solid fa-filter text-cyan-400 text-2xl"}),"Tiêu chí Lọc ứng viên"]})}),w.jsx(P3,{hardFilters:t,setHardFilters:n}),w.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center mt-4",children:[w.jsxs("button",{onClick:g,className:"h-12 px-8 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-semibold rounded-xl hover:from-blue-500 hover:to-indigo-500 focus:outline-none focus:ring-4 focus:ring-blue-500/40 transition-base text-base flex items-center justify-center gap-2 active:scale-95",children:[w.jsx("span",{className:"hidden md:inline",children:"Hoàn thành Tiêu chí Lọc"}),w.jsx("i",{className:"fa-solid fa-arrow-right"})]}),a&&w.jsx("p",{className:"text-red-400 text-sm w-full text-center font-medium flex-1",children:a})]})]}),d===2&&w.jsx("div",{className:"weights-layout mt-2",children:w.jsxs("div",{className:"weights-col flex flex-col",children:[w.jsxs("div",{className:"flex items-start justify-between px-6 pt-6 pb-3",children:[w.jsxs("h2",{className:"text-xl font-bold bg-gradient-to-r from-purple-400 via-blue-500 to-cyan-400 text-transparent bg-clip-text flex items-center gap-3",children:[w.jsx("i",{className:"fa-solid fa-balance-scale text-purple-400 text-2xl"}),"Phân bổ Trọng số Chấm điểm"]}),w.jsx("div",{className:"hidden sm:flex items-center gap-2 text-sm font-medium",children:w.jsxs("span",{className:`px-3 py-1 rounded-full border text-xs tracking-wide ${f===100?"border-emerald-500 text-emerald-400 bg-emerald-500/10":"border-red-500 text-red-400 bg-red-500/10"}`,children:["Tổng: ",f,"%"]})})]}),w.jsx("div",{className:"weights-body flex-1 px-6 pb-6 space-y-2",children:Object.values(i).filter(v=>v.children).map(v=>w.jsx(L3,{criterion:v,weights:i,setWeights:e,isExpanded:s===v.key,onToggle:()=>o(x=>x===v.key?null:v.key)},v.key))}),w.jsxs("div",{className:"weights-footer mt-auto border-t border-white/10 bg-slate-900/30 px-6 py-5 rounded-b-xl flex flex-col sm:flex-row gap-4 items-center",children:[w.jsx("div",{className:"flex-1 w-full",children:w.jsx(B3,{totalWeight:f})}),w.jsxs("div",{className:"toolbar w-full sm:w-auto flex gap-3",children:[w.jsxs("button",{type:"button",onClick:()=>h(1),className:"h-12 px-6 bg-slate-700/60 text-slate-200 font-medium rounded-xl hover:bg-slate-600 transition-colors text-sm active:scale-95",children:[w.jsx("i",{className:"fa-solid fa-arrow-left mr-1"}),"Quay lại"]}),w.jsxs("button",{onClick:y,disabled:f!==100,className:"h-12 px-8 bg-gradient-to-r from-purple-600 to-pink-600 text-white font-semibold rounded-xl hover:from-purple-500 hover:to-pink-500 focus:outline-none focus:ring-4 focus:ring-purple-500/40 transition-base text-base flex items-center justify-center gap-2 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",children:[w.jsx("span",{className:"hidden md:inline",children:"Hoàn thành Trọng số"}),w.jsx("i",{className:"fa-solid fa-check"})]})]}),l&&w.jsx("p",{className:"text-red-400 text-sm w-full text-center font-medium",children:l})]})]})})]})},W3=i=>{const{cvFiles:e,setCvFiles:t,jdText:n,weights:r,hardFilters:s,setAnalysisResults:o,setIsLoading:a,setLoadingMessage:c,onAnalysisStart:l,completedSteps:u}=i,[d,h]=Be.useState(""),f=g=>{if(g.target.files){const y=Array.from(g.target.files);if(y.length>12){h("Chỉ được phép tải lên tối đa 12 CV mỗi lần."),t([]);return}h(""),t(y)}},b=async()=>{const y=["jd","weights"].filter(v=>!u.includes(v));if(y.length>0){const v=y.map(x=>x==="jd"?"Mô tả công việc":x==="weights"?"Phân bổ trọng số":x).join(", ");h(`Vui lòng hoàn thành các bước trước: ${v}.`);return}if(e.length===0){h("Vui lòng chọn ít nhất một tệp CV để phân tích.");return}h(""),a(!0),l(),o([]);try{const v=F3(n,r,s,e);for await(const x of v)x.status==="progress"?c(x.message):o(D=>[...D,x])}catch(v){console.error("Lỗi phân tích CV:",v);const x=v instanceof Error?v.message:"Đã xảy ra lỗi không xác định. Vui lòng thử lại.";h(x),o(D=>D.some(A=>A.candidateName==="Lỗi Hệ Thống")?D:[...D,{id:`system-error-${Date.now()}`,status:"FAILED",error:x,candidateName:"Lỗi Hệ Thống",fileName:"N/A",jobTitle:"",industry:"",department:"",experienceLevel:"",detectedLocation:""}])}finally{a(!1),c("Hoàn tất phân tích!")}};return w.jsx("section",{id:"module-upload",className:"module-pane active w-full",children:w.jsxs("div",{className:"glass-effect tf-card p-4 md:p-6 rounded-2xl border border-blue-500/20 space-y-6",children:[w.jsxs("div",{className:"relative",children:[w.jsxs("label",{htmlFor:"cv-files",className:"w-full cursor-pointer bg-gradient-to-br from-blue-500/20 to-purple-500/20 text-blue-300 font-bold py-3 px-3 sm:py-4 sm:px-5 rounded-xl border-2 border-dashed border-blue-500/40 hover:from-blue-500/30 hover:to-purple-500/30 hover:border-blue-500/60 transition duration-300 flex items-center justify-center gap-3 backdrop-blur-sm group",children:[w.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:w.jsx("i",{className:"fa-solid fa-cloud-arrow-up text-white text-lg"})}),w.jsxs("div",{className:"text-center",children:[w.jsx("span",{className:"block text-base md:text-lg font-bold",children:"Chọn Tệp CV"}),w.jsx("span",{className:"block text-xs sm:text-sm text-slate-400 mt-1",children:"Hỗ trợ PDF, DOC, DOCX, TXT, JPG, PNG"}),w.jsx("span",{className:"block text-xs text-orange-400 mt-1 font-semibold",children:"Tối đa 12 CV mỗi lần phân tích"})]})]}),w.jsx("input",{type:"file",id:"cv-files",multiple:!0,accept:".txt,.pdf,.doc,.docx,.jpg,.jpeg,.png",className:"hidden",onChange:f}),w.jsx("div",{id:"file-list",className:"mt-4 space-y-2 text-sm text-slate-400",children:e.map((g,y)=>w.jsxs("div",{className:"flex items-center bg-slate-800/50 p-2 rounded-md border border-slate-700",children:[w.jsx("i",{className:"fa-regular fa-file-lines mr-3 text-slate-400"}),w.jsx("span",{className:"truncate flex-1",children:g.name}),w.jsxs("span",{className:"text-xs text-slate-500 ml-2",children:[(g.size/1024).toFixed(1)," KB"]})]},y))})]}),w.jsxs("div",{className:"space-y-4 pt-2",children:[d&&w.jsx("div",{className:"text-sm text-red-400 font-semibold bg-red-500/10 p-3 rounded-lg border border-red-500/20",children:d}),w.jsxs("button",{id:"analyze-button",onClick:b,disabled:e.length===0,className:"w-full bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 text-white font-bold py-4 md:py-5 px-8 rounded-xl hover:from-blue-700 hover:via-purple-700 hover:to-pink-700 focus:outline-none focus:ring-4 focus:ring-blue-500/50 transition-all duration-300 disabled:from-slate-600 disabled:via-slate-600 disabled:to-slate-600 disabled:text-slate-400 disabled:cursor-not-allowed flex items-center justify-center gap-3 text-xl btn-glow shadow-xl relative overflow-hidden group",children:[w.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-white/20 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:w.jsx("i",{className:"fa-solid fa-rocket text-white"})}),w.jsx("span",{children:"Phân Tích CV với AI"})]})]})]})})};var vg,V1;function q3(){if(V1)return vg;V1=1;var i="Expected a function",e=NaN,t="[object Symbol]",n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,c=typeof Ln=="object"&&Ln&&Ln.Object===Object&&Ln,l=typeof self=="object"&&self&&self.Object===Object&&self,u=c||l||Function("return this")(),d=Object.prototype,h=d.toString,f=Math.max,b=Math.min,g=function(){return u.Date.now()};function y(T,E,I){var N,R,P,j,U,B,S=0,J=!1,q=!1,O=!0;if(typeof T!="function")throw new TypeError(i);E=A(E)||0,v(I)&&(J=!!I.leading,q="maxWait"in I,P=q?f(A(I.maxWait)||0,E):P,O="trailing"in I?!!I.trailing:O);function K(le){var ge=N,ye=R;return N=R=void 0,S=le,j=T.apply(ye,ge),j}function H(le){return S=le,U=setTimeout(X,E),J?K(le):j}function Y(le){var ge=le-B,ye=le-S,De=E-ge;return q?b(De,P-ye):De}function F(le){var ge=le-B,ye=le-S;return B===void 0||ge>=E||ge<0||q&&ye>=P}function X(){var le=g();if(F(le))return $(le);U=setTimeout(X,Y(le))}function $(le){return U=void 0,O&&N?K(le):(N=R=void 0,j)}function ne(){U!==void 0&&clearTimeout(U),S=0,N=B=R=U=void 0}function oe(){return U===void 0?j:$(g())}function pe(){var le=g(),ge=F(le);if(N=arguments,R=this,B=le,ge){if(U===void 0)return H(B);if(q)return U=setTimeout(X,E),K(B)}return U===void 0&&(U=setTimeout(X,E)),j}return pe.cancel=ne,pe.flush=oe,pe}function v(T){var E=typeof T;return!!T&&(E=="object"||E=="function")}function x(T){return!!T&&typeof T=="object"}function D(T){return typeof T=="symbol"||x(T)&&h.call(T)==t}function A(T){if(typeof T=="number")return T;if(D(T))return e;if(v(T)){var E=typeof T.valueOf=="function"?T.valueOf():T;T=v(E)?E+"":E}if(typeof T!="string")return T===0?T:+T;T=T.replace(n,"");var I=s.test(T);return I||o.test(T)?a(T.slice(2),I?2:8):r.test(T)?e:+T}return vg=y,vg}var H3=q3();const V3=zh(H3),G3=({analysisData:i,onClose:e})=>{const[t,n]=Be.useState([{id:"initial",author:"bot",content:"Chào bạn, tôi là trợ lý AI. Tôi có thể giúp gì cho bạn với danh sách ứng viên này?"}]),[r,s]=Be.useState(""),[o,a]=Be.useState(!1),[c,l]=Be.useState(!0),u=Be.useRef(null);Be.useEffect(()=>{var g;(g=u.current)==null||g.scrollIntoView({behavior:"smooth"})},[t]);const d=Be.useMemo(()=>{const g=(i==null?void 0:i.candidates)||[],y=i.job.position;if(!g.length)return[`Ứng viên nào phù hợp nhất với vị trí ${y}?`,`3 ứng viên nào nên ưu tiên phỏng vấn đầu cho ${y}?`,`Điểm yếu quan trọng nào cần lưu ý khi chọn ứng viên cho ${y}?`];const v={};for(const T of g){const E=(T.industry||"").trim();E&&(v[E]=(v[E]||0)+1)}let x="",D=0;for(const[T,E]of Object.entries(v))E>D&&(D=E,x=T);const A=[];return x?A.push(`Ứng viên nào nổi bật nhất trong ngành ${x} cho vị trí ${y}?`,`Top 3 ứng viên ngành ${x} nên phỏng vấn đầu và lý do?`,`Những rủi ro quan trọng cần chú ý khi chọn ứng viên trong ngành ${x} cho ${y}?`):A.push(`Ứng viên nào phù hợp nhất với vị trí ${y}?`,`3 ứng viên nào nên ưu tiên phỏng vấn đầu cho ${y}?`,`Điểm yếu quan trọng nào cần lưu ý khi chọn ứng viên cho ${y}?`),A.slice(0,3)},[i]),h=async g=>{s(g),l(!1);const y={id:Date.now().toString(),author:"user",content:g};n(v=>[...v,y]),s(""),a(!0);try{const{responseText:v,candidateIds:x}=await H1(i,g),D=i.candidates.filter(T=>x.includes(T.id)),A={id:(Date.now()+1).toString(),author:"bot",content:v,suggestedCandidates:D.length>0?D.map(T=>({id:T.id,candidateName:T.candidateName,analysis:T.analysis})):void 0};n(T=>[...T,A])}catch(v){const x=v instanceof Error?v.message:"Đã có lỗi xảy ra.",D={id:(Date.now()+1).toString(),author:"bot",content:`Rất tiếc, đã có lỗi: ${x}`};n(A=>[...A,D])}finally{a(!1)}},f=async g=>{if(g.preventDefault(),!r.trim()||o)return;const y={id:Date.now().toString(),author:"user",content:r};n(v=>[...v,y]),s(""),l(!1),a(!0);try{const{responseText:v,candidateIds:x}=await H1(i,r),D=i.candidates.filter(T=>x.includes(T.id)),A={id:(Date.now()+1).toString(),author:"bot",content:v,suggestedCandidates:D.length>0?D.map(T=>({id:T.id,candidateName:T.candidateName,analysis:T.analysis})):void 0};n(T=>[...T,A])}catch(v){const x=v instanceof Error?v.message:"Đã có lỗi xảy ra.",D={id:(Date.now()+1).toString(),author:"bot",content:`Rất tiếc, đã có lỗi: ${x}`};n(A=>[...A,D])}finally{a(!1)}},b=({message:g})=>{const y=g.author==="bot";return w.jsxs("div",{className:`flex gap-3 ${y?"justify-start":"justify-end"}`,children:[y&&w.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center flex-shrink-0",children:w.jsx("i",{className:"fa-solid fa-robot text-sky-500"})}),w.jsxs("div",{className:`max-w-xs md:max-w-sm lg:max-w-xs rounded-2xl px-4 py-2.5 ${y?"bg-slate-800 text-slate-200 rounded-tl-none":"bg-sky-800 text-white rounded-br-none"}`,children:[w.jsx("p",{className:"text-sm leading-relaxed",children:g.content}),g.suggestedCandidates&&w.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-600 space-y-2",children:[w.jsx("p",{className:"text-xs font-semibold text-slate-400",children:"Ứng viên liên quan:"}),g.suggestedCandidates.map(v=>{var x,D;return w.jsxs("div",{className:"bg-slate-700/50 p-2 rounded-lg text-xs",children:[w.jsx("p",{className:"font-bold text-white",children:v.candidateName}),w.jsxs("p",{className:"text-slate-300",children:["Hạng: ",(x=v.analysis)==null?void 0:x.Hạng," - Điểm: ",(D=v.analysis)==null?void 0:D["Tổng điểm"]]})]},v.id)})]})]})]})};return w.jsxs("div",{className:"bg-slate-800/70 border border-slate-700 rounded-2xl shadow-lg flex flex-col h-96 max-h-[70vh] z-50",children:[w.jsxs("header",{className:"p-4 border-b border-slate-700 flex-shrink-0 flex items-center justify-between",children:[w.jsxs("h3",{className:"font-bold text-lg text-white flex items-center gap-2",children:[w.jsx("i",{className:"fa-solid fa-brain text-sky-500"}),"Trợ lý Tuyển dụng AI"]}),e&&w.jsx("button",{onClick:e,className:"text-slate-400 hover:text-white transition-colors","aria-label":"Đóng chatbot",children:w.jsx("i",{className:"fa-solid fa-times"})})]}),w.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-5",children:[t.map(g=>w.jsx(b,{message:g},g.id)),o&&w.jsxs("div",{className:"flex justify-start gap-3",children:[w.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center flex-shrink-0",children:w.jsx("i",{className:"fa-solid fa-robot text-sky-500"})}),w.jsxs("div",{className:"max-w-xs rounded-2xl px-4 py-3 bg-slate-800 rounded-tl-none flex items-center gap-2",children:[w.jsx("span",{className:"w-2 h-2 bg-slate-400 rounded-full animate-pulse delay-0"}),w.jsx("span",{className:"w-2 h-2 bg-slate-400 rounded-full animate-pulse delay-150"}),w.jsx("span",{className:"w-2 h-2 bg-slate-400 rounded-full animate-pulse delay-300"})]})]}),w.jsx("div",{ref:u})]}),w.jsxs("div",{className:"p-3 border-t border-slate-700 flex-shrink-0 bg-slate-800/50 rounded-b-2xl",children:[c&&t.length===1&&w.jsxs("div",{className:"mb-3",children:[w.jsx("p",{className:"text-xs text-slate-400 mb-2",children:"Gợi ý câu hỏi:"}),w.jsx("div",{className:"flex flex-wrap gap-2",children:d.map((g,y)=>w.jsx("button",{onClick:()=>h(g),className:"text-xs bg-slate-700 hover:bg-slate-600 text-slate-200 px-3 py-1.5 rounded-full transition-colors border border-slate-600",disabled:o,children:g},y))})]}),w.jsxs("form",{onSubmit:f,className:"flex gap-2",children:[w.jsx("input",{type:"text",value:r,onChange:g=>s(g.target.value),placeholder:"Hỏi AI về ứng viên...",className:"flex-1 bg-slate-700 border border-slate-600 rounded-lg px-4 py-2.5 text-sm text-white focus:outline-none focus:ring-2 focus:ring-sky-600 transition-colors disabled:opacity-50",disabled:o}),w.jsx("button",{type:"submit",disabled:o||!r.trim(),className:"w-10 h-10 flex items-center justify-center bg-sky-700 text-white rounded-lg hover:bg-sky-600 transition-colors disabled:bg-slate-600 disabled:cursor-not-allowed flex-shrink-0",children:o?w.jsx("i",{className:"fa-solid fa-spinner fa-spin"}):w.jsx("i",{className:"fa-solid fa-paper-plane"})})]})]})]})},xh=["frontend","backend","fullstack","mobile","android","ios","devops","data","qa","tester","product","designer","ui","ux"],_h=["java","spring","react","node","python","django","flask","golang","go","dotnet",".net","c#","c++","kotlin","swift","angular","vue","flutter","docker","kubernetes","k8s","sql","mysql","postgres","mongodb","redis","kafka","elasticsearch","aws","azure","gcp","cloud","terraform"],Dh=["fintech","ecommerce","banking","payment","logistics","edtech","education","healthcare","retail","saas"],Th=["agile","scrum","kanban","ci/cd","cicd","tdd","devops"],Ah=["lead","leader","leadership","mentor","ownership","independent","autonomous","self-driven"];function Mf(i){return i.toLowerCase().normalize("NFD").replace(new RegExp("\\p{Diacritic}+","gu"),"").replace(/[^a-z0-9+./#\-\s]/g," ").replace(/\s+/g," ").trim()}function jc(i){return[...new Set(i)]}function lA(i){const e=[];let t;const n=/(\d+)\s*[-–]\s*(\d+)\s*(?:nam|year|yrs|y)/gi,r=/(\d+)\s*(?:\+|plus)?\s*(?:nam|year|yrs|y)/gi;let s;for(;s=n.exec(i);)e.push(`years_${s[1]}-${s[2]}`),t=Math.max(t??0,parseInt(s[2],10));for(;s=r.exec(i);){const o=parseInt(s[1],10);e.push(`years>=${o}`),t=Math.max(t??0,o)}return{yearsTokens:jc(e),maxYears:t}}function z3(i){if(!i)return{keywords:[]};const n=Mf(i).split(/\n|\r/).map(l=>l.trim()).filter(Boolean).filter(l=>/(yeu cau|kinh nghiem|requirement|experience|qualification)/.test(l));if(n.length===0)return{keywords:[]};const r=n.join(" "),{yearsTokens:s,maxYears:o}=lA(r),a=[...s],c=(l,u)=>{u.forEach(d=>{r.includes(d)&&a.push(d)})};return c(a,xh),c(a,_h),c(a,Dh),c(a,Th),c(a,Ah),{keywords:jc(a),requiredYears:o}}function $3(i){if(!i)return{keywords:[]};const e=Mf(i),{yearsTokens:t,maxYears:n}=lA(e),r=[...t],s=(o,a)=>a.forEach(c=>{o.includes(c)&&r.push(c)});return s(e,xh),s(e,_h),s(e,Dh),s(e,Th),s(e,Ah),{keywords:jc(r),totalYears:n}}function X3(i,e,t,n){if(i.length===0)return{jdKeywords:[],cvKeywords:e,matched:[],missing:[],uncertain:[],matchPercent:"N/A",fitLabel:"N/A"};const r=i.filter(v=>e.includes(v)),s=i.filter(v=>!e.includes(v)&&!v.startsWith("years")),o=[],a={years:35,role:25,tech:25,domain_method:10,leadership:5};let c=0,l=0;if(i.some(v=>v.startsWith("years"))&&t!==void 0&&(l+=a.years,n!==void 0?n>=t?c+=a.years:n>=.8*t&&(c+=a.years*.5):o.push(i.find(v=>v.startsWith("years")))),i.some(v=>xh.includes(v))&&(l+=a.role,e.some(v=>xh.includes(v))?c+=a.role:o.push("role")),i.some(v=>_h.includes(v))){l+=a.tech;const v=i.filter(D=>_h.includes(D));v.some(D=>e.includes(D))?c+=a.tech:s.push(v[0])}i.some(v=>Dh.includes(v)||Th.includes(v))&&(l+=a.domain_method,e.some(x=>Dh.includes(x)||Th.includes(x))?c+=a.domain_method:o.push("domain/method")),i.some(v=>Ah.includes(v))&&(l+=a.leadership,e.some(x=>Ah.includes(x))?c+=a.leadership:o.push("leadership"));const g=l===0?"N/A":parseFloat((c/l*100).toFixed(1));let y="N/A";return g!=="N/A"&&(y=g>=80?"Strong Fit":g>=65?"Good":g>=50?"Moderate":"Low"),{jdKeywords:i,cvKeywords:e,matched:r,missing:jc(s),uncertain:jc(o),matchPercent:g,fitLabel:y,totalYearsCV:n,requiredYearsJD:t}}function j3(i,e){const{keywords:t,requiredYears:n}=z3(i),{keywords:r,totalYears:s}=$3(e);return X3(t,r,n,s)}const Y3=["java","spring","react","node","python","kotlin","swift","docker","kubernetes","k8s","terraform","aws","azure","gcp","sql","mongodb","redis","kafka","elk","elasticsearch","microservice","microservices"],J3=["kpi","%","percent","tăng","giam","increase","reduce","growth","roi","revenue","throughput","latency","users","mau","dau"],K3=["dai hoc","university","college","bachelor","master","phd","cử nhân","thạc sĩ","tiến sĩ"],Z3=["english","toeic","ielts","japanese","n2","chinese","korean","german"],Q3=["report","documentation","process","compliance","standard","iso"],eM=["months","years"],tM=["teamwork","collaborative","ownership","growth mindset","adapt","communication"],nM=[{key:"jobfit",display:"Phù hợp JD (Job Fit)",hints:[]},{key:"experience",display:"Kinh nghiệm",hints:[]},{key:"skills",display:"Kỹ năng",hints:Y3},{key:"achievements",display:"Thành tựu/KPI",hints:J3},{key:"education",display:"Học vấn",hints:K3},{key:"language",display:"Ngôn ngữ",hints:Z3},{key:"professional",display:"Chuyên nghiệp",hints:Q3},{key:"stability",display:"Gắn bó & Lịch sử CV",hints:eM},{key:"culture",display:"Phù hợp văn hoá",hints:tM}];function iM(i){if(!i)return[];const e=Mf(i),t=[];return nM.forEach(n=>{if(n.key!=="experience")if(n.hints.length===0){const r=Array.from(new Set(e.match(/\b[a-z]{4,}\b/g)||[])).filter(s=>s.length<=16&&/dev|engineer|developer|product|design|data|qa|test|front|back|full|lead|manager/.test(s)).slice(0,12);t.push({key:n.key,display:n.display,keywords:r})}else{const r=n.hints.filter(s=>e.includes(s)).slice(0,20);r.length&&t.push({key:n.key,display:n.display,keywords:r})}}),t}function rM(i,e,t){if(e.length===0)return null;const n=Mf(t||"").replace(/\n+/g," "),r=e.filter(o=>n.includes(o)),s=e.filter(o=>!n.includes(o));return{display:i,jdKeywords:e,matched:r,missing:s}}const G1=["Phù hợp JD (Job Fit)","Kinh nghiệm","Kỹ năng","Thành tựu/KPI","Học vấn","Ngôn ngữ","Chuyên nghiệp","Gắn bó & Lịch sử CV","Phù hợp văn hoá"],sM={"Phù hợp JD (Job Fit)":{icon:"fa-solid fa-bullseye",color:"text-sky-400"},"Kinh nghiệm":{icon:"fa-solid fa-briefcase",color:"text-green-400"},"Kỹ năng":{icon:"fa-solid fa-gears",color:"text-purple-400"},"Thành tựu/KPI":{icon:"fa-solid fa-trophy",color:"text-yellow-400"},"Học vấn":{icon:"fa-solid fa-graduation-cap",color:"text-indigo-400"},"Ngôn ngữ":{icon:"fa-solid fa-language",color:"text-orange-400"},"Chuyên nghiệp":{icon:"fa-solid fa-file-invoice",color:"text-cyan-400"},"Gắn bó & Lịch sử CV":{icon:"fa-solid fa-hourglass-half",color:"text-lime-400"},"Phù hợp văn hoá":{icon:"fa-solid fa-users-gear",color:"text-pink-400"}},oM=({item:i,isExpanded:e,onToggle:t,jdText:n})=>{const[r,s]=ih.useState(!1),o=Be.useMemo(()=>{var U;const T=i.Điểm.match(/([\d.]+)\/([\d.]+)/),E=parseFloat((T==null?void 0:T[1])||"0"),I=parseFloat((T==null?void 0:T[2])||"0");console.log("Formula from AI:",i["Công thức"]),console.log("Score format:",i.Điểm);let N=i["Công thức"].match(/subscore ([\d.]+)\/([\d.]+)% = ([\d.]+) points/),R=parseFloat((N==null?void 0:N[1])||"0"),P=parseFloat((N==null?void 0:N[2])||"0"),j=(N==null?void 0:N[3])||"0";if(N||(N=i["Công thức"].match(/subscore ([\d.]+) × trọng số ([\d]+)% = (.*)$/),R=parseFloat((N==null?void 0:N[1])||"0"),P=parseFloat((N==null?void 0:N[2])||"0"),j=((U=N==null?void 0:N[3])==null?void 0:U.trim())||"0"),!N){const B=i["Công thức"].match(/[\d.]+/g);B&&B.length>=2&&(R=parseFloat(B[0]),P=I,j=R.toString())}return console.log("Parsed data:",{score:E,maxScore:I,subscore:R,weight:P,formulaResult:j}),{score:E,maxScore:I,subscore:R,weight:P,formulaResult:j}},[i]),a=()=>{navigator.clipboard.writeText(i["Dẫn chứng"]),s(!0),setTimeout(()=>s(!1),2e3)},c=sM[i["Tiêu chí"]]||{icon:"fa-solid fa-question-circle",color:"text-slate-400"},l=o.score/o.maxScore*100,u=l>=85?"bg-emerald-500/20 text-emerald-300 border-emerald-500/30":l>=65?"bg-yellow-500/20 text-yellow-300 border-yellow-500/30":"bg-red-500/20 text-red-300 border-red-500/30",d=l>=90?"Expert":l>=75?"Advanced":l>=55?"Intermediate":"Beginner",h=[];l<55&&(/Kỹ năng/i.test(i["Tiêu chí"])&&h.push("Bổ sung chứng chỉ hoặc dự án thực tế thể hiện mức độ làm chủ công nghệ cốt lõi."),/Kinh nghiệm/i.test(i["Tiêu chí"])&&h.push("Làm rõ số năm, phạm vi trách nhiệm và kết quả định lượng trong từng vai trò."),/Thành tựu|KPI/i.test(i["Tiêu chí"])&&h.push("Thêm KPI cụ thể (ví dụ: % cải thiện, số người dùng, tốc độ, doanh thu)."),/Học vấn/i.test(i["Tiêu chí"])&&h.push("Bổ sung chuyên ngành, đề tài hoặc môn học liên quan JD."),/Ngôn ngữ/i.test(i["Tiêu chí"])&&h.push("Ghi rõ cấp độ (IELTS/TOEIC/CEFR) hoặc kinh nghiệm sử dụng trong môi trường quốc tế."),/Chuyên nghiệp/i.test(i["Tiêu chí"])&&h.push("Chuẩn hóa format bullet, thống nhất thì hiện tại/quá khứ và kiểm tra lỗi chính tả."),/Gắn bó/i.test(i["Tiêu chí"])&&h.push("Làm rõ lý do chuyển việc hoặc nhấn mạnh các giai đoạn ổn định dài hạn."),/văn hoá/i.test(i["Tiêu chí"])&&h.push("Thêm minh chứng về teamwork, ownership hoặc growth mindset."));const f=l,b=T=>{if(!T||T==="Không tìm thấy thông tin trong CV")return T;const E=[/\b(aws|azure|gcp|docker|kubernetes|react|node|python|java|typescript|sql|mongodb|redis|kafka)\b/gi,/\b(\d+\s*(?:%|users|người|MAU|DAU|triệu|tỷ|kpi|doanh thu|revenue))\b/gi,/\b(leader|leadership|teamwork|ownership|growth|agile|scrum)\b/gi];let I=T;return E.forEach((N,R)=>{I=I.replace(N,P=>`<span class="evidence-hl hl-${R}">${P}</span>`)}),I},g=/Kinh nghiệm/i.test(i["Tiêu chí"]),y=Be.useMemo(()=>iM(n),[n]),v=Be.useMemo(()=>y.find(T=>T.display===i["Tiêu chí"]),[y,i["Tiêu chí"]]),x=Be.useMemo(()=>g||!v?null:rM(i["Tiêu chí"],v.keywords,i["Dẫn chứng"]),[v,i["Dẫn chứng"],g,i["Tiêu chí"]]);let D=null,A=null;return g&&(A=j3(n,i["Dẫn chứng"]||""),D=w.jsxs("div",{className:"bg-slate-900/70 p-3 rounded-lg space-y-3",children:[w.jsx("h5",{className:"text-sm font-semibold text-slate-300 mb-1",children:"Phân tích nhanh"}),A.matchPercent==="N/A"?w.jsx("p",{className:"text-xs text-slate-500 italic",children:"JD chưa có mục yêu cầu kinh nghiệm rõ ràng"}):w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"space-y-2",children:[w.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-400",children:[w.jsx("span",{children:"Mức độ phù hợp JD"}),w.jsxs("span",{className:"font-semibold text-cyan-400",children:[A.matchPercent,"%"]})]}),w.jsx("div",{className:"h-2 w-full bg-slate-700/60 rounded overflow-hidden",children:w.jsx("div",{className:`h-full ${A.matchPercent>=80?"bg-emerald-500":A.matchPercent>=65?"bg-yellow-500":A.matchPercent>=50?"bg-orange-500":"bg-red-500"}`,style:{width:`${A.matchPercent}%`}})}),w.jsxs("div",{className:"text-xs text-slate-400",children:["Nhận định: ",w.jsx("span",{className:"font-medium text-slate-300",children:A.fitLabel})]})]}),w.jsxs("div",{className:"pt-2 border-t border-slate-700/50 space-y-2",children:[w.jsx("div",{className:"text-[11px] text-slate-400 font-medium",children:"Keyword JD"}),w.jsx("div",{className:"flex flex-wrap gap-1",children:A.jdKeywords.slice(0,8).map(T=>w.jsx("span",{className:"px-2 py-0.5 rounded-full bg-slate-700/60 text-[10px] text-slate-200 border border-slate-600",children:T},T))})]}),w.jsxs("div",{className:"pt-1 space-y-2",children:[w.jsx("div",{className:"text-[11px] text-slate-400 font-medium",children:"Khớp"}),w.jsxs("div",{className:"flex flex-wrap gap-1",children:[A.matched.slice(0,5).map(T=>w.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-600/30 text-emerald-300 text-[10px] border border-emerald-500/40",children:T},T)),A.matched.length===0&&w.jsx("span",{className:"text-[11px] text-slate-500",children:"(Không)"})]}),w.jsx("div",{className:"text-[11px] text-slate-400 font-medium",children:"Thiếu"}),w.jsxs("div",{className:"flex flex-wrap gap-1",children:[A.missing.slice(0,5).map(T=>w.jsx("span",{className:"px-2 py-0.5 rounded-full bg-yellow-600/30 text-yellow-300 text-[10px] border border-yellow-500/40",children:T},T)),A.missing.length===0&&w.jsx("span",{className:"text-[11px] text-slate-500",children:"(Không)"})]}),w.jsx("div",{className:"text-[11px] text-slate-400 font-medium",children:"Chưa rõ"}),w.jsxs("div",{className:"flex flex-wrap gap-1",children:[A.uncertain.slice(0,5).map(T=>w.jsx("span",{className:"px-2 py-0.5 rounded-full bg-slate-600/40 text-slate-300 text-[10px] border border-slate-500/40",children:T},T)),A.uncertain.length===0&&w.jsx("span",{className:"text-[11px] text-slate-500",children:"(Không)"})]})]}),typeof A.matchPercent=="number"&&A.matchPercent<70&&w.jsxs("div",{className:"pt-2 border-t border-slate-700/50",children:[w.jsxs("p",{className:"text-[11px] text-slate-300 font-medium flex items-center gap-1",children:[w.jsx("i",{className:"fa-solid fa-lightbulb text-yellow-400"}),"Gợi ý cải thiện:"]}),w.jsx("p",{className:"text-[11px] text-slate-400 leading-relaxed",children:"Làm rõ thêm thời lượng, vai trò cụ thể và công nghệ chính trong các dự án gần nhất để tăng mức phù hợp."})]})]})]})),w.jsxs("div",{className:"bg-slate-800/50 rounded-2xl border border-slate-700/80 shadow-sm transition-all duration-200 hover:shadow-lg hover:border-blue-600/60",children:[w.jsxs("button",{className:"w-full flex items-center justify-between p-4 h-[64px] text-left",onClick:t,"aria-expanded":e,children:[w.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[w.jsx("i",{className:`${c.icon} ${c.color} w-5 text-center text-lg`}),w.jsx("span",{className:"font-semibold text-slate-200 truncate",children:i["Tiêu chí"]}),w.jsx("span",{className:"ml-2 px-2 py-0.5 rounded text-[10px] tracking-wide font-semibold bg-slate-700/70 text-slate-300 border border-slate-600",children:d})]}),w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsxs("span",{className:`text-base font-bold px-3 py-1.5 rounded-lg text-white ${u.replace(/text-\w+-\d+/,"").replace("border-transparent","")}`,children:[o.score,w.jsxs("span",{className:"text-xs text-slate-400",children:["/",o.maxScore]})]}),w.jsx("i",{className:`fa-solid fa-chevron-down text-slate-400 transition-transform duration-300 ${e?"rotate-180":""}`})]})]}),e&&w.jsx("div",{className:"px-4 pb-4 pt-2 border-t border-slate-700/50",children:w.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-4",children:[w.jsxs("div",{className:"bg-slate-900/70 p-3 rounded-lg",children:[w.jsxs("div",{className:"flex justify-between items-center mb-2",children:[w.jsx("h5",{className:"text-sm font-semibold text-slate-300",children:"Dẫn chứng (trích từ CV)"}),w.jsxs("button",{onClick:a,className:"text-xs text-slate-400 hover:text-white transition-colors flex items-center gap-1.5",children:[w.jsx("i",{className:`fa-solid ${r?"fa-check text-emerald-400":"fa-copy"}`}),r?"Đã chép":"Chép"]})]}),w.jsx("blockquote",{className:"text-sm text-slate-400 italic border-l-2 border-blue-500 pl-3 leading-relaxed evidence-block",dangerouslySetInnerHTML:{__html:i["Dẫn chứng"]==="Không tìm thấy thông tin trong CV"?'<span class="not-italic bg-yellow-500/10 text-yellow-400 px-2 py-1 rounded-md text-xs font-semibold">Chưa tìm thấy trong CV</span>':b(i["Dẫn chứng"])}})]}),g&&D,!g&&x&&w.jsxs("div",{className:"bg-slate-900/70 p-3 rounded-lg space-y-3",children:[w.jsx("h5",{className:"text-sm font-semibold text-slate-300 mb-1",children:"Phân tích nhanh"}),w.jsxs("div",{className:"text-[11px] text-slate-400",children:["Từ khóa JD (",x.jdKeywords.length,")"]}),w.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:x.jdKeywords.slice(0,12).map(T=>w.jsx("span",{className:"pill pill--uncertain",children:T},T))}),w.jsx("div",{className:"text-[11px] text-slate-400 font-medium",children:"Khớp"}),w.jsx("div",{className:"flex flex-wrap gap-1",children:x.matched.length>0?x.matched.slice(0,10).map(T=>w.jsx("span",{className:"pill pill--match",children:T},T)):w.jsx("span",{className:"text-[11px] text-slate-500",children:"(Không)"})}),w.jsx("div",{className:"text-[11px] text-slate-400 font-medium mt-2",children:"Thiếu"}),w.jsx("div",{className:"flex flex-wrap gap-1",children:x.missing.length>0?x.missing.slice(0,10).map(T=>w.jsx("span",{className:"pill pill--missing",children:T},T)):w.jsx("span",{className:"text-[11px] text-slate-500",children:"(Không)"})})]}),w.jsxs("div",{className:"bg-slate-900/70 p-3 rounded-lg",children:[w.jsx("h5",{className:"text-sm font-semibold text-slate-300 mb-3",children:"Giải thích & Công thức"}),!g&&x&&w.jsxs("div",{className:"mb-2 text-[11px] text-slate-400 bg-slate-800/60 border border-slate-700/60 rounded p-2 leading-relaxed",children:[w.jsx("span",{className:"text-slate-300 font-medium",children:"So khớp JD:"})," ",x.matched.length,"/",x.jdKeywords.length," từ khóa xuất hiện.",x.missing.length>0&&w.jsxs(w.Fragment,{children:[" ","Thiếu ",w.jsx("span",{className:"text-yellow-300 font-medium",children:x.missing.length})," từ: ",x.missing.slice(0,3).join(", "),x.missing.length>3?"…":""]})]}),g&&A&&w.jsxs("div",{className:"mb-2 text-[11px] text-slate-400 bg-slate-800/60 border border-slate-700/60 rounded p-2 leading-relaxed",children:[w.jsx("span",{className:"text-slate-300 font-medium",children:"Tổng quan kinh nghiệm:"})," ",A.matchPercent==="N/A"?"Không xác định":`${A.matchPercent}% (${A.fitLabel})`,".",A.missing.length>0&&w.jsxs(w.Fragment,{children:[" Thiếu: ",w.jsxs("span",{className:"text-yellow-300 font-medium",children:[A.missing.slice(0,3).join(", "),A.missing.length>3?"…":""]})]})]}),w.jsx("div",{className:"mb-3",children:w.jsx("p",{className:"text-sm text-slate-400 leading-relaxed",children:i["Giải thích"]})}),w.jsxs("div",{className:"space-y-2",children:[w.jsx("div",{className:"text-xs text-slate-500 font-medium",children:"Công thức tính điểm:"}),w.jsx("div",{className:"bg-slate-800/50 p-2 rounded border border-slate-700/50",children:w.jsxs("div",{className:"flex items-center justify-between text-xs",children:[w.jsx("span",{className:"text-slate-400",children:"Đánh giá thực tế:"}),w.jsxs("span",{className:"font-mono text-cyan-400",children:[o.score,"/",o.maxScore]})]})}),w.jsxs("div",{className:"bg-slate-800/50 p-2 rounded border border-slate-700/50",children:[w.jsx("div",{className:"text-xs text-slate-400 mb-1",children:"Công thức subscore:"}),w.jsx("div",{className:"font-mono text-xs",children:o.weight>0&&o.maxScore===o.weight?w.jsxs("span",{children:[w.jsx("span",{className:"text-cyan-400",children:o.score})," / ",w.jsxs("span",{className:"text-purple-400",children:[o.weight,"%"]})," = ",w.jsxs("span",{className:"text-yellow-400 font-bold",children:[o.formulaResult," điểm"]})]}):o.weight>0?w.jsxs("span",{children:[w.jsx("span",{className:"text-cyan-400",children:o.subscore})," × ",w.jsxs("span",{className:"text-purple-400",children:["trọng số ",o.weight,"%"]})," = ",w.jsx("span",{className:"text-yellow-400 font-bold",children:o.formulaResult})]}):w.jsx("span",{className:"text-slate-400",children:i["Công thức"]||"Không có công thức"})})]}),w.jsxs("div",{className:"bg-slate-800/50 p-2 rounded border border-slate-700/50",children:[w.jsx("div",{className:"text-xs text-slate-400 mb-1",children:"Đóng góp vào điểm tổng:"}),w.jsx("div",{className:"text-xs text-slate-300",children:o.formulaResult&&o.formulaResult!=="0"?w.jsxs("span",{children:["Tiêu chí này đóng góp ",w.jsx("span",{className:"font-bold text-yellow-400",children:o.formulaResult})," điểm",o.weight>0&&o.maxScore===o.weight?` (điểm đánh giá trực tiếp trên thang ${o.weight}%)`:o.weight>0?` (từ đánh giá ${o.subscore}/100 × ${o.weight}%)`:""]}):w.jsx("span",{className:"text-slate-500",children:"Đang tính toán..."})})]})]})]}),!g&&!x&&w.jsxs("div",{className:"bg-slate-900/70 p-3 rounded-lg space-y-3",children:[w.jsx("h5",{className:"text-sm font-semibold text-slate-300 mb-1",children:"Phân tích nhanh"}),w.jsxs("div",{className:"space-y-2",children:[w.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-400",children:[w.jsx("span",{children:"Mức độ phù hợp JD"}),w.jsxs("span",{className:"font-semibold text-cyan-400",children:[f.toFixed(0),"%"]})]}),w.jsx("div",{className:"h-2 w-full bg-slate-700/60 rounded overflow-hidden",children:w.jsx("div",{className:`h-full ${f>=85?"bg-emerald-500":f>=65?"bg-yellow-500":"bg-red-500"}`,style:{width:`${Math.min(100,Math.max(0,f))}%`}})}),w.jsxs("div",{className:"text-xs text-slate-400",children:["Đánh giá tổng quan: ",w.jsx("span",{className:"font-medium text-slate-300",children:d})]})]}),h.length>0&&w.jsxs("div",{className:"pt-2 border-t border-slate-700/50",children:[w.jsxs("p",{className:"text-xs font-semibold text-slate-300 mb-1 flex items-center gap-1",children:[w.jsx("i",{className:"fa-solid fa-lightbulb text-yellow-400"}),"Gợi ý cải thiện"]}),w.jsx("ul",{className:"list-disc list-inside space-y-1 text-[11px] text-slate-400",children:h.map((T,E)=>w.jsx("li",{children:T},E))})]})]})]})})]})},uA=({candidate:i,expandedCriteria:e,onToggleCriterion:t,jdText:n})=>{var u,d,h,f;const r=Be.useMemo(()=>{var b;return(b=i.analysis)!=null&&b["Chi tiết"]?[...i.analysis["Chi tiết"]].sort((g,y)=>G1.indexOf(g["Tiêu chí"])-G1.indexOf(y["Tiêu chí"])):[]},[i.analysis]),s=((u=i.analysis)==null?void 0:u["Tổng điểm"])||0,o=80,a=Math.min(100,Math.round(s/o*100)),c=s>=60?"Ứng viên có nền tảng tốt, nên xem xét mời phỏng vấn.":s>=40?"Ứng viên có tiềm năng, cân nhắc nếu thiếu nguồn.":"Nên ưu tiên ứng viên khác có mức phù hợp cao hơn.",l="±0.0";return w.jsxs("div",{className:"p-4 md:p-6 space-y-6",children:[w.jsxs("div",{className:"bg-slate-800/60 border border-slate-700/70 rounded-xl p-5 flex flex-col md:flex-row gap-6",children:[w.jsxs("div",{className:"flex-1 space-y-3",children:[w.jsxs("h4",{className:"text-lg font-semibold text-slate-100 flex items-center gap-2",children:[w.jsx("i",{className:"fa-solid fa-chart-pie text-cyan-400"}),"Tổng hợp đánh giá"]}),w.jsxs("p",{className:"text-sm text-slate-400 leading-relaxed",children:["Ứng viên đạt ",w.jsxs("span",{className:"font-semibold text-slate-200",children:[s,"/",o]})," điểm – Mức phù hợp tổng thể: ",w.jsxs("span",{className:"font-semibold text-cyan-400",children:[a,"%"]}),". Độ ổn định điểm: ",w.jsx("span",{className:"text-slate-300 font-medium",children:l})]}),w.jsx("div",{className:"h-2 w-full bg-slate-700/50 rounded overflow-hidden",children:w.jsx("div",{className:`${a>=75?"bg-emerald-500":a>=55?"bg-yellow-500":"bg-red-500"} h-full`,style:{width:`${a}%`}})}),w.jsxs("p",{className:"text-sm text-slate-300 font-medium",children:["Nhận định: ",w.jsx("span",{className:"text-slate-200 font-normal",children:c})]})]}),w.jsxs("div",{className:"w-full md:w-60 bg-slate-900/60 rounded-lg p-4 border border-slate-700/70 flex flex-col gap-3 text-xs",children:[w.jsxs("div",{className:"flex items-center justify-between text-slate-400",children:[w.jsx("span",{children:"Điểm"}),w.jsx("span",{className:"font-mono text-slate-200",children:s})]}),w.jsxs("div",{className:"flex items-center justify-between text-slate-400",children:[w.jsx("span",{children:"Phù hợp JD"}),w.jsxs("span",{className:"font-mono text-cyan-400",children:[a,"%"]})]}),w.jsxs("div",{className:"flex items-center justify-between text-slate-400",children:[w.jsx("span",{children:"Ổn định"}),w.jsx("span",{className:"font-mono text-slate-300",children:l})]}),w.jsx("div",{className:"pt-1 border-t border-slate-700/50 text-slate-500 leading-relaxed",children:"Hiển thị trên thang chuẩn hóa 80 điểm (8 nhóm). Dùng cho đánh giá định hướng."})]})]}),w.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[((d=i.analysis)==null?void 0:d["Điểm mạnh CV"])&&w.jsxs("div",{className:"p-4 bg-green-900/30 border border-green-500/30 rounded-xl",children:[w.jsxs("p",{className:"font-semibold text-green-300 mb-2 flex items-center gap-2 text-base",children:[w.jsx("i",{className:"fa-solid fa-wand-magic-sparkles"}),"Điểm mạnh CV"]}),w.jsx("ul",{className:"list-disc list-inside text-sm text-green-400/90 space-y-1.5 pl-2",children:i.analysis["Điểm mạnh CV"].map((b,g)=>w.jsx("li",{children:b},g))})]}),((h=i.analysis)==null?void 0:h["Điểm yếu CV"])&&w.jsxs("div",{className:"p-4 bg-red-900/30 border border-red-500/30 rounded-xl",children:[w.jsxs("p",{className:"font-semibold text-red-300 mb-2 flex items-center gap-2 text-base",children:[w.jsx("i",{className:"fa-solid fa-flag"}),"Điểm yếu CV"]}),w.jsx("ul",{className:"list-disc list-inside text-sm text-red-400/90 space-y-1.5 pl-2",children:i.analysis["Điểm yếu CV"].map((b,g)=>w.jsx("li",{children:b},g))})]})]}),((f=i.analysis)==null?void 0:f.educationValidation)&&w.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/80 rounded-xl p-4",children:[w.jsxs("h4",{className:"text-lg font-bold text-slate-100 mb-4 flex items-center gap-2",children:[w.jsx("i",{className:"fa-solid fa-graduation-cap text-blue-400"}),"Xác thực thông tin học vấn"]}),w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{className:"bg-slate-900/70 p-3 rounded-lg",children:[w.jsxs("div",{className:"flex items-center justify-between mb-2",children:[w.jsx("h5",{className:"text-sm font-semibold text-slate-300",children:"Thông tin học vấn chuẩn hóa"}),w.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${i.analysis.educationValidation.validationNote==="Hợp lệ"?"bg-green-600 text-green-100":"bg-red-600 text-red-100"}`,children:i.analysis.educationValidation.validationNote})]}),w.jsx("p",{className:"text-sm text-slate-400 font-mono bg-slate-800 p-2 rounded",children:i.analysis.educationValidation.standardizedEducation||"Không có thông tin"})]}),i.analysis.educationValidation.warnings&&i.analysis.educationValidation.warnings.length>0&&w.jsxs("div",{className:"bg-yellow-900/30 border border-yellow-500/30 p-3 rounded-lg",children:[w.jsxs("h5",{className:"text-sm font-semibold text-yellow-300 mb-2 flex items-center gap-2",children:[w.jsx("i",{className:"fa-solid fa-triangle-exclamation"}),"Cảnh báo xác thực"]}),w.jsx("ul",{className:"list-disc list-inside text-sm text-yellow-400/90 space-y-1 pl-2",children:i.analysis.educationValidation.warnings.map((b,g)=>w.jsx("li",{children:b},g))})]})]})]}),w.jsx("div",{children:w.jsx("div",{className:"space-y-3",children:r.map(b=>{var g;return w.jsx(oM,{item:b,isExpanded:!!((g=e[i.id])!=null&&g[b["Tiêu chí"]]),onToggle:()=>t(i.id,b["Tiêu chí"]),jdText:n},b["Tiêu chí"])})})})]})},aM=({message:i})=>w.jsxs("div",{className:"flex justify-center items-center flex-col gap-6 text-center py-12 md:py-16",children:[w.jsxs("div",{className:"relative w-20 h-20",children:[w.jsx("div",{className:"absolute inset-0 border-4 border-blue-500/20 rounded-full"}),w.jsx("div",{className:"absolute inset-0 border-t-4 border-blue-500 rounded-full animate-spin"}),w.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:w.jsx("div",{className:"w-6 h-6 bg-blue-500/20 rounded-full pulse-animation"})})]}),w.jsxs("div",{children:[w.jsx("p",{className:"text-slate-300 font-semibold text-lg",children:i||"Đang phân tích CV với AI..."}),w.jsx("p",{className:"text-slate-500 text-sm mt-2",children:"Quá trình này có thể mất một chút thời gian để đảm bảo độ chính xác cao nhất."})]})]});ih.memo(({candidate:i,index:e,isSelected:t,expandedCandidate:n,expandedCriteria:r,onSelect:s,onExpand:o,onToggleCriterion:a})=>{var d,h,f,b,g;const c=i.status==="FAILED"?"FAILED":((d=i.analysis)==null?void 0:d.Hạng)||"C",l=i.status==="FAILED"?0:((h=i.analysis)==null?void 0:h["Tổng điểm"])||0,u=i.status==="FAILED"?0:parseInt(((g=(b=(f=i.analysis)==null?void 0:f["Chi tiết"])==null?void 0:b.find(y=>y["Tiêu chí"].startsWith("Phù hợp JD")))==null?void 0:g.Điểm.split("/")[0])||"0",10);return w.jsxs(ih.Fragment,{children:[w.jsxs("tr",{className:`border-t border-slate-700/50 ${t?"bg-blue-500/10":"hover:bg-slate-700/30"} cursor-pointer`,onClick:y=>{y.target.type!=="checkbox"&&o(i.id)},children:[w.jsx("td",{className:"px-4 py-3",children:w.jsx("input",{type:"checkbox",checked:t,onChange:y=>{y.stopPropagation(),s(i.id,e)},className:"rounded border-slate-600 bg-slate-800 text-blue-500 focus:ring-blue-500"})}),w.jsx("td",{className:"px-4 py-3 text-sm text-slate-200",children:i.candidateName||"Chưa xác định"}),w.jsx("td",{className:"px-4 py-3 text-sm",children:w.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${i.status==="FAILED"?"bg-slate-600 text-slate-400":c==="A"?"bg-emerald-600 text-emerald-400":c==="B"?"bg-blue-600 text-blue-400":"bg-red-600 text-red-400"}`,children:c})}),w.jsx("td",{className:"px-4 py-3 text-sm text-slate-200",children:l}),w.jsxs("td",{className:"px-4 py-3 text-sm text-slate-200",children:[u,"%"]}),w.jsx("td",{className:"px-4 py-3 text-sm text-slate-200",children:i.jobTitle||""}),w.jsx("td",{className:"px-4 py-3 text-sm text-slate-200",children:w.jsxs("div",{className:"text-xs",children:[w.jsx("div",{children:i.phone||"N/A"}),w.jsx("div",{className:"text-slate-400",children:i.email||"N/A"})]})}),w.jsxs("td",{className:"px-4 py-3 text-sm text-slate-200 flex items-center justify-between",children:[w.jsx("span",{children:i.fileName||""}),w.jsx("button",{onClick:y=>{y.stopPropagation(),o(i.id)},className:"text-blue-400 hover:text-blue-300 ml-2",children:w.jsx("i",{className:`fa-solid fa-chevron-down transition-transform duration-300 ${n===i.id?"rotate-180":""}`})})]})]}),n===i.id&&i.status!=="FAILED"&&i.analysis&&w.jsx("tr",{children:w.jsx("td",{colSpan:8,className:"bg-slate-900/40 border-t border-slate-700/50",children:w.jsx(uA,{candidate:i,expandedCriteria:r,onToggleCriterion:a})})})]})});const cM=({isLoading:i,loadingMessage:e,results:t,jobPosition:n,locationRequirement:r,jdText:s})=>{const[o,a]=Be.useState("all"),[c,l]=Be.useState("score"),[u,d]=Be.useState(""),[h,f]=Be.useState(""),[b,g]=Be.useState(!1),[y,v]=Be.useState(new Set),[x,D]=Be.useState(null),[A,T]=Be.useState(null),[E,I]=Be.useState({}),N=Be.useCallback(V3(F=>f(F),300),[]),R=F=>{d(F),N(F)},P=(F,X,$=!1)=>{v(ne=>{var pe;const oe=new Set(ne);if($&&x!==null){const le=Math.min(x,X),ge=Math.max(x,X);for(let ye=le;ye<=ge;ye++){const De=(pe=Y[ye])==null?void 0:pe.id;De&&oe.add(De)}}else oe.has(F)?oe.delete(F):oe.add(F),D(X);return oe})},j=()=>{const F=Y.map(X=>X.id).filter(Boolean);v(X=>X.size===F.length?new Set:new Set(F))},U=F=>{v(X=>{const $=new Set(X);return $.delete(F),$})},B=()=>{window.confirm("Bạn có chắc muốn bỏ chọn tất cả ứng viên?")&&v(new Set)},S=F=>{T(A===F?null:F)},J=(F,X)=>{I($=>{var ne;return{...$,[F]:{...$[F],[X]:!((ne=$[F])!=null&&ne[X])}}})},q=()=>{if(y.size===0)return;const F=Y.filter(le=>y.has(le.id)),ne="\uFEFF"+[["STT","HoTen","Hang","DiemTong","PhuHopJD%","ChucDanh","FileName","CandidateID"],...F.map((le,ge)=>{var ye,De,we,Se,We,C;return[(ge+1).toString(),le.candidateName||"",le.status==="FAILED"?"FAILED":((ye=le.analysis)==null?void 0:ye.Hạng)||"C",le.status==="FAILED"?"0":((we=(De=le.analysis)==null?void 0:De["Tổng điểm"])==null?void 0:we.toString())||"0",le.status==="FAILED"?"0":parseInt(((C=(We=(Se=le.analysis)==null?void 0:Se["Chi tiết"])==null?void 0:We.find(ae=>ae["Tiêu chí"].startsWith("Phù hợp JD")))==null?void 0:C.Điểm.split("/")[0])||"0",10).toString(),le.jobTitle||"",le.fileName||"",le.id||""]})].map(le=>le.map(ge=>`"${ge.replace(/"/g,'""')}"`).join(",")).join(`
`),oe=new Blob([ne],{type:"text/csv;charset=utf-8;"}),pe=document.createElement("a");pe.href=URL.createObjectURL(oe),pe.download=`ung_vien_da_chon_${new Date().toISOString().split("T")[0]}.csv`,pe.click()},O=Be.useMemo(()=>{if(!t||t.length===0)return{total:0,countA:0,countB:0,countC:0};const F=t.filter(oe=>oe.status==="SUCCESS"&&oe.analysis),X=F.filter(oe=>{var pe;return((pe=oe.analysis)==null?void 0:pe.Hạng)==="A"}).length,$=F.filter(oe=>{var pe;return((pe=oe.analysis)==null?void 0:pe.Hạng)==="B"}).length,ne=t.length-X-$;return{total:F.length,countA:X,countB:$,countC:ne}},[t]),K=Be.useMemo(()=>!t||t.length===0?null:{timestamp:Date.now(),job:{position:n,locationRequirement:r||"Không có"},candidates:t.map((F,X)=>({...F,id:F.id||`candidate-${X}-${F.fileName}-${F.candidateName}`.replace(/[^a-zA-Z0-9]/g,"-")}))},[t,n,r]),H=Be.useMemo(()=>{if(!t||t.length===0)return[];const F={A:3,B:2,C:1,FAILED:0},X=t.map($=>{var ne,oe,pe,le;return{...$,jdFitScore:parseInt(((pe=(oe=(ne=$.analysis)==null?void 0:ne["Chi tiết"])==null?void 0:oe.find(ge=>ge["Tiêu chí"].startsWith("Phù hợp JD")))==null?void 0:pe.Điểm.split("/")[0])||"0",10),gradeValue:F[$.status==="FAILED"?"FAILED":((le=$.analysis)==null?void 0:le.Hạng)||"C"]}});return X.sort(($,ne)=>{var le,ge,ye,De;const oe=c==="score"?(((le=ne.analysis)==null?void 0:le["Tổng điểm"])||0)-(((ge=$.analysis)==null?void 0:ge["Tổng điểm"])||0):ne.jdFitScore-$.jdFitScore;if(oe!==0)return oe;const pe=c==="score"?ne.jdFitScore-$.jdFitScore:(((ye=ne.analysis)==null?void 0:ye["Tổng điểm"])||0)-(((De=$.analysis)==null?void 0:De["Tổng điểm"])||0);return pe!==0?pe:ne.gradeValue-$.gradeValue}),X.map(($,ne)=>({...$,rank:ne+1}))},[t,c]),Y=Be.useMemo(()=>{let F=H;return h&&(F=F.filter($=>{var ne,oe;return((ne=$.candidateName)==null?void 0:ne.toLowerCase().includes(h.toLowerCase()))||((oe=$.jobTitle)==null?void 0:oe.toLowerCase().includes(h.toLowerCase()))})),o!=="all"&&(F=F.filter($=>{var ne;return $.status==="FAILED"?o==="C":((ne=$.analysis)==null?void 0:ne.Hạng)===o})),F.filter(($,ne,oe)=>ne===oe.findIndex(pe=>pe.id===$.id))},[H,o,h]);return i?w.jsx("section",{id:"module-analysis",className:"module-pane active w-full",children:w.jsx(aM,{message:e})}):t.length===0?w.jsx("section",{id:"module-analysis",className:"module-pane active w-full",children:w.jsxs("div",{className:"text-center py-16 md:py-20",children:[w.jsxs("div",{className:"relative inline-block mb-6",children:[w.jsx("i",{className:"fa-solid fa-chart-line text-5xl md:text-6xl text-slate-600 float-animation"}),w.jsx("div",{className:"absolute -top-2 -right-2 w-4 h-4 bg-blue-500 rounded-full pulse-animation"})]}),w.jsx("h3",{className:"text-2xl font-bold bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent mb-3",children:"Sẵn Sàng Phân Tích"}),w.jsx("p",{className:"text-slate-400 text-lg max-w-md mx-auto leading-relaxed",children:"Kết quả AI sẽ xuất hiện ở đây sau khi bạn cung cấp mô tả công việc và các tệp CV."})]})}):w.jsxs(w.Fragment,{children:[w.jsx("section",{id:"module-analysis",className:"module-pane active w-full",children:w.jsxs("div",{className:"space-y-6",children:[w.jsx("div",{className:"bg-slate-800/60 border border-slate-700 rounded-xl p-5 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:w.jsxs("div",{className:"flex items-center gap-3 text-sm text-slate-400",children:[w.jsxs("span",{className:"px-3 py-1 rounded-full bg-slate-700/60 border border-slate-600",children:["Tổng CV: ",O.total]}),w.jsxs("span",{className:"px-3 py-1 rounded-full bg-slate-700/60 border border-slate-600",children:["A: ",O.countA]}),w.jsxs("span",{className:"px-3 py-1 rounded-full bg-slate-700/60 border border-slate-600",children:["B: ",O.countB]}),w.jsxs("span",{className:"px-3 py-1 rounded-full bg-slate-700/60 border border-slate-600",children:["C/Lỗi: ",O.countC]})]})}),w.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[w.jsxs("div",{className:"bg-slate-800/50 p-5 rounded-xl border border-slate-700",children:[w.jsx("p",{className:"text-sm text-slate-400",children:"Tổng CV Phân Tích"}),w.jsx("p",{className:"text-3xl font-bold text-white mt-1",children:O.total})]}),w.jsxs("div",{className:"bg-slate-800/50 p-5 rounded-xl border border-slate-700",children:[w.jsx("p",{className:"text-sm text-slate-400",children:"Hạng A"}),w.jsx("p",{className:"text-3xl font-bold text-emerald-400 mt-1",children:O.countA})]}),w.jsxs("div",{className:"bg-slate-800/50 p-5 rounded-xl border border-slate-700",children:[w.jsx("p",{className:"text-sm text-slate-400",children:"Hạng B"}),w.jsx("p",{className:"text-3xl font-bold text-blue-400 mt-1",children:O.countB})]}),w.jsxs("div",{className:"bg-slate-800/50 p-5 rounded-xl border border-slate-700",children:[w.jsx("p",{className:"text-sm text-slate-400",children:"Hạng C/Lỗi"}),w.jsx("p",{className:"text-3xl font-bold text-red-400 mt-1",children:O.countC})]})]}),w.jsx("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-700",children:w.jsxs("div",{className:"flex flex-col sm:flex-row flex-wrap items-center justify-between gap-4",children:[w.jsxs("div",{className:"relative w-full sm:w-auto flex-grow sm:flex-grow-0",children:[w.jsx("i",{className:"fa-solid fa-magnifying-glass text-slate-500 absolute left-4 top-1/2 -translate-y-1/2"}),w.jsx("input",{type:"text",placeholder:"Tìm theo tên, chức danh...",value:u,onChange:F=>R(F.target.value),className:"w-full sm:w-64 pl-11 pr-4 py-2.5 bg-slate-900/70 border border-slate-600 rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/50"})]}),w.jsxs("div",{className:"flex items-center gap-2 bg-slate-900/50 p-1 rounded-full",children:[w.jsx("button",{onClick:()=>a("all"),className:`px-4 py-1.5 text-sm font-semibold rounded-full transition-colors ${o==="all"?"bg-blue-600 text-white":"text-slate-300 hover:bg-slate-700"}`,children:"Tất cả"}),w.jsx("button",{onClick:()=>a("A"),className:`px-4 py-1.5 text-sm font-semibold rounded-full transition-colors ${o==="A"?"bg-emerald-500 text-white":"text-slate-300 hover:bg-slate-700"}`,children:"Hạng A"}),w.jsx("button",{onClick:()=>a("B"),className:`px-4 py-1.5 text-sm font-semibold rounded-full transition-colors ${o==="B"?"bg-blue-500 text-white":"text-slate-300 hover:bg-slate-700"}`,children:"Hạng B"}),w.jsx("button",{onClick:()=>a("C"),className:`px-4 py-1.5 text-sm font-semibold rounded-full transition-colors ${o==="C"?"bg-red-500 text-white":"text-slate-300 hover:bg-slate-700"}`,children:"Hạng C"})]}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("label",{htmlFor:"sort-by",className:"text-sm font-medium text-slate-400",children:"Sắp xếp:"}),w.jsxs("select",{id:"sort-by",value:c,onChange:F=>l(F.target.value),className:"bg-slate-700/80 border-slate-600 text-slate-200 text-sm font-semibold rounded-full py-2 pl-4 pr-8 focus:ring-2 focus:ring-blue-500 focus:outline-none appearance-none",children:[w.jsx("option",{value:"score",children:"Điểm Tổng"}),w.jsx("option",{value:"jdFit",children:"Phù hợp JD"})]})]})]})}),w.jsx("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700 overflow-hidden",children:w.jsx("div",{className:"max-h-[70vh] overflow-y-auto results-container",children:w.jsxs("table",{className:"w-full",children:[w.jsx("thead",{className:"bg-slate-700/50 sticky top-0 z-10",children:w.jsxs("tr",{children:[w.jsx("th",{className:"px-4 py-3 text-left",children:w.jsx("input",{type:"checkbox",checked:y.size===Y.length&&Y.length>0,onChange:j,className:"rounded border-slate-600 bg-slate-800 text-blue-500 focus:ring-blue-500"})}),w.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-slate-300",children:"Họ tên"}),w.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-slate-300",children:"Hạng"}),w.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-slate-300",children:"Điểm"}),w.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-slate-300",children:"Phù hợp JD"}),w.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-slate-300",children:"Liên hệ"}),w.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-slate-300",children:"File"})]})}),w.jsxs("tbody",{children:[Y.map((F,X)=>{var le,ge,ye,De,we;const $=y.has(F.id),ne=F.status==="FAILED"?"FAILED":((le=F.analysis)==null?void 0:le.Hạng)||"C",oe=F.status==="FAILED"?0:((ge=F.analysis)==null?void 0:ge["Tổng điểm"])||0,pe=F.status==="FAILED"?0:parseInt(((we=(De=(ye=F.analysis)==null?void 0:ye["Chi tiết"])==null?void 0:De.find(Se=>Se["Tiêu chí"].startsWith("Phù hợp JD")))==null?void 0:we.Điểm.split("/")[0])||"0",10);return w.jsxs(ih.Fragment,{children:[w.jsxs("tr",{className:`border-t border-slate-700/50 ${$?"bg-blue-500/10":"hover:bg-slate-700/30"} cursor-pointer transition-colors duration-150`,onClick:Se=>{Se.target.type!=="checkbox"&&S(F.id)},children:[w.jsx("td",{className:"px-4 py-3",children:w.jsx("input",{type:"checkbox",checked:$,onChange:Se=>{Se.stopPropagation(),P(F.id,X)},className:"rounded border-slate-600 bg-slate-800 text-blue-500 focus:ring-blue-500"})}),w.jsx("td",{className:"px-4 py-3 text-sm text-slate-200",children:F.candidateName||"Chưa xác định"}),w.jsx("td",{className:"px-4 py-3 text-sm",children:w.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${F.status==="FAILED"?"bg-slate-600 text-slate-400":ne==="A"?"bg-emerald-600 text-emerald-400":ne==="B"?"bg-blue-600 text-blue-400":"bg-red-600 text-red-400"}`,children:ne})}),w.jsx("td",{className:"px-4 py-3 text-sm text-slate-200",children:oe}),w.jsxs("td",{className:"px-4 py-3 text-sm text-slate-200",children:[pe,"%"]}),w.jsx("td",{className:"px-4 py-3 text-sm text-slate-200",children:w.jsxs("div",{className:"text-xs",children:[w.jsx("div",{children:F.phone||"N/A"}),w.jsx("div",{className:"text-slate-400",children:F.email||"N/A"})]})}),w.jsxs("td",{className:"px-4 py-3 text-sm text-slate-200 flex items-center justify-between",children:[w.jsx("span",{children:F.fileName||""}),w.jsx("button",{onClick:Se=>{Se.stopPropagation(),S(F.id)},className:"text-blue-400 hover:text-blue-300 ml-2 transition-colors duration-150",children:w.jsx("i",{className:`fa-solid fa-chevron-down transition-transform duration-300 ${A===F.id?"rotate-180":""}`})})]})]}),A===F.id&&F.status!=="FAILED"&&F.analysis&&w.jsx("tr",{className:"expanded-content",children:w.jsx("td",{colSpan:7,className:"bg-slate-900/40 border-t border-slate-700/50",children:w.jsx(uA,{candidate:F,expandedCriteria:E,onToggleCriterion:J,jdText:s})})})]},F.id)}),Y.length===0&&w.jsx("tr",{children:w.jsxs("td",{colSpan:8,className:"px-4 py-12 text-center text-slate-500",children:[w.jsx("i",{className:"fa-solid fa-ghost text-4xl mb-4"}),w.jsx("p",{children:"Không có ứng viên nào khớp với bộ lọc của bạn."})]})})]})]})})}),y.size>0&&w.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-700",children:[w.jsxs("div",{className:"flex items-center justify-between mb-4",children:[w.jsxs("h3",{className:"text-lg font-semibold text-slate-200",children:["Ứng viên đã chọn (",y.size,")"]}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsxs("button",{onClick:q,className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-500 text-white text-sm font-semibold rounded-full transition-colors",children:[w.jsx("i",{className:"fa-solid fa-file-csv"}),"Xuất CSV đã chọn"]}),w.jsxs("button",{onClick:B,className:"flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-500 text-white text-sm font-semibold rounded-full transition-colors",children:[w.jsx("i",{className:"fa-solid fa-trash"}),"Xoá tất cả"]})]})]}),w.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:Y.filter(F=>y.has(F.id)).map(F=>{var oe,pe,le,ge,ye;const X=F.status==="FAILED"?"FAILED":((oe=F.analysis)==null?void 0:oe.Hạng)||"C",$=F.status==="FAILED"?0:((pe=F.analysis)==null?void 0:pe["Tổng điểm"])||0,ne=F.status==="FAILED"?0:parseInt(((ye=(ge=(le=F.analysis)==null?void 0:le["Chi tiết"])==null?void 0:ge.find(De=>De["Tiêu chí"].startsWith("Phù hợp JD")))==null?void 0:ye.Điểm.split("/")[0])||"0",10);return w.jsxs("div",{className:"flex items-center justify-between bg-slate-700/50 p-3 rounded-lg",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("span",{className:"text-sm text-slate-400",children:F.candidateName||"Chưa xác định"}),w.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${F.status==="FAILED"?"bg-slate-600 text-slate-400":X==="A"?"bg-emerald-600 text-emerald-400":X==="B"?"bg-blue-600 text-blue-400":"bg-red-600 text-red-400"}`,children:X}),w.jsxs("span",{className:"text-sm text-slate-400",children:[$," / ",ne,"%"]}),w.jsx("span",{className:"text-sm text-slate-500",children:F.jobTitle||""})]}),w.jsx("button",{onClick:()=>U(F.id),className:"text-red-400 hover:text-red-300 text-sm underline",children:"Bỏ chọn"})]},F.id)})})]})]})}),K&&w.jsx("button",{onClick:()=>g(!b),className:"fixed bottom-6 right-6 w-14 h-14 bg-sky-600 hover:bg-sky-500 text-white rounded-full shadow-lg flex items-center justify-center transition-all duration-200 z-50","aria-label":"Mở chatbot",children:w.jsx("i",{className:"fa-solid fa-brain text-xl"})}),b&&K&&w.jsx("div",{className:"fixed bottom-20 right-6 w-96 max-w-[calc(100vw-2rem)] z-40",children:w.jsx(G3,{analysisData:K,onClose:()=>g(!1)})})]})},dM=i=>{const{activeStep:e}=i;return w.jsxs(w.Fragment,{children:[w.jsx("div",{className:e==="jd"?"block":"hidden",children:w.jsx(M3,{jdText:i.jdText,setJdText:i.setJdText,jobPosition:i.jobPosition,setJobPosition:i.setJobPosition,onComplete:()=>{i.markStepAsCompleted("jd"),i.setActiveStep("weights")}})}),w.jsx("div",{className:e==="weights"?"block":"hidden",children:w.jsx(O3,{weights:i.weights,setWeights:i.setWeights,hardFilters:i.hardFilters,setHardFilters:i.setHardFilters,onComplete:()=>{i.markStepAsCompleted("weights"),i.setActiveStep("upload")}})}),w.jsx("div",{className:e==="upload"?"block":"hidden",children:w.jsx(W3,{cvFiles:i.cvFiles,setCvFiles:i.setCvFiles,jdText:i.jdText,weights:i.weights,hardFilters:i.hardFilters,setAnalysisResults:i.setAnalysisResults,setIsLoading:i.setIsLoading,setLoadingMessage:i.setLoadingMessage,onAnalysisStart:()=>{i.markStepAsCompleted("upload"),i.setActiveStep("analysis")},completedSteps:i.completedSteps})}),w.jsx("div",{className:e==="analysis"?"block":"hidden",children:w.jsx(cM,{isLoading:i.isLoading,loadingMessage:i.loadingMessage,results:i.analysisResults,jobPosition:i.jobPosition,locationRequirement:i.hardFilters.location,jdText:i.jdText})})]})};export{dM as default};
